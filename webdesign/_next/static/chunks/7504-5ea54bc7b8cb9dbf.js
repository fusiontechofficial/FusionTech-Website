"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7504],{33850:function(e,t,n){n.d(t,{M6:function(){return m},TH:function(){return f},Wb:function(){return u},h4:function(){return p},lF:function(){return c}});var r=n(50029),i=n(64687),o=n.n(i),a=n(95419),s=n(8667),l=n(5095);function c(e){return"9767da2c1d954f229741a4128e6a324f"===e||"b2e41a32611c4a578a161ac40d10e85c"===e||"7eafef1b60874392a5f9b4e4182132bb"===e||"80e8099798ce4164950ba9d0bce79004"===e||"e038eb963f8344a9bdd1cc3e9646b96a"===e||"371f94853280407c9e9c6f3236d5fdf9"===e}function u(){(0,s.q)("[AppPush]: Registering for push notifications");var e=window&&window.enablePushNotifications;e?e():(0,s.q)("[AppPush]: Function 'enablePushNotifications' not found.")}function d(e){var t=window&&window.updateAppIconBadgeCount;t?t(e):(0,s.q)("[AppPush]: Function 'updateAppIconBadgeCount' not found.")}function p(e){var t,n=null===(t=window)||void 0===t?void 0:t.enableAppDarkMode;n?n(e):(0,s.q)("[AppPush]: Function 'enableAppDarkMode' not found.")}function f(e){d((e.unread||0)+(e.unread_chat||0))}function m(e,t){(0,s.q)("[AppPush] Updating app callbacks for path: "+e.pathname),t||d(0),void 0===window.updatePushNotificationsDeviceTokenForUser&&(window.updatePushNotificationsDeviceTokenForUser=function(e){(0,r.Z)(o().mark(function t(){var n,r,i;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.Z.registerAppPushToken(e);case 2:r=(n=t.sent).code,i=n.error,(0,s.q)("[AppPush] Update device token: "+e.token+", status: "+(null!=r?r:i&&i.status));case 6:case"end":return t.stop()}},t)}))()}),void 0===window.removePushNotificationsDeviceTokenForUser&&(window.removePushNotificationsDeviceTokenForUser=function(e,t){(0,r.Z)(o().mark(function n(){var r,i,l;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.Z.unregisterAppPushToken(e,t);case 2:i=(r=n.sent).code,l=r.error,(0,s.q)("[AppPush] Remove device token: "+e+", status: "+(null!=i?i:l&&l.status));case 6:case"end":return n.stop()}},n)}))()}),void 0===window.didSelectInAppPushNotification&&(window.didSelectInAppPushNotification=function(e){try{var t=JSON.parse(e),n=t.msg_id,i=t.channel;n&&(0,r.Z)(o().mark(function e(){var t,r,i;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.markMessageAsRead({messageID:n});case 2:r=(t=e.sent).code,i=t.error,(0,s.q)("[AppPush] Mark message read: "+n+", status: "+(null!=r?r:i&&i.status));case 6:case"end":return e.stop()}},e)}))(),i&&(0,r.Z)(o().mark(function e(){var t,n,r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.markChatMessageRead({channelId:i});case 2:n=(t=e.sent).code,r=t.error,(0,s.q)("[AppPush] Mark chat message read: "+i+", status: "+(null!=n?n:r&&r.status));case 6:case"end":return e.stop()}},e)}))()}catch(e){}}),window.shouldShowInAppPushNotification=function(t){try{var n=JSON.parse(t);if((0,l.n3)(e)&&"chat"==n.type){var r=(0,l.bR)(e.query),i=n.channel;if("debug_wildcard"===i||i===r)return(0,s.q)("[AppPush] Blocking chat notification from channel: "+i),!1}if("debug_force_false"==n.type)return(0,s.q)("[AppPush] Blocking notification with debug payload: "+t),!1}catch(e){}return(0,s.q)("[AppPush] Allowing notification with payload: "+t),!0}}},33894:function(e,t,n){n.d(t,{O:function(){return o}});var r=n(75331),i=n(12967),o=function(){if((0,i.i7)()&&!(0,r.tv)({key:r.H0.chatAlert}).value){var e=new Audio("https://assets.skool.com/skool/8d0e1e625d824564bcb318a5c4cc71be.mp3");(0,r.co)({key:r.H0.chatAlert,value:!0,expireInMSec:5e3}),e.play()}}},99802:function(e,t,n){n.d(t,{O5:function(){return i},jY:function(){return r}});var r={AED:{name:"United Arab Emirates Dirham",symbol:"د.إ",multiplier:100,max:366800,min:400,isRight:!0},AUD:{name:"Australian Dollar",symbol:"A$",multiplier:100,max:15e4,min:200},BGN:{name:"Bulgarian Lev",symbol:"лв",multiplier:100,max:9999999,isRight:!0,min:100},BRL:{name:"Brazilian Real",symbol:"R$",multiplier:100,max:493e3,min:500},CAD:{name:"Canadian Dollar",symbol:"CAD $",multiplier:100,max:134500,min:200},CHF:{name:"Swiss Franc",symbol:"₣",multiplier:100,max:89500,min:100},CZK:{name:"Czech Republic Koruna",symbol:"Kč",multiplier:100,max:2175400,min:2200},DKK:{name:"Danish Krone",symbol:"kr",multiplier:100,max:684400,isRight:!0,min:700},EUR:{name:"Euro",symbol:"€",multiplier:100,max:91900,min:100},GBP:{name:"British Pound Sterling",symbol:"\xa3",multiplier:100,max:8e4,min:100},HKD:{name:"Hong Kong Dollar",symbol:"HK $",multiplier:100,max:782900,min:800},HUF:{name:"Hungarian Forint",symbol:"Ft",multiplier:100,max:33904300,isRight:!0,min:34e3},INR:{name:"Indian Rupee",symbol:"₹",multiplier:100,max:8219900,min:8300},JPY:{name:"Japanese Yen",symbol:"\xa5",multiplier:1,max:136178,min:200},MXN:{name:"Mexican Peso",symbol:"$",multiplier:100,max:1743800,min:1800},MYR:{name:"Malaysian Ringgit",symbol:"RM",multiplier:100,max:449200,min:500},NOK:{name:"Norwegian Krone",symbol:"kr",multiplier:100,max:1070400,min:1100},NZD:{name:"New Zealand Dollar",symbol:"NZ$",multiplier:100,max:160400,min:200},PLN:{name:"Polish Zloty",symbol:"zł",multiplier:100,max:412600,isRight:!0,min:500},RON:{name:"Romanian Leu",symbol:"L",multiplier:100,max:454900,min:500},SEK:{name:"Swedish Krona",symbol:"kr",multiplier:100,max:1039e3,isRight:!0,min:1100},SGD:{name:"Singapore Dollar",symbol:"SGD$",multiplier:100,max:133800,min:200},USD:{name:"United States Dollar",symbol:"$",multiplier:100,max:99900,min:100}},i=function(e){var t=e.amount,n=e.currency,i=e.showZeroes,o=r[n.toUpperCase()],a=o.symbol,s=o.isRight,l=(t/o.multiplier).toLocaleString("en-US",i?{maximumFractionDigits:2,minimumFractionDigits:2}:void 0);return"".concat(s?"":a).concat(l).concat(s?a:"")}},63210:function(e,t,n){var r=n(67294);t.Z=function(e,t){var n=(0,r.useState)(e),i=n[0],o=n[1];return(0,r.useEffect)(function(){var n=setTimeout(function(){o(e)},t);return function(){clearTimeout(n)}},[e,t]),i}},500:function(e,t,n){n.d(t,{V:function(){return a}});var r=n(67294),i=[];function o(e){for(var t=-1,n=0;n<i.length;n+=1)if(i[n]===e){t=n;break}return -1===t&&(t=i.length,i.push(e)),t}var a=function(){return[!1]},s=[0];document.body.addEventListener("dragenter",function(){s[0]+=1,document.body.dispatchEvent(new Event("dragAndDropFile"))}),document.body.addEventListener("dragleave",function(){s[0]-=1,document.body.dispatchEvent(new Event("dragAndDropFile"))}),document.body.addEventListener("drop",function(){s[0]=0,document.body.dispatchEvent(new Event("dragAndDropFile"))}),a=function(e){var t=(0,r.useState)(s[0]>0),n=t[0],a=t[1];(0,r.useEffect)(function(){var t=function(){a(s[0]>0)};return document.body.addEventListener("dragAndDropFile",t),function(){var n=o(e);i.splice(n,1),document.body.removeEventListener("dragAndDropFile",t)}},[e]);var l=o(e);return[n&&l===i.length-1]}},64727:function(e,t,n){n.d(t,{DE:function(){return m},F5:function(){return v},FA:function(){return C},PN:function(){return y},QT:function(){return k},Yw:function(){return w},ZP:function(){return f},cT:function(){return g}});var r=n(17674),i=n(90116),o=n(50029),a=n(64687),s=n.n(a),l=n(95364),c=n.n(l),u=n(95419),d=n(30899),p=["image/heic","image/heif"],f=function(e){return p.includes(e)},m={PDF:"pdf",Download:"download",GoogleDrive:"google-drive",Image:"image",Audio:"audio"},h=[{name:"PDF",ext:[".pdf"],mime:["application/pdf"],iconName:"pdf",preview:m.PDF,mobilePreview:m.Download},{name:"CSV",ext:[".csv"],mime:["text/csv"],iconName:"excel",preview:m.Download,mobilePreview:m.Download},{name:"Excel",ext:[".xls",".xlsx",".xlsb",".xlsm",".xltx"],mime:["application/vnd.ms-excel"],iconName:"excel",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Text",ext:[".txt",".rtf"],mime:["text/plain","application/rtf"],iconName:"text",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Word",ext:[".doc",".docx",".dotx"],mime:["application/msword"],iconName:"text",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Keynote",ext:[".key"],mime:[],iconName:"ppt",preview:m.Download,mobilePreview:m.Download},{name:"Powerpoint",ext:[".ppt",".pptx"],mime:["application/vnd.ms-powerpoint"],iconName:"ppt",preview:m.GoogleDrive,mobilePreview:m.Download},{name:"Audio",ext:[],mime:["audio/"],iconName:"audio",preview:m.Download,mobilePreview:m.Download},{name:".HEIC Image",ext:[".heic",".heif"],mime:["image/heic","image/heif"],iconName:"generic",preview:m.Download,mobilePreview:m.Download},{name:"Image",ext:[],mime:["image/"],iconName:"generic",preview:m.Image,mobilePreview:m.Image}];function v(e){var t=e.ext,n=e.contentType;return h.find(function(e){return e.ext.includes(t)||!!e.mime.find(function(e){return n.startsWith(e)})})}function b(){return(b=(0,o.Z)(s().mark(function e(t){var n,r,i,o;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.readFiles({fileIDs:[t]});case 2:return i=(r=e.sent).data,o=r.error,e.abrupt("return",[null!=i&&null!==(n=i.files)&&void 0!==n&&n.length?i.files[0]:void 0,o]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)(s().mark(function e(t){var n,i,o,a,l,c,p,f,m,h,v,g;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileID,i=t.writeUrl,o=t.acl,a=t.contentType,l=t.data,c=t.waitToken,p=t.userID,m=void 0===(f=t.timeout)?6e4:f,e.next=3,u.Z.uploadS3({url:i,contentType:a,acl:o,body:l});case 3:if(!(h=e.sent.error)){e.next=10;break}throw console.error("Error uploading file",h),{error:h,fileID:n};case 10:if(!c){e.next=19;break}return e.prev=11,e.next=14,(0,d.Cx)({token:c,userID:p,timeoutMS:m});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(11),{error:e.t0,fileID:n};case 19:return e.next=21,function(e){return b.apply(this,arguments)}(n);case 21:return v=e.sent,g=(0,r.Z)(v,1)[0],e.abrupt("return",g);case 25:case"end":return e.stop()}},e,null,[[11,16]])}))).apply(this,arguments)}function y(){return 10}function w(){return"*"}function C(e){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)(s().mark(function e(t){var n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.downloadURL,r=t.fileName,e.abrupt("return",new(c())({url:n,filename:r,headers:[{name:"cache-control",value:"no-cache"}]}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(e){var t,n=e.e,r=e.accept;if(null!=n&&null!==(t=n.clipboardData)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length){if(!r||"*"===r)return n.clipboardData.files;var o=(0,i.Z)(n.clipboardData.files).filter(function(e){return r.includes(e.type)});if(o.length)return o}return null}},42668:function(e,t,n){n.d(t,{Bi:function(){return s},GN:function(){return l},Rj:function(){return u},YY:function(){return c},_c:function(){return a},s4:function(){return o}});var r=n(49303),i=n.n(r);function o(e){var t=e.file,n=e.minWidth,r=e.minHeight,o=e.maxWidth,a=e.maxHeight;return new Promise(function(e,s){i()(t,function(t,n){if("error"===t.type){e([null,null,t]);return}var r=(null==n?void 0:n.exif)||{};e([t,!!r["274"]&&1!==r["274"]])},{canvas:!0,orientation:!0,meta:!0,minWidth:n,minHeight:r,maxWidth:o,maxHeight:a})||s(Error("images: loadImageFile failed"))})}function a(e){var t=e.canvas,n=e.contentType,r=e.quality;return new Promise(function(e){t.toBlob(function(t){e(t)},n,r)})}function s(e){var t=e.src;return new Promise(function(e,n){var r=new Image;r.addEventListener("load",function(){return e(r)}),r.addEventListener("error",function(e){return n(e)}),r.setAttribute("crossOrigin","anonymous"),r.src=t})}function l(e){return new Promise(function(t,n){var r={},i=new FileReader;i.onload=function(){var e=new Image;e.src=i.result,e.onload=function(){r.width=e.width,r.height=e.height,t(r)},e.onerror=n},i.onerror=n,i.readAsDataURL(e)})}function c(e,t,n,r){var i=Math.min(n/e,r/t);return{width:e*i,height:t*i}}var u={profilePictureMinWidth:400,profilePictureMinHeight:400,profilePictureMaxSaveSize:400,attachmentImageMinWidth:200,attachmentImageMinHeight:200,attachmentFileMaxSizeMB:100,attachmentFileMaxSize:104857600,attachmentImageFileMaxSizeMB:20,attachmentImageFileMaxSize:20971520,iconWidth:128,iconHeight:128,coverWidth:1084,coverHeight:576,courseCoverWidth:1460,courseCoverHeight:752,eventCoverWidth:1460,eventCoverHeight:752}},5565:function(e,t,n){function r(e){var t=e.amount,n=e.currency,r=e.decimal,i=e.locale;return t=t||0,n=(n||"").toUpperCase(),r=r||0,i=i||"en-US",new Intl.NumberFormat(i,{compactDisplay:"short",currency:n,currencyDisplay:"symbol",maximumFractionDigits:r,minimumFractionDigits:r,signDisplay:"auto",style:"currency"}).format(t)}n.d(t,{g:function(){return i},v:function(){return r}});var i={visa:{logo:"https://assets.skool.com/skool/0a37a76226194714ac3c1a6f4a90cbb1.svg"},mastercard:{logo:"https://assets.skool.com/skool/f5078d5a76264cf395b0201e6fe9911a.svg"},amex:{logo:"https://assets.skool.com/skool/4a3007896c314edd856558aeb457ded3.svg"},discover:{logo:"https://assets.skool.com/skool/2fe44c67799c4084b07b9fe7211865a1.svg"},diners:{logo:"https://assets.skool.com/skool/520fd9dfcca347278cf90e7b02dad629.svg"},unionpay:{logo:"https://assets.skool.com/skool/f1bc464ec1a7419f925ce38376f67008.svg"},jcb:{logo:"https://assets.skool.com/skool/420d978c05e84a32a9efd3247c542204.svg"}}},50591:function(e,t,n){n.d(t,{Cq:function(){return d},IG:function(){return h},LS:function(){return u},Ld:function(){return v},Rq:function(){return b},U5:function(){return c},WK:function(){return m},aN:function(){return s},b5:function(){return p},jT:function(){return a},jy:function(){return l},lF:function(){return i},lf:function(){return o},p2:function(){return f},v4:function(){return g}});var r=n(95419);function i(e,t){return"pup:".concat(e,":").concat(t)}function o(e,t){return"tup:".concat(e,":").concat(t)}function a(e){return"gnp:".concat(e)}function s(e){return"gps:".concat(e)}function l(e){return"ccm:".concat(e)}function c(e){return"cty:".concat(e)}function u(e){return"cmu:".concat(e)}function d(e){return"uss:".concat(e)}function p(e){return"usp:".concat(e)}function f(e){return"cun:".concat(e)}function m(e){return"nbc:".concat(e)}function h(e){return"ncp:".concat(e)}function v(e,t){var n=r.Z.subscribe({topics:e,fn:t});return function(){r.Z.unsubscribe({topics:e,id:n})}}function b(){return r.Z.suspendPubSub()}function g(){return r.Z.resumePubSub()}},77902:function(e,t){t.Z=function(e){var t=e.Router,n=e.ctx,r=e.url,i=e.as,o=e.status;if(null!=n&&n.res){n.res.writeHead(void 0===o?302:o,{Location:i||r,"Content-Type":"text/html; charset-utf-8"}),n.res.end();return}t.replace(r,i)}},20142:function(e,t,n){n.d(t,{n:function(){return r}});var r=[{key:"linkWebsite",label:"Website",regex:/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?)/,icon:"Link"},{key:"linkInstagram",label:"Instagram",regex:/(?:(?:http|https):\/\/)?(?:www.)?(?:instagram.com|instagr.am|instagr.com)\/(\w+)/,icon:"Instagram"},{key:"linkTwitter",label:"X",regex:/(?:http:\/\/)?(?:www\.)?(twitter\.com|x\.com)\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w-]*\/)*([\w-]*)/,icon:"X"},{key:"linkYoutube",label:"YouTube",regex:/(youtu.*be.*)\/(watch\?v=|embed\/|v|shorts|)(.*?((?=[&#?])|$))/,icon:"Youtube"},{key:"linkLinkedin",label:"LinkedIn",regex:/http(s)?:\/\/([\w]+\.)?linkedin\.com\/in\/[A-z0-9_-]+\/?/,icon:"Linkedin"},{key:"linkFacebook",label:"Facebook",regex:/(?:https?:\/\/)?(?:www\.)?facebook\.com\/(?:(?:\w)*#!\/)?(?:pages\/)?(?:[\w-]*\/)*?(\/)?([\w\-.]{5,})/,icon:"Facebook"}]},51577:function(e,t,n){n.d(t,{$K:function(){return a},Hs:function(){return i},J$:function(){return r},zD:function(){return o}});var r=[{value:"",text:"Select a Country"},{value:"AL",text:"Albania"},{value:"DZ",text:"Algeria"},{value:"AO",text:"Angola"},{value:"AG",text:"Antigua & Barbuda"},{value:"AR",text:"Argentina"},{value:"AU",text:"Australia"},{value:"AT",text:"Austria"},{value:"AZ",text:"Azerbaijan"},{value:"BS",text:"Bahamas"},{value:"BH",text:"Bahrain"},{value:"BD",text:"Bangladesh"},{value:"BE",text:"Belgium"},{value:"BJ",text:"Benin"},{value:"BT",text:"Bhutan"},{value:"BO",text:"Bolivia"},{value:"BA",text:"Bosnia & Herzegovina"},{value:"BW",text:"Botswana"},{value:"BN",text:"Brunei"},{value:"BG",text:"Bulgaria"},{value:"KH",text:"Cambodia"},{value:"CA",text:"Canada"},{value:"CL",text:"Chile"},{value:"CO",text:"Colombia"},{value:"CR",text:"Costa Rica"},{value:"HR",text:"Croatia"},{value:"CY",text:"Cyprus"},{value:"CZ",text:"Czech Republic"},{value:"CI",text:"Ivory Coast"},{value:"DK",text:"Denmark"},{value:"DO",text:"Dominican Republic"},{value:"EC",text:"Ecuador"},{value:"EG",text:"Egypt"},{value:"SV",text:"El Salvador"},{value:"EE",text:"Estonia"},{value:"ET",text:"Ethiopia"},{value:"FI",text:"Finland"},{value:"FR",text:"France"},{value:"GA",text:"Gabon"},{value:"GM",text:"Gambia"},{value:"DE",text:"Germany"},{value:"GH",text:"Ghana"},{value:"GR",text:"Greece"},{value:"GT",text:"Guatemala"},{value:"GY",text:"Guyana"},{value:"HK",text:"Hong Kong"},{value:"HU",text:"Hungary"},{value:"IS",text:"Iceland"},{value:"IN",text:"India"},{value:"ID",text:"Indonesia"},{value:"IE",text:"Ireland"},{value:"IL",text:"Israel"},{value:"IT",text:"Italy"},{value:"JM",text:"Jamaica"},{value:"JP",text:"Japan"},{value:"JO",text:"Jordan"},{value:"KE",text:"Kenya"},{value:"KW",text:"Kuwait"},{value:"LA",text:"Laos"},{value:"LV",text:"Latvia"},{value:"LI",text:"Liechtenstein"},{value:"LT",text:"Lithuania"},{value:"LU",text:"Luxembourg"},{value:"MO",text:"Macau"},{value:"MG",text:"Madagascar"},{value:"MY",text:"Malaysia"},{value:"MT",text:"Malta"},{value:"MU",text:"Mauritius"},{value:"MX",text:"Mexico"},{value:"MD",text:"Moldova"},{value:"MC",text:"Monaco"},{value:"MN",text:"Mongolia"},{value:"MA",text:"Morocco"},{value:"MZ",text:"Mozambique"},{value:"NA",text:"Namibia"},{value:"NL",text:"Netherlands"},{value:"NZ",text:"New Zealand"},{value:"NE",text:"Niger"},{value:"NG",text:"Nigeria"},{value:"MK",text:"North Macedonia"},{value:"NO",text:"Norway"},{value:"OM",text:"Oman"},{value:"PA",text:"Panama"},{value:"PY",text:"Paraguay"},{value:"PE",text:"Peru"},{value:"PH",text:"Philippines"},{value:"PL",text:"Poland"},{value:"PT",text:"Portugal"},{value:"QA",text:"Qatar"},{value:"RO",text:"Romania"},{value:"RW",text:"Rwanda"},{value:"SM",text:"San Marino"},{value:"SA",text:"Saudi Arabia"},{value:"SN",text:"Senegal"},{value:"RS",text:"Serbia"},{value:"SG",text:"Singapore"},{value:"SK",text:"Slovakia"},{value:"SI",text:"Slovenia"},{value:"ZA",text:"South Africa"},{value:"KR",text:"South Korea"},{value:"ES",text:"Spain"},{value:"LK",text:"Sri Lanka"},{value:"LC",text:"St. Lucia"},{value:"SE",text:"Sweden"},{value:"CH",text:"Switzerland"},{value:"TW",text:"Taiwan"},{value:"TZ",text:"Tanzania"},{value:"TH",text:"Thailand"},{value:"TT",text:"Trinidad & Tobago"},{value:"TN",text:"Tunisia"},{value:"TR",text:"Turkey"},{value:"AE",text:"United Arab Emirates"},{value:"GB",text:"United Kingdom"},{value:"US",text:"United States"},{value:"UY",text:"Uruguay"},{value:"UZ",text:"Uzbekistan"},{value:"VN",text:"Vietnam"}],i=[{value:"",text:"Select a Country"},{value:"AL",text:"Albania"},{value:"DZ",text:"Algeria"},{value:"AO",text:"Angola"},{value:"AG",text:"Antigua & Barbuda"},{value:"AR",text:"Argentina"},{value:"AM",text:"Armenia"},{value:"AU",text:"Australia"},{value:"AT",text:"Austria"},{value:"AZ",text:"Azerbaijan"},{value:"BS",text:"Bahamas"},{value:"BH",text:"Bahrain"},{value:"BD",text:"Bangladesh"},{value:"BE",text:"Belgium"},{value:"BJ",text:"Benin"},{value:"BT",text:"Bhutan"},{value:"BO",text:"Bolivia"},{value:"BA",text:"Bosnia & Herzegovina"},{value:"BW",text:"Botswana"},{value:"BR",text:"Brazil"},{value:"BN",text:"Brunei"},{value:"BG",text:"Bulgaria"},{value:"KH",text:"Cambodia"},{value:"CA",text:"Canada"},{value:"CI",text:"C\xf4te d'Ivoire"},{value:"CL",text:"Chile"},{value:"CO",text:"Colombia"},{value:"CR",text:"Costa Rica"},{value:"HR",text:"Croatia"},{value:"CY",text:"Cyprus"},{value:"CZ",text:"Czech Republic"},{value:"DK",text:"Denmark"},{value:"DO",text:"Dominican Republic"},{value:"EC",text:"Ecuador"},{value:"EG",text:"Egypt"},{value:"SV",text:"El Salvador"},{value:"EE",text:"Estonia"},{value:"ET",text:"Ethiopia"},{value:"FI",text:"Finland"},{value:"FR",text:"France"},{value:"GA",text:"Gabon"},{value:"GM",text:"Gambia"},{value:"DE",text:"Germany"},{value:"GH",text:"Ghana"},{value:"GI",text:"Gibraltar"},{value:"GR",text:"Greece"},{value:"GT",text:"Guatemala"},{value:"GY",text:"Guyana"},{value:"HK",text:"Hong Kong"},{value:"HU",text:"Hungary"},{value:"IS",text:"Iceland"},{value:"IN",text:"India"},{value:"ID",text:"Indonesia"},{value:"IE",text:"Ireland"},{value:"IL",text:"Israel"},{value:"IT",text:"Italy"},{value:"JM",text:"Jamaica"},{value:"JP",text:"Japan"},{value:"JO",text:"Jordan"},{value:"KE",text:"Kenya"},{value:"KW",text:"Kuwait"},{value:"KZ",text:"Kazakhstan"},{value:"LA",text:"Laos"},{value:"LV",text:"Latvia"},{value:"LI",text:"Liechtenstein"},{value:"LT",text:"Lithuania"},{value:"LU",text:"Luxembourg"},{value:"MO",text:"Macau"},{value:"MG",text:"Madagascar"},{value:"MY",text:"Malaysia"},{value:"MT",text:"Malta"},{value:"MU",text:"Mauritius"},{value:"MX",text:"Mexico"},{value:"MD",text:"Moldova"},{value:"MC",text:"Monaco"},{value:"MN",text:"Mongolia"},{value:"MZ",text:"Mozambique"},{value:"MA",text:"Morocco"},{value:"NA",text:"Namibia"},{value:"NE",text:"Niger"},{value:"NG",text:"Nigeria"},{value:"NL",text:"Netherlands"},{value:"NZ",text:"New Zealand"},{value:"MK",text:"North Macedonia"},{value:"NO",text:"Norway"},{value:"OM",text:"Oman"},{value:"PK",text:"Pakistan"},{value:"PA",text:"Panama"},{value:"PY",text:"Paraguay"},{value:"PE",text:"Peru"},{value:"PH",text:"Philippines"},{value:"PL",text:"Poland"},{value:"PT",text:"Portugal"},{value:"QA",text:"Qatar"},{value:"RO",text:"Romania"},{value:"RW",text:"Rwanda"},{value:"SM",text:"San Marino"},{value:"SA",text:"Saudi Arabia"},{value:"SN",text:"Senegal"},{value:"RS",text:"Serbia"},{value:"SG",text:"Singapore"},{value:"SK",text:"Slovakia"},{value:"SI",text:"Slovenia"},{value:"ZA",text:"South Africa"},{value:"KR",text:"South Korea"},{value:"ES",text:"Spain"},{value:"LK",text:"Sri Lanka"},{value:"LC",text:"St. Lucia"},{value:"SE",text:"Sweden"},{value:"CH",text:"Switzerland"},{value:"TW",text:"Taiwan"},{value:"TZ",text:"Tanzania"},{value:"TH",text:"Thailand"},{value:"TN",text:"Tunisia"},{value:"TT",text:"Trinidad & Tobago"},{value:"TR",text:"Turkey"},{value:"AE",text:"United Arab Emirates"},{value:"GB",text:"United Kingdom"},{value:"US",text:"United States"},{value:"UY",text:"Uruguay"},{value:"UZ",text:"Uzbekistan"},{value:"VN",text:"Vietnam"}],o={1:"Transaction fee (2.9% + 30c)"},a=1},29610:function(e,t,n){n.d(t,{Kv:function(){return m},Ne:function(){return p},W1:function(){return s},bk:function(){return u},en:function(){return d},fV:function(){return l},kC:function(){return c},uq:function(){return f}});var r=n(96486),i=n.n(r),o=/^\s*```.*$/,a=/^\s*```\s*$/,s=function(e){for(var t,n=e.content,r=/\b\d\d?:\d\d(?::\d\d)?\b/g,i=[];null!=(t=r.exec(n));){var o=t.index,a=o+t[0].length-1;i.push({label:{start:o,end:a,text:t[0]},destination:{start:o,end:a,timestamp:!0}})}return i};function l(e){var t=e.content;if(!t)return[];for(var n=[],r={},i=!1,o=!1,a="",s="",l=!1,c=0;c<t.length;c++){var u=t.charAt(c);if(l){l=!1;continue}switch(u){case"[":o?s+=u:(i=!0,a="",s="",r={label:{start:c+1},destination:{}});break;case"]":i?(c<t.length-1&&"("===t.charAt(c+1)&&(r.label.end=c,r.label.text=a,l=!0,r.destination.start=c+2,o=!0),i=!1):o&&(s+=u);break;case")":o?(r.destination.end=c,r.destination.text=s,n.push(r),o=!1):i&&(a+=u);break;case"\\":var d=c<t.length-1?t.charAt(c+1):"";switch(d){case"[":case"]":case"(":case")":case"\\":i?a+=d:o&&(s+=d),l=!0}break;default:i?a+=u:o&&(s+=u)}}return n}function c(e){return i().capitalize(e)}function u(e){return e.replace(/([\\\[\]\(\)])/g,"\\$1")}function d(e){return e.replace(/\\([\\\[\]\(\)])/g,"$1")}function p(e){var t=e.content,n=null,r=1;if(t.startsWith("[ul]"))n="unorderedList",t=t.slice(4);else{var i=/^\[ol(?::(\d+))?]/.exec(t);i&&(n="orderedList",r=parseInt(i[1])||1,t=t.slice(i[0].length))}if(!n||!t.startsWith("[li]"))return null;t=t.slice(4);for(var o=[];;){var a=t.indexOf("[li]");if(a<0){o.push(t);break}o.push(t.slice(0,a)),t=t.slice(a+4)}return{listType:n,items:o,start:r}}function f(e){var t=e.content,n=e.allowCode,r=void 0!==n&&n,i=e.noLists,s=void 0!==i&&i,l=[],c={type:"text",lines:[]};t.split("\n").forEach(function(e){if("text"===c.type&&r&&e.match(o)){var t;(null===(t=c.lines)||void 0===t?void 0:t.length)>0&&l.push(c),c={type:"code",begin:e,lines:[]}}else"code"===c.type&&e.match(a)?(c.end=e,l.push(c),c={type:"text",lines:[]}):c.lines.push(e)}),("code"===c.type||c.lines.length>0)&&l.push(c),l.length>1&&"text"===l[l.length-1].type&&0===l[l.length-1].lines.length&&l.pop();var u=0,d=[];return l.forEach(function(e){if("code"===e.type){u++,d.push(e);return}e.lines.forEach(function(e){if(s)d.push({type:"text",lines:[e]});else{var t=p({content:e});t?d.push({type:t.listType,lines:t.items,start:t.start}):d.push({type:"text",lines:[e]})}})}),{blocks:d,numCodeBlocks:u,numUnorderedListBlocks:0,numOrderedListBlocks:0}}function m(e){var t=e.content,n=e.preserveNewLines;if(!t)return"";var r=t,i=l({content:t});if(null!=i&&i.length){r="";var o=0;i.forEach(function(e){e.label.start-1>o&&(r+=t.slice(o,e.label.start-1)),o=e.destination.end+1,r+=e.label.text}),o<t.length-1&&(r+=t.slice(o))}var a=[],s=f({content:r});return s?(s.blocks.forEach(function(e){switch(e.type){case"code":case"text":a.push(e.lines.join(" "));break;case"unorderedList":e.lines.length>0&&a.push("- "+e.lines.join(" - "));break;case"orderedList":var t=[];e.lines.forEach(function(n,r){t.push("".concat((e.start||1)+r,". ").concat(n))}),a.push(t.join(" "))}}),d(r=void 0!==n&&n?a.join("\n"):a.join(" "))):""}},37500:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t;return(null==e||null===(t=e.normalize("NFD"))||void 0===t||null===(t=t.match(/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])|(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDEC0-\uDEC9\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])/g))||void 0===t||null===(t=t.join(""))||void 0===t?void 0:t.toLowerCase())||""}},31545:function(e,t,n){n.d(t,{$q:function(){return P},BI:function(){return M},Hh:function(){return g},Rl:function(){return D},UO:function(){return w},Wh:function(){return S},YD:function(){return x},a:function(){return v},ak:function(){return C},bi:function(){return N},sw:function(){return b}});var r=n(59499),i=n(50029),o=n(64687),a=n.n(o),s=n(63144),l=n.n(s),c=n(80008),u=n.n(c),d=n(12967),p=n(95419),f=n(96486),m=n.n(f);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var v={Unsupported:0,YouTube:1,Vimeo:2,Loom:3,Wistia:4,Bunny:5,Voomly:6};function b(e){return(0,d.W4)(JSON.parse(e||"[]"))}var g=function(e){return e.includes("bunnycdn")},x=function(e){if(!e)return"";var t=e.split("/");return t.pop(),t.push("playlist.m3u8"),t.join("/")},y={},w=function(e){var t=new URL(e);return t.searchParams.delete("width"),t.toString()};function C(e){try{e=new URL(e)}catch(t){return{url:e.toString(),provider:v.Unsupported}}switch(e.hostname){case"www.youtube.com":case"youtube.com":case"m.youtube.com":if(e.pathname.startsWith("/shorts/")){var t,n,r,i,o,a,s,l=e.pathname.slice(8);return{url:"https://www.youtube.com/watch?v=".concat(l),provider:v.YouTube,videoID:l}}return{url:e.toString(),provider:v.YouTube,videoID:e.searchParams.get("v")||""};case"youtu.be":return{url:e.toString(),provider:v.YouTube,videoID:e.pathname.slice(1)};case"youtube.googleapis.com":return a=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.YouTube,videoID:(null===(t=a)||void 0===t?void 0:t.length)>1?a[1]:""};case"www.vimeo.com":case"vimeo.com":return a=e.pathname.split("/"),{url:e.toString(),provider:v.Vimeo,videoID:a.length>1?a[1]:""};case"player.vimeo.com":return a=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Vimeo,videoID:(null===(n=a)||void 0===n?void 0:n.length)>1?a[1]:""};case"www.loom.com":case"loom.com":return a=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Loom,videoID:(null===(r=a)||void 0===r?void 0:r.length)>1?a[1]:""};case"video.bunnycdn.com":return a=/^\/play\/[^/]+\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Bunny,videoID:(null===(i=a)||void 0===i?void 0:i.length)>1?a[1]:""};case"share.voomly.com":return a=/^\/v+\/(.+)/.exec(e.pathname),{url:e.toString(),provider:v.Voomly,videoID:(null===(o=a)||void 0===o?void 0:o.length)>1?a[1]:""};default:if(e.hostname.endsWith("wistia.com")||e.hostname.endsWith("wi.st"))return a=/\/(?:v|video|share|medias|embed)\/(.+)/.exec(e.pathname),{url:e.toString().replace("/embed",""),provider:v.Wistia,videoID:(null===(s=a)||void 0===s?void 0:s.length)>1?a[1]:""};return{url:e.toString(),provider:v.Unsupported}}}function j(){return(j=(0,i.Z)(a().mark(function e(t){var n,r,i,o,s,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.provider,i=t.url,e.t0=r,e.next=e.t0===v.YouTube?4:e.t0===v.Loom?6:e.t0===v.Vimeo?8:e.t0===v.Wistia?10:e.t0===v.Voomly?12:20;break;case 4:return o="https://www.youtube.com/oembed?format=json&url=".concat(encodeURIComponent(i)),e.abrupt("break",21);case 6:return o="https://www.loom.com/v1/oembed?url=".concat(encodeURIComponent(i)),e.abrupt("break",21);case 8:return o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(i),"&width=1280&height=720"),e.abrupt("break",21);case 10:return o="https://fast.wistia.com/oembed?format=json&url=".concat(encodeURIComponent(i)),e.abrupt("break",21);case 12:if(s=new URL(i),!((null===(n=c=/^\/v+\/(.+)/.exec(s.pathname))||void 0===n?void 0:n.length)>1)){e.next=18;break}o="https://api.voomly.com/embed-videos/".concat(c[1]),e.next=19;break;case 18:case 20:return e.abrupt("return",!1);case 19:return e.abrupt("break",21);case 21:return e.next=23,l()(o);case 23:if((u=e.sent).ok){e.next=26;break}return e.abrupt("return",!0);case 26:return e.next=28,u.json();case 28:if(e.t1=e.sent,e.t1){e.next=31;break}e.t1=!1;case 31:return e.abrupt("return",e.t1);case 32:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=(0,i.Z)(a().mark(function e(t){var n,r,i,o,s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y[t],m().isUndefined(n)){e.next=3;break}return e.abrupt("return",n);case 3:if(i=(r=C(t)).provider,o=r.videoID,!(!i||!o)){e.next=7;break}return y[t]=null,e.abrupt("return",null);case 7:s=0;case 8:if(!(s<3)){e.next=27;break}return e.next=11,function(e){return j.apply(this,arguments)}({provider:i,url:t});case 11:if(!1!==(l=e.sent)){e.next=17;break}return y[t]=null,e.abrupt("return",null);case 17:if(!0!==l){e.next=22;break}return e.next=20,new Promise(function(e){return setTimeout(e,1e3)});case 20:e.next=24;break;case 22:return y[t]=l,e.abrupt("return",l);case 24:s++,e.next=8;break;case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.title)||null);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,i.Z)(a().mark(function e(t){var n,r,i,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=C(t)).provider,i=n.videoID,e.next=3,k(t);case 3:if(!(o=e.sent)){e.next=10;break}if(r!==v.Voomly){e.next=7;break}return e.abrupt("return",o.thumbnailUrl);case 7:return e.abrupt("return",o.thumbnail_url);case 10:if(r!==v.YouTube){e.next=12;break}return e.abrupt("return","https://img.youtube.com/vi/".concat(i,"/0.jpg"));case 12:if(r!==v.Bunny){e.next=18;break}return e.next=15,p.Z.getVideoMeta({url:t});case 15:return s=e.sent.data,e.abrupt("return",null==s?void 0:s.thumbnail);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return e.abrupt("return",!!e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=function(e){if(!e)return"";var t=u().duration(e);if(t){var n=t.hours(),r=t.minutes(),i=t.seconds();return n||r||i?n>0?"".concat(n,":").concat(String(r).padStart(2,"0"),":").concat(String(i).padStart(2,"0")):"".concat(r,":").concat(String(i).padStart(2,"0")):""}return""};function N(e){var t=e.provider,n=e.videoID,i=e.startsAt,o=e.autoPlay,a=void 0!==o&&o,s=e.isMobile,l=e.additionalQueries;switch(t){case v.YouTube:return"https://www.youtube.com/embed/".concat(n,"?autoplay=").concat(a?1:0)+(i?"&start=".concat(i):"");case v.Vimeo:return"https://player.vimeo.com/video/".concat(n,"?autoplay=").concat(a?1:0,"&playsinline=").concat(s?0:1);case v.Loom:return"https://www.loom.com/embed/".concat(n,"?").concat((0,d.B7)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({autoplay:a?1:0,t:i||void 0},l)));case v.Wistia:return"https://fast.wistia.net/embed/iframe/".concat(n);case v.Bunny:return"https://iframe.mediadelivery.net/embed/".concat(n,"?autoplay=").concat(a?"true":"false");default:return null}}},15474:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(67294),i=n(73475),o=n(50378),a=n(20668),s=n(14251),l=o.ZP.div.withConfig({displayName:"styled__ActionStatusWrapper",componentId:"sc-zi8z54-0"})(["display:flex;gap:8px;color:",";",""],function(e){return e.$completed?s.O9.success:s.O9.e2},a.c.t10),c=n(85893),u=(0,r.memo)(function(e){var t=e.completed;return(0,c.jsxs)(l,{$completed:t,children:[(0,c.jsx)(i.J,{name:t?"ActionAlt":"Action",style:{width:15,height:21}}),t?"Action complete":"Complete action"]})})},29027:function(e,t,n){n.d(t,{Z:function(){return W}});var r,i=n(50029),o=n(4730),a=n(59499),s=n(64687),l=n.n(s),c=n(67294),u=n(73935),d=n(95419),p=n(64727),f=n(73793),m=n(30697),h=n(14251),v=n(50378),b=n(85064),g=v.ZP.div.withConfig({displayName:"styled__GoogleDrivePreviewWrapper",componentId:"sc-pqx3q9-0"})(["position:relative;width:","px;height:","px;"," border-radius:10px;overflow:hidden;"],function(e){return e.$width},function(e){return e.$height},function(e){var t=e.$maxWidth;return void 0!==t?"max-width: ".concat(t,"px;"):""}),x=(0,v.ZP)(b.D).withConfig({displayName:"styled__LoadingIcon",componentId:"sc-pqx3q9-1"})(["position:absolute;top:calc(50% - ","px);left:calc(50% - ","px);"],function(e){return e.size/2},function(e){return e.size/2}),y=n(85893);function w(e){var t=e.src,n=e.width,r=e.height,i=e.maxWidth,o=e.frameBorder,a=e.allowFullScreen,s=(0,c.useState)(!0),l=s[0],u=s[1],d=(0,c.useState)(0),p=d[0],f=d[1],m=(0,c.useRef)(),v=(0,c.useRef)(0);(0,c.useEffect)(function(){return u(!0),v.current=setInterval(function(){var e;null!==(e=m.current)&&void 0!==e&&e.contentDocument&&!m.current.contentDocument.title&&f(function(e){return e+1})},1e3),function(){clearInterval(v.current)}},[]);var b=(0,c.useCallback)(function(){u(!1),clearInterval(v.current)},[]),w=(0,c.useCallback)(function(e){console.error("error",e),u(!1),clearInterval(v.current)},[]);return(0,y.jsxs)(g,{$width:n,$height:r,$maxWidth:i,children:[l&&(0,y.jsx)(x,{size:40,color:h.O9.n5}),(0,y.jsx)("iframe",{onLoad:b,onError:w,frameBorder:o,allowFullScreen:a,ref:m,src:t,style:{width:n,height:r,maxWidth:i}},p)]})}w.defaultProps={frameBorder:0,allowFullScreen:!0};var C=(0,c.memo)(w),j=n(59607),k=n(65009),O=n(36581),P=n(74109),I=n(31545),D=n(20668),Z=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewWrapper",componentId:"sc-rf23wn-0"})(["z-index:1300;position:fixed;width:100vw;height:calc(var(--rvh));top:0;left:0;"]),S=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewContent",componentId:"sc-rf23wn-1"})(["position:relative;width:100vw;height:calc(var(--rvh));padding-top:","px;display:flex;align-items:center;justify-content:center;"],function(e){return e.$headerHeight}),_=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewInnerContent",componentId:"sc-rf23wn-2"})(["position:relative;border-radius:10px;overflow:hidden;margin:",";background-color:transparent;display:flex;align-items:center;justify-content:center;"],function(e){var t=e.$marginX,n=e.$marginTop,r=e.$marginBottom;return"".concat(n,"px ").concat(t,"px ").concat(r,"px")}),M=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewBackdrop",componentId:"sc-rf23wn-3"})(["position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.8);"]),N=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewHeader",componentId:"sc-rf23wn-4"})(["position:absolute;top:8px;right:8px;left:8px;z-index:1301;display:flex;align-items:center;justify-content:space-between;"]),E=v.ZP.div.withConfig({displayName:"styled__AttachmentPreviewTitle",componentId:"sc-rf23wn-5"})([""," "," color:",";padding:0 16px;"],D.c.t5,D.c.ellipsis,function(e){return e.theme.isDarkTheme?h.O9.n7:h.O9.n1}),A=v.ZP.div.withConfig({displayName:"styled__AttachmentDownload",componentId:"sc-rf23wn-6"})(["width:424px;background-color:",";"],h.O9.n1),L=v.ZP.div.withConfig({displayName:"styled__AttachmentDownloadHeader",componentId:"sc-rf23wn-7"})([""," text-align:center;"],D.c.t1),T=v.ZP.div.withConfig({displayName:"styled__AttachmentDownloadSubheader",componentId:"sc-rf23wn-8"})([""," text-align:center;word-break:break-word;"],D.c.t7),F=(0,v.iv)(["z-index:1301;position:fixed;"," ",""],function(e){var t=e.theme,n=e.$arrowSize;return t.isMobile?void 0:"top: calc(var(--rvh) / 2 - ".concat(n/2,"px);")},function(e){return e.theme.isMobile?"bottom: 8px;":void 0}),B=v.ZP.div.withConfig({displayName:"styled__LeftArrowWrapper",componentId:"sc-rf23wn-9"})([""," left:8px;"],F),R=v.ZP.div.withConfig({displayName:"styled__RightArrowWrapper",componentId:"sc-rf23wn-10"})([""," right:8px;"],F),z=["initialIdx","onClose","previewAttachments"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $=(r={},(0,a.Z)(r,I.a.YouTube,{width:1280,height:720}),(0,a.Z)(r,I.a.Vimeo,{width:1280,height:720}),(0,a.Z)(r,I.a.Loom,{width:1280,height:720}),(0,a.Z)(r,I.a.Wistia,{width:1280,height:720}),(0,a.Z)(r,I.a.Bunny,{width:1280,height:720}),(0,a.Z)(r,I.a.Voomly,{width:1280,height:720}),r),W=(0,c.memo)(function(e){var t,n=e.initialIdx,r=e.onClose,s=e.previewAttachments,h=(0,o.Z)(e,z),v=(0,c.useState)(n),b=v[0],g=v[1],x=(0,c.useState)({}),w=x[0],I=x[1],D=(0,f.bI)("isMobile"),F=D.dispatch,G=D.isMobile,W=G?8:64,q=G?8:32,H=G?56:32,V=s[b],Y=b<s.length-1,J=(0,c.useMemo)(function(){return w[null==V?void 0:V.id]},[V,w]);(0,c.useEffect)(function(){g(n)},[n]);var X=(0,c.useCallback)(function(){g(function(e){return Math.max(0,e-1)})},[]),K=(0,c.useCallback)(function(){g(function(e){return Math.min(e+1,s.length-1)})},[s]);(0,c.useEffect)(function(){var e=!0,t=document.body.style.overflow;document.body.style.overflow="hidden";var n=window.onkeyup;window.onkeyup=function(t){if(e)switch(t.code){case"Escape":r&&r();break;case"ArrowLeft":X();break;case"ArrowRight":K()}};var i=function(){var e=window.innerHeight;document.documentElement.style.setProperty("--rvh","".concat(e,"px"))};return i(),window.addEventListener("resize",i),function(){document.body.style.overflow=t,window.onkeyup=n,window.removeEventListener("resize",i),e=!1}},[r,X,K]);var Q=(0,c.useCallback)(function(){r&&r()},[r]),ee=(0,c.useCallback)((0,i.Z)(l().mark(function e(){var t,n,r,i,o,a;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t=V.metadata).readUrl,r=t.srcReadUrl,!(n||r)){e.next=13;break}return o=(null===(i=V.metadata)||void 0===i?void 0:i.fileName)||"file",e.prev=3,e.next=6,(0,p.FA)({downloadURL:J,fileName:o});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),F(m.bI,{message:"Failed to download attachment",severity:"error"});case 11:e.next=18;break;case 13:(a=document.createElement("a")).href=J,a.download=!0,a.target="_blank",a.click();case 18:case"end":return e.stop()}},e,null,[[3,8]])})),[V,J,F]),et=(0,c.useMemo)(function(){if(V){var e,t;return(null===(e=V.metadata)||void 0===e?void 0:e.title)||(null===(t=V.metadata)||void 0===t?void 0:t.fileName)||"File attachment"}},[V]),en=(0,c.useCallback)((t=(0,i.Z)(l().mark(function e(t){var n,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.getResourceUrl({fileId:t});case 2:return r=(n=e.sent).data,n.error&&F(m.bI,{message:"Failed to download file",severity:"error"}),e.abrupt("return",null!=r?r:null);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[F]);(0,c.useEffect)(function(){(0,i.Z)(l().mark(function e(){var t,n,r;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0===J&&!(null!=V&&V.videoLink))){e.next=7;break}if(r=(null===(t=V.metadata)||void 0===t?void 0:t.readUrl)||(null===(n=V.metadata)||void 0===n?void 0:n.srcReadUrl)){e.next=6;break}return e.next=5,en(null==V?void 0:V.id);case 5:r=e.sent;case 6:I(function(e){return U(U({},e),{},(0,a.Z)({},null==V?void 0:V.id,r))});case 7:case"end":return e.stop()}},e)}))()},[J,V,en]);var er=(0,c.useMemo)(function(){if(V&&!V.videoLink){var e,t,n=(null===(e=V.metadata)||void 0===e?void 0:e.fileName)||"file",r=n.lastIndexOf(".")>=0?n.slice(n.lastIndexOf(".")):"",i=(null===(t=V.metadata)||void 0===t?void 0:t.contentType)||"";if(!J)return null;var o=(0,p.F5)({ext:r,contentType:i}),a=(G?null==o?void 0:o.mobilePreview:null==o?void 0:o.preview)||p.DE.Download;if(a===p.DE.Download)return(0,y.jsx)(A,{children:(0,y.jsxs)(O.s,{gap:32,margin:32,children:[(0,y.jsxs)(O.s,{gap:8,children:[(0,y.jsx)(L,{children:"No preview available"}),(0,y.jsx)(T,{children:"for ".concat(n)})]}),(0,y.jsx)(j.z,{onClick:ee,label:"Download",style:{width:"100%"}})]})});if(a===p.DE.GoogleDrive){var s="https://docs.google.com/viewer?embedded=true&url=".concat(encodeURIComponent(J));return(0,y.jsx)(C,{src:s,width:"calc(100vw - ".concat(2*W,"px)"),height:"calc(var(--rvh) - ".concat(56,"px - ").concat(q,"px - ").concat(H,"px)"),maxWidth:1024,frameBorder:0,allowFullScreen:!1},s)}if(a===p.DE.Image){var l={maxWidth:"calc(100vw - ".concat(2*W,"px)"),maxHeight:"calc(var(--rvh) - ".concat(56,"px - ").concat(q,"px - ").concat(H,"px)")};return J.includes("giphy.com")&&!G&&(l.minHeight=420),(0,y.jsx)("img",{src:J,alt:n,style:l})}if(a===p.DE.PDF){var c={width:"calc(100vw - ".concat(2*W,"px)"),height:"calc(var(--rvh) - ".concat(56,"px - ").concat(q,"px - ").concat(H,"px)"),maxWidth:1024},u="".concat(J,"#toolbar=0");return(0,y.jsx)("iframe",{style:c,frameBorder:0,src:u})}}else if(V&&V.videoLink){var d,f,m,h=$[V.metadata.provider],v=h.height/h.width,b={width:"calc(100vw - ".concat(2*W,"px)"),height:"calc((100vw - ".concat(2*W,"px) * ").concat(v,")"),maxWidth:h.width,maxHeight:h.height};return(0,y.jsx)(P.Z,{url:V.metadata.url,thumbnailUrl:(null==V||null===(d=V.metadata)||void 0===d?void 0:d.thumbnail)||null,duration:(null==V||null===(f=V.metadata)||void 0===f?void 0:f.lenMs)||null,style:b,autoplay:!0,streamURL:null==V||null===(m=V.metadata)||void 0===m?void 0:m.stream})}return null},[V,J,G,W,q,H,ee]);return(0,u.createPortal)((0,y.jsxs)(Z,U(U({},h),{},{children:[(0,y.jsxs)(N,{children:[(0,y.jsx)(E,{children:et}),(0,y.jsxs)(k.X,{gap:8,children:[!!V&&!!J&&(0,y.jsx)(j.z,{variant:"icon",icon:"Download",onClick:ee,iconSize:16.66}),(0,y.jsx)(j.z,{variant:"icon",icon:"Close",onClick:Q,iconSize:16.66})]})]}),b>0&&(0,y.jsx)(B,{$arrowSize:40,children:(0,y.jsx)(j.z,{variant:"icon",icon:"ArrowLeft",onClick:X,iconSize:16.66})}),Y&&(0,y.jsx)(R,{$arrowSize:40,children:(0,y.jsx)(j.z,{variant:"icon",icon:"ArrowRight",onClick:K,iconSize:16.66})}),(0,y.jsxs)(S,{$headerHeight:56,children:[(0,y.jsx)(M,{onClick:Q}),(0,y.jsx)(_,{$marginX:W,$marginTop:q,$marginBottom:H,children:er})]})]})),document.body)})},99682:function(e,t,n){n.d(t,{F:function(){return k}});var r=n(59499),i=n(17674),o=n(4730),a=n(67294),s=n(73793),l=n(54361),c=n(12476),u=n(47691),d=n(50378),p=n(73475),f=n(36581),m=n(14251),h=(0,d.ZP)(f.s).withConfig({displayName:"styled__AutocompleteWrapper",componentId:"sc-1mcevak-0"})(["position:relative;"]),v=d.ZP.div.withConfig({displayName:"styled__InputWrapper",componentId:"sc-1mcevak-1"})(["position:relative;input{padding-right:48px;min-width:96px;text-overflow:ellipsis;background-color:",";}"],m.O9.n1),b=d.ZP.div.withConfig({displayName:"styled__DropdownWrapper",componentId:"sc-1mcevak-2"})(["position:absolute;inset:0;.skool-ui-dropdown-option{padding:8px 16px;}> div > div:first-child{width:100%;> button{width:100%;}}"]),g=d.ZP.label.withConfig({displayName:"styled__DropdownButtonLabel",componentId:"sc-1mcevak-3"})(["position:absolute;right:16px;top:50%;transform:translateY(-50%);padding:8px;cursor:pointer;"]),x=(0,d.ZP)(p.J).withConfig({displayName:"styled__DropdownButtonIcon",componentId:"sc-1mcevak-4"})(["width:12px;height:12px;color:",";"],function(e){return e.$dropdownVisible?m.O9.n7:m.O9.n5}),y=n(85893),w=["options","value","label","onChange","onBlur","placeholder","showDropdownButton","noAnimation","dataTestId"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var j=(0,a.forwardRef)(function(e,t){var n=e.options,d=e.value,p=e.label,f=e.onChange,m=e.onBlur,j=e.placeholder,k=e.showDropdownButton,O=e.noAnimation,P=(e.dataTestId,(0,o.Z)(e,w)),I=(0,s.bI)("isMobile").isMobile,D=(0,a.useRef)(),Z=(0,l.c8)(),S=(0,i.Z)(Z,3),_=S[0],M=S[1],N=S[2],E=(0,a.useState)(!1),A=E[0],L=E[1],T=!!(null!=n&&n.length&&A),F=(0,a.useCallback)(function(){M(),setTimeout(function(){null==t||t.current.select()},0)},[M,t]),B=(0,a.useCallback)(function(){N(),null==m||m()},[N,m]);(0,a.useEffect)(function(){var e,t;T?null==D||null===(e=D.current)||void 0===e||e.openDropdown():T||null==D||null===(t=D.current)||void 0===t||t.closeDropdown()},[T]);var R=(0,a.useCallback)(function(e){f(e.target.value)},[f]),z=(0,a.useCallback)(function(){L(!A)},[A]);(0,l.YB)(function(){if(!(null!=n&&n.length)){L(!1);return}L(_)},[n,d,_]);var G=(0,a.useCallback)(function(e){null==e||e.preventDefault()},[]);return(0,y.jsxs)(h,{children:[(0,y.jsx)(b,{children:(0,y.jsx)(c.h_,{ref:D,options:n,fitButton:!0,yOffset:11,backgroundDisabled:!0,noAnimation:O,flipDisabled:I,scrollToActive:!0,style:{visibility:"hidden",height:"100%"}})}),(0,y.jsxs)(v,{children:[(0,y.jsx)(u.I,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ref:t,onFocus:F,onBlur:B,placeholder:j,onChange:R,value:d,label:p,autoComplete:"off",id:"autocomplete-input"},P)),k&&(0,y.jsx)(g,{onClick:z,onMouseDown:G,htmlFor:"autocomplete-input",children:(0,y.jsx)(x,{$dropdownVisible:A,name:A?"ArrowUp":"ArrowDown"})})]})]})}),k=(0,a.memo)(j)},10925:function(e,t,n){n.d(t,{x:function(){return j}});var r=n(23450),i=n.n(r),o=n(67294),a=n(14251),s=n(66703),l=n(12967),c=n(50378),u=n(36581),d=n(65009),p=n(20668),f=n(70299),m=(0,c.ZP)(u.s).withConfig({displayName:"styled__HeatmapWrapper",componentId:"sc-euc2r5-0"})(["overflow-x:auto;overflow-y:hidden;position:relative;",""],f.KZ),h=c.ZP.div.withConfig({displayName:"styled__Heatmap",componentId:"sc-euc2r5-1"})(["display:grid;grid-template-rows:",";grid-template-columns:",";gap:","px;grid-auto-flow:column;"],function(e){var t=e.$rows,n=e.$squareSize;return"repeat(".concat(t,", ").concat(n,"px)")},function(e){var t=e.$columns,n=e.$squareSize;return"repeat(".concat(t,", ").concat(n,"px)")},function(e){return e.$gap}),v=(0,c.ZP)(d.X).withConfig({displayName:"styled__MonthLabelsWrapper",componentId:"sc-euc2r5-2"})(["align-items:center;height:28px;width:100%;"]),b=c.ZP.div.withConfig({displayName:"styled__MonthLabel",componentId:"sc-euc2r5-3"})(["color:",";font-size:13px;position:absolute;left:","px;user-select:none;"],a.O9.n5,function(e){return e.$left}),g=c.ZP.div.withConfig({displayName:"styled__Square",componentId:"sc-euc2r5-4"})(["background-color:",";border-radius:2px;",""],function(e){var t=e.$backgroundColor;return null!=t?t:a.O9.n2},function(e){var t=e.$size;return t&&"\n      height: ".concat(t,"px;\n      width: ").concat(t,"px;\n    ")}),x=c.ZP.div.withConfig({displayName:"styled__TooltipText",componentId:"sc-euc2r5-5"})(["color:",";",";"],function(e){var t=e.$color,n=e.theme;return null!=t?t:n.isDarkTheme?a.O9.n7:a.O9.n1},p.c.t10),y=function(e,t,n){},w=n(85893),C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=(0,o.memo)(function(e){var t=e.counts,n=e.startDate,r=e.ranks,c=e.since,u=t.length,d=Math.ceil(u/7),p=13*d-1,f=c?c.diff(n,"day"):-1,j=(0,o.useRef)();(0,o.useEffect)(function(){y(n,u,d)},[u,d,n]),(0,o.useEffect)(function(){setTimeout(function(){if(j.current){var e;j.current.scrollLeft=(null===(e=j.current)||void 0===e?void 0:e.scrollWidth)||p}},0)},[p]);var k=(0,o.useCallback)(function(e,o){if(o<0||o>=u)return null;if(o<f)return(0,w.jsx)(g,{$size:11},o);var c=t[o],d=r.find(function(e){return c>=e.min})||r[0],p=c>0?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x,{children:i()("activity",(0,l.x6)(c),!0)}),(0,w.jsx)(x,{$color:a.O9.n5,children:"".concat(n.clone().add(o,"day").format("dddd, MMMM D, YYYY"))}),o===f&&(0,w.jsx)(x,{children:"First day \uD83C\uDF89"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(x,{children:"No activities"}),(0,w.jsx)(x,{$color:a.O9.n5,children:"".concat(n.clone().add(o,"day").format("dddd, MMMM D, YYYY"))}),o===f&&(0,w.jsx)(x,{children:"First day \uD83C\uDF89"})]});return(0,w.jsx)(s.u,{content:p,animated:!1,placement:"bottom",children:(0,w.jsx)(g,{$backgroundColor:d.color,$size:11})},o)},[t,u,r,f,n]),O=(0,o.useCallback)(function(e){for(var t=[],n=0;n<7;n++)t.push(k(n,7*e+n));return t},[k]),P=(0,o.useMemo)(function(){for(var e=[],t=0;t<d-1;t++){var r=13*t,i=n.clone().add((t+1)*7-1,"day");i.date()>=1&&7>=i.date()&&e.push((0,w.jsx)(b,{$left:r,children:C[i.month()]},t))}return e},[d,n]),I=(0,o.useMemo)(function(){for(var e=[],t=0;t<d;t++)e.push(O(t));return e},[d,O]);return(0,w.jsxs)(m,{ref:j,children:[(0,w.jsx)(v,{children:P}),(0,w.jsx)(h,{$rows:7,$columns:d,$gap:2,$squareSize:11,children:I})]})})},16695:function(e,t,n){n.d(t,{e:function(){return h}});var r=n(59499),i=n(4730),o=n(50378),a=(0,o.iv)(["flex-direction:column;gap:8px;"]),s=o.ZP.div.withConfig({displayName:"styled__ConfirmCancelButtonsWrapper",componentId:"sc-125bufn-0"})(["display:flex;",""],function(e){return e.theme.isMobile&&a}),l=n(59607),c=n(73793),u=n(67294),d=n(85893),p=["confirmLabel","cancelLabel","confirmDisabled","confirmVariant","cancelVariant","confirmTestId","cancelTestId","onConfirm","onCancel","loading"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,u.memo)(function(e){var t=e.confirmLabel,n=e.cancelLabel,r=e.confirmDisabled,o=e.confirmVariant,a=e.cancelVariant,u=(e.confirmTestId,e.cancelTestId,e.onConfirm),f=e.onCancel,h=e.loading,v=(0,i.Z)(e,p),b=(0,c.bI)("isMobile").isMobile;return(0,d.jsxs)(s,m(m({},v),{},{children:[(0,d.jsx)(l.z,{variant:o,disabled:r,label:void 0===t?"Confirm":t,onClick:u,loading:h}),(0,d.jsx)(l.z,{variant:a||b?"secondary":"borderless",label:void 0===n?"Cancel":n,onClick:f,disabled:h})]}))})},96166:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(67294),i=n(59607),o=n(20668),a=n(14251),s=n(50378),l=(0,s.iv)(["> h2{","}"],o.c.t4),c=s.ZP.div.withConfig({displayName:"styled__ConnectStripeWrapper",componentId:"sc-lne6dj-0"})(["margin-top:32px;padding:16px;border-radius:10px;background:",";color:",";> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 16px 0px;","}",""],a.O9.p1,a.O9.fgPrimary,o.c.t2,o.c.t7,function(e){return e.theme.isMobile&&l}),u=n(85893),d=(0,r.memo)(function(e){var t=e.onClick;return(0,u.jsxs)(c,{children:[(0,u.jsx)("h2",{children:"Connect your bank account"}),(0,u.jsx)("p",{children:"Skool uses Stripe to send payouts to your bank account. Complete setup to monetize your group."}),(0,u.jsx)(i.z,{onClick:t,label:"CONTINUE →",variant:"blue"})]})})},13053:function(e,t,n){n.d(t,{ZP:function(){return M}});var r=n(59499),i=n(4730),o=n(90116),a=n(67294),s=n(14251),l=n(29610),c=n(5095),u=n(73793),d=n(70120),p=n(12065),f=n(20668),m=n(96486),h=n.n(m),v=n(50378),b=v.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-y5pp90-0"})(["word-break:break-word;color:",";text-align:",";",""],function(e){return e.$color},function(e){return e.$textAlign},function(e){var t=e.$variant;return f.c[t]}),g=(0,v.iv)(["cursor:default;color:",";&:hover{text-decoration:unset;}"],s.O9.n5),x=v.ZP.span.withConfig({displayName:"styled__ShowMore",componentId:"sc-y5pp90-1"})(["cursor:pointer;user-select:none;color:",";&:hover{text-decoration:underline;}",""],s.O9.sd1,function(e){return e.$disabled&&g}),y=v.ZP.pre.withConfig({displayName:"styled__CodeBlock",componentId:"sc-y5pp90-2"})(["background-color:",";padding:10px;font-family:monospace;font-size:14px;line-height:1.5;border-radius:6px;border:1px dashed ",";overflow:auto;"],s.O9.n3,s.O9.n5),w=v.ZP.div.withConfig({displayName:"styled__Paragraph",componentId:"sc-y5pp90-3"})(["margin:0;&:last-child{margin-bottom:0;}a{color:",";text-decoration:none;&:hover{text-decoration:underline;}}"],s.O9.sd1),C=v.ZP.div.withConfig({displayName:"styled__EmptyParagraph",componentId:"sc-y5pp90-4"})(["height:16px;margin:0;"]),j=(0,v.iv)(["margin:0;&:last-child{margin-bottom:0;}a{color:",";text-decoration:none;&:hover{text-decoration:underline;}}margin-block-start:0;margin-block-end:0;margin-inline-start:0;margin-inline-end:0;padding-inline-start:0;li{list-style-position:inside;}"],s.O9.sd1),k=v.ZP.ol.withConfig({displayName:"styled__OrderedList",componentId:"sc-y5pp90-5"})(["",""],j),O=v.ZP.ul.withConfig({displayName:"styled__UnorderedList",componentId:"sc-y5pp90-6"})(["",""],j),P=n(85893),I=["value","textVariant","textColor","textAlign","showMoreLimit","showMoreDisabled","showMoreHidden","showTimestamps","onTimestampClick"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=function(e,t){var n=e.split(":");t(3===n.length?3600*n[0]+60*n[1]+ +n[2]:60*n[0]+ +n[1])};function _(e){var t=e.value,n=e.textVariant,f=e.textColor,m=e.textAlign,v=e.showMoreLimit,g=e.showMoreDisabled,j=e.showMoreHidden,D=e.showTimestamps,_=e.onTimestampClick,M=(0,i.Z)(e,I),N=(0,a.useState)(!1),E=N[0],A=N[1],L=(0,u.bI)("currentGroup","isMobile"),T=L.currentGroup,F=L.isMobile,B=(0,a.useState)({}),R=B[0],z=B[1],G=(0,a.useCallback)(function(){return[(0,P.jsx)("span",{children:"... "},"see-more-ellipsis"),j?null:(0,P.jsx)(x,{$disabled:g,onClick:function(){g||A(!0)},children:"See more"},"see-more")]},[g,j]),U=(0,a.useCallback)(function(e,t){var n=e.label,r=n.text,i=n.start;return(0,P.jsx)("span",{style:{color:s.O9.sd1,cursor:"pointer"},onClick:function(){return S(r,_)},children:0===i?r:" ".concat(r)},"timestamp-".concat(t))},[_]),$=(0,a.useCallback)(function(e,t,n){if(t.startsWith("obj://user/")){var i=t.slice(11),o=(0,c.sB)({userName:i,group:T}),s=o.href,l=o.as;return(0,P.jsxs)(a.Fragment,{children:[F&&(0,P.jsx)(d.r,{label:e,href:s,as:l,underline:"none"}),!F&&(0,P.jsx)(p.Z,{component:"span",user:{id:i},group:T,showDialog:R[n]||!1,onDialogClose:function(){return z(function(e){return Z(Z({},e),{},(0,r.Z)({},n,!1))})},children:(0,P.jsx)("span",{children:(0,P.jsx)(d.r,{href:s,as:l,children:e})})})]},"link-".concat(n))}if(t.startsWith("obj://course/")){var u=/obj:\/\/course\/(.{32})\?cn=(.+)/.exec(t);if(u){var f=u[1],m=u[2],h=(0,c.rE)({course:{name:m},courseModule:f,group:T}),v=h.href,b=h.as;return(0,P.jsx)(d.r,{href:v,as:b,underline:"none",children:e},"link-".concat(n))}}return(0,P.jsx)("a",{href:(0,c.X2)(t),title:(0,c.X2)(t),target:"_blank",rel:"noopener noreferrer",children:e},"link-".concat(n))},[T,R,F]),W=(0,a.useMemo)(function(){if(!t)return null;var e=E?function(e){return function(e,t){var n={stop:!1,charCount:0,elements:[]},r=(0,l.fV)({content:e}),i=0;if(r.forEach(function(r,o){if(i<r.label.start-1){var a=(0,l.en)(e.slice(i,r.label.start-1));n.elements.push((0,P.jsx)("span",{children:a},"text-".concat(n.elements.length)))}i=r.destination.end+1;var s=t(r.label.text,r.destination.text,o);s&&n.elements.push(s)}),i<e.length){var o=(0,l.en)(e.slice(i));n.elements.push((0,P.jsx)("span",{children:o},"text-".concat(n.elements.length)))}return n}(e,$)}:function(e,t,n){var r,i=function(e,t,n,r,i,a,s){var c={stop:!1,charCount:t,elements:[]},u=(0,l.fV)({content:e}),d=s?(0,l.W1)({content:e}):[],p=[].concat((0,o.Z)(u),(0,o.Z)(d));s&&p.sort(function(e,t){return e.label.start>t.label.start?1:-1});var f=0;if(p.forEach(function(t,o){if(!c.stop){if(f<t.label.start-1){var s=(0,l.en)(e.slice(f,t.label.start-1)),u=r-c.charCount;if(c.charCount+=s.length,u>=s.length){if(c.elements.push((0,P.jsx)("span",{children:s},"text-".concat(c.elements.length))),u===s.length){c.stop=!0;return}}else if(n&&r-c.charCount>=-100)c.elements.push((0,P.jsx)("span",{children:s},"text-".concat(c.elements.length)));else{u>0&&c.elements.push((0,P.jsx)("span",{children:s.slice(0,u)},"text-".concat(c.elements.length))),c.stop=!0;return}}if(f=t.destination.end+1,t.destination.timestamp){var d=a(t,o);c.elements.push(d);return}var p=t.label.text,m=i(p,t.destination.text,o);if(m){c.elements.push(m),c.charCount+=p.length;var h=r-c.charCount;h<0&&(!n||h<-100)&&(c.stop=!0)}}}),c.stop&&n&&f>=e.length&&(c.stop=!1),!c.stop&&f<e.length){var m=(0,l.en)(e.slice(f)),h=r-c.charCount;c.charCount+=m.length,h>=m.length?c.elements.push((0,P.jsx)("span",{children:m},"text-".concat(c.elements.length))):n&&r-c.charCount>=-100?c.elements.push((0,P.jsx)("span",{children:m},"text-".concat(c.elements.length))):(h>0&&c.elements.push((0,P.jsx)("span",{children:m.slice(0,h)},"text-".concat(c.elements.length))),c.stop=!0)}return c}(e,t,n,v,$,U,D);return i.stop&&(r=i.elements).push.apply(r,(0,o.Z)(G())),i},n=t;h().isString(n)&&(n=(0,l.uq)({content:t,allowCode:!1,noLists:!0}).blocks);var r=!1,i=0;return n.map(function(t,o){if(!E&&r)return null;switch(t.type){case"code":var s=E?t.lines.map(function(e){return(0,l.en)(e)}).join("\n"):t.lines.map(function(e){if(i>v)return null;var t=(0,l.en)(e);return i+=t.length,t}).filter(function(e){return!h().isNull(e)}).join("\n");return r=v<i,(0,P.jsxs)(a.Fragment,{children:[(0,P.jsx)(y,{children:s}),!E&&r&&o<n.length-1&&(0,P.jsx)(x,{disabled:g,onClick:function(){g||A(!0)},children:"See more"})]},o);case"unorderedList":case"orderedList":var c="unorderedList"===t.type?O:k;return(0,P.jsx)(c,{start:t.start,children:t.lines.map(function(a,s){if(r)return null;var l=e(a,i,o===n.length-1&&s===t.lines.length-1);return r=l.stop,i=l.charCount,l.elements?(0,P.jsx)("li",{children:l.elements},s):null})},o);default:if(!t.lines||1!==t.lines.length)return console.error("invalid text block",t),null;if(!t.lines[0])return 0===o?null:(0,P.jsx)(C,{},o);var u=e(t.lines[0],i,o===n.length-1);return r=u.stop,i=u.charCount,u.elements?(0,P.jsx)(w,{children:u.elements},o):null}}).filter(function(e){return!!e})},[t,E,v,$,G,g,D,U]);return(0,P.jsx)(b,{$variant:n,$color:f,$textAlign:m,style:Z({},M),children:W})}_.defaultProps={textVariant:"t9",textColor:s.O9.n7,showMoreLimit:Number.MAX_SAFE_INTEGER};var M=(0,a.memo)(_)},53541:function(e,t,n){n.d(t,{h:function(){return w}});var r=n(59499),i=n(4730),o=n(5152),a=n.n(o),s=n(67294),l=n(20452),c=n(12967),u=n(12476),d=n(59607),p=n(50378),f=p.ZP.div.withConfig({displayName:"styled__EmojiPickerStyles",componentId:"sc-kal3bp-0"})(['.emoji-search{font-size:16px;line-height:1.5px;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:normal;font-style:normal;}']),m=p.ZP.div.withConfig({displayName:"styled__PreloadPicker",componentId:"sc-kal3bp-1"})(["display:none;"]),h=n(85893),v=["onClick"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=a()(function(){return n.e(8307).then(n.bind(n,63048))},{ssr:!1,loadableGenerated:{webpack:function(){return[63048]}}}),y={showPreview:!1},w=(0,s.memo)(function(e){var t=e.onClick,n=(0,i.Z)(e,v),r=(0,s.useState)(!1),o=r[0],a=r[1],p=(0,s.useRef)(),b=(0,s.useCallback)(function(e){var n;t(e.emoji),null===(n=p.current)||void 0===n||n.closeDropdown()},[t]),w=(0,s.useCallback)(function(){a(!0)},[]),C=(0,s.useMemo)(function(){return(0,h.jsx)(f,{children:(0,h.jsx)(x,{emojiStyle:(0,c.eE)()?"apple":"native",onEmojiClick:b,theme:(0,l.$o)()?"dark":"light",suggestedEmojisMode:"recent",width:288,height:370,previewConfig:y})})},[b]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.h_,g(g({ref:p,customContent:C,contentPadding:0,onShow:w,shouldFlip:!0},n),{},{children:(0,h.jsx)(d.z,{variant:"icon-borderless",icon:"Emoji",iconSize:16})})),!o&&(0,h.jsx)(m,{children:C})]})})},82354:function(e,t,n){n.d(t,{g:function(){return X}});var r=n(90116),i=n(50029),o=n(59499),a=n(4730),s=n(64687),l=n.n(s),c=n(12476),u=n(73475),d=n(59607),p=n(66703),f=n(85064),m=n(67294),h=n(70131),v=n(73793),b=n(63144),g=n.n(b),x=n(30697),y=n(12967),w=n(63210),C=n(50378),j=n(20668),k=n(14251),O=n(47691),P=(0,C.F4)(["0%{background-color:",";}25%{background-color:",";}50%{background-color:",";}75%{background-color:",";}100%{background-color:",";}"],k.O9.n3,k.O9.n4,k.O9.n3,k.O9.n4,k.O9.n3),I=C.ZP.div.withConfig({displayName:"styled__GifPickerWrapper",componentId:"sc-2rxy6o-0"})(["height:396px;width:281px;max-width:100%;overflow:auto;> div{&:first-child{width:100%;padding:16px 16px 0px 16px;display:flex;flex-direction:column;align-items:center;padding-bottom:44px;> div{&:first-child{margin-bottom:16px;width:100%;height:40px;}}}}"]),D=C.ZP.div.withConfig({displayName:"styled__GifBlocksPlaceholder",componentId:"sc-2rxy6o-1"})(["width:100%;height:665px;"]),Z=C.ZP.div.withConfig({displayName:"styled__GifBlocks",componentId:"sc-2rxy6o-2"})(["display:flex;flex-wrap:wrap;justify-content:space-between;width:100%;"]),S=C.ZP.div.withConfig({displayName:"styled__GifItemWrapper",componentId:"sc-2rxy6o-3"})(["height:77px;margin-bottom:8px;width:calc(50% - 4px);border-radius:4px;overflow:hidden;cursor:pointer;background-size:400px;animation:"," 4s infinite linear;"],P),_=C.ZP.div.withConfig({displayName:"styled__GifItem",componentId:"sc-2rxy6o-4"})(["height:100%;width:100%;background-size:cover;background-position:center;"]),M=C.ZP.div.withConfig({displayName:"styled__Loader",componentId:"sc-2rxy6o-5"})(["padding:20px;"]),N=C.ZP.div.withConfig({displayName:"styled__PoweredByLogoContainer",componentId:"sc-2rxy6o-6"})(["background:",";position:absolute;bottom:0px;left:0px;height:44px;width:100%;display:flex;align-items:center;padding-left:12px;"],k.O9.n1),E=C.ZP.div.withConfig({displayName:"styled__PoweredByLogo",componentId:"sc-2rxy6o-7"})(["height:44px;width:106px;background-position:center;background-image:",";background-size:contain;background-repeat:no-repeat;"],function(e){var t=e.theme;return"url(".concat(t.isDarkTheme?"https://assets.skool.com/skool/1edbfc977420400caabd54d706899d0f.png":"https://assets.skool.com/skool/a73ebc0217dc4f6381a16b7cee53528b.png",")")}),A=C.ZP.div.withConfig({displayName:"styled__PickerInfo",componentId:"sc-2rxy6o-8"})(["color:",";padding:16px 0px;",""],k.O9.n5,j.c.t11),L=(0,C.ZP)(O.I).withConfig({displayName:"styled__SearchInput",componentId:"sc-2rxy6o-9"})(["height:40px;min-height:40px;"]),T=n(17674),F=n(73935),B=n(54361),R=n(88889),z=n(70299),G=C.ZP.div.withConfig({displayName:"styled__MobileGifPickerWrapper",componentId:"sc-1ddgthv-0"})(["position:relative;"]),U=C.ZP.div.withConfig({displayName:"styled__MobileGifPickerContent",componentId:"sc-1ddgthv-1"})(["position:fixed;z-index:1400;overflow:hidden;top:181px;left:50%;transform:translateX(-50%);border-radius:10px;background-color:",";"," ",""],k.O9.n1,z.Wn,z.KZ),$=C.ZP.div.withConfig({displayName:"styled__MobileGifPickerBackdrop",componentId:"sc-1ddgthv-2"})(["position:fixed;top:0;bottom:0;width:100%;z-index:1399;"]),W=n(85893),q=(0,m.forwardRef)(function(e,t){var n=e.pickerContent,r=e.onOpen,i=e.onClose,o=(0,B.C1)(),a=(0,T.Z)(o,3),s=a[0],l=a[1],c=a[2],u=(0,m.useRef)(),p=(0,m.useRef)();(0,R.P)(s);var f=(0,m.useCallback)(function(){l(),null==r||r()},[r,l]);(0,m.useEffect)(function(){(0,y.Dt)(navigator.userAgent)&&0===window.scrollY&&window.scrollTo(0,1)},[s]),(0,m.useImperativeHandle)(t,function(){return{closeDropdown:c}}),(0,B.YB)(function(){p.current&&(p.current.style.top=s?"".concat(30,"px"):null)},[s]);var h=(0,m.useCallback)(function(){c(),i()},[c,i]),v=(0,m.useMemo)(function(){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)($,{onClick:h}),(0,W.jsx)(U,{ref:p,children:n})]})},[n,h]);return(0,W.jsxs)(G,{children:[s&&(0,F.createPortal)(v,document.body),(0,W.jsx)("div",{ref:u,children:(0,W.jsx)(d.z,{variant:"icon-borderless",icon:"Gif",iconSize:40,onClick:f})})]})}),H=(0,m.memo)(q),V=["tooltip","onSelect","onOpen"];function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=(0,m.memo)(function(e){var t=e.tooltip,n=e.onSelect,o=e.onOpen,s=(0,a.Z)(e,V),b=(0,v.bI)("isMobile"),C=b.isMobile,j=b.dispatch,k=(0,m.useState)(""),O=k[0],P=k[1],T=(0,w.Z)(O,500),F=(0,m.useState)(0),B=F[0],R=F[1],z=(0,m.useState)([]),G=z[0],U=z[1],$=(0,m.useState)(0),q=$[0],Y=$[1],X=(0,m.useState)(!1),K=X[0],Q=X[1],ee=(0,m.useRef)(!1),et=(0,m.useRef)(),en=(0,m.useCallback)(function(){Y(0),Q(!1),P(""),R(0),U([])},[]),er=(0,m.useCallback)(function(e){n(J(J({},e),{},{query:O.replace(/ /g,"-")||"_default_"})),en(),et.current.closeDropdown()},[n,en,O]),ei=(0,m.useCallback)((0,i.Z)(l().mark(function e(){var t,n,i,o;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,y.B7)({api_key:"eTYZVZGLxZxgS3w15EgAx6IgBwalxCoz",q:O||"happy",limit:16,offset:B,rating:"pg-13",language:"en"}),e.prev=1,ee.current=!0,e.next=5,g()("".concat("https://api.giphy.com/v1/gifs/search","?").concat(t));case 5:return n=e.sent,e.next=8,n.json();case 8:o=(i=e.sent).data.map(function(e){return{id:e.id,sm:e.images.fixed_height_small.url,md:e.images.fixed_height.url}}),i.data.length&&i.pagination.count!==i.pagination.total_count||Q(!0),U(function(e){return[].concat((0,r.Z)(e),[o])}),ee.current=!1,e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",j(x.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 18:case"end":return e.stop()}},e,null,[[1,15]])})),[O,j,B]);(0,m.useEffect)(function(){U([]),R(0),Q(!1),Y(0)},[T]),(0,m.useEffect)(function(){G.length||K||ee.current||(ei(),R(function(e){return e+16}))},[G,K,ei]);var eo=(0,m.useCallback)(function(e,t){return(0,W.jsx)(S,{onClick:function(){return er(e)},children:(0,W.jsx)(_,{style:{backgroundImage:'url("'.concat(e.sm,'")')}})},t)},[er]),ea=(0,m.useCallback)(function(e,t){var n=q-1330,r=q+1330,i=665*t;return n<i&&r>i?(0,W.jsx)(Z,{children:e.map(eo)},t):(0,W.jsx)(D,{},t)},[eo,q]),es=(0,m.useCallback)(function(e){e&&!ee.current&&(ei(),R(function(e){return e+16}))},[ei]),el=(0,m.useCallback)(function(e){P(e.target.value)},[]),ec=(0,m.useCallback)(function(){P("")},[]),eu=(0,m.useCallback)(function(e){Y(e.target.scrollTop)},[]),ed=(0,m.useMemo)(function(){if(K){var e;return(0,W.jsx)(A,{children:null!==(e=G[0])&&void 0!==e&&e.length?"End of results":"No results"})}return(0,W.jsx)(h.df,{onChange:es,children:(0,W.jsx)(M,{children:(0,W.jsx)(f.D,{})})})},[es,K,G]),ep=(0,m.useMemo)(function(){return(0,W.jsxs)(I,{onScroll:eu,children:[(0,W.jsxs)("div",{children:[(0,W.jsx)(L,{value:O,autoFocus:!0,staticLabel:!0,icon:"SearchIcon",placeholder:"Search",onClear:ec,testId:"gif-picker-input",onChange:el,prefix:(0,W.jsx)(u.J,{name:"Search",style:{height:20,width:20}}),inputProps:{"data-testid":"gif-picker-input"}}),G.map(ea),ed]}),(0,W.jsx)(N,{children:(0,W.jsx)(E,{})})]})},[G,O,ed,ea,ec,eu,el]);return C?(0,W.jsx)(H,{pickerContent:ep,onOpen:o,onClose:en,ref:et}):(0,W.jsx)(p.u,{content:t,placement:"top",children:(0,W.jsx)(c.h_,J(J({customContent:ep,onShow:o,onClose:en,ref:et,contentPadding:0,shouldFlip:!0},s),{},{children:(0,W.jsx)(d.z,{variant:"icon-borderless",icon:"Gif",iconSize:40})}))})})},17590:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(59499),i=n(4730),o=n(67294),a=n(12967),s=n(73793),l=n(60678),c=n(76667),u=n(50378),d=n(20668),p=u.ZP.div.withConfig({displayName:"styled__GroupAvatarInitials",componentId:"sc-4rjnbh-0"})([""," color:",";line-height:1;"],function(e){var t=e.$variant;return d.c[t]},function(e){return e.$color}),f=n(85893),m=["group","iconSize","disableLink","newTab","borderRadius"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){var t=e.group,n=e.iconSize,u=e.disableLink,d=e.newTab,v=e.borderRadius,b=(0,i.Z)(e,m),g=(0,s.bI)("isMobile").isMobile,x=(0,o.useMemo)(function(){var e=t.metadata.logoUrl,i=t.metadata.displayName,o={width:n,height:n,borderRadius:v||(g?"5px":"10px"),backgroundColor:t.metadata.color||"inherit",display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none"};if(!e){var s=g?n>32?"t1":"t11":"t4";return(0,f.jsx)("div",{style:o,children:(0,f.jsx)(p,{$variant:s,$color:(0,a.zP)(t.metadata.color),children:t.metadata.initials})})}return(0,f.jsx)(c.q,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({variant:"rounded",style:o,alt:i,title:i,src:e},b))},[t,n,b,g,v]);return u?x:(0,f.jsx)(l.Z,{newTab:d,group:t,children:x})}v.defaultProps={iconSize:30};var b=(0,o.memo)(v)},56726:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(59499),i=n(67294),o=n(65009),a=n(14760),s=n(73475),l=n(14251),c=n(73793),u=n(85893),d=(0,i.memo)(function(e){var t,n=e.group,r=e.iconOnly,i=(0,c.bI)("isMobile").isMobile,d=(null==n||null===(t=n.metadata)||void 0===t?void 0:t.privacy)!==0,p=d?(0,u.jsx)(s.J,{name:"Private",color:l.O9.n5,size:14}):(0,u.jsx)(s.J,{name:"Public",color:l.O9.n5,size:14}),f=(0,u.jsx)(u.Fragment,{children:"".concat(d?"Private":"Public"," group")});return(0,u.jsxs)(o.X,{alignItems:"center",justifyContent:i?"center":"flex-start",children:[(0,u.jsx)("div",{style:{marginRight:8},children:p}),!r&&(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,ellipsis:!0,children:f})]})});d.defaultProps={iconOnly:!1};var p=(0,i.memo)(d),f=n(26201),m=n(53531),h=n(13053),v=n(35306),b=n(50591),g=n(12967),x=n(84236),y=n(36581),w=n(73674),C=n(50378),j=(0,C.ZP)(o.X).withConfig({displayName:"styled__StatsRow",componentId:"sc-1ptbmdu-0"})(["justify-content:space-around;border-width:1px 0px;border-color:",";border-style:solid;padding:8px 0px;& > *{flex:1 1 0;}"],l.O9.n3),k=(0,i.memo)(function(){var e,t,n=(0,c.bI)("currentGroup","self","isMobile"),r=n.currentGroup,s=n.self,d=n.isMobile,p=(0,i.useState)((null==r||null===(e=r.metadata)||void 0===e?void 0:e.totalMembers)||0),f=p[0],h=p[1],v=(0,i.useState)((null==r||null===(t=r.metadata)||void 0===t?void 0:t.totalOnlineMembers)||0),C=v[0],k=v[1],O=(0,i.useState)((null==r?void 0:r.onlineUsers)||[]),P=O[0],I=O[1],D=(0,i.useState)(0),Z=D[0],S=D[1],_=(0,i.useRef)(P.map(function(e){return e.id})),M=(0,i.useRef)(!1),N=(0,i.useRef)(),E=(0,g.s$)()?i.useEffect:i.useLayoutEffect;(0,i.useEffect)(function(){M.current=!0;var e,t=(null===(e=N.current)||void 0===e?void 0:e.clientWidth)||0;return S(t>0?Math.floor((t+2)/27):9),function(){M.current=!1}},[]),(0,i.useEffect)(function(){if((0,m.Rj)({member:null==s?void 0:s.member}))return(0,b.Ld)([(0,b.aN)(r.id)],function(e){if(M.current){h(e.totalMembers||0),k(e.totalOnlineMembers||0);var t=e.onlineUsers||[];(_.current.length!==t.length||t.find(function(e,t){return e.id!==_.current[t]}))&&(_.current=t.map(function(e){return e.id}),I(e.onlineUsers||[]))}})},[r.id,s]),E(function(){if(r&&M.current){h(null===(e=r.metadata)||void 0===e?void 0:e.totalMembers),k(null===(t=r.metadata)||void 0===t?void 0:t.totalOnlineMembers);var e,t,n=r.onlineUsers||[];(_.current.length!==n.length||n.find(function(e,t){return e.id!==_.current[t]}))&&(_.current=n.map(function(e){return e.id}),I(r.onlineUsers||[]))}},[r]);var A=(0,i.useMemo)(function(){var e,t=s&&(0,m.Wr)({member:null==s?void 0:s.member,group:r})||(null==r||null===(e=r.metadata)||void 0===e?void 0:e.privacy)===0,n=[];return t&&P.length&&Z>0&&P.forEach(function(e){n.push((0,u.jsx)(w.Z,{userPreview:!0,size:25,user:e,group:r},e.id))}),n=n.slice(0,Z)},[s,r,P,Z]),L=(0,i.useMemo)(function(){var e;return(0,u.jsxs)(y.s,{gap:16,children:[(0,u.jsxs)(j,{children:[(0,u.jsx)("div",{style:{position:"relative"},children:(0,u.jsx)(x.Z,{group:r,children:(0,u.jsxs)(y.s,{alignItems:"center",children:[(0,u.jsx)(a.Z,{variant:"t4",children:(0,g.TN)(f)}),(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,children:"Members"})]})})}),(0,u.jsx)(x.Z,{group:r,online:!0,children:(0,u.jsxs)(y.s,{alignItems:"center",style:{borderWidth:"0px 1px",borderColor:l.O9.n3,borderStyle:"solid"},children:[(0,u.jsx)(a.Z,{variant:"t4",children:(0,g.TN)(C)}),(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,children:"Online"})]})}),(0,u.jsx)(x.Z,{group:r,admin:!0,children:(0,u.jsxs)(y.s,{alignItems:"center",children:[(0,u.jsx)(a.Z,{variant:"t4",children:null==r||null===(e=r.metadata)||void 0===e?void 0:e.totalAdmins}),(0,u.jsx)(a.Z,{variant:"t11",color:l.O9.n5,children:"Admins"})]})})]}),!!A.length&&(0,u.jsx)(o.X,{gap:2,justifyContent:d?"center":"flex-start",children:A})]})},[d,A,r,f,C]);return(0,u.jsx)("div",{ref:N,children:L})}),O=n(21877),P=n(70120),I=n(59607),D=n(79698),Z=n(20668),S=C.ZP.div.withConfig({displayName:"styled__MobileGroupCardWrapper",componentId:"sc-ls68c6-0"})(["background-color:",";border-bottom:1px solid ",";"],l.O9.n1,l.O9.n3),_=C.ZP.div.withConfig({displayName:"styled__MobileGroupCardContentWrapper",componentId:"sc-ls68c6-1"})(["padding:12px 16px 16px;display:flex;flex-direction:column;align-items:center;"]),M=C.ZP.div.withConfig({displayName:"styled__MobileGroupCardImageWrapper",componentId:"sc-ls68c6-2"})(["& img{width:100%;}"]),N=C.ZP.div.withConfig({displayName:"styled__GroupLinkWrapper",componentId:"sc-ls68c6-3"})(["display:flex;align-items:center;justify-content:",";"],function(e){return e.theme.isMobile?"center":void 0}),E=C.ZP.div.withConfig({displayName:"styled__GroupNameWrapper",componentId:"sc-ls68c6-4"})(["",""],Z.c.t4),A=C.ZP.div.withConfig({displayName:"styled__GroupDescriptionWrapper",componentId:"sc-ls68c6-5"})(["",""],Z.c.t7);l.O9.n5,Z.c.t11,l.O9.n1;var L=C.ZP.div.withConfig({displayName:"styled__GroupUrl",componentId:"sc-ls68c6-9"})(["color:",";cursor:pointer;"," ",""],l.O9.n5,Z.c.t10,Z.c.ellipsis),T=n(30697);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R=(0,i.memo)(function(e){var t,n,r=e.group,o=e.canAccessGroup,a=e.groupPrivacyMessage,d=(0,c.bI)("self","isMobile"),b=d.self,g=d.isMobile,x=d.dispatch,y=(null==b||null===(t=b.member)||void 0===t?void 0:t.role)||"",w=(0,i.useState)(!1),C=w[0],j=w[1],Z=(0,m.CP)({user:b,member:null==b?void 0:b.member,group:r}),F=(null==r||null===(n=r.metadata)||void 0===n?void 0:n.archived)===1,R="userMembership";Z&&(R=F?"adminBilling":"adminInvite");var z=(0,i.useCallback)(function(){j(!1)},[j]),G=(0,i.useCallback)(function(){x("setSettingsModalState",function(e){return B(B({},e),{},{settingsModal:R})})},[x,R]),U=null;switch(y){case D.oN:case D.xC:case D.bD:break;case D.th:case D.JR:default:U=(0,u.jsx)(O.F,{})}var $=(0,i.useMemo)(function(){var e,t=(null!==(e=r.metadata)&&void 0!==e&&e.links?JSON.parse(r.metadata.links):{}).links,n=void 0===t?[]:t;if(!n.length)return null;var i={color:l.O9.n5,height:12,width:12,marginRight:8,flexShrink:0,flexBasis:12},o={color:l.O9.n5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"};return(0,u.jsx)(u.Fragment,{children:n.map(function(e,t){return(0,u.jsxs)(N,{children:[(0,u.jsx)(s.J,{name:"Link",style:i}),(0,u.jsx)(P.r,{href:e.url,label:e.label||e.url,style:o,newTab:!0})]},t)})})},[r]),W=(0,i.useCallback)(function(){navigator.clipboard.writeText("https://www.skool.com/".concat(null==r?void 0:r.name)),x(T.bI,{message:"Url copied."})},[r,x]);if(g){var q=r.metadata.logoBigUrl;return(0,u.jsxs)(S,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(M,{children:(0,u.jsx)("img",{src:q})}),(0,u.jsxs)(_,{children:[(0,u.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:(0,u.jsx)(E,{children:(0,u.jsx)(v.Z,{group:r,disableLink:!0})})}),(0,u.jsx)("div",{style:{marginBottom:16},children:(0,u.jsx)(p,{group:r})}),(0,u.jsxs)("div",{style:{marginBottom:16},children:[!r.metadata.description&&Z&&(0,u.jsx)(A,{children:"Add your group description here by clicking the “Settings” button."}),r.metadata.description&&(0,u.jsx)(h.ZP,{value:r.metadata.description,textVariant:"t7",textColor:l.O9.n7,textAlign:"center"})]}),(0,u.jsx)("div",{style:{marginBottom:16},children:$}),(0,u.jsx)("div",{style:{width:"100%",marginBottom:g?24:16},children:(0,u.jsx)(k,{})}),a&&(0,u.jsx)("div",{style:{width:"100%",marginBottom:16},children:a}),o&&(y===D.oN||y===D.xC||y===D.bD)&&(0,u.jsx)(I.z,{label:"Settings",variant:"secondary",onClick:G}),!!U&&U]})]}),(0,u.jsx)(f.Z,{type:"group",open:C,onClose:z})]})}return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{style:{marginBottom:12},children:[(0,u.jsx)("div",{children:(0,u.jsx)(E,{children:(0,u.jsx)(v.Z,{group:r})})}),(0,u.jsx)(L,{onClick:W,children:"skool.com/".concat(null==r?void 0:r.name)})]}),(0,u.jsxs)("div",{style:{marginBottom:16},children:[(0,u.jsxs)("div",{style:{marginBottom:12},children:[!r.metadata.description&&Z&&(0,u.jsx)(A,{children:"Add your group description here by clicking the “Settings” button."}),r.metadata.description&&(0,u.jsx)(h.ZP,{value:r.metadata.description,textVariant:"t7"})]}),$]}),(0,u.jsx)("div",{style:{marginBottom:16},children:(0,u.jsx)(k,{})}),o&&(y===D.oN||y===D.xC||y===D.bD)&&(0,u.jsx)(I.z,{onClick:function(){return x("setSettingsModalState",function(e){return B(B({},e),{},{settingsModal:R})})},label:"Settings",variant:"secondary",style:{width:"100%"}}),!!U&&(0,u.jsx)("div",{style:{marginBottom:8},children:U})]}),(0,u.jsx)(f.Z,{type:"group",open:C,onClose:z})]})})},193:function(e,t,n){var r=n(67294),i=n(14760);n(20668);var o=n(17590),a=n(35306),s=n(65009),l=n(85893);function c(e){var t=e.group,n=e.iconSize,r=e.variant,c=e.iconOnly,u=e.disableLink,d=e.borderRadius;return(0,l.jsxs)(s.X,{gap:8,alignItems:"center",children:[(0,l.jsx)(o.Z,{group:t,iconSize:n,disableLink:u,borderRadius:d}),!c&&(0,l.jsx)(i.Z,{variant:r,style:{lineHeight:1.2,textTransform:"inherit"},children:(0,l.jsx)(a.Z,{group:t,underline:"none",disableLink:u})})]})}c.defaultProps={iconSize:30,variant:"t1",iconOnly:!1,disableLink:!1},t.Z=(0,r.memo)(c)},35306:function(e,t,n){var r=n(67294),i=n(60678),o=n(85893);function a(e){var t=e.group,n=e.disableLink,r=e.underline,a=t?t.metadata.displayName:"";return!t||n?a:(0,o.jsx)(i.Z,{group:t,underline:r,children:a})}a.defaultProps={underline:"hover"},t.Z=(0,r.memo)(a)},11990:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(50029),i=n(64687),o=n.n(i),a=n(67294),s=n(83913),l=n(95419),c=n(14251),u=n(64727),d=n(42668),p=n(73793),f=n(20452),m=n(36581),h=n(16531),v=n(50378),b=n(59607),g=n(65009),x=n(20668),y=(0,v.ZP)(b.z).withConfig({displayName:"styled__ConfirmButton",componentId:"sc-1xokg6b-0"})(["width:100%;"]),w=v.ZP.div.withConfig({displayName:"styled__DragLabel",componentId:"sc-1xokg6b-1"})(["text-align:center;color:",";",";"],function(e){return e.theme.isDarkTheme?c.O9.n7:c.O9.n1},x.c.t7),C=v.ZP.div.withConfig({displayName:"styled__ZoomLabel",componentId:"sc-1xokg6b-2"})(["color:",";",";"],function(e){return e.theme.isDarkTheme?c.O9.n7:c.O9.n1},x.c.t7),j=(0,v.iv)(["display:none;"]),k=(0,v.ZP)(g.X).withConfig({displayName:"styled__ChangeImageRow",componentId:"sc-1xokg6b-3"})(["justify-content:center;margin-top:16px;",";",""],x.c.t7,function(e){return e.theme.isMobile&&j}),O=v.ZP.span.withConfig({displayName:"styled__ChangeImageLink",componentId:"sc-1xokg6b-4"})(["cursor:pointer;color:",";"],c.O9.sd1),P=(0,v.iv)(["background:",";height:2px;background:linear-gradient( 90deg,"," 0%,"," var(--percentage),","61 var(--percentage),","61 100% );"],c.O9.n3,c.O9.n3,c.O9.n3,c.O9.n5,c.O9.n5),I=(0,v.iv)(["-webkit-appearance:none;appearance:none;margin-top:-6px;border:none;border-radius:50%;background-color:",";height:14px;width:14px;"],c.O9.primary),D=v.ZP.input.withConfig({displayName:"styled__Slider",componentId:"sc-1xokg6b-5"})(["-webkit-appearance:none;appearance:none;background:transparent;cursor:pointer;margin:0;width:100%;height:15px;&::-webkit-slider-runnable-track{","}&::-moz-range-track{","}&::-ms-track{","}&::-webkit-slider-thumb{","}&::-moz-range-thumb{","}&::-ms-thumb{","}"],P,P,P,I,I,I),Z=n(85893),S=(0,f.$o)();function _(){return(_=(0,r.Z)(o().mark(function e(t,n,r){var i,a,s,l,c,u,p,f,m,h,v,b,g;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(i=document.createElement("canvas")).getContext("2d"),l=Math.sqrt(Math.min(1,16777216/((s=2*Math.max(t.width,t.height))*s))),s*=l,i.width=s,i.height=s,c=s/2-.5*t.width*l,u=s/2-.5*t.height*l,p=t.width*l,f=t.height*l,a.drawImage(t,c,u,p,f),m=a.getImageData(0,0,s,s),h=n.width*l,v=n.height*l,i.width=h,i.height=v,b=0-s/2+.5*t.width*l-n.x*l,g=0-s/2+.5*t.height*l-n.y*l,a.putImageData(m,b,g),e.abrupt("return",(0,d.Bi)({src:i.toDataURL(r)}));case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t,n,r){var i=document.createElement("canvas"),o=i.getContext("2d");return i.width=t,i.height=n,o.drawImage(e,0,0,t,n),new Promise(function(e){i.toBlob(function(t){return e(t)},r)})}function N(e){var t=e.open,n=e.image,i=e.imageContentType,d=e.title,f=e.cropShape,v=e.minWidth,b=e.minHeight,g=e.uploadFileName,x=e.onSuccess,j=e.onError,P=e.onCancel,I=e.waitForPostProcessing,N=e.fileInputRef,E=e.fileOwnerID,A=(0,a.useState)(null),L=A[0],T=A[1],F=(0,a.useState)(!1),B=F[0],R=F[1],z=(0,a.useState)({x:0,y:0}),G=z[0],U=z[1],$=(0,a.useState)(1),W=$[0],q=$[1],H=(0,a.useState)(null),V=H[0],Y=H[1],J=(0,p.bI)("self","isMobile"),X=J.self,K=J.isMobile,Q=v/b,ee=Math.max(1,Math.min(n.width/v,n.height/b));(0,a.useEffect)(function(){T(n.toDataURL(i)),q(1),U({x:0,y:0}),Y(null)},[n,i]);var et=(0,a.useCallback)(function(e,t){Y(t)},[]),en=(0,a.useCallback)((0,r.Z)(o().mark(function e(){var t,r,i,a,s,c;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),t="image/jpeg",e.next=4,function(e,t,n){return _.apply(this,arguments)}(n,V,t);case 4:if(!((r=e.sent).height<b||r.width<v)){e.next=11;break}return e.next=8,M(r,r.width,r.height,t);case 8:i=e.sent,e.next=14;break;case 11:return e.next=13,M(r,v,b,t);case 13:i=e.sent;case 14:return e.next=16,l.Z.createFile({fileName:"".concat(g,".jpg"),contentType:t,contentLength:i.size,ownerID:E});case 16:if(s=(a=e.sent).data,!a.error){e.next=22;break}return j&&j("Failed to upload profile picture"),e.abrupt("return");case 22:return e.prev=22,e.next=25,(0,u.cT)({fileID:s.file.id,writeUrl:s.writeUrl,acl:s.acl,contentType:s.contentType,data:i,timeout:6e4,waitToken:I?s.waitToken:void 0,userID:I?null==X?void 0:X.id:void 0});case 25:(c=e.sent)&&x&&x(c),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(22),j&&j("Failed to process profile picture");case 32:case"end":return e.stop()}},e,null,[[22,29]])})),[V,E,n,b,v,j,x,X,g,I]);(0,a.useEffect)(function(){K&&V&&n&&en()},[K,en,n,V]);var er=(0,a.useCallback)(function(e){q(e.target.value)},[]),ei=(0,a.useMemo)(function(){return{position:"relative",minWidth:200,minHeight:200,backgroundColor:"#000000",marginTop:20}},[]),eo=(0,a.useMemo)(function(){return Math.floor(10*ee)/10},[ee]),ea=(0,a.useMemo)(function(){return"".concat((W-1)/(eo-1)*100,"%")},[eo,W]),es=(0,Z.jsxs)(m.s,{style:{backgroundColor:"#000000",borderRadius:10,visibility:K?"hidden":void 0,height:K?0:void 0,overflow:K?"hidden":void 0},gap:4,marginBottom:16,children:[(0,Z.jsx)("div",{style:ei,children:(0,Z.jsx)(s.Z,{cropShape:f,image:L,crop:G,zoom:W,maxZoom:ee,aspect:Q,showGrid:!0,onCropChange:U,onCropComplete:et,style:{cropAreaStyle:{border:"2px solid ".concat(S?c.O9.n7:c.O9.n1)}},onZoomChange:q})}),1!==ee&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(w,{children:"Drag to reposition photo"}),(0,Z.jsx)("div",{style:{paddingLeft:18,paddingRight:16},children:(0,Z.jsx)(C,{children:"Zoom"})}),(0,Z.jsx)("div",{style:{padding:"6px 16px 6px 18px"},children:(0,Z.jsx)(D,{type:"range",value:W,min:1,max:eo,step:.1,onChange:er,style:{"--percentage":ea}})})]})]});return(0,Z.jsxs)(h.u_,{open:t,size:"small",onClose:P,children:[(0,Z.jsx)(h.xB,{style:{textAlign:"center"},children:K?"Uploading image...":d}),(0,Z.jsx)(h.fe,{children:es}),(0,Z.jsxs)(h.mz,{children:[(0,Z.jsx)(y,{label:B?"Processing...":"Save",onClick:en,disabled:B}),N?(0,Z.jsxs)(k,{justifyContent:"center",marginTop:16,children:["Or,","\xa0",(0,Z.jsx)(O,{onClick:function(){N.current.click(),N.current.value=null},children:"upload a different photo"})]}):void 0]})]})}N.defaultProps={cropShape:"round"};var E=(0,a.memo)(N)},21877:function(e,t,n){n.d(t,{F:function(){return Z}});var r=n(50029),i=n(64687),o=n.n(i),a=n(67294),s=n(73793),l=n(14251),c=n(59607),u=n(11163),d=n(95419),p=n(5095),f=n(91194),m=n(99802),h=n(53531),v=n(67256),b=n(79698),g=n(30697),x=n(50378),y=n(20668),w=x.ZP.div.withConfig({displayName:"styled__JoinGroupButtonWrapper",componentId:"sc-f3r574-0"})(["display:flex;flex-direction:column;"]),C=(0,x.iv)(["text-align:center;margin-top:16px;"]),j=x.ZP.div.withConfig({displayName:"styled__MembershipMessage",componentId:"sc-f3r574-1"})(["margin-top:8px;"," color:",";",""],y.c.t11,l.O9.n5,function(e){return e.theme.isMobile&&C});l.O9.n1;var k=x.ZP.button.withConfig({displayName:"styled__CancelButton",componentId:"sc-f3r574-4"})(["background:none;border:none;cursor:pointer;padding:0 5px;margin-top:8px;align-self:center;color:",";"," &:hover{text-decoration:underline;}"],l.O9.n5,y.c.t11),O=n(97221),P=n(5212),I=n(38449),D=n(85893),Z=(0,a.memo)(function(e){var t,n=e.joinLabel,i=e.autoJoin,x=void 0===i||i,y=(0,s.bI)("self","currentGroup","canShowSurvey"),C=y.self,P=y.dispatch,Z=y.canShowSurvey,S=y.currentGroup,_=(0,u.useRouter)(),M=(null==C||null===(t=C.member)||void 0===t?void 0:t.role)||"";(0,a.useEffect)(function(){var e=[];(0,p.GG)(_.query)&&e.push("jg","aj"),(0,p.gf)(_.query)&&e.push("auth"),e.length&&(0,f.$Z)(_,e)},[_]);var N=(0,a.useCallback)((0,r.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,f.gx)(_,(0,p.AZ)({groupName:S.name}));case 1:case"end":return e.stop()}},e)})),[_,S]),E=(0,a.useCallback)(function(){P(g.nx,!0)},[P]),A=(0,a.useCallback)((0,r.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.cancelJoinGroup({groupName:S.name});case 2:return e.sent.error&&(0,v.Lx)({message:"There was an issue with your request, please try again.",severity:"error"}),(0,I.P3)({eventName:I.qI.userPendingCancel,userID:null==C?void 0:C.id,metadata:(0,I.Ju)({currentGroup:S})}),e.next=8,(0,f.H5)(_);case 8:case"end":return e.stop()}},e)})),[S,null==C?void 0:C.id,_]),L=(0,a.useMemo)(function(){return M===b.JR&&Z?(0,D.jsx)(c.z,{onClick:E,label:"Answer Questions",style:{width:"100%"}}):null},[M,Z,E]),T=(0,a.useMemo)(function(){var e="",t="JOIN GROUP",r=null,i=null;if(null!=S&&null!==(o=S.metadata)&&void 0!==o&&o.currentMBp){var o,a,s=(0,m.O5)(JSON.parse(null==S||null===(a=S.metadata)||void 0===a?void 0:a.currentMBp));t="JOIN ".concat(s," /month")}switch(n&&(t=n),M){case b.oN:case b.xC:case b.bD:break;case b.th:e="Sorry, you've been banned from this group.",r=(0,D.jsx)(c.z,{label:"Banned",disabled:!0,style:{width:"100%"}});break;case b.JR:i=(0,D.jsx)(k,{type:"button",onClick:A,children:"Cancel membership request"}),r=(0,D.jsx)(c.z,{disabled:!0,label:"Membership Pending",style:{width:"100%",color:l.O9.n7}});break;default:r=(0,D.jsx)(O.Z,{reason:h.lT.JoinGroup,onSuccess:N,showSignUp:!0,autoJoin:x,children:function(e){var n=e.onClick,r=e.disabled;return(0,D.jsx)(c.z,{onClick:n,label:t,boxShadow:!0,disabled:r,style:{width:"100%",textTransform:"none",padding:"0px 16px"}})}})}return{membershipMessage:e?(0,D.jsx)(j,{children:e}):null,membershipButton:r,cancelRequestButton:i}},[N,A,S,M,n,x]),F=T.membershipMessage,B=T.membershipButton,R=T.cancelRequestButton;return(0,D.jsxs)(w,{children:[B,!!L&&(0,D.jsx)("div",{style:{marginTop:8,width:"100%"},children:L}),R,F]})});Z.propTypes={joinLabel:(0,P.nz)({required:!1}),autoJoin:(0,P.gZ)({required:!1})}},26201:function(e,t,n){n.d(t,{Z:function(){return S}});var r=n(90116),i=n(4730),o=n(59499),a=n(50029),s=n(64687),l=n.n(s),c=n(67294),u=n(12476),d=n(73793),p=n(95419),f=n(96486),m=n.n(f),h=n(30697),v=n(36581),b=n(64597),g=[{key:"digest",header:"Digest email frequency",label:"A summary of popular posts and member activity when you don’t visit the group",defaultLabel:"Weekly",selections:[{value:"1d",label:"Daily"},{value:"7d",label:"Weekly"},{value:"14d",label:"Every 14-Days"},{value:"30d",label:"Monthly"},{value:"off",label:"Never"}]},{header:"Notifications email frequency",key:"emails",label:"A bundled summary of unread likes, comments, mentions and activity for posts/members I follow",defaultLabel:"Hourly",selections:[{value:"5m",label:"5-mins"},{value:"1h",label:"Hourly"},{value:"3h",label:"3-hours"},{value:"6h",label:"6-hours"},{value:"12h",label:"12-hours"},{value:"1d",label:"Daily"},{value:"2d",label:"Every 2nd day"},{value:"7d",label:"Weekly"},{value:"off",label:"Never"}]},{key:"likes",header:"Post likes notifications",label:"Notify me when somebody likes my post",defaultLabel:"Notify me",selections:[{value:"on",label:"Notify me"},{value:"off",label:"Don't notify me"}]},{key:"admin-posts",header:"Admin announcements",label:"Notify me when group admins make announcement posts",defaultLabel:"Yes",selections:[{value:"on",label:"Yes"},{value:"off",label:"No"}]},{key:"calendar-event",header:"Event reminders",label:"Notify me of calendar events the day before they happen",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]}],x=[{key:"new-post",labelFunc:function(e){var t=e.firstName;return"When ".concat(t," posts in a group I’m in")},defaultLabel:"Notify me",selections:[{value:"on",label:"Notify me"},{value:"off",label:"Don't notify me"}]},{key:"new-comment",labelFunc:function(e){var t=e.firstName;return"When ".concat(t," comments in a group I’m in")},defaultLabel:"Don't notify me",selections:[{value:"on",label:"Notify me"},{value:"off",label:"Don't notify me"}]}],y=[{key:"new-member-billing-email",header:"New customer emails",label:"Notify me when my group gets a new customer",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]}],w=n(50378),C=n(20668),j=w.ZP.div.withConfig({displayName:"styled__PrefHeader",componentId:"sc-214xon-0"})(["",""],C.c.t4),k=w.ZP.div.withConfig({displayName:"styled__PrefLabel",componentId:"sc-214xon-1"})(["word-wrap:break-word;",""],C.c.t7),O=w.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-214xon-2"})(["margin-top:16px;width:100%;> div > div:first-child{width:100%;button{width:100%;}}"]),P=n(85893),I=["key"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=(0,c.memo)(function(e){var t,n=e.onClose,s=e.open,f=e.type,w=e.group,C=e.handleUpdated,D=(0,c.useState)({}),S=D[0],_=D[1],M=(0,c.useState)(!0),N=M[0],E=M[1],A=(0,d.bI)("currentGroup","currentUser"),L=A.currentGroup,T=A.currentUser,F=A.dispatch,B=(0,c.useRef)(null),R="group"===f,z=w||L,G=R?"nfg-".concat(null==z?void 0:z.id):"nfu-".concat(null==T?void 0:T.id);(0,c.useEffect)(function(){(0,a.Z)(l().mark(function e(){var t,n;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=8;break}return E(!0),e.next=4,p.Z.getPrefs({category:G});case 4:null!=(t=e.sent.data)&&t.length?(n={},t.forEach(function(e){var t=e.key,r=e.value;n[t]=r}),_(n),B.current=n):(B.current={},_({})),E(!1);case 8:case"end":return e.stop()}},e)}))()},[s,R,G]);var U=(0,c.useCallback)((0,a.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),t=Object.keys(S).map(function(e){return{key:e,value:S[e]}}),e.next=4,p.Z.postPrefs({category:G,body:t});case 4:F(h.bI,{message:"Notification settings updated"}),E(!1),n(),C&&C();case 8:case"end":return e.stop()}},e)})),[G,F,C,n,S]),$=(0,c.useCallback)(function(e,t){_(function(n){return Z(Z({},n),{},(0,o.Z)({},e,t))})},[]),W=(0,c.useCallback)(function(e){var t=e.key,n=(0,i.Z)(e,I);return Z(Z({key:t},n),{},{selections:n.selections.map(function(e){return Z(Z({},e),{},{active:S[t]?S[t]===e.value:n.defaultLabel===e.label,onClick:function(){return $(t,e.value)}})})})},[$,S]),q=(0,c.useMemo)(function(){var e=g.map(W);if(null!=z&&z.billingMgr){var t=y.map(W);return[].concat((0,r.Z)(e),(0,r.Z)(t))}return e},[W,null==z?void 0:z.billingMgr]),H=(0,c.useMemo)(function(){return x.map(W)},[W]),V=(0,c.useCallback)(function(e,t){var n,r=e.key,i=e.label,o=e.labelFunc,a=e.defaultLabel,s=e.selections,l=e.header,c=s.find(function(e){return e.value===S[r]}),d=null!==(n=null==c?void 0:c.label)&&void 0!==n?n:a;return(0,P.jsxs)(v.s,{gap:8,children:[(0,P.jsx)(j,{children:l}),(0,P.jsx)(k,{children:R?i:o(T)}),(0,P.jsx)(O,{children:(0,P.jsx)(u.h_,{variant:"input",fitButton:!0,label:d,options:s,shouldFlip:!0})})]},t)},[T,R,S]),Y=R?q:H;return(0,P.jsx)(b.T,{size:"small",open:s,header:R?null==z||null===(t=z.metadata)||void 0===t?void 0:t.displayName:"".concat(null==T?void 0:T.firstName," ").concat(null==T?void 0:T.lastName),disabled:N||m().isEqual(B.current,S),onConfirm:U,onCancel:n,onClose:n,confirmLabel:"Save",scrollable:!0,children:(0,P.jsxs)(v.s,{gap:32,children:["Notification settings",(0,P.jsx)(v.s,{gap:32,children:Y.map(V)})]})})})},66271:function(e,t,n){n.d(t,{t:function(){return D}});var r=n(50029),i=n(64687),o=n.n(i),a=n(67294),s=n(12476),l=n(73475),c=n(59607),u=n(85064),d=n(73793),p=n(50378),f=n(20668),m=n(14251),h=p.ZP.div.withConfig({displayName:"styled__PaymentMethodFieldDropdownWrapper",componentId:"sc-td3dmq-0"})(["display:flex;flex-direction:column;> div{> div:first-child{width:100%;> button{width:100%;}}}"]),v=p.ZP.div.withConfig({displayName:"styled__PaymentMethodItem",componentId:"sc-td3dmq-1"})(["display:flex;align-items:center;> img{width:24px;margin-right:14px;border-radius:2px;border:1px solid ",";}> div{text-transform:capitalize;color:",";","}"],m.O9.n3,function(e){return e.$active?m.O9.fgPrimary:m.O9.n7},f.c.t6),b=(0,p.ZP)(v).withConfig({displayName:"styled__AddNewCardItem",componentId:"sc-td3dmq-2"})(["padding-left:6px;> div:first-child{height:14px;width:14px;margin-right:20px;color:",";}> div{text-transform:none;}"],m.O9.n5),g=p.ZP.div.withConfig({displayName:"styled__AddNewCardWrapper",componentId:"sc-td3dmq-3"})(["display:flex;flex-direction:column;"]),x=p.ZP.div.withConfig({displayName:"styled__NewCardLabel",componentId:"sc-td3dmq-4"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;"," > button{align-self:flex-end;height:fit-content;width:fit-content;}"],f.c.t11),y=n(95419),w=n(5565),C=n(23332),j=n(30697),k=n(85893),O=(0,a.forwardRef)(function(e,t){var n=e.paymentMethodsCount,i=e.onReady,s=e.addPaymentMethod,l=void 0===s||s,c=e.paymentElementOnChange,u=(0,d.bI)().dispatch,p=(0,a.useState)(null),f=p[0],m=p[1],h=(0,a.useState)(!1),v=h[0],b=h[1],g=(0,a.useRef)(),x=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"There was an issue with your request, please try again.";u(j.bI,{message:e,severity:"error"})},[u]),w=(0,a.useCallback)((0,r.Z)(o().mark(function e(){var t,n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Z.createMembershipBilling();case 2:n=(t=e.sent).data,(t.error||!(null!=n&&n.clientSecret))&&x(),m(n);case 7:case"end":return e.stop()}},e)})),[x]);return(0,a.useEffect)(function(){w()},[w]),(0,a.useImperativeHandle)(t,function(){var e;return{refetchIntent:w,addNewCard:(e=(0,r.Z)(o().mark(function e(){var t,r,i,a,s;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.current.handleIntentConfirmation(null);case 3:t=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),b(!1),e.abrupt("return",{stripeError:e.t0.message||!0});case 10:if(!l){e.next=22;break}return e.next=13,y.Z.addPaymentMethod({paymentToken:t});case 13:if(a=(i=e.sent).data,s=i.error,(null==a||null===(r=a.paymentMethods)||void 0===r?void 0:r.length)!==n){e.next=19;break}return x("Card already added"),e.abrupt("return",{stripeError:!0});case 19:if(!s){e.next=22;break}return x(),e.abrupt("return",{stripeError:!0});case 22:return e.abrupt("return",{id:t,newCard:!0});case 23:case"end":return e.stop()}},e,null,[[0,6]])})),function(){return e.apply(this,arguments)})}}),(0,k.jsx)(C.Z,{onReady:i,isBilling:!0,ref:g,style:{margin:0},isLoading:v,intentClientSecret:null==f?void 0:f.clientSecret,paymentElementOnChange:c})}),P=(0,a.memo)(O),I=(0,a.forwardRef)(function(e,t){var n=e.onAddNewCard,i=e.fetchPayments,p=void 0===i||i,f=e.paymentMethods,m=e.addPaymentMethod,C=e.allowAddNewCard,j=void 0===C||C,O=e.label,I=e.onPaymentMethodChange,D=e.initialPaymentId,Z=e.hiddenCards,S=void 0===Z?[]:Z,_=e.initLoading,M=e.onReady,N=e.onInitialized,E=e.paymentElementOnChange,A=(0,a.useState)(!0),L=A[0],T=A[1],F=(0,a.useState)([]),B=F[0],R=F[1],z=(0,a.useState)(0),G=z[0],U=z[1],$=(0,a.useState)(!1),W=$[0],q=$[1],H=(0,a.useRef)(),V=(0,a.useRef)(!1),Y=(0,a.useRef)(!1),J=(0,d.bI)("isMobile").isMobile;(0,a.useEffect)(function(){null==M||M(!!B.length)},[B,M]);var X=(0,a.useMemo)(function(){return B.filter(function(e){return!S.includes(e.stripePaymentMethodId)})},[B,S]),K=(0,a.useMemo)(function(){return W||!X.length},[W,X]);(0,a.useEffect)(function(){f&&(R(f),T(!1))},[f]),(0,a.useEffect)(function(){if(!L&&D&&!V.current){V.current=!0;var e=B.findIndex(function(e){return e.stripePaymentMethodId===D});e>-1&&U(e)}},[L,D,B]),(0,a.useEffect)(function(){null==I||I(K?null:B[G])},[K,I,B,G]);var Q=(0,a.useCallback)((0,r.Z)(o().mark(function e(){var t,n,r,i=arguments;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(i.length>0&&void 0!==i[0]?i[0]:{}).selectedPaymentMethodId,e.next=3,y.Z.getPaymentMethods();case 3:return R(r=(null==(n=e.sent.data)?void 0:n.paymentMethods)||[]),t&&(U(r.findIndex(function(e){return e.stripePaymentMethodId===t})),q(!1)),T(!1),e.abrupt("return",r);case 10:case"end":return e.stop()}},e)})),[]);(0,a.useImperativeHandle)(t,function(){var e,t,n;return{refetchIntent:null==H||null===(e=H.current)||void 0===e?void 0:e.refetchIntent,getSelectedPayment:(t=(0,r.Z)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=5;break}return e.next=3,H.current.addNewCard();case 3:return t=e.sent,e.abrupt("return",t);case 5:return e.abrupt("return",{id:X[G].stripePaymentMethodId});case 6:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),handleDeclinedCard:(n=(0,r.Z)(o().mark(function e(t){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q({selectedPaymentMethodId:t});case 2:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}});var ee=(0,a.useCallback)((0,r.Z)(o().mark(function e(){var t;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return e.next=3,Q();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=f;case 7:t=e.t0,null==N||N(!!(null!=t&&t.length));case 9:case"end":return e.stop()}},e)})),[p,Q,f,N]);(0,a.useEffect)(function(){Y.current||(Y.current=!0,ee())},[ee]);var et=(0,a.useCallback)(function(e,t){var n,r=e.brand,i=e.last4;return(0,k.jsxs)(v,{$active:t,children:[(0,k.jsx)("img",{src:null===(n=w.g[r])||void 0===n?void 0:n.logo}),(0,k.jsx)("div",{children:"".concat(r," ").concat(J?"••••":"•••• •••• ••••"," ").concat(i)})]})},[J]),en=(0,a.useMemo)(function(){var e=X.map(function(e,t){return{label:et(e,t===G),active:t===G,onClick:function(){return U(t)}}});return j&&B.length<20&&e.push({label:(0,k.jsxs)(b,{children:[(0,k.jsx)(l.J,{name:"Plus"}),(0,k.jsx)("div",{children:"Add new card"})]}),onClick:function(){null==n||n(),q(!0)}}),e},[B,X,et,G,j,n]),er=(0,a.useMemo)(function(){return X.length?et(X[G]):null},[G,X,et]),ei=(0,a.useCallback)(function(){q(!1)},[]);return L||void 0!==_&&_?(0,k.jsx)(u.D,{fitWidth:!0}):K?(0,k.jsxs)(g,{children:[(0,k.jsxs)(x,{children:[(0,k.jsx)("span",{children:O}),!!X.length&&(0,k.jsx)(c.z,{variant:"link",label:"Use an existing card",onClick:ei})]}),(0,k.jsx)(P,{onReady:M,ref:H,addPaymentMethod:void 0===m||m,paymentMethodsCount:B.length,paymentElementOnChange:E})]}):(0,k.jsxs)(h,{children:[O&&(0,k.jsx)(x,{children:O}),(0,k.jsx)(s.h_,{options:en,label:er,variant:"input",fitButton:!0})]})}),D=(0,a.memo)(I)},15673:function(e,t,n){n.d(t,{J:function(){return f}});var r=n(67294),i=n(85064),o=n(50378),a=n(14251),s=o.ZP.div.withConfig({displayName:"styled__PopoverListWrapper",componentId:"sc-1ucrcaa-0"})(["position:relative;display:flex;flex-direction:column;"]),l=(0,o.iv)(["height:62px;"]),c=o.ZP.div.withConfig({displayName:"styled__PopoverHeader",componentId:"sc-1ucrcaa-1"})(["height:52px;padding:0px 16px;background-color:",";border-bottom:1px solid ",";top:0px;width:100%;position:sticky;z-index:1;",""],a.O9.n1,a.O9.n3,function(e){return e.theme.isMobile&&l}),u=o.ZP.div.withConfig({displayName:"styled__PopoverItems",componentId:"sc-1ucrcaa-2"})([""]),d=o.ZP.div.withConfig({displayName:"styled__LoadingWrapper",componentId:"sc-1ucrcaa-3"})(["height:60px;display:flex;justify-content:center;align-items:center;"]),p=n(85893),f=(0,r.memo)(function(e){var t=e.headerItem,n=e.items,o=e.loading,a=(0,r.useMemo)(function(){return o?(0,p.jsx)(d,{children:(0,p.jsx)(i.D,{})}):(0,p.jsxs)(s,{children:[t&&(0,p.jsx)(c,{children:t}),(0,p.jsx)(u,{children:n})]})},[o,t,n]);return(0,p.jsx)(s,{children:a})})},36195:function(e,t,n){n.d(t,{Z:function(){return eg}});var r=n(17674),i=n(90116),o=n(4730),a=n(59499),s=n(50029),l=n(64687),c=n.n(l),u=n(67294),d=n(96486),p=n.n(d),f=n(15948),m=n(95419),h=n(64727),v=n(42668),b=n(12967),g=n(31545),x=n(73793),y={imageSize:210,videoWidth:369.6,videoHeight:210},w={imageSize:100,videoWidth:176,videoHeight:100},C=n(73475),j=n(14251),k=n(50378),O=n(70299),P=k.ZP.div.withConfig({displayName:"styled__ScrollWrapper",componentId:"sc-gakbut-0"})(["display:flex;overflow:auto;margin-top:8px;margin-bottom:0px;",""],O.KZ),I=k.ZP.div.withConfig({displayName:"styled__ScrollRight",componentId:"sc-gakbut-1"})(["position:absolute;right:8px;"]),D=k.ZP.div.withConfig({displayName:"styled__ScrollLeft",componentId:"sc-gakbut-2"})(["position:absolute;left:8px;"]),Z="\n  background-color: transparent;\n  position: relative;\n  border-radius: 10px;\n  border: 1px solid ".concat(j.O9.n3,";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n"),S=k.ZP.div.withConfig({displayName:"styled__FilePlaceholder",componentId:"sc-gakbut-3"})([""," width:","px;height:","px;"],Z,function(e){return e.$size},function(e){return e.$size}),_=k.ZP.div.withConfig({displayName:"styled__VideoPlaceholder",componentId:"sc-gakbut-4"})([""," width:","px;height:","px;background-position:center center;background-size:cover;background-repeat:no-repeat;"],Z,function(e){return e.$width},function(e){return e.$height}),M=k.ZP.div.withConfig({displayName:"styled__AddAttachmentWrapper",componentId:"sc-gakbut-5"})(["width:","px;height:","px;position:relative;border-radius:10px;border:2px dashed ",";cursor:pointer;background-color:transparent;display:flex;align-items:center;justify-content:center;"],function(e){return e.$size},function(e){return e.$size},j.O9.n3),N=n(85893),E=(0,u.memo)(function(e){var t=e.onFileInputChange,n=e.isComment,r=(0,u.useRef)((0,b.c9)()),i=(0,u.useCallback)(function(e){t&&t(e)},[t]),o=n?w.imageSize:y.imageSize;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("input",{type:"file",style:{display:"none"},accept:(0,h.Yw)(),multiple:!0,onChange:i,id:"file-upload-input-".concat(r.current)}),(0,N.jsx)("label",{htmlFor:"file-upload-input-".concat(r.current),children:(0,N.jsx)(M,{$size:o,children:(0,N.jsx)(C.J,{name:"Add",color:j.O9.n5,size:20})})})]})}),A=n(59607),L=n(36581),T=n(85064),F=n(320),B=n(20668),R=(0,k.iv)(["background-color:rgba(255,255,255,0.7);border-radius:50%;position:absolute;top:4px;visibility:",";z-index:1;display:flex;justify-content:center;align-items:center;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),z=k.ZP.div.withConfig({displayName:"styled__ExpandThumbnailButton",componentId:"sc-p0svxm-0"})([""," left:4px;"],R),G=k.ZP.div.withConfig({displayName:"styled__DeleteThumbnailButton",componentId:"sc-p0svxm-1"})([""," right:4px;"],R),U=k.ZP.div.withConfig({displayName:"styled__PostAttachmentsImage",componentId:"sc-p0svxm-2"})(["&:hover ",",&:hover ","{visibility:inherit;}overflow:hidden;"],z,G),$=k.ZP.div.withConfig({displayName:"styled__FileName",componentId:"sc-p0svxm-3"})(["word-break:break-word;max-height:39px;overflow-y:hidden;",""],B.c.t10),W=k.ZP.div.withConfig({displayName:"styled__FileMeta",componentId:"sc-p0svxm-4"})(["color:",";",""],j.O9.n5,B.c.t11),q=k.ZP.div.withConfig({displayName:"styled__FileThumbnailGeneralFile",componentId:"sc-p0svxm-5"})(["position:absolute;top:0;left:0;width:100%;height:100%;user-select:none;cursor:",";background:",";"],function(e){return e.$isEditing?"move":"inherit"},j.O9.n1),H="processing",V="ready";function Y(e){var t,n,r,i,o=e.post,a=e.file,l=e.editing,d=e.onClick,p=e.onDelete,f=e.onUpload,m=e.onShowPreview,v=e.isComment,b=(0,u.useState)(a.upload?H:V),g=b[0],x=b[1],C=v?w.imageSize:y.imageSize;if(a.upload)i=a.upload.src;else{var k=a.metadata,O=k.imageMdHeight,P=k.imageMdWidth,I=k.imageMdUrl;"image/gif"===a.metadata.contentType?i=a.metadata.readUrl:I&&O>=C&&P>=C&&(i=I),i=i||a.metadata.readUrl||a.metadata.srcReadUrl}var D=(0,u.useState)(i),Z=D[0],S=D[1],_=(0,u.useRef)(!1),M=(null===(t=a.metadata)||void 0===t?void 0:t.fileName)||"file",E=M.lastIndexOf(".")>=0?M.slice(M.lastIndexOf(".")):"",B=(null===(n=a.metadata)||void 0===n?void 0:n.contentType)||"",R=B.startsWith("image/")&&!(0,h.ZP)(B),Y=parseInt(null===(r=a.metadata)||void 0===r?void 0:r.srcContentLength)||0,J=(0,u.useRef)(!1);(0,u.useEffect)(function(){return _.current=!0,function(){_.current=!1}},[]),(0,u.useEffect)(function(){J.current=!1},[a]),(0,u.useEffect)(function(){a.upload&&!J.current&&(J.current=!0,(0,s.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.cT)({fileID:a.id,writeUrl:a.upload.writeUrl,acl:a.upload.acl,contentType:a.upload.contentType,data:a.upload.data,timeout:6e4});case 3:(t=e.sent)&&(_.current&&(R&&S(t.metadata.srcReadUrl),x(V)),f&&f(t)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),p&&p(a);case 11:case"end":return e.stop()}},e,null,[[0,7]])}))())},[a,p,f,R]);var X=(0,u.useCallback)(function(){!l&&d&&d({post:o,file:a})},[d,l,o,a]),K=(0,u.useMemo)(function(){switch(g){case"uploading":return{width:C,height:C,borderRadius:10,border:"1px solid ".concat(j.O9.n3),backgroundColor:j.O9.n3,display:"flex",alignItems:"center",justifyContent:"center"};case H:return{backgroundColor:j.O9.n3,width:C,height:C,position:"relative",borderRadius:10,border:"1px solid ".concat(j.O9.n3),cursor:l?"default":"zoom-in",display:"flex",alignItems:"center",justifyContent:"center",opacity:1};case V:return{backgroundColor:j.O9.n3,width:C,height:C,position:"relative",borderRadius:10,border:"1px solid ".concat(j.O9.n3),backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",cursor:l?"move":"zoom-in",backgroundImage:R?'url("'.concat(Z,'")'):void 0}}},[g,l,Z,R,C]),Q=(0,u.useMemo)(function(){var e=(0,h.F5)({ext:E,contentType:B}),t=(null==e?void 0:e.name)||"File";return(0,N.jsx)(q,{$isEditing:l,style:{opacity:g!==V?0:1},children:(0,N.jsxs)(L.s,{padding:12,gap:24,style:{height:"100%"},children:[(0,N.jsx)(F.a,{fileName:M,contentType:B,size:v?24:48}),(0,N.jsxs)(L.s,{gap:8,style:{overflowY:"hidden"},children:[(0,N.jsx)($,{children:M}),(0,N.jsx)(W,{children:"".concat(t," • ").concat(Y>=1048576?"".concat(Math.round(Y/1048576),"mb"):Y>=1024?"".concat(Math.round(Y/1024),"kb"):"1kb")})]})]})})},[M,E,B,Y,g,v,l]);return(0,N.jsxs)(U,{style:K,onClick:X,children:[l&&g===V&&(0,N.jsx)(z,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Expand",onClick:m,iconSize:16.66})}),l&&g===V&&(0,N.jsx)(G,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Close",onClick:function(){return p(a)},iconSize:16.66})}),!R&&Q,g!==V&&(0,N.jsx)(T.D,{color:j.O9.sd1,size:75})]})}Y.defaultProps={editing:!1};var J=(0,u.memo)(Y),X=n(29677),K=(0,k.iv)(["background-color:rgba(255,255,255,0.7);border-radius:50%;position:absolute;top:4px;visibility:",";z-index:1;display:flex;justify-content:center;align-items:center;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),Q=k.ZP.div.withConfig({displayName:"styled__ExpandThumbnailButton",componentId:"sc-1k73vxa-0"})([""," left:4px;"],K),ee=k.ZP.div.withConfig({displayName:"styled__DeleteThumbnailButton",componentId:"sc-1k73vxa-1"})([""," right:4px;"],K),et=k.ZP.div.withConfig({displayName:"styled__VideoThumbnailWrapper",componentId:"sc-1k73vxa-2"})(["&:hover ","{visibility:inherit;}&:hover ","{visibility:inherit;}width:","px;height:","px;position:relative;border-radius:10px;border:1px solid ",";background-position:center center;background-size:cover;background-repeat:no-repeat;cursor:",";"," display:flex;align-items:center;justify-content:center;"],Q,ee,function(e){return e.$width},function(e){return e.$height},j.O9.n3,function(e){return e.$editing?"default":"zoom-in"},function(e){var t=e.$thumbnailSrc;return t?'background-image: url("'.concat(t,'");'):void 0}),en=k.ZP.div.withConfig({displayName:"styled__VideThumbnailDuration",componentId:"sc-1k73vxa-3"})(["position:absolute;right:8px;bottom:8px;background-color:",";color:",";border-radius:5px;padding:2px 5px;",""],j.O9.n7,j.O9.n1,B.c.t11),er=(0,u.memo)(function(e){var t=e.post,n=e.videoLink,r=e.index,i=e.editing,o=e.onClick,a=e.onDelete,l=e.videoLinkData,d=e.isComment,p=e.onShowPreview,f=(0,u.useState)(null),m=f[0],h=f[1],v=(0,u.useRef)(!1);(0,u.useEffect)(function(){return v.current=!0,function(){v.current=!1}},[]),(0,u.useEffect)(function(){(0,s.Z)(c().mark(function e(){var t;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(t=null==l?void 0:l.thumbnail)&&n.provider!==g.a.Bunny)){e.next=5;break}return e.next=4,(0,g.Rl)(n.url);case 4:t=e.sent;case 5:v.current&&h(t);case 6:case"end":return e.stop()}},e)}))()},[null==n?void 0:n.provider,null==n?void 0:n.url,null==l?void 0:l.thumbnail]);var b=d?w:y,x=(0,u.useCallback)(function(){i||null==o||o({post:t,videoLink:n})},[i,o,t,n]);return(0,N.jsxs)(et,{$width:b.videoWidth,$height:b.videoHeight,$thumbnailSrc:m,$editing:i,onClick:x,children:[i&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Q,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Expand",onClick:p,iconSize:16.66})}),(0,N.jsx)(ee,{children:(0,N.jsx)(A.z,{variant:"icon",icon:"Close",onClick:function(){return a(r)},iconSize:16.66})})]}),!!l.lenMs&&(0,N.jsx)(en,{children:(0,g.BI)(l.lenMs)}),(0,N.jsx)(X.Z,{fillOpacity:1})]})}),ei=(0,u.memo)(function(e){var t=e.isComment?w:y;return(0,N.jsx)(_,{$width:t.videoWidth,$height:t.videoHeight,children:(0,N.jsx)(T.D,{color:j.O9.n3,size:42})})}),eo=(0,u.memo)(function(e){var t=e.isComment?w.imageSize:y.imageSize;return(0,N.jsx)(S,{$size:t,children:(0,N.jsx)(T.D,{color:j.O9.n3,size:42})})}),ea=n(29027),es=n(30697),el=n(70131),ec=n(65009),eu=n(64487),ed=["videoId"],ep=["file"],ef=["file"];function em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ev(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,a.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eb=(0,u.forwardRef)(function(e,t){var n,a=e.post,l=e.editing,d=e.onItemClick,C=e.onChange,j=e.onFileInputChange,k=e.onStateChange,O=e.level,Z=e.style,S=e.isChatInput,_=e.isChatInputUploading,M=e.lazyLoad,L=(0,u.useState)([]),T=L[0],F=L[1],B=(0,u.useState)([]),R=B[0],z=B[1],G=(0,u.useState)([]),U=G[0],$=G[1],W=(0,u.useState)([]),q=W[0],H=W[1],V=(0,x.bI)("currentGroup","isMobile"),Y=V.currentGroup,X=V.isMobile,K=V.dispatch,Q=(0,u.useRef)(0),ee=T.length+R.length,et=(null==a||null===(n=a.metadata)||void 0===n?void 0:n.attachments)||"",en=(0,u.useState)(et.split(",")),eh=en[0],eb=en[1],eg=(0,u.useState)(!1),ex=eg[0],ey=eg[1],ew=(0,u.useState)(!1),eC=ew[0],ej=ew[1],ek=(0,u.useRef)(function(){var e;return(0,g.sw)(null==a||null===(e=a.metadata)||void 0===e?void 0:e.videoLinksData)}),eO=(0,u.useRef)(),eP=(0,u.useState)({left:!1,right:!1}),eI=eP[0],eD=eP[1],eZ=(0,el.YD)({triggerOnce:!0,skip:!M}),eS=eZ.ref,e_=eZ.inView,eM=(0,u.useState)({}),eN=eM[0],eE=eM[1],eA=(0,u.useRef)(!1),eL=(0,u.useMemo)(function(){return l?O>0?34:80:O>0?40:100},[l,O]);(0,u.useEffect)(function(){(0,s.Z)(c().mark(function e(){var t,n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=c().mark(function e(){var n,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=R[r],i=(null==U?void 0:U.find(function(e){return e.url===n}))||{},!((0,g.Hh)(n)&&!eN[n]&&!(null!=i&&i.thumbnail))){e.next=6;break}return e.next=5,(0,g.Rl)(n);case 5:t[n]=e.sent;case 6:case"end":return e.stop()}},e)}),r=0;case 3:if(!(r<R.length)){e.next=8;break}return e.delegateYield(n(),"t0",5);case 5:r++,e.next=3;break;case 8:Object.keys(t).length&&eE(function(e){return ev(ev({},e),t)});case 9:case"end":return e.stop()}},e)}))()},[R,U,eN]);var eT=O>0?w.imageSize:y.imageSize;(0,u.useEffect)(function(){eb(et.split(","))},[et]);var eF=(0,u.useCallback)(function(){if(eO.current){var e=eO.current,t=e.scrollLeft,n=e.offsetWidth,r=e.scrollWidth;r===n+t||0===t?eD({left:!!t,right:n<r&&r!==n+t}):eD({left:!!t,right:n<r})}},[]),eB=(0,u.useCallback)(function(){eA.current||(eA.current=!0,eF())},[eF]),eR=(0,u.useCallback)(function(e){eO.current.scrollLeft=e?eO.current.scrollLeft+(eT+10):eO.current.scrollLeft-(eT+10),eF()},[eF,eT]);(0,u.useEffect)(function(){k&&k(T.some(function(e){return!!e.upload}))},[k,T]),(0,u.useEffect)(function(){var e,t;S||F(null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.attachmentsData?(0,b.W4)(p().isString(a.metadata.attachmentsData)?JSON.parse(a.metadata.attachmentsData):null==a||null===(t=a.metadata)||void 0===t?void 0:t.attachmentsData):[])},[a,S]),(0,u.useEffect)(function(){if(S){var e=new Date().getTime();Q.current=e,(0,s.Z)(c().mark(function t(){var n,r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=et.split(","),!(!et||!n.length)){t.next=4;break}return F([]),t.abrupt("return");case 4:if(!_){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,m.Z.readFiles({fileIDs:n});case 8:r=t.sent.data,e===Q.current&&F(n.map(function(e){return r.files.find(function(t){return e===t.id})}));case 11:case"end":return t.stop()}},t)}))()}},[et,S,_]),(0,u.useEffect)(function(){var e,t;null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.videoLinksData&&$(ek.current),z((0,b.vc)((null==a||null===(t=a.metadata)||void 0===t?void 0:t.videoLinks)||""))},[a]),(0,u.useEffect)(function(){(0,s.Z)(c().mark(function e(){var t,n,r,a;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!R.length){e.next=18;break}n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return em(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(R),e.prev=3,a=c().mark(function e(){var n,i,a,s,l,u;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.value,a=(0,g.ak)(i),e.next=4,(0,g.$q)(i);case 4:s=e.sent,(l=null!==(n=null==U?void 0:U.find(function(e){return e.provider===a.provider&&e.videoId===a.videoID}))&&void 0!==n?n:{}).videoId,u=(0,o.Z)(l,ed),t.push({id:a.videoID,upload:null,videoLink:!0,metadata:ev(ev(ev({},a),u),{},{title:s,thumbnail:eN[i]})});case 7:case"end":return e.stop()}},e)}),n.s();case 6:if((r=n.n()).done){e.next=10;break}return e.delegateYield(a(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),n.e(e.t1);case 15:return e.prev=15,n.f(),e.finish(15);case 18:H([].concat(t,(0,i.Z)(T)));case 19:case"end":return e.stop()}},e,null,[[3,12,15,18]])}))()},[T,R,U,eN]),(0,u.useEffect)(function(){eF()},[T,R,eF]),(0,u.useImperativeHandle)(t,function(){var e,t;return{showPreviewState:function(){return ex},restoreState:function(e){var t=e.fileIDs,n=void 0===t?[]:t,r=e.videoLinks,i=void 0===r?[]:r;(0,s.Z)(c().mark(function e(){var t,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!n.length){e.next=7;break}return e.next=4,m.Z.readFiles({fileIDs:n});case 4:r=e.sent.data,t=n.map(function(e){return r.files.find(function(t){return t.id===e&&!!t.metadata.postprocessedAt})}).filter(function(e){return!!e});case 7:F(t),z(i),C&&C({files:t,videoLinks:i});case 10:case"end":return e.stop()}},e)}))()},addVideoLink:(e=(0,s.Z)(c().mark(function e(t){var n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,!(ee>=(0,h.PN)())){e.next=3;break}return e.abrupt("return",{error:"You can add up to ".concat((0,h.PN)()," attachments")});case 3:return z(r=[].concat((0,i.Z)(R),[n])),C&&C({files:T,videoLinks:r}),e.abrupt("return",{});case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),addFiles:(t=(0,s.Z)(c().mark(function e(t){var n,a,s,l,u,d;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(ee+(n=t.files).length>(0,h.PN)())){e.next=3;break}return e.abrupt("return",{error:"You can add up to ".concat((0,h.PN)()," attachments")});case 3:a=[],s=c().mark(function e(){var t,s,l,d,p,f,b,g,x,y,w,j,k,O,P,I,D,Z,S,_,M,N,E,A;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null!==(t=n[u].type)&&void 0!==t&&t.startsWith("image/")?v.Rj.attachmentImageFileMaxSize:v.Rj.attachmentFileMaxSize,!(n[u].size>s)){e.next=4;break}return d=null!==(l=n[u].type)&&void 0!==l&&l.startsWith("image/")?v.Rj.attachmentImageFileMaxSizeMB:v.Rj.attachmentFileMaxSizeMB,e.abrupt("return",{v:{error:"File too large, ".concat(d,"mb max")}});case 4:if(!(p=n[u]).isGiphy){e.next=17;break}return e.next=8,m.Z.createFile(ev({},p.metadata));case 8:if(g=(void 0===(b=(f=e.sent).data)?{}:b).file,!f.error){e.next=15;break}return e.abrupt("return",{v:{error:"Failed to upload image file"}});case 15:return F(function(e){var t=[].concat((0,i.Z)(e),[g]);return C&&C({files:t,videoLinks:R}),[].concat((0,i.Z)(e),[g])}),e.abrupt("return",{v:{}});case 17:if(!(p.type.startsWith("image/")&&!(0,h.ZP)(p.type))){e.next=45;break}return e.next=20,(0,v.s4)({file:p,minWidth:v.Rj.attachmentImageMinWidth,minHeight:v.Rj.attachmentImageMinHeight});case 20:if(x=e.sent,w=(y=(0,r.Z)(x,3))[0],!(j=y[2])){e.next=28;break}return console.warn("PostAttachments: loadImageFile failed n=".concat(null==p?void 0:p.name," s=").concat(null==p?void 0:p.size," t=").concat(null==p?void 0:p.type)),eu.Tb(j),e.abrupt("return",{v:{error:"Failed to load image file"}});case 28:return e.next=30,m.Z.createFile({fileName:p.name,contentType:p.type,contentLength:p.size,ownerID:null==Y?void 0:Y.id});case 30:if(I=(P=void 0===(O=(k=e.sent).data)?{}:O).file,D=(0,o.Z)(P,ep),!(Z=k.error)){e.next=40;break}return console.warn("PostAttachments: createFile (image) failed n=".concat(null==p?void 0:p.name," s=").concat(null==p?void 0:p.size," t=").concat(null==p?void 0:p.type," oid=").concat(null==Y?void 0:Y.id)),eu.Tb(Z),e.abrupt("return",{v:{error:"Failed to upload image file"}});case 40:D.data=p,D.src=w.toDataURL("image/jpeg"),a.push(ev({upload:D},I)),e.next=59;break;case 45:return e.next=47,m.Z.createFile({fileName:p.name,contentType:p.type,contentLength:p.size,ownerID:null==Y?void 0:Y.id});case 47:if(N=(M=void 0===(_=(S=e.sent).data)?{}:_).file,E=(0,o.Z)(M,ef),!(A=S.error)){e.next=57;break}return console.warn("PostAttachments: createFile (file) failed n=".concat(null==p?void 0:p.name," s=").concat(null==p?void 0:p.size," t=").concat(null==p?void 0:p.type," oid=").concat(null==Y?void 0:Y.id)),eu.Tb(A),e.abrupt("return",{v:{error:"Failed to upload image file"}});case 57:E.data=p,a.push(ev({upload:E},N));case 59:case"end":return e.stop()}},e)}),u=0;case 6:if(!(u<n.length)){e.next=14;break}return e.delegateYield(s(),"t0",8);case 8:if(!(l=e.t0)){e.next=11;break}return e.abrupt("return",l.v);case 11:u++,e.next=6;break;case 14:return F(d=[].concat((0,i.Z)(T),a)),C&&C({files:d,videoLinks:R}),e.abrupt("return",{files:a});case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})}});var ez=(0,u.useCallback)(function(e){F(function(t){var n=t.findIndex(function(t){return t.id===e.id});return n>-1?[].concat((0,i.Z)(t.slice(0,n)),[ev(ev({},t[n]),{},{upload:null})],(0,i.Z)(t.slice(n+1))):t})},[]),eG=(0,u.useCallback)(function(e){(0,s.Z)(c().mark(function t(){var n;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=T.filter(function(t){return t.id!==e.id}),eb(eh.filter(function(t){return t!==e.id})),F(n),C&&C({files:n,videoLinks:R});case 5:case"end":return t.stop()}},t)}))()},[eh,T,C,R]),eU=(0,u.useCallback)(function(e){var t=(0,i.Z)(R);t.splice(e,1),z(t),C&&C({files:T,videoLinks:t})},[T,C,R]),e$=(0,u.useCallback)(function(e,t,n){var i=Array.from(e),o=i.splice(t,1),a=(0,r.Z)(o,1)[0];return i.splice(n,0,a),i},[]),eW=(0,u.useCallback)(function(e){if(e.destination){var t=e$(T,e.source.index,e.destination.index);F(t),C({files:t,videoLinks:R})}},[T,C,e$,R]);return T.length||R.length||eh[0]||ek.current.length?(0,N.jsxs)("div",{ref:eS,style:ev({position:"relative",marginTop:0===O&&X&&ee>0?16:0},Z),onMouseOver:eB,children:[(0,N.jsxs)(P,{ref:eO,children:[(R.length>0||ek.current.length>0)&&(0,N.jsx)(ec.X,{gap:16,children:(R.length?R:ek.current).map(function(e,t){if(!R.length)return(0,N.jsx)("div",{children:(0,N.jsx)(ei,{isComment:O>0})},"video-".concat(t));var n=(0,g.ak)(e),r=(null==U?void 0:U.find(function(e){return e.provider===n.provider&&e.videoId===n.videoID}))||{};return(eN[n.url]&&(r.thumbnail=eN[n.url]),n&&n.provider!==g.a.Unsupported)?(0,N.jsx)("div",{children:!M||e_?(0,N.jsx)(er,{post:a,editing:l,videoLink:n,videoLinkData:r,index:t,onClick:d,onDelete:eU,isComment:O>0,onShowPreview:function(){ej(q.map(function(e){return e.id}).indexOf(n.videoID)),K(es.Ek,function(){return{disableEscape:!0}}),K(es.WT,function(){return{disableEscapeChat:!0}}),ey(!0)}}):(0,N.jsx)(ei,{isComment:O>0},"video-".concat(t))},"video-".concat(t)):null})}),(0,N.jsx)("div",{style:{marginLeft:R.length>0||ek.current.length>0?16:0,maxHeight:eT+16,minWidth:eT*T.length+16*T.length},children:(0,N.jsx)(f.Z5,{onDragEnd:eW,children:(0,N.jsx)(f.bK,{droppableId:"droppable",direction:"horizontal",children:function(e){return(0,N.jsxs)("div",ev(ev({ref:e.innerRef},e.droppableProps),{},{children:[(0,N.jsx)(ec.X,{gap:16,children:T.map(function(e,t){return(0,N.jsx)(f._l,{draggableId:e.id||e,index:t,isDragDisabled:!l||X,children:function(t){return(0,N.jsx)("div",ev(ev(ev({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:!M||e_?(0,N.jsx)(J,{post:a,file:e,editing:l,onClick:d,onUpload:ez,onDelete:eG,isComment:O>0,onShowPreview:function(){var t,n,r,i=(null==e||null===(t=e.metadata)||void 0===t?void 0:t.contentType)||"",o=(null==e||null===(n=e.metadata)||void 0===n?void 0:n.readUrl)||(null==e||null===(r=e.metadata)||void 0===r?void 0:r.srcReadUrl);X&&"application/pdf"===i?window.open(o,"_blank"):(ej(q.map(function(e){return e.id}).indexOf(e.id)),K(es.Ek,function(){return{disableEscape:!0}}),K(es.WT,function(){return{disableEscapeChat:!0}}),ey(!0))}}):(0,N.jsx)(eo,{isComment:O>0})}))}},e.id||e)})}),e.placeholder]}))}})})}),l&&ee>0&&ee<(0,h.PN)()&&(0,N.jsx)(E,{onFileInputChange:j,isComment:O>0})]}),!!ex&&(0,N.jsx)(ea.Z,{previewAttachments:q,initialIdx:eC,onClose:function(){ey(!1),K(es.WT,function(){return{disableEscapeChat:!1}})}}),!X&&eI.left&&(0,N.jsx)(D,{style:{top:eL},children:(0,N.jsx)(A.z,{variant:"icon-round-bordered",icon:"ArrowLeft",onClick:function(){return eR()},iconSize:12})}),!X&&eI.right&&(0,N.jsx)(I,{style:{top:eL},children:(0,N.jsx)(A.z,{variant:"icon-round-bordered",icon:"ArrowRight",onClick:function(){return eR(!0)},iconSize:12})})]}):null});eb.defaultProps={editing:!1,lazyLoad:!1};var eg=(0,u.memo)(eb)},69861:function(e,t,n){n.d(t,{Z:function(){return tS}});var r=n(59499),i=n(50029),o=n(17674),a=n(64687),s=n.n(a),l=n(32512),c=n(67294),u=n(95419),d=n(37500),p=n(14251),f=n(29610),m=n(12967),h=n(31545),v=n(73793),b=n(5095),g=n(64597),x=n(36581),y=n(47691),w=n(85893),C=(0,c.memo)(function(e){var t=e.onConfirm,n=e.onClose,r=e.open,o=(0,c.useState)(""),a=o[0],l=o[1],d=(0,c.useState)(null),p=d[0],f=d[1],m=(0,v.bI)("isMobile").isMobile;(0,c.useEffect)(function(){f(null)},[a]);var C=(0,c.useCallback)(function(e){l(e.target.value)},[]),j=(0,c.useCallback)(function(){n&&n()},[n]),k=(0,c.useCallback)((0,i.Z)(s().mark(function e(){var n,r,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,b.X2)(a),e.next=3,(0,h.Wh)(n);case 3:if(r=e.sent,(null==(i=(0,h.ak)(a))?void 0:i.provider)!==5){e.next=15;break}return e.next=8,u.Z.getVideoMeta({url:n});case 8:if(!e.sent.error){e.next=13;break}return f("Invalid video link"),e.abrupt("return");case 13:e.next=21;break;case 15:if(!(!r&&(null==i?void 0:i.provider)!==2)){e.next=18;break}return f("Invalid video link"),e.abrupt("return");case 18:if(!(!r&&(null==i?void 0:i.provider)===2)){e.next=21;break}return f("Invalid video link. If this was a recent upload to Vimeo, or you recently changed your privacy settings, please wait 5 minutes and try again."),e.abrupt("return");case 21:t({destination:n});case 22:case"end":return e.stop()}},e)})),[a,t]);return(0,w.jsx)(g.T,{open:r,header:"Add video",confirmLabel:"Link",onConfirm:k,onCancel:j,onClose:j,style:{zIndex:1400},children:(0,w.jsxs)(x.s,{gap:24,marginBottom:m?8:16,children:["Add a YouTube, Vimeo, Loom, or Wistia link.",(0,w.jsx)(y.I,{autoFocus:!0,id:"destination",label:"Link",value:a,onChange:C,error:p,inputProps:{"data-testid":"post-video-input"}})]})})}),j=n(50378),k=n(20668),O=j.ZP.div.withConfig({displayName:"styled__ErrorLabel",componentId:"sc-nmb4vx-0"})(["color:",";margin:8px 0 0 14px;",""],p.O9.e2,k.c.t11),P=(0,c.memo)(function(e){var t=e.open,n=e.onConfirm,r=e.onClose,i=(0,c.useState)(""),o=i[0],a=i[1],s=(0,c.useState)(!1),l=s[0],u=s[1],d=(0,c.useCallback)(function(){r&&r()},[r]),p=(0,c.useCallback)(function(){if(!(0,m.K2)(o)){u(!0);return}n({destination:(0,b.X2)(o)})},[o,n]),f=(0,c.useCallback)(function(e){var t=e.target.value;a(t),l&&((0,m.K2)(t)?u(!1):u(!0))},[l]);return(0,w.jsxs)(g.T,{open:t,header:"Add link",onConfirm:p,onCancel:d,onClose:d,confirmLabel:"Link",disabled:l,children:[(0,w.jsx)(y.I,{autoFocus:!0,id:"destination",label:"Enter a URL",value:o,onChange:f,inputProps:{"data-testid":"post-link-input"}}),l&&(0,w.jsx)(O,{children:"Please input a valid link."})]})}),I=n(36195),D=n(57305),Z=n(81343),S=j.ZP.div.withConfig({displayName:"styled__DisplayName",componentId:"sc-qt6z5e-0"})(["color:",";",";"],function(e){return e.$isSelected&&p.O9.fgPrimary},k.c.t5),_=j.ZP.div.withConfig({displayName:"styled__Description",componentId:"sc-qt6z5e-1"})(["color:",";",";",""],p.O9.n5,k.c.t9,k.c.ellipsis),M=(0,j.ZP)(Z.i).withConfig({displayName:"styled__ModalDivider",componentId:"sc-qt6z5e-2"})(["position:absolute;left:0;"]),N=j.ZP.div.withConfig({displayName:"styled__ListWrapper",componentId:"sc-qt6z5e-3"})(["margin:0 -24px 8px -24px;"]),E=j.ZP.div.withConfig({displayName:"styled__ListItem",componentId:"sc-qt6z5e-4"})(["display:flex;align-items:center;height:52px;min-height:",";padding:12px 24px;",";&:hover{background-color:",";}"],function(e){return e.$subtextExists?"72px":"52px"},function(e){return e.$selected&&"background-color: ".concat(p.O9.p2)},function(e){return e.$selected?p.O9.p2:p.O9.n3});function A(e){var t=e.onConfirm,n=e.onClose,r=e.labels,o=e.selectedID,a=(0,c.useState)(o),l=a[0],u=a[1],d=(0,c.useCallback)(function(){n&&n()},[n]),p=(0,c.useCallback)((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t(r.find(function(e){return e.id===l}));case 1:case"end":return e.stop()}},e)})),[t,r,l]),f=(0,c.useMemo)(function(){return r.some(function(e){return e.metadata.description})},[r]),m=(0,c.useMemo)(function(){return r.map(function(e){var t=e.id===l;return(0,w.jsx)(E,{$selected:t,$subtextExists:f,onClick:function(){return u(e.id)},children:(0,w.jsxs)(x.s,{style:{width:"100%"},children:[(0,w.jsx)(S,{$isSelected:t,children:e.metadata.displayName}),e.metadata.description&&(0,w.jsx)(_,{children:e.metadata.description})]})},e.id)})},[r,l,f]);return(0,w.jsxs)(g.T,{open:!0,header:"Post category",onConfirm:p,onCancel:d,onClose:d,confirmLabel:"select",disabled:!l,scrollable:!0,style:{zIndex:1400},children:[(0,w.jsx)(M,{}),(0,w.jsx)(N,{children:m})]})}A.defaultProps={labels:[],selectedID:""};var L=(0,c.memo)(A),T=n(73674),F=n(11163),B=n.n(F),R=n(500),z=n(53531),G=n(30697),U=n(70131),$=n(77567),W=n(90116),q=n(20338),H=n(59607),V=j.ZP.div.withConfig({displayName:"styled__PollWrapper",componentId:"sc-qor37g-0"})(["display:flex;flex-direction:column;border:1px solid ",";border-radius:5px;padding:16px;> button{margin-top:8px;}"],p.O9.n3),Y=j.ZP.div.withConfig({displayName:"styled__PollHeader",componentId:"sc-qor37g-1"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;",""],k.c.t8),J=j.ZP.div.withConfig({displayName:"styled__PollOption",componentId:"sc-qor37g-2"})(["display:flex;align-items:center;margin-bottom:8px;> div:first-of-type{flex:1;margin-right:8px;}"]),X=j.ZP.div.withConfig({displayName:"styled__DisabledPollOption",componentId:"sc-qor37g-3"})(["border-radius:4px;padding:14px;background-color:",";margin-bottom:8px;color:",";",""],p.O9.n3,p.O9.n5,k.c.t7),K=j.ZP.button.withConfig({displayName:"styled__RemovePollButton",componentId:"sc-qor37g-4"})(["border:none;padding:0;background:none;display:flex;color:",";margin-right:8px;&:hover{text-decoration:underline;cursor:pointer;}",""],p.O9.n5,k.c.t11);p.O9.n5,k.c.t11;var Q=j.ZP.div.withConfig({displayName:"styled__DisabledRemovePollLabel",componentId:"sc-qor37g-6"})(["margin-top:8px;color:",";",""],p.O9.n5,k.c.t11),ee={maxLength:1e3},et=(0,c.memo)(function(e){var t=e.initialPoll,n=e.onRemove,r=e.options,i=e.setOptions,o=!!(null!=t&&t.totalVotes),a=(0,v.bI)("isMobile").isMobile,s=(0,c.useCallback)(function(e,t){i(function(n){var r=(0,W.Z)(n);return r[t]=e,r})},[i]),l=(0,c.useCallback)(function(e){i(function(t){return[].concat((0,W.Z)(t.slice(0,e)),(0,W.Z)(t.slice(e+1)))})},[i]),u=(0,c.useCallback)(function(){return[i(function(e){return[].concat((0,W.Z)(e),[""])})]},[i]),d=(0,c.useCallback)(function(e,t){return o?(0,w.jsx)(X,{children:e}):(0,w.jsxs)(J,{children:[(0,w.jsx)(y.I,{onChange:function(e){s(e.target.value,t)},placeholder:"Option ".concat(t+1),inputProps:ee,value:e,staticLabel:!0}),r.length<3?(0,w.jsx)("div",{style:{width:34}}):(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"Close",onClick:function(){l(t)},iconSize:16.66,tabIndex:-1})]},t)},[o,l,s,r]),p=(0,c.useMemo)(function(){return r.map(d)},[r,d]),f=(0,c.useMemo)(function(){return r.reduce(function(e,t){return e||!!t},!1)},[r]),m=(0,c.useCallback)(function(){f||n()},[f,n]);return(0,w.jsxs)(V,{children:[(0,w.jsxs)(Y,{children:["Poll",!o&&(0,w.jsx)(q.s,{dataTestId:"poll-form-remove-poll-confirmation-dialog",header:"Remove poll?",content:"Are you sure you want to remove this poll",disabled:!f,onConfirm:n,style:{zIndex:1400},children:(0,w.jsx)(K,{type:"button",onClick:m,children:"Remove"})})]}),p,!o&&(0,w.jsx)(H.z,{onClick:u,variant:"secondary",disabled:10===r.length,typography:a?"t8":"t5",label:"Add Option"}),o&&(0,w.jsx)(Q,{children:"You cannot edit or remove a poll that already has votes"})]})}),en=n(65009),er=n(53541),ei=n(82354),eo=n(64727),ea=n(73475),es=n(12476),el=n(70299),ec=j.ZP.div.withConfig({displayName:"styled__PostAdditionButtonWrapper",componentId:"sc-41pcfm-0"})(["height:100%;margin-right:8px;"]),eu=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionWrapper",componentId:"sc-41pcfm-1"})(["background-color:",";border:1px solid ",";border-radius:5px;margin-top:16px;padding:16px;"],p.O9.n2,p.O9.n3),ed=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionHeaderRow",componentId:"sc-41pcfm-2"})(["display:flex;align-items:center;justify-content:space-between;",""],k.c.t10),ep=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionHeader",componentId:"sc-41pcfm-3"})(["display:flex;align-items:center;gap:8px;color:",";"],p.O9.e2),ef=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionRemove",componentId:"sc-41pcfm-4"})(["color:",";&:hover{cursor:pointer;}"],p.O9.n5),em=j.ZP.div.withConfig({displayName:"styled__ActionDescriptionBody",componentId:"sc-41pcfm-5"})(["margin-top:16px;",""],k.c.t7),eh=j.ZP.span.withConfig({displayName:"styled__NotifyAllTotalMembersLabel",componentId:"sc-41pcfm-6"})(["",""],k.c.t5),ev=(0,j.iv)(["width:106px;height:40px;"]),eb=(0,j.iv)(["padding:0 24px;width:fit-content;"]),eg=(0,j.ZP)(H.z).withConfig({displayName:"styled__SubmitButtonWrapper",componentId:"sc-41pcfm-7"})(["",";"],function(e){return e.theme.isMobile?eb:ev}),ex=j.ZP.div.withConfig({displayName:"styled__PostInputErrorText",componentId:"sc-41pcfm-8"})(["color:",";",";"],p.O9.e2,k.c.t11),ey=j.ZP.div.withConfig({displayName:"styled__PostInputCardContent",componentId:"sc-41pcfm-9"})(["background:",";padding:10px 13px 0;border:solid 1px ",";border-left:none;border-right:none;"],p.O9.n1,p.O9.n3),ew=j.ZP.div.withConfig({displayName:"styled__TooltipContentWrapper",componentId:"sc-41pcfm-10"})(["max-width:400px;"]),eC=j.ZP.span.withConfig({displayName:"styled__SendEmailText",componentId:"sc-41pcfm-11"})(["color:",";",";"],p.O9.n5,k.c.t8),ej=(0,j.ZP)(ea.J).withConfig({displayName:"styled__InfoIcon",componentId:"sc-41pcfm-12"})(["color:",";height:30px;width:30px;padding:7px;"],p.O9.n5),ek=(0,j.ZP)(es.h_).withConfig({displayName:"styled__MobileDropdownMenu",componentId:"sc-41pcfm-13"})(["> button > div{height:24px;}"]),eO=j.ZP.div.withConfig({displayName:"styled__PostCategoryWrapper",componentId:"sc-41pcfm-14"})(["max-width:",";flex:1 1;min-width:0;> div > div > div{width:100%;}"],function(e){return e.theme.isMobile?"none":"100%"}),eP=j.ZP.div.withConfig({displayName:"styled__DropzoneLabel",componentId:"sc-41pcfm-15"})(["color:",";",""],p.O9.n5,k.c.t1),eI=j.ZP.div.withConfig({displayName:"styled__PostBody",componentId:"sc-41pcfm-16"})(["",""],k.c.t7),eD=j.ZP.div.withConfig({displayName:"styled__ErrorLabel",componentId:"sc-41pcfm-17"})(["color:",";text-align:right;",""],p.O9.e2,k.c.t11),eZ=j.ZP.span.withConfig({displayName:"styled__HeaderBoldLabel",componentId:"sc-41pcfm-18"})(["color:",";white-space:nowrap;",""],p.O9.n7,k.c.t6),eS=j.ZP.span.withConfig({displayName:"styled__HeaderNormalLabel",componentId:"sc-41pcfm-19"})(["color:",";white-space:nowrap;",""],p.O9.n5,k.c.t7),e_=j.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-41pcfm-20"})(["position:absolute;height:100%;width:100%;background:",";top:0;left:0;border-radius:15px;z-index:1000;padding:8px;display:",";"],p.O9.n2,function(e){return e.$isVisible?"block":"none"}),eM=j.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-41pcfm-21"})(["height:100%;width:100%;border:3px dashed ",";border-radius:15px;display:flex;justify-content:center;align-items:center;"],p.O9.n5),eN=j.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-41pcfm-22"})(["position:relative;&:focus{outline:none;}"]),eE=j.ZP.div.withConfig({displayName:"styled__InputActionLine",componentId:"sc-41pcfm-23"})(["width:100%;display:flex;flex-wrap:wrap;align-items:flex-end;justify-content:flex-end;min-height:",";"],function(e){return e.$isDragging?"120px":"inherit"}),eA=(0,j.ZP)(x.s).withConfig({displayName:"styled__CommentOrReply",componentId:"sc-41pcfm-24"})(["position:relative;border-radius:15px;background-color:",";border:1px solid "," !important;padding:0px 13px;min-width:0;"],p.O9.n2,function(e){return e.theme.isMobile?p.O9.n3:p.O9.n5}),eL=j.ZP.div.withConfig({displayName:"styled__EditorWithActions",componentId:"sc-41pcfm-25"})(["flex-grow:1;padding-bottom:8px;padding-top:8px;min-width:",";"],function(e){var t=e.theme,n=e.$following;return t.isMobile?n?"calc(100% - 60px)":"calc(100% - 120px)":"calc(100% - 220px)"}),eT=j.ZP.div.withConfig({displayName:"styled__ActionButtons",componentId:"sc-41pcfm-26"})(["width:",";"],function(e){return e.theme.isMobile?"60px":"220px"}),eF=j.ZP.div.withConfig({displayName:"styled__CardContent",componentId:"sc-41pcfm-27"})(["padding:16px 16px 0;&:last-child{padding-bottom:8px;}"]),eB=j.ZP.div.withConfig({displayName:"styled__PostTitleWrapper",componentId:"sc-41pcfm-28"})(["margin-bottom:",";"],function(e){return e.theme.isMobile?"16px":"8px"}),eR=(0,j.iv)(["height:40px;padding:8px 0;margin:0;",";&::placeholder{",";}"],k.c.t3,k.c.t3),ez=(0,j.iv)(["visibility:visible;"]),eG=(0,j.ZP)(y.I).withConfig({displayName:"styled__PostTitleInput",componentId:"sc-41pcfm-29"})(["padding:0;margin:0;min-height:auto;input{height:35px;padding:8px 0 0;margin:0 0 8px;",";&::placeholder{color:",";opacity:0.8;",";}",';}&::after{content:"";display:block;position:absolute;bottom:0;left:0;right:0;height:2px;background:',";visibility:hidden;",";}"],k.c.t1,p.O9.n5,k.c.t1,function(e){return e.theme.isMobile&&eR},p.O9.e2,function(e){return e.$hasError&&ez}),eU=j.ZP.div.withConfig({displayName:"styled__PostBodyWrapper",componentId:"sc-41pcfm-30"})(["padding-bottom:",";"],function(e){return e.theme.isMobile?"24px":"0"}),e$=j.ZP.div.withConfig({displayName:"styled__CardHeaderLabelWrapper",componentId:"sc-41pcfm-31"})(["",""],k.c.ellipsis),eW=j.ZP.div.withConfig({displayName:"styled__PollFormWrapper",componentId:"sc-41pcfm-32"})(["margin-top:16px;"]),eq=(0,j.ZP)(H.z).withConfig({displayName:"styled__CancelReplyButton",componentId:"sc-41pcfm-33"})(["width:",";height:",";padding:",";"],function(e){return e.theme.isMobile?"unset":void 0},function(e){return e.theme.isMobile?"40px":"48px"},function(e){var t=e.theme;return"0 ".concat(t.isMobile?16:32,"px")}),eH=(0,j.ZP)(H.z).withConfig({displayName:"styled__ReplyButton",componentId:"sc-41pcfm-34"})(["height:",";padding:",";"],function(e){return e.theme.isMobile?"40px":"48px"},function(e){var t=e.theme;return"12px ".concat(t.isMobile?16:32,"px")}),eV=j.ZP.div.withConfig({displayName:"styled__PostAdditionsWrapper",componentId:"sc-41pcfm-35"})(["display:flex;overflow:hidden;"]),eY=(0,j.ZP)(H.z).withConfig({displayName:"styled__CancelCreatePostButton",componentId:"sc-41pcfm-36"})(["height:40px;padding-left:",";"],function(e){return e.theme.isMobile?void 0:"24px"}),eJ=(0,j.ZP)(ea.J).withConfig({displayName:"styled__ActionIcon",componentId:"sc-41pcfm-37"})(["height:21px;width:15px;"]),eX=j.ZP.div.withConfig({displayName:"styled__DropzoneInputWrapper",componentId:"sc-41pcfm-38"})(["width:100%;overflow:visible;background:",";box-shadow:",";border:",";border-bottom:",";border-radius:10px;"],function(e){return 0===e.$level?p.O9.n1:p.O9.n2},function(e){var t=e.$level,n=e.theme;return 0!==t||n.isDarkTheme?"none":el.nN},function(e){var t=e.$level,n=e.theme;return 0===t||n.isDarkTheme?"none":"1px solid ".concat(p.O9.n5)},function(e){var t=e.$level,n=e.theme,r=e.$isPost;return 0===t&&n.isDarkTheme&&r?"1px solid ".concat(p.O9.n3):void 0}),eK=j.ZP.div.withConfig({displayName:"styled__PostAttachmentsWrapper",componentId:"sc-41pcfm-39"})(["width:100%;margin-top:8px;display:",";"],function(e){return e.$hasAttachments?"block":"none"}),eQ=j.ZP.label.withConfig({displayName:"styled__AddAttachmentLabel",componentId:"sc-41pcfm-40"})(["cursor:pointer;"]),e0=(0,j.ZP)(H.z).withConfig({displayName:"styled__MobileSubmitButton",componentId:"sc-41pcfm-41"})(["flex-shrink:0;align-self:end;svg{color:",";}"],function(e){return e.$canSubmit?p.O9.secondary:p.O9.n5}),e1=(0,c.memo)(function(e){var t=e.handleFileInputChange,n=e.post,r=e.menuItems,i=e.handleLinkIconClick,o=e.handleAddVideoIconClick,a=e.linkable,s=e.onEmojiClick,l=e.onGifSelect,c=e.commentId;return(0,v.bI)("isMobile").isMobile?(0,w.jsxs)(en.X,{justifyContent:"flex-end",style:{transform:"translateX(12px)"},children:[(0,w.jsx)("input",{type:"file",style:{display:"none"},accept:(0,eo.Yw)(),multiple:!0,onChange:t,id:"file-upload-input-".concat(c||(null==n?void 0:n.id)||"post")}),(0,w.jsx)(ei.g,{onSelect:l}),(0,w.jsx)(ek,{options:r,variant:"icon-borderless",icon:"PaperClip"})]}):(0,w.jsxs)(en.X,{justifyContent:"flex-end",gap:4,marginRight:4,children:[(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",{type:"file",style:{display:"none"},accept:(0,eo.Yw)(),multiple:!0,onChange:t,id:"file-upload-input-".concat(c||(null==n?void 0:n.id)||"post")}),(0,w.jsx)(eQ,{htmlFor:"file-upload-input-".concat(c||(null==n?void 0:n.id)||"post"),children:(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"PaperClip",iconSize:16.66,as:"span"})})]}),(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"Link",onClick:i,iconSize:16.66,disabled:"disabled"===a,style:{color:"disabled"===a?p.O9.p2:void 0,minWidth:40}}),(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"FileVideo",onClick:o,iconSize:16.66,style:{minWidth:40}}),(0,w.jsx)(er.h,{onClick:s}),(0,w.jsx)(ei.g,{onSelect:l})]})}),e2=n(86031),e9=n(66703),e3=n(22441),e5=n(85064),e4=n(23450),e6=n.n(e4),e8=n(80008),e7=n.n(e8);function te(e){var t=e7()(e/1e6),n=e7()(),r=e7().duration(n.diff(t)),i=e7().duration(2592e5-r);return{hoursUntil:i.asHours()>1?Math.round(i.asHours()):Math.floor(i.asHours()),minutesUntil:i.minutes(),secondsUntil:i.seconds()}}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tn=function(){return(0,w.jsx)(ew,{children:"Admins can only send a post via email once every 72 hours. Please try again later. This is to protect email deliverability."})},tr=(0,c.memo)(function(e){var t,n,o,a,l,d,p,f,m,h,b,g,x,y,C,j,k,O,P,I,D,Z,S,_=e.children,M=e.onCanNotifyAll,N=(0,c.useState)(!1),E=N[0],A=N[1],L=(n=(t=(0,c.useState)(null))[0],o=t[1],l=(a=(0,c.useState)(!1))[0],d=a[1],f=(p=(0,c.useState)(null))[0],m=p[1],h=(0,c.useRef)(!1),g=(b=(0,v.bI)("currentGroup")).currentGroup,x=b.dispatch,(0,c.useEffect)(function(){return h.current=!0,function(){h.current=!1}},[]),y=(0,c.useCallback)(function(e){var t=te(e),n=t.hoursUntil,i=t.minutesUntil,o=t.secondsUntil;n<=0&&i<=0&&o<=0&&x(G.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.canNotifyAll=!0,t})},[x]),{data:n,loading:l,error:f,fetchLastNotifyAll:(0,c.useCallback)((0,i.Z)(s().mark(function e(){var t,n,r,i,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),m(null),e.prev=2,e.next=5,u.Z.getGroup({groupID:null==g?void 0:g.id});case 5:if(r=(n=e.sent).data,i=n.error,h.current){e.next=10;break}return e.abrupt("return");case 10:if(!i){e.next=14;break}return m(i),d(!1),e.abrupt("return");case 14:o(a=null==r||null===(t=r.metadata)||void 0===t?void 0:t.lastNotifyAll),y(a),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.error(e.t0);case 22:return e.prev=22,d(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[2,19,22,25]])})),[y,null==g?void 0:g.id])}),T=L.data,F=L.loading,B=L.error,R=L.fetchLastNotifyAll,z=(j=(C=(0,c.useState)(null))[0],k=C[1],P=(O=(0,c.useState)(!1))[0],I=O[1],D=(0,c.useRef)(),Z=(0,c.useCallback)(function(){D.current&&(clearInterval(D.current),D.current=void 0)},[]),S=(0,c.useCallback)(function(e){P||(k(e),D.current=setInterval(function(){k(function(e){if(e<=0){Z(),I(!0);return}return e-1})},6e4))},[P,Z]),(0,c.useEffect)(function(){return function(){Z()}},[Z]),{minutesLeft:j,startTimer:S,resetTimer:Z}),U=z.minutesLeft,$=z.startTimer,W=z.resetTimer,q=(0,c.useCallback)((0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:A(!0);case 3:case"end":return e.stop()}},e)})),[R]);(0,c.useEffect)(function(){if(E&&T){var e=te(T),t=e.hoursUntil,n=e.minutesUntil,r=e.secondsUntil;t<1&&(n>0||r>0)&&$(n||1),A(!1)}},[E,T,$]),(0,c.useEffect)(function(){"number"==typeof U&&U<=0&&M()},[U,M]);var H=(0,c.useMemo)(function(){if(F)return(0,w.jsx)(ew,{children:(0,w.jsx)(e5.D,{})});if(B)return(0,w.jsx)(tn,{});if(U>0)return(0,w.jsx)(ew,{children:"Admins can only send a post via email once every 72 hours. Try again in ".concat(e6()("minute",U,!0),". This is to protect email deliverability.")});if(T){var e=te(T),t=e.hoursUntil,n=e.minutesUntil,r=e.secondsUntil,i=t>0?"".concat(e6()("hour",t,!0)):"",o="".concat(i).concat(!i&&n>0?"".concat(n," minutes"):i||n||!(r>0)?"":"1 minute");return(0,w.jsx)(ew,{children:"Admins can only send a post via email once every 72 hours. Try again in ".concat(o,". This is to protect email deliverability.")})}return(0,w.jsx)(tn,{})},[B,T,F,U]);return(0,w.jsx)("div",{onMouseEnter:q,onMouseLeave:W,children:(0,w.jsx)(e9.u,{content:H,children:_})})});function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var to=(0,c.memo)(function(e){var t=e.canNotifyAll,n=e.setNotifyAll,i=e.notifyAll,o=(0,v.bI)("isMobile"),a=o.isMobile,s=o.dispatch,l=(0,c.useCallback)(function(){n(function(e){return!e})},[n]),u=(0,c.useCallback)(function(){s(G.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.canNotifyAll=!0,t})},[s]),d=(0,c.useMemo)(function(){return(0,w.jsx)(ew,{children:t?"Turning this on will also send this post to ALL members of your group via email. You can only do this once every 72 hours.":"Admins can only send a post via email once every 72 hours. Please try again later. This is to protect email deliverability."})},[t]);return(0,w.jsx)(en.X,{marginTop:a?0:8,marginBottom:8,paddingRight:a?8:0,justifyContent:"flex-end",children:(0,w.jsxs)(en.X,{alignItems:"center",justifyContent:"center",children:[(0,w.jsx)(e9.u,{content:d,showMobile:!0,children:(0,w.jsx)(ej,{name:"Info"})}),(0,w.jsx)(eC,{children:"Send email to all members"}),t&&(0,w.jsx)(e2.x,{paddingLeft:12,children:(0,w.jsx)(e3.Z,{disabled:!t||void 0,onClick:l,active:i})}),!t&&(0,w.jsx)(tr,{onCanNotifyAll:u,children:(0,w.jsx)(e2.x,{paddingLeft:12,children:(0,w.jsx)(e3.Z,{disabled:!0,active:!1})})})]})})}),ta=(0,c.memo)(function(e){var t,n=e.notifyAll,r=e.handleSubmitClick,i=e.submitButtonDisabled,o=e.confirmButtonLabel,a=e.loading,s=(0,v.bI)("currentGroup").currentGroup;return n?(0,w.jsx)(q.s,{header:"Send email to all members?",content:(0,w.jsxs)(w.Fragment,{children:["This email will be sent to",(0,w.jsx)(eh,{children:" ".concat((null===(t=s.metadata)||void 0===t?void 0:t.totalMembers)||"all"," ")}),"members, are you sure you want to proceed?"]}),onConfirm:r,style:{zIndex:1400},children:(0,w.jsx)(eg,{disabled:i,label:o,loading:a},i?"confirm-disabled":"confirm")}):(0,w.jsx)("div",{onClick:i?null:r,children:(0,w.jsx)(eg,{dataTestId:"post-input-form-submit-btn",disabled:i,label:o,loading:a},i?"confirm-disabled":"confirm")})}),ts=(0,c.memo)(function(e){var t=e.open,n=e.postTypeName,r=e.onClose,i=e.onConfirm;return t?(0,w.jsx)(g.T,{open:t,header:"Cancel ".concat(n),onConfirm:i,onCancel:r,onClose:r,confirmLabel:"Confirm",style:{zIndex:1400},children:"You haven't finished your ".concat(n," yet. Do you want to leave without finishing?")}):null}),tl=(0,c.memo)(function(e){var t=e.level,n=e.handleFileInputChange,r=e.post,i=e.menuItems,o=e.poll,a=e.pollOptions,s=e.showPollForm,l=e.handlePollIconClick,u=e.handleLinkIconClick,d=e.linkable,p=e.handleAddVideoIconClick,f=e.onEmojiClick,m=e.onGifSelect,h=e.onActionClick,b=e.isActionPost,g=(0,v.bI)("isMobile","self","currentGroup"),x=g.isMobile,y=g.self,C=g.currentGroup,j=(0,z.CP)({user:y,member:null==y?void 0:y.member,group:C}),k=(0,c.useCallback)(function(e){if(null!=o&&o.totalVotes){e.preventDefault(),e.stopPropagation();return}a.some(function(e){return e})&&s||(e.preventDefault(),e.stopPropagation(),l())},[l,null==o?void 0:o.totalVotes,a,s]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("input",{type:"file",style:{display:"none"},accept:(0,eo.Yw)(),multiple:!0,onChange:n,id:"file-upload-input-".concat((null==r?void 0:r.id)||"post")}),x?null:(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add attachment",children:(0,w.jsx)(eQ,{htmlFor:"file-upload-input-".concat((null==r?void 0:r.id)||"post"),children:(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"PaperClip",iconSize:16.66,as:"span"})})})}),(0,w.jsxs)(en.X,{justifyContent:x?"left":void 0,style:{width:"100%"},children:[x&&0===t&&(0,w.jsx)(ek,{options:i,variant:"icon-borderless",icon:"PaperClip"}),x&&0===t&&(0,w.jsx)(q.s,{header:"Remove poll?",content:"Are you sure you want to remove this poll",onConfirm:l,style:{zIndex:1400},children:(0,w.jsx)(H.z,{variant:"icon-borderless-no-hover",icon:"PollOutlined",onClick:k,iconSize:16.66})}),x&&0===t&&(0,w.jsx)(ei.g,{onSelect:m,style:{marginRight:8},anchorOrigin:{vertical:0,horizontal:0},transformOrigin:{vertical:"bottom",horizontal:"left"}}),!x&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add link",children:(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"Link",onClick:u,iconSize:16.66,disabled:"disabled"===d})})}),(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add video",children:(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"FileVideo",onClick:p,iconSize:16.66})})}),(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:s?"Remove poll":"Add poll",children:(0,w.jsx)(q.s,{header:"Remove poll?",content:"Are you sure you want to remove this poll",onConfirm:l,children:(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"PollOutlined",onClick:k,iconSize:16.66})})},s)}),j&&!r&&(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:b?"Remove action":"Add action",children:(0,w.jsx)(H.z,{variant:"icon-borderless",icon:"Action",onClick:h})},b)}),(0,w.jsx)(ec,{children:(0,w.jsx)(e9.u,{content:"Add emoji",children:(0,w.jsx)(er.h,{onClick:f})})}),(0,w.jsx)(ec,{children:(0,w.jsx)(ei.g,{onSelect:m,tooltip:"Add gif"})})]})]})]})}),tc=n(20452),tu=j.ZP.div.withConfig({displayName:"styled__CategoryLabel",componentId:"sc-1v9n50v-0"})(["max-width:115px;"," ",""],k.c.ellipsis,k.c.t8),td=j.ZP.div.withConfig({displayName:"styled__CategoryItem",componentId:"sc-1v9n50v-1"})(["width:406px;> div{&:last-child{"," ","}}"],k.c.ellipsis,k.c.t9),tp=(0,tc.$o)(),tf=(0,c.memo)(function(e){var t=e.labels,n=void 0===t?[]:t,r=e.selectedID,i=void 0===r?"":r,o=e.onChange,a=(0,c.useCallback)(function(e){o&&o(n.find(function(t){return t.id===e}))},[o,n]),s=(0,c.useMemo)(function(){return n.map(function(e){var t,n,r=e.id===i;return{active:r,onClick:function(){return a(e.id)},label:(0,w.jsxs)(td,{children:[(0,w.jsx)("div",{children:null==e||null===(t=e.metadata)||void 0===t?void 0:t.displayName}),(0,w.jsx)("div",{style:{color:r?tp?p.O9.n1:p.O9.n7:p.O9.n5},children:null==e||null===(n=e.metadata)||void 0===n?void 0:n.description})]})}})},[a,n,i]),l=(0,c.useMemo)(function(){var e,t="Select a category";return i&&(t=null===(e=n.find(function(e){return e.id===i}))||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.displayName),(0,w.jsx)(tu,{children:t})},[n,i]);return n.length?(0,w.jsx)(es.h_,{options:s,label:l,onChange:a,variant:"borderless"}):null}),tm=(0,j.iv)(["> div{width:auto;margin-left:0px;flex-grow:1;min-width:0px;> div{display:flex;align-items:center;> span{max-width:180px;}}}"]),th=j.ZP.div.withConfig({displayName:"styled__CategoryWrapper",componentId:"sc-wu2qnf-0"})(["display:flex;> div{width:100%;}",""],function(e){return e.theme.isMobile&&tm}),tv=j.ZP.span.withConfig({displayName:"styled__MobileDropdownButtonText",componentId:"sc-wu2qnf-1"})(["color:",";margin-right:4px;"," ",""],p.O9.n5,k.c.t8,k.c.ellipsis),tb=(0,c.memo)(function(e){var t=e.labelsError,n=e.filteredGroupLabels,r=e.labelID,i=e.handlePostLabelChange,o=e.setMobileCategoryDialogOpen,a=(0,v.bI)("isMobile").isMobile,s=(0,c.useMemo)(function(){var e;return r?null===(e=n.find(function(e){return e.id===r}))||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.displayName:void 0},[r,n]);return(0,w.jsx)(th,{children:(0,w.jsx)("div",{children:a?(0,w.jsxs)("div",{onClick:function(){o(!0)},children:[(0,w.jsx)(tv,{children:s||"Select a category"}),(0,w.jsx)(ea.J,{name:"DropDown",style:{width:10,flexShrink:0,color:p.O9.n5}})]}):(0,w.jsx)(tf,{error:!!t,disableUnderline:!t,labels:n,selectedID:r||void 0,onChange:i})})})}),tg=n(54361),tx=(0,j.ZP)(H.z).withConfig({displayName:"styled__PostTemplatesRemoveButton",componentId:"sc-p3ug6i-0"})(["position:absolute;top:","px;right:4px;"],function(e){return e.theme.isMobile?8:4}),ty=(0,j.ZP)(x.s).withConfig({displayName:"styled__PostTemplatesWrapper",componentId:"sc-p3ug6i-1"})(["position:relative;border-radius:5px;border:1px solid ",";background-color:",";padding:16px;margin-top:24px;> h4{margin:0 0 8px;color:",";padding-right:28px;","}> button:not(","){height:unset;text-align:left;color:",";"," &:hover{color:",";","}}"],p.O9.n3,p.O9.n2,p.O9.n5,k.c.t5,tx,p.O9.n5,k.c.t7,p.O9.n5,function(e){return e.theme.isMobile&&"text-decoration: none;"}),tw=(0,c.memo)(function(e){var t=e.handleTemplateButtonClick,n=(0,tg.c8)(),r=(0,o.Z)(n,2),i=r[0],a=r[1];return i?null:(0,w.jsxs)(ty,{children:[(0,w.jsx)("h4",{children:"Fun post ideas to kick off your community:"}),(0,w.jsx)(H.z,{label:"\uD83D\uDDE3️ Ask members to introduce themselves and share a pic of their workspace",onClick:function(){return t("intros")},variant:"link",disableRipple:!0}),(0,w.jsx)(H.z,{label:"❤️ Ask members to share their favorite movie, book, travel destination, etc.",onClick:function(){return t("fav-things")},variant:"link",disableRipple:!0}),(0,w.jsx)(H.z,{label:"\uD83D\uDCCA Ask members to vote on their favorite pet",onClick:function(){return t("poll-fav-pets")},variant:"link",disableRipple:!0}),(0,w.jsx)(tx,{variant:"icon-borderless",icon:"Close",onClick:a,iconSize:16.66,tabIndex:-1})]})}),tC=n(16531),tj={intros:{id:"intros",title:"Welcome! Introduce yourself + share a pic of your workspace \uD83C\uDF89",body:"Let's get to know each other! Comment below sharing where you are in the world, a photo of your workspace, and something you like to do for fun. \uD83D\uDE0A"},"fav-things":{id:"fav-things",title:"What's your favorite book \uD83D\uDCDA, movie \uD83C\uDF9E️, and travel destination \uD83C\uDFDD️?",body:"Let's get to know each other! Comment below sharing your favorite movie, book, or travel destination!"},"poll-fav-pets":{id:"poll-co-working",title:"If you had to choose one pet, what would it be?",body:"Vote now!",poll:["\uD83D\uDC08 Cat","\uD83D\uDC15 Dog","\uD83D\uDC0D Snake"]}},tk=n(64487);function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tI={backgroundColor:p.O9.n2,padding:"0 0 24px 0"},tD=["","",""],tZ=(0,c.forwardRef)(function(e,t){var n,r,a,p,b,g,y,j,k,O,S,_,M,N=e.post,E=e.level,A=e.rootPostID,F=e.parentPost,W=e.group,q=e.postType,H=e.confirmButtonLabel,V=e.onPostCreated,Y=e.onPostUpdated,J=e.onCancel,X=e.contentPrefix,K=e.contentPlaceholder,Q=e.requireTitle,ee=e.hideLabel,er=e.requireLabel,ei=e.showMeta,ea=e.onContentChange,es=e.followingPost,el=e.allUsers,ec=e.onOpen,eh=e.poll,ev=e.filteredGroupLabels,eb=e.initialLabel,eg=e.commentId,ew=e.onEditorFocus,eC=e.onEditorBlur,ej=e.showPostTemplates,ek=(0,v.bI)("currentGroup","self","isMobile","disableEscape","showInputCancelMessage"),eR=ek.currentGroup,ez=ek.self,eQ=ek.isMobile,e9=ek.disableEscape,e3=ek.showInputCancelMessage,e5=ek.dispatch,e4=(0,c.useState)(!1),e6=e4[0],e8=e4[1],e7=(0,c.useState)(""),tt=e7[0],tn=e7[1],tr=(null==N||null===(p=N.metadata)||void 0===p?void 0:p.title)||"",ti=(0,c.useState)(tr),tc=ti[0],tu=ti[1],td=(0,c.useState)(null),tp=td[0],tf=td[1],tm=(0,c.useState)(null),th=tm[0],tv=tm[1],tx=(0,c.useState)(!1),ty=tx[0],tO=tx[1],tZ=(0,c.useRef)(!1),tS=(0,c.useRef)(),t_=(0,c.useState)(eb),tM=t_[0],tN=t_[1],tE=(0,c.useState)(null),tA=tE[0],tL=tE[1],tT=(0,m.JZ)(null==N||null===(b=N.metadata)||void 0===b?void 0:b.attachments),tF=(0,c.useState)(tT),tB=tF[0],tR=tF[1],tz=(0,c.useState)(null),tG=tz[0],tU=tz[1],t$=(0,m.vc)(null==N||null===(g=N.metadata)||void 0===g?void 0:g.videoLinks),tW=(0,c.useState)(t$),tq=tW[0],tH=tW[1],tV=(0,c.useState)(null),tY=tV[0],tJ=tV[1],tX=(0,c.useState)(null),tK=tX[0],tQ=tX[1],t0=(null==N||null===(y=N.metadata)||void 0===y?void 0:y.content)||X||"",t1=(0,c.useState)(function(){return(0,D.P)(t0)})[0],t2=(0,c.useState)(t0),t9=t2[0],t3=t2[1],t5=(0,c.useState)(!1),t4=t5[0],t6=t5[1],t8=(0,c.useState)(eQ),t7=t8[0],ne=t8[1],nt=(0,c.useState)(!1),nn=nt[0],nr=nt[1],ni=(0,c.useState)(!1),no=ni[0],na=ni[1],ns=(0,c.useState)(!1),nl=ns[0],nc=ns[1],nu=(0,c.useRef)(!1),nd=(0,c.useRef)(),np=(0,c.useRef)(),nf=(0,c.useRef)(!1),nm=0===E?"post":E>1?"reply":"comment",nh=(0,tg.C1)(),nv=(0,o.Z)(nh,3),nb=nv[0],ng=nv[1],nx=nv[2],ny=(0,c.useState)(null),nw=ny[0],nC=ny[1],nj=(0,R.V)((0,c.useRef)({}).current),nk=(0,o.Z)(nj,1)[0],nO=(0,c.useState)(0),nP=nO[0],nI=nO[1],nD=(0,c.useRef)(0),nZ=(0,c.useRef)(),nS=(0,c.useState)([]),n_=nS[0],nM=nS[1],nN=(0,tg.c8)(),nE=(0,o.Z)(nN,3),nA=nE[0],nL=nE[1],nT=nE[2],nF=(0,c.useState)(!1),nB=nF[0],nR=nF[1],nz=0===E&&!N&&(0,z.CP)({user:ez,group:W,member:null==ez?void 0:ez.member}),nG=(0,c.useState)(!!eh),nU=nG[0],n$=nG[1],nW=(0,c.useState)(!1),nq=nW[0],nH=nW[1],nV=(0,c.useState)(eh?null==eh||null===(j=eh.entries)||void 0===j?void 0:j.map(function(e){return e.text}):tD),nY=nV[0],nJ=nV[1],nX=(0,c.useMemo)(function(){var e;return eh&&!(0,m.wq)(null==eh||null===(e=eh.entries)||void 0===e?void 0:e.map(function(e){return e.text}),nY)},[eh,nY]),nK=!!tB.length||!!tq.length,nQ=(0,c.useMemo)(function(){if(!(null!=eR&&null!==(e=eR.metadata)&&void 0!==e&&e.lastNotifyAll)||null!=eR&&null!==(t=eR.metadata)&&void 0!==t&&t.canNotifyAll)return!0;var e,t,n=te(eR.metadata.lastNotifyAll),r=n.hoursUntil,i=n.minutesUntil,o=n.secondsUntil;return r<=0&&i<=0&&o<=0},[null==eR||null===(k=eR.metadata)||void 0===k?void 0:k.canNotifyAll,null==eR||null===(O=eR.metadata)||void 0===O?void 0:O.lastNotifyAll]),n0=(0,c.useMemo)(function(){return tc!==tr||t9!==t0||!(0,m.wq)(tB,tT)||tM!==eb||!(0,m.wq)(tq,t$)||nX||eh&&!nU||!eh&&nU},[tc,t9,tr,t0,tB,tT,tM,eb,tq,t$,nX,eh,nU]);(0,c.useEffect)(function(){return nu.current=!0,function(){nu.current=!1}},[]),(0,c.useEffect)(function(){ec&&!tZ.current&&nK&&(tZ.current=!0,ec())},[nK,ec]);var n1=(0,c.useCallback)(function(){t7&&ne(!1),nb&&nx(),J&&J(),e9&&e5(G.Ek,function(){return{disableEscape:!1}}),eQ&&nw&&(B().push(nw),nC(null))},[t7,J,e5,e9,nw,eQ,nb,nx]);(0,c.useEffect)(function(){var e=function(e,t){var n=t.shallow;if(eQ){if(!n0||nf.current||n)n1();else throw nC(e),ng(),B().events.emit("routeChangeError"),"Abort route change. Please ignore this error."}else if(!n0||nf.current||n||confirm("You haven't finished your ".concat(nm," yet. Do you want to leave without finishing?")))n1();else throw B().events.emit("routeChangeError"),"Abort route change. Please ignore this error."},t=function(e){n0&&!nf.current&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",t),B().events.on("routeChangeStart",e),function(){window.removeEventListener("beforeunload",t),B().events.off("routeChangeStart",e)}},[n0,nm,n1,eQ,ng]),(0,c.useEffect)(function(){var e,t;nu.current&&(null!=N&&null!==(e=N.metadata)&&void 0!==e&&e.attachments&&tR((0,m.JZ)(N.metadata.attachments)),null!=N&&null!==(t=N.metadata)&&void 0!==t&&t.labels&&tN(N.metadata.labels))},[N]);var n2=(0,c.useCallback)(function(e){u.Z.deleteFile({fileId:e})},[]),n9=(0,c.useCallback)(function(){nT(),null==ew||ew()},[nT,ew]);(0,c.useEffect)(function(){e5(G.Ek,function(){return{disableEscape:n0}})},[n0,e5]);var n3=(0,c.useCallback)(function(){n$(!1),nJ(tD)},[]),n5=(0,c.useMemo)(function(){return nU?(0,w.jsx)(eW,{children:(0,w.jsx)(et,{options:nY,setOptions:nJ,initialPoll:eh,onRemove:n3})}):null},[eh,nU,nY,n3]),n4=(0,c.useCallback)(function(){var e;if(!(null!==(e=nd.current)&&void 0!==e&&e.showPreviewState())){if(!n0){n1();return}setTimeout(function(){if(window.confirm("You haven't finished your ".concat(nm," yet. Do you want to leave without finishing?"))){var e,t;tB.filter(function(e){return!tT.includes(e)}).forEach(function(e){n2(e)}),null===(e=np.current)||void 0===e||e.clear(),null===(t=nd.current)||void 0===t||t.restoreState({}),n1()}},0)}},[n1,tB,n0,tT,nm,n2]);(0,c.useEffect)(function(){var e=function(e){"Escape"===e.code&&setTimeout(function(){n4()},100)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n4]),(0,c.useEffect)(function(){e3&&(n4(),e5(G.Ek,function(){return{showInputCancelMessage:!1}}))},[e5,n4,e3]);var n6=(0,c.useCallback)((n=(0,i.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!nd.current){e.next=15;break}return e.prev=1,e.next=4,nd.current.addFiles({files:t});case 4:(n=e.sent.error)&&tU(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("PostInputForm: addFiles failed"),tk.Tb(e.t0);case 13:e.next=17;break;case 15:console.error("attachments ref not available"),tk.Tb(Error("PostInputForm: attachments ref not available"));case 17:case"end":return e.stop()}},e,null,[[1,9]])})),function(e){return n.apply(this,arguments)}),[]),n8=(0,c.useCallback)(function(e){var t=(0,eo.QT)({e:e,accept:(0,eo.Yw)()});t&&n6(t)},[n6]),n7=(0,c.useCallback)((r=(0,i.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n6(t.target.files);case 2:t.target.value="";case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[n6]),re=(0,c.useCallback)(function(e){n7({target:{files:e}})},[n7]),rt=(0,l.u)({onDrop:re}),rn=rt.getRootProps,rr=rt.getInputProps,ri=rt.isDragActive,ro=rn(),ra=rr({onClick:function(e){return e.preventDefault()}}),rs=(0,c.useCallback)(function(){if(!n0){n1();return}ng()},[n1,n0,ng]);(0,c.useImperativeHandle)(t,function(){return{hasChanges:function(){return n0},cancel:function(){return eQ?rs():n4()},getEditor:function(){return np.current}}});var rl=(0,c.useCallback)(function(e){tf(null),tu(e.target.value)},[]),rc=(0,c.useCallback)(function(e){var t;if(e){if(409===e.status){tQ("Comments have been disabled");return}if(429===e.status){e5(G.bI,{message:"Posting too fast! Try again later",severity:"error"});return}if(422!==e.status){tQ("There was an error");return}if((null===(t=e.data)||void 0===t||null===(t=t.fields)||void 0===t?void 0:t.length)===0){tQ("Validation failed");return}e.data.fields.forEach(function(e){switch(e.name){case"metadata.title":tf(e.error);break;case"metadata.content":tv(e.error);break;case"metadata.labels":tL(e.error);break;case"metadata.attachments":tU(e.error);break;case"metadata.video_links":tJ(e.error);break;default:tQ(e.error)}})}},[e5]),ru=(0,c.useCallback)((0,i.Z)(s().mark(function e(){var t,n,r,i,o,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!nU){e.next=6;break}return e.next=3,u.Z.createPoll({groupId:W.id,options:nY.filter(function(e){return!!e})});case 3:r=e.sent.data.pollId;case 6:return e.next=8,u.Z.createPost({postType:q,rootID:A,parentID:(null==F?void 0:F.id)||void 0,groupID:W.id,title:tc,content:t9,attachments:tB?tB.join(","):void 0,videoLinks:tq.length?tq.join("\n"):void 0,labels:0===E&&tM?tM:void 0,notify:nB?"members":void 0,pollId:r,follow:0===E,action:nq});case 8:if(o=(i=e.sent).data,!(a=i.error)){e.next=15;break}return rc(a),nc(!1),e.abrupt("return");case 15:null===(t=np.current)||void 0===t||t.clear(),null===(n=nd.current)||void 0===n||n.restoreState({}),nf.current=!0,V({post:o});case 19:case"end":return e.stop()}},e)})),[t9,tB,null==W?void 0:W.id,tM,E,nB,V,F,nY,q,A,tc,tq,nU,nq,rc]),rd=(0,c.useCallback)((0,i.Z)(s().mark(function e(){var t,n,r,i,o,a;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=tB.join(","),!(!eh&&nU)){e.next=8;break}return r=nY.filter(function(e){return!!e}),e.next=5,u.Z.createPoll({groupId:W.id,options:r});case 5:n=e.sent.data.pollId;case 8:return e.next=10,u.Z.updatePost({postID:N.id,title:tc,content:t9,attachments:t,videoLinks:tq.length?tq.join("\n"):"",labels:0===E&&tM?tM:void 0,deletePoll:eh&&!nU,pollId:n});case 10:if(o=(i=e.sent).data,a=i.error,!(eh&&!nU)){e.next=18;break}return e.next=16,u.Z.deletePoll({pollId:eh.id});case 16:e.next=22;break;case 18:if(!nX){e.next=22;break}return r=nY.filter(function(e){return!!e}),e.next=22,u.Z.updatePoll({pollId:eh.id,groupId:W.id,options:r});case 22:if(!a){e.next=26;break}return rc(a),nc(!1),e.abrupt("return");case 26:nf.current=!0,Y({post:o,newPollOptions:r,pollId:(null==eh?void 0:eh.id)||n,pollDeleted:eh&&!nU});case 28:case"end":return e.stop()}},e)})),[N,t9,tB,null==W?void 0:W.id,tM,E,Y,eh,nX,nY,nU,tc,tq,rc]),rp=(0,c.useCallback)(function(){if(tf(null),tv(null),tU(null),tJ(null),tL(null),tQ(null),Q&&!tc.trim()){tf("Your post needs a title");return}if(er&&!tM){tL("You must select a category");return}nc(!0),(0,i.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=5;break}return e.next=3,rd();case 3:e.next=7;break;case 5:return e.next=7,ru();case 7:t7&&ne(!1),nc(!1);case 9:case"end":return e.stop()}},e)}))()},[N,rd,ru,t7,ne,nc,tM,er,Q,tc]),rf=(0,c.useCallback)(function(){if("unlink"===tt){np.current&&np.current.unsetLink();return}e8(!0)},[tt]),rm=(0,c.useCallback)(function(e){var t=e.destination;e8(!1),np.current&&(np.current.setLink(t),np.current.focus())},[]),rh=(0,c.useCallback)(function(){e8(!1),np.current&&np.current.focus()},[]),rv=(0,c.useCallback)(function(){t6(!0)},[]),rb=(0,c.useCallback)(function(){null!=eh&&eh.totalVotes||(n$(function(e){return!e}),nH(!1))},[null==eh?void 0:eh.totalVotes]),rg=(0,c.useCallback)(function(e){var t=e.destination;t6(!1);var n=(0,h.ak)(t),r=n.provider,o=n.videoID;if(r===h.a.Unsupported||!o){tJ("Invalid video url");return}(0,i.Z)(s().mark(function e(){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nd.current.addVideoLink({url:t});case 2:(n=e.sent.error)&&tJ(n);case 5:case"end":return e.stop()}},e)}))()},[]),rx=(0,c.useCallback)(function(){t6(!1),np.current&&np.current.focus()},[]),ry=(0,c.useCallback)(function(e){var t=e.files,n=e.videoLinks;tU(null),tJ(null),tR((void 0===t?[]:t).map(function(e){return e.id})),tH(void 0===n?[]:n)},[]),rw=(0,c.useCallback)(function(e){na(e)},[]),rC=(0,c.useCallback)(function(e){tL(null),tN(e.id),nr(!1)},[]),rj=(0,c.useCallback)((a=(0,i.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nd.current.addFiles({files:[{id:t.id,isGiphy:!0,metadata:{fileName:"".concat(t.query,".gif"),contentType:"image/gif",externalSrc:t.md,externalSrcSmall:t.sm}}]});case 2:(n=e.sent.error)&&tU(n);case 5:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),[]),rk=(0,c.useCallback)(function(){nH(function(e){return!e}),n$(!1)},[]),rO=(0,c.useCallback)(function(e){var t,n=tj[e];n&&(tu(n.title),null===(t=np.current)||void 0===t||t.set([{type:"paragraph",content:[{type:"text",text:n.body}]}]),n.poll?(n$(!0),nJ(n.poll)):n3())},[n3]),rP=tp||th||tA||tG||tY||tK||"",rI=!(0,c.useMemo)(function(){return!(0,f.Kv)({content:t9}).trim()},[t9])||!!tB.length||!!tq.length,rD=tp||th||tA||tY||tK||"",rZ=(0,c.useMemo)(function(){return nU&&nY.reduce(function(e,t){return e&&!t},!0)},[nU,nY]),rS=!rI||!!rD||!n0||no||rZ||nl;(0,c.useEffect)(function(){nP===nD.current||(nD.current=nP,rS||rp())},[nP,rp,rS]);var r_=(0,c.useCallback)(function(e){tv(null);var t=(0,D.C)(e);t3(t),ea&&ea(t)},[ea]),rM=(0,c.useCallback)(function(){np.current&&(np.current.canSetLink()?tn("link"):np.current.canUnsetLink()?tn("unlink"):tn("disabled"))},[]),rN=(0,c.useCallback)(function(){nI(function(e){return e+1})},[]);(0,c.useEffect)(function(){var e={},t=[];el.forEach(function(n){e[null==n?void 0:n.id]||ez.id===(null==n?void 0:n.id)||(e[null==n?void 0:n.id]=!0,t.push(n))}),nM(t.map(function(e){var t="".concat(null==e?void 0:e.firstName," ").concat(null==e?void 0:e.lastName);return{id:null==e?void 0:e.id,fullSearch:(0,d.Z)(t),lastSearch:(0,d.Z)(null==e?void 0:e.lastName),user:e}}))},[el,null==ez?void 0:ez.id]),(0,c.useEffect)(function(){ec&&!rS&&ec()},[rS,ec]);var rE=(0,c.useCallback)(function(e){nA?(tu((0,m.QS)({emoji:e,inputRef:tS})),setTimeout(function(){tS.current.focus()},0)):np.current.insert(e)},[nA]),rA=(0,z.CP)({user:ez,member:null==ez?void 0:ez.member,group:eR}),rL=(0,c.useMemo)(function(){var e=[{label:"Attach file",htmlFor:"file-upload-input-".concat(eg||(null==N?void 0:N.id)||"post")},{label:"Add link",onClick:rf},{label:"Add video link",onClick:rv}];return rA&&0===E&&!N&&e.push({label:nq?"Remove action":"Add action",onClick:rk}),e},[eg,N,rf,rv,rk,rA,E,nq]),rT=!rS||N||nK;(0,c.useEffect)(function(){if(!eQ&&1===E&&rT&&!N){var e;null===(e=nZ.current)||void 0===e||e.scrollIntoView()}},[eQ,E,N,rT]);var rF=(0,c.useMemo)(function(){return eQ?void 0:!rS||!(E>1)||no||nK||N?rT?(0,w.jsxs)(en.X,{justifyContent:"flex-end",marginBottom:8,children:[(0,w.jsx)(eq,{onClick:n4,variant:"borderless",label:"Cancel"}),(0,w.jsx)("div",{onClick:rS?null:rp,children:(0,w.jsx)(eH,{disabled:rS,label:H,loading:nl})})]}):void 0:(0,w.jsxs)(en.X,{justifyContent:"flex-end",marginTop:16,marginBottom:8,children:[(0,w.jsx)(eq,{onClick:n4,variant:"borderless",label:"Cancel"}),(0,w.jsx)(eH,{disabled:!0,label:H,loading:nl})]})},[rS,no,nK,N,eQ,H,nl,E,rT,n4,rp]),rB=(0,c.useMemo)(function(){if(e6)return(0,w.jsx)(P,{open:!0,onConfirm:rm,onClose:rh})},[e6,rm,rh]),rR=(0,c.useMemo)(function(){if(t4)return(0,w.jsx)(C,{open:!0,onConfirm:rg,onClose:rx})},[t4,rg,rx]),rz=(0,c.useMemo)(function(){if(eQ)return(0,w.jsx)(ts,{open:nb,postTypeName:nm,onConfirm:n1,onClose:nx})},[eQ,n1,nm,nb,nx]),rG=(0,c.useMemo)(function(){if(!ee)return(0,w.jsx)(tb,{labelsError:tA,filteredGroupLabels:ev,labelID:tM,handlePostLabelChange:rC,setMobileCategoryDialogOpen:nr})},[tA,ev,tM,rC,nr,ee]),rU=(0,c.useMemo)(function(){if(nn)return(0,w.jsx)(L,{open:nn,onConfirm:rC,onClose:function(){return nr(!1)},labels:ev,selectedID:tM||void 0})},[nn,rC,nr,ev,tM]);if(E>0)return(0,w.jsxs)(U.df,{onChange:function(e){tO(function(t){return t||e})},children:[(0,w.jsxs)(eN,tP(tP({},ro),{},{children:[(0,w.jsxs)(x.s,{width:"100%",children:[(0,w.jsxs)(en.X,{width:"100%",gap:4,children:[(0,w.jsxs)(eA,{marginBottom:!eQ&&rT?16:0,width:"100%",children:[(0,w.jsx)("input",tP({},ra)),(0,w.jsx)(e_,{$isVisible:nk||ri,children:(0,w.jsx)(eM,{children:(0,w.jsx)(eP,{children:"Drop files here to upload"})})}),(0,w.jsxs)(eE,{$isDragging:nk||ri,children:[(0,w.jsx)(eL,{$following:es,children:(0,w.jsx)(eI,{children:(0,w.jsx)($.Z,{ref:np,onPaste:n8,initialContent:t1,autoFocus:!eQ&&!!ty,placeholder:K,onSelectionChange:rM,onChange:r_,onKeyboardSave:rN,minHeight:0,userMentionsEnabled:!0,courseReferencesEnabled:((null==W||null===(M=W.metadata)||void 0===M?void 0:M.numCourses)||0)>0,threadUsers:n_,groupID:null==W?void 0:W.id,onFocus:ew,onBlur:eC,context:"post-input-form-comment"})})}),(0,w.jsx)(eK,{$hasAttachments:nK,children:(0,w.jsx)(I.Z,{ref:nd,editing:!0,post:N,onFileInputChange:n7,onStateChange:rw,onChange:ry,level:E})}),(0,w.jsx)(eT,{children:(0,w.jsx)(e1,{commentId:eg,handleFileInputChange:n7,post:N,menuItems:rL,handleLinkIconClick:rf,handleAddVideoIconClick:rv,linkable:tt,onEmojiClick:rE,onGifSelect:rj})})]})]}),eQ&&n0&&(0,w.jsx)(e0,{variant:"icon-borderless-no-hover",icon:"Send",iconSize:21,$canSubmit:!rS,onClick:rS?void 0:rp})]}),!!rP&&(0,w.jsx)(e2.x,{justifyContent:"flex-end",marginTop:16,children:(0,w.jsx)(ex,{children:rP})}),rF]}),rB,rR]})),rz,(0,w.jsx)("div",{ref:nZ})]});var r$=(0,w.jsxs)(x.s,{width:"100%",children:[ei&&(0,w.jsxs)(en.X,{gap:8,marginBottom:8,children:[(0,w.jsx)(T.Z,{disableLink:!0,size:25,user:ez,group:W}),(0,w.jsxs)(e$,{children:[(0,w.jsx)(eZ,{children:"".concat(ez.firstName," ").concat(ez.lastName)}),(0,w.jsxs)(eS,{children:["\xa0","posting in","\xa0"]}),(0,w.jsx)(eZ,{children:null==W||null===(S=W.metadata)||void 0===S?void 0:S.displayName})]})]}),Q&&(0,w.jsx)(eB,{children:(0,w.jsx)(eG,{value:tc,variant:"borderless",ref:tS,$hasError:!!tp,onChange:rl,onFocus:nL,placeholder:"Title",staticLabel:!0})}),(0,w.jsxs)(eU,{children:[(0,w.jsx)(eI,{children:(0,w.jsx)($.Z,{ref:np,initialContent:t1,onPaste:n8,autoFocus:!0,placeholder:K,onSelectionChange:rM,onFocus:n9,onBlur:eC,onChange:r_,userMentionsEnabled:!0,courseReferencesEnabled:((null==W||null===(_=W.metadata)||void 0===_?void 0:_.numCourses)||0)>0,threadUsers:n_,groupID:null==W?void 0:W.id,onKeyboardSave:rN})}),nq&&(0,w.jsxs)(eu,{children:[(0,w.jsxs)(ed,{children:[(0,w.jsxs)(ep,{children:[(0,w.jsx)(eJ,{name:"Action"}),"Complete action"]}),(0,w.jsx)(ef,{onClick:rk,children:"Remove"})]}),(0,w.jsx)(em,{children:"Describe the action you want members to complete. Example: “Introduce yourself and share a picture of your workspace”. When somebody comments, the action will be marked as complete. Tip: Pin action posts to course pages to make them practical and interactive."})]}),n5,rA&&ej&&(0,w.jsx)(tw,{handleTemplateButtonClick:rO}),eQ&&(0,w.jsx)(I.Z,{ref:nd,editing:!0,post:N,onFileInputChange:n7,onStateChange:rw,onChange:ry,level:E})]}),!eQ&&(0,w.jsx)(I.Z,{ref:nd,editing:!0,post:N,onFileInputChange:n7,onStateChange:rw,onChange:ry,level:E}),!!rP&&(0,w.jsx)(en.X,{justifyContent:"flex-end",paddingTop:12,marginBottom:8,children:(0,w.jsx)(eD,{children:rP})}),eQ&&0===E&&(0,w.jsx)(Z.i,{}),(0,w.jsxs)(en.X,{paddingBottom:8,paddingTop:eQ?8:24,alignItems:"center",children:[(0,w.jsx)(eV,{children:(0,w.jsx)(tl,{post:N,handleFileInputChange:n7,level:E,menuItems:rL,poll:eh,pollOptions:nY,showPollForm:nU,handlePollIconClick:rb,handleLinkIconClick:rf,linkable:tt,handleAddVideoIconClick:rv,onEmojiClick:rE,onGifSelect:rj,onActionClick:rk,isActionPost:nq})}),(0,w.jsx)(eO,{children:rG}),!eQ&&(0,w.jsxs)(en.X,{justifyContent:"flex-end",children:[(0,w.jsx)(eY,{onClick:n4,variant:"borderless",label:"Cancel"}),(0,w.jsx)(ta,{notifyAll:nB,handleSubmitClick:rp,submitButtonDisabled:rS,confirmButtonLabel:H,loading:nl})]}),rB,rR,rU]}),rz,!eQ&&nz&&(0,w.jsx)(to,{canNotifyAll:nQ,setNotifyAll:nR,notifyAll:nB})]});return eQ&&0===E?(0,w.jsxs)(tC.u_,{open:t7,shouldFullscreenOnMobile:!0,onClose:rs,wrapperStyle:tI,children:[(0,w.jsx)(en.X,{justifyContent:"flex-end",margin:"11px 10px",children:(0,w.jsx)(ta,{notifyAll:nB,handleSubmitClick:rp,submitButtonDisabled:rS,confirmButtonLabel:H,loading:nl})}),nz&&(0,w.jsx)(to,{canNotifyAll:nQ,setNotifyAll:nR,notifyAll:nB}),(0,w.jsx)(ey,{children:r$})]}):(0,w.jsx)(eN,tP(tP({},ro),{},{children:(0,w.jsxs)(eX,{$level:E,$isPost:!!N,children:[(0,w.jsx)("input",tP({},ra)),(0,w.jsx)(e_,{$isVisible:nk||ri,children:(0,w.jsx)(eM,{children:(0,w.jsx)(eP,{children:"Drop files here to upload"})})}),(0,w.jsx)(eF,{children:r$})]})}))});tZ.defaultProps={postType:"generic",requireTitle:!1,hideLabel:!1,requireLabel:!1,showMeta:!0,confirmButtonLabel:"Post",allUsers:[],filteredGroupLabels:[],initialLabel:"",showPostTemplates:!1};var tS=(0,c.memo)(tZ)},89557:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(23450),i=n.n(r),o=n(67294),a=n(14251),s=n(65009),l=n(86031),c=n(88325),u=n(73793),d=n(40192),p=n(73674),f=n(76958),m=n(35306),h=n(50378),v=n(20668),b=(0,h.iv)(["span{color:",";}"],a.O9.sd1),g=h.ZP.span.withConfig({displayName:"styled__GroupInfoText",componentId:"sc-1ayhwt6-0"})(["color:",";max-width:",";white-space:nowrap;"," ",";"],a.O9.n7,function(e){return e.theme.isMobile?"30vw":"300px"},v.c.t11,b),x=h.ZP.div.withConfig({displayName:"styled__GroupNameText",componentId:"sc-1ayhwt6-1"})(["",";"],v.c.t6),y=h.ZP.div.withConfig({displayName:"styled__PostedDate",componentId:"sc-1ayhwt6-2"})(["color:",";white-space:nowrap;",";"],a.O9.n5,v.c.t11),w=(0,h.ZP)(l.x).withConfig({displayName:"styled__UserNameWrapper",componentId:"sc-1ayhwt6-3"})(["overflow:hidden;text-overflow:ellipsis;padding-left:",";"],function(e){return e.$hideAvatar?0:"8px"}),C=(0,h.ZP)(l.x).withConfig({displayName:"styled__PostTimeWrapper",componentId:"sc-1ayhwt6-4"})(["align-items:center;height:100%;overflow:hidden;"]),j=h.ZP.div.withConfig({displayName:"styled__PostTime",componentId:"sc-1ayhwt6-5"})(["color:",";margin-left:4px;",";",";",";"],a.O9.n5,v.c.t11,v.c.ellipsis,b),k=n(85893);function O(e){var t,n=e.post,r=e.group,o=e.hideAvatar,h=e.avatarSize,v=e.showVotes,b=e.menu,O=e.hideEdited,P=e.userNameColor,I=e.style,D=e.showGroup,Z=e.isPostDetailRoot,S=e.sortType,_=n.metadata||{},M=_.deleted?null:n.user,N=(0,u.bI)("isMobile").isMobile,E=parseInt(null==n||null===(t=n.metadata)||void 0===t?void 0:t.upvotes)||0,A=v?i()("like",E,!0):"",L=!!_.contentEdit||!!_.titleEdit||!!_.attachmentsEdit;return N&&Z?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(l.x,{alignItems:"center",flexGrow:1,style:I,children:[(0,k.jsx)(p.Z,{user:M,group:r,size:h}),(0,k.jsxs)(l.x,{alignItems:"baseline",gap:4,padding:"0px 8px",style:{minWidth:0},children:[(0,k.jsx)(f.Z,{userPreview:!D,user:M,userNameHl:_.userNameHl,group:r,color:P,hoverUnderline:!0,typographyVariant:"t6"}),(0,k.jsx)(d.Z,{post:n,showMobile:!0,children:(0,k.jsxs)(j,{children:[(0,c.ur)({value:n.createdAt,justNow:!1}),!O&&L?" (edited)":""]})})]}),b&&(0,k.jsx)(l.x,{justifyContent:"flex-end",flexGrow:1,children:b})]})}):N&&!D?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(l.x,{alignItems:"center",justifyContent:"space-between",flexGrow:1,style:I,children:[!o&&(0,k.jsx)(p.Z,{user:M,group:r,size:h,userPreview:!D}),(0,k.jsxs)(w,{$hideAvatar:o,children:[(0,k.jsx)(f.Z,{userPreview:!D,user:M,userNameHl:_.userNameHl,group:r,color:P,hoverUnderline:!0,typographyVariant:"t6"}),(0,k.jsx)(d.Z,{post:n,showMobile:!0,children:(0,k.jsx)(C,{children:(0,k.jsxs)(j,{children:[A&&(0,k.jsx)("span",{style:{color:a.O9.n5,marginLeft:3},children:A})," • ".concat((0,c.ur)({justNow:!1,value:"newest-cm"===S&&n.metadata.lastComment?n.metadata.lastComment:n.createdAt})),!O&&L?" (edited)":""]})})})]}),b]})}):(0,k.jsxs)(s.X,{gap:8,alignItems:"center",flexGrow:1,style:I,children:[!o&&(0,k.jsx)(p.Z,{user:M,group:r,size:h,userPreview:!D}),(0,k.jsxs)(s.X,{alignItems:"baseline",children:[(0,k.jsx)(l.x,{flexGrow:1,marginRight:4,children:(0,k.jsx)(f.Z,{userPreview:!D,user:M,userNameHl:_.userNameHl,group:r,color:P,hoverUnderline:!0,typographyVariant:"t6",maxWidth:N?"30vw":"300px",showLevelTitle:!0})}),D&&(0,k.jsxs)(s.X,{gap:4,alignItems:"center",paddingRight:4,children:[(0,k.jsx)(g,{children:"in"}),(0,k.jsx)(x,{children:(0,k.jsx)(m.Z,{group:r})})]}),(0,k.jsxs)(y,{children:[D&&(0,k.jsx)("span",{children:"\xa0"}),"".concat(A," • ").concat((0,c.ur)({value:"newest-cm"===S&&n.metadata.lastComment?n.metadata.lastComment:n.createdAt})),!O&&L?" (edited)":""]})]}),b&&(0,k.jsx)(l.x,{justifyContent:"flex-end",flexGrow:1,children:b})]})}O.defaultProps={hideAvatar:!1,avatarSize:20,showVotes:!1,hideEdited:!1,userNameColor:a.O9.n7};var P=(0,o.memo)(O)},40192:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(67294),i=n(11163),o=n(80008),a=n.n(o),s=n(36581),l=n(66703),c=n(5095),u=n(20668),d=n(14251),p=n(50378).ZP.div.withConfig({displayName:"styled__TooltipText",componentId:"sc-19vzj1a-0"})(["color:",";",";"],function(e){return e.theme.isDarkTheme?d.O9.n7:d.O9.n1},u.c.t11),f=n(85893),m=(0,r.memo)(function(e){var t=e.post,n=e.children,o=e.showMobile,u=(0,i.useRouter)(),d=u.pathname,m=u.query,h=(0,c.mp)({pathname:d,query:m}),v=(0,r.useCallback)(function(){return(0,f.jsxs)(s.s,{gap:4,children:[(0,f.jsx)(p,{children:"".concat(h?"Post created: ":"").concat(a()(t.createdAt).format("MMM Do YYYY h:mma"))}),t.metadata.lastComment&&h&&(0,f.jsx)(p,{children:"Last comment: ".concat(a()(t.metadata.lastComment/1e6).format("MMM Do YYYY h:mma"))})]})},[t,h]);return(0,f.jsx)(l.u,{content:v,showMobile:void 0!==o&&o,children:n})})},57305:function(e,t,n){n.d(t,{C:function(){return function e(t,n){return t?t.map(function(t){var n,r;switch(t.type){case"paragraph":return(null===(n=t.content)||void 0===n?void 0:n.map(function(e){var t;switch(e.type){case"text":if(null!==(t=e.marks)&&void 0!==t&&t.length){if(e.marks.length>1&&console.error("text node with 2+ marks",e),"link"===e.marks[0].type)return"[".concat((0,o.bk)(e.text||e.marks[0].attrs.href),"](").concat(e.marks[0].attrs.href,")");return console.error("text node with unknown mark type",e),""}return(0,o.bk)(e.text)||"";case"user-mention":return"[@".concat((0,o.bk)(e.attrs.label),"](obj://user/").concat(e.attrs.id,")");case"course-reference":return"[#".concat((0,o.bk)(e.attrs.label),"](obj://course/").concat(e.attrs.id,"?cn=").concat(e.attrs.courseName,")")}}).join(""))||"";case"unorderedList":return"[ul]"+((null===(r=t.content)||void 0===r?void 0:r.map(function(t){return"[li]"+e(t.content)}).join(""))||"");case"orderedList":var i,a,s=(null===(i=t.attrs)||void 0===i?void 0:i.start)||0;return(s>0?"[ol:".concat(s,"]"):"[ol]")+((null===(a=t.content)||void 0===a?void 0:a.map(function(t){return"[li]"+e(t.content)}).join(""))||"");default:return console.error("unknown content node type: ".concat(t.type)),"(unknown node type: ".concat(t.type,")")}}).join(i().isUndefined(n)?"\n":n):""}},P:function(){return function e(t){if(!t)return[{type:"paragraph"}];var n=[];return t.split("\n").forEach(function(t){var r=(0,o.Ne)({content:t});if(r){n.push({type:r.listType,attrs:{start:r.start},content:r.items.map(function(t){return{type:"listItem",content:e(t)}})});return}var i={type:"paragraph"};if(!t){n.push(i);return}var a=(0,o.fV)({content:t});if(!a.length){i.content=[{type:"text",text:(0,o.en)(t)}],n.push(i);return}var s=[],l=0;a.forEach(function(e){var n=e.label.text,r=e.destination.text;if(l<e.label.start-1&&s.push({type:"text",text:(0,o.en)(t.slice(l,e.label.start-1))}),l=e.destination.end+1,e.destination.text.startsWith("obj://user/"))s.push({type:"user-mention",attrs:{id:r.slice(11),label:n.slice(1)}});else if(e.destination.text.startsWith("obj://course/")){var i=/obj:\/\/course\/(.{32})\?cn=(.+)/.exec(r);if(i){var a=i[1],c=i[2];s.push({type:"course-reference",attrs:{id:a,label:n.slice(1),courseName:c}})}}else s.push({type:"text",text:n,marks:[{type:"link",attrs:{href:r,target:"_blank"}}]})}),l<t.length&&s.push({type:"text",text:(0,o.en)(t.slice(l))}),i.content=s,n.push(i)}),n}}});var r=n(96486),i=n.n(r),o=n(29610)},77567:function(e,t,n){n.d(t,{Z:function(){return er}});var r=n(90116),i=n(50029),o=n(64687),a=n.n(o),s=n(20336),l=n(52701),c=n(93237),u=n(91842),d=n(71284),p=n(67294),f=n(95419),m=n(37500),h=n(12967),v=n(59499),b=n(5865),g=n(16722),x=n(2376),y=n(73793),w=n(14251),C=n(65009),j=n(36581),k=n(14760),O=n(85893),P=(0,p.memo)(function(e){var t=e.item,n=e.isCurrent,r=e.onMouseOver,i=e.onClick,o=t.course,a=(0,y.bI)("isMobile","currentGroup"),s=a.isMobile,l=a.currentGroup,c=o.metadata,u=c.displayTitle,d=c.videoThumbnail,p=c.courseTitle,f=l.metadata.numCourses;return(0,O.jsx)("div",{style:{cursor:"pointer",display:"flex",alignItems:"center",background:n?w.O9.p2:"transparent",padding:"0px 16px",height:56,width:s?"100vw":void 0},onMouseEnter:r,onClick:i,children:(0,O.jsxs)(C.X,{alignItems:"center",gap:12,children:[(0,O.jsx)("div",{style:{height:40,width:40,borderRadius:4,backgroundImage:'url("'.concat(d,'")'),backgroundSize:"cover"}}),(0,O.jsxs)(j.s,{children:[(0,O.jsx)(k.Z,{variant:"t5",maxLines:1,ellipsis:!0,color:n?w.O9.fgPrimary:void 0,style:{width:s?void 0:273,maxWidth:s?void 0:273},children:u}),f>1?(0,O.jsx)(k.Z,{variant:"t11",maxLines:1,ellipsis:!0,color:n?w.O9.fgPrimary:void 0,style:{width:s?void 0:273,maxWidth:s?void 0:273},children:p}):null]})]})})}),I=n(45088);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Z=(0,p.forwardRef)(function(e,t){var n=e.items,r=e.command,i=e.itemComponent,o=(0,p.useState)(0),a=o[0],s=o[1];(0,p.useEffect)(function(){s(0)},[n]);var l=(0,p.useCallback)(function(e){var t=n[e];t&&r(t)},[n,r]);return(0,p.useImperativeHandle)(t,function(){return{onKeyDown:function(e){var t=e.event;return!!n.length&&("ArrowUp"===t.key?(s((a+n.length-1)%n.length),!0):"ArrowDown"===t.key?(s((a+1)%n.length),!0):"Enter"===t.key&&(l(a),!0))}}},[n,a,l]),n.length?(0,O.jsx)("div",{className:"skool-editor-suggestion-list",children:n.map(function(e,t){return(0,O.jsx)(i,{item:e,isCurrent:t===a,onMouseOver:function(){return s(t)},onClick:function(){return l(t)}},t)})}):null});function S(e){var t,n;return{onStart:function(r){var i,o,a=null!==(i=null===(o=r.items)||void 0===o?void 0:o.metadata)&&void 0!==i?i:{},s=a.isMobile,l=a.context,c=s&&"post-input-form-comment"===l;t=new d.M_(Z,{props:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({itemComponent:e},r),editor:r.editor});var u=[{name:"flip",options:{fallbackPlacements:[],allowedAutoPlacements:c?["top-start"]:["top-start","bottom-start"]}}];c&&u.push({name:"offset",options:{offset:[0,24]}}),n=(0,I.ZP)("body",{getReferenceClientRect:function(){if(!r.clientRect)return{x:0,y:0,width:0,height:0};var e=r.clientRect();return s&&(e.x=0),e},appendTo:function(){return document.body},content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",zIndex:1300,placement:c?"top-start":"auto-start",maxWidth:s?"calc(100vw - 10px)":"none",popperOptions:{modifiers:u}})},onUpdate:function(e){var n;null===(n=t)||void 0===n||n.updateProps(e)},onKeyDown:function(e){var n;return null===(n=t)||void 0===n||null===(n=n.ref)||void 0===n?void 0:n.onKeyDown(e)},onExit:function(){var e,r;null===(e=n)||void 0===e||null===(e=e[0])||void 0===e||e.destroy(),null===(r=t)||void 0===r||r.destroy()}}}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var M=b.NB.create({name:"course-reference",addOptions:function(){return{HTMLAttributes:{class:"course-reference"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"#",pluginKey:new x.H$("course-reference"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"course-reference",attrs:r},{type:"text",text:" "}]).run()},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"course-reference"})},allowSpaces:!0,render:function(){return S(P)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}},courseName:{default:null,parseHTML:function(e){return e.getAttribute("data-course-name")},renderHTML:function(e){return e.courseName?{"data-course-name":e.courseName}:{}}}}},parseHTML:function(){return[{tag:"span[data-course-reference]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-course-reference":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){return e.editor.commands.command(function(t){var n=t.tr,r=t.state,i=!1,o=r.selection,a=o.empty,s=o.anchor;return!!a&&(r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return i=!0,n.insertText("",r,r+t.nodeSize),!1}),i)})}}},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]}}),N=n(99404).ZP.extend({renderHTML:function(e){var t=e.HTMLAttributes;return["a",(0,b.P1)(this.options.HTMLAttributes,t,{target:t.target||"_blank",title:t.href}),0]},inclusive:!1}),E=b.NB.create({name:"listItem",addOptions:function(){return{HTMLAttributes:{}}},content:"paragraph",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["li",(0,b.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts:function(){var e=this;return{Enter:function(){return e.editor.commands.splitListItem("listItem")}}}}),A=n(4730),L=["start"],T=/^(\d+)\.\s$/,F=b.NB.create({name:"orderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},addAttributes:function(){return{start:{default:1,parseHTML:function(e){return e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(e){var t=e.HTMLAttributes,n=t.start,r=(0,A.Z)(t,L);return 1===n?["ol",(0,b.P1)(this.options.HTMLAttributes,r),0]:["ol",(0,b.P1)(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{toggleOrderedList:function(){return function(t){return t.commands.toggleList(e.name,e.options.itemTypeName)}}}},addInputRules:function(){return[(0,b.S0)({find:T,type:this.type,getAttributes:[function(e){return{start:+e[1]}},function(e,t){return t.childCount+t.attrs.start===+e[1]}]})]}}),B=b.NB.create({name:"paragraph",priority:1e3,addOptions:function(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML:function(){return[{tag:"p"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["p",(0,b.P1)(this.options.HTMLAttributes,t),0]},addCommands:function(){return{setParagraph:function(){return function(e){return e.commands.setNode("paragraph")}}}},addKeyboardShortcuts:function(){var e=this;return{"Shift-Enter":function(){return e.editor.commands.enter()}}}}),R=/^\s*([-*])\s$/,z=b.NB.create({name:"unorderedList",addOptions:function(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content:function(){return"".concat(this.options.itemTypeName,"+")},parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(e){var t=e.HTMLAttributes;return["ul",(0,b.P1)(this.options.HTMLAttributes,t),0]},addCommands:function(){var e=this;return{toggleBulletList:function(){return function(t){return t.commands.toggleList(e.name,e.itemTypeName)}}}},addInputRules:function(){return[(0,b.S0)({find:R,type:this.type})]}}),G=n(73674),U=(0,p.memo)(function(e){var t=e.item,n=e.isCurrent,r=e.onMouseOver,i=e.onClick,o=t.user,a=(0,y.bI)("isMobile").isMobile;return(0,O.jsx)("div",{style:{cursor:"pointer",display:"flex",alignItems:"center",background:n?w.O9.p2:"transparent",padding:"0px 16px",height:56,width:a?"100vw":void 0},onMouseEnter:r,onClick:i,children:(0,O.jsxs)(C.X,{alignItems:"center",gap:8,style:{minWidth:0},children:[(0,O.jsx)(G.Z,{user:o,size:40,disableLink:!0}),(0,O.jsx)(k.Z,{variant:"t5",maxLines:1,ellipsis:!0,color:n?w.O9.fgPrimary:void 0,style:{width:a?void 0:277,maxWidth:a?void 0:277},children:"".concat(o.firstName," ").concat(o.lastName)})]})})});function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var W=b.NB.create({name:"user-mention",addOptions:function(){return{HTMLAttributes:{class:"user-mention"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"@",pluginKey:new x.H$("user-mention"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"user-mention",attrs:r},{type:"text",text:" "}]).run()},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"user-mention"})},allowSpaces:!0,render:function(){return S(U)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}}}},parseHTML:function(){return[{tag:"span[data-user-mention]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-user-mention":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts:function(){var e=this;return{Backspace:function(){return e.editor.commands.command(function(t){var n=t.tr,r=t.state,i=!1,o=r.selection,a=o.empty,s=o.anchor;return!!a&&(r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return i=!0,n.insertText("",r,r+t.nodeSize),!1}),i)})}}},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]}}),q=b.hj.create({name:"shortcuts",priority:1e3,inclusive:!1,addOptions:function(){return{handlers:{},onUpdate:function(){}}},addKeyboardShortcuts:function(){return this.options.handlers||{}}}),H=n(12806);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Y=b.NB.create({name:"user-mention",lastTextSize:0,addOptions:function(){return{HTMLAttributes:{class:"user-mention"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"@",pluginKey:new x.H$("user-mention"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"user-mention",attrs:r}]).insertContent("  ").run(),setTimeout(function(){t.commands.setTextSelection(n.from+2)},0)},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"user-mention"})},allowSpaces:!0,render:function(){return S(U)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label").trim()},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}}}},parseHTML:function(){return[{tag:"span[data-user-mention]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-user-mention":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]},onUpdate:function(){var e=this;this.editor.commands.command(function(t){var n=t.tr,r=t.state,i=!1,o=r.selection,a=o.empty,s=o.anchor;return a?(e.lastTextSize>r.doc.content.size&&r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return i=!0,n.insertText("",r,r+t.nodeSize),!1}),e.lastTextSize=r.doc.content.size,i):(e.lastTextSize=r.doc.content.size,!1)})}});function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var X=b.NB.create({name:"course-reference",lastTextSize:0,addOptions:function(){return{HTMLAttributes:{class:"course-reference"},renderLabel:function(e){var t,n=e.options,r=e.node;return"".concat(n.suggestion.char).concat(null!==(t=r.attrs.label)&&void 0!==t?t:r.attrs.id)},suggestion:{char:"#",pluginKey:new x.H$("course-reference"),command:function(e){var t=e.editor,n=e.range,r=e.props;t.chain().focus().insertContentAt(n,[{type:"course-reference",attrs:r}]).insertContent("  ").run(),setTimeout(function(){t.commands.setTextSelection(n.from+2)},0)},allow:function(e){var t=e.editor,n=e.range;return t.can().insertContentAt(n,{type:"course-reference"})},allowSpaces:!0,render:function(){return S(P)}}}},group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:function(){return{id:{default:null,parseHTML:function(e){return e.getAttribute("data-id")},renderHTML:function(e){return e.id?{"data-id":e.id}:{}}},label:{default:null,parseHTML:function(e){return e.getAttribute("data-label")},renderHTML:function(e){return e.label?{"data-label":e.label}:{}}},courseName:{default:null,parseHTML:function(e){return e.getAttribute("data-course-name")},renderHTML:function(e){return e.courseName?{"data-course-name":e.courseName}:{}}}}},parseHTML:function(){return[{tag:"span[data-course-reference]"}]},renderHTML:function(e){var t=e.node,n=e.HTMLAttributes;return["span",(0,b.P1)({"data-course-reference":""},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText:function(e){var t=e.node;return this.options.renderLabel({options:this.options,node:t})},addProseMirrorPlugins:function(){return[(0,g.ZP)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,v.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({editor:this.editor},this.options.suggestion))]},onUpdate:function(){var e=this;this.editor.commands.command(function(t){var n=t.tr,r=t.state,i=!1,o=r.selection,a=o.empty,s=o.anchor;return a?(e.lastTextSize>r.doc.content.size&&r.doc.nodesBetween(s-1,s,function(t,r){if(t.type.name===e.name)return i=!0,n.insertText("",r,r+t.nodeSize),!1}),e.lastTextSize=r.doc.content.size,i):(e.lastTextSize=r.doc.content.size,!1)})}}),K=f.Z.debounce(f.Z.searchUsers,300),Q=f.Z.debounce(f.Z.searchCourseModules,300);function ee(){return(ee=(0,i.Z)(a().mark(function e(t,n,i,o){var s,l,c,u,d,p,f,h,v,b;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=o?5:7,t){e.next=3;break}return e.abrupt("return",n.current.filter(function(e){var t,n;return(null==e||null===(t=e.user)||void 0===t?void 0:t.firstName)&&(null==e||null===(n=e.user)||void 0===n?void 0:n.lastName)}).slice(0,l).map(function(e){return{id:e.id,label:e.user.firstName+" "+e.user.lastName,user:e.user}}));case 3:if(c=(0,r.Z)(n.current),u=[],d=(0,m.Z)(t),p=0,n.current.forEach(function(e,t){e.fullSearch.startsWith(d)&&(u.push(e.user),c.splice(t-p,1),p++)}),u.length<l&&c.length&&c.forEach(function(e){e.lastSearch.startsWith(d)&&u.push(e.user)}),!(u.length>=l)){e.next=11;break}return e.abrupt("return",u.filter(function(e){var t,n;return(null==e||null===(t=e.user)||void 0===t?void 0:t.firstName)&&(null==e||null===(n=e.user)||void 0===n?void 0:n.lastName)}).slice(0,l).map(function(e){return{id:e.id,label:e.user.firstName+" "+e.user.lastName,user:e.user}}));case 11:return e.next=13,K({query:t,limit:l,groupID:i});case 13:if(f=e.sent.data){e.next=17;break}return e.abrupt("return",[]);case 17:if(!(null!==(s=f.users)&&void 0!==s&&s.length)){e.next=26;break}h=(0,r.Z)(f.users),v=0,b=a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=h[v],u.some(function(e){return e.id===t.id})||u.push(t),v++;case 3:case"end":return e.stop()}},e)});case 21:if(!(u.length<l&&h.length>v)){e.next=25;break}return e.delegateYield(b(),"t0",23);case 23:e.next=21;break;case 25:return e.abrupt("return",u.map(function(e){return{id:e.id,label:e.firstName+" "+e.lastName,user:e}}));case 26:return e.abrupt("return",[]);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(){return(et=(0,i.Z)(a().mark(function e(t,n,r){var i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r?5:7,e.next=3,Q({query:t,limit:i,groupID:n});case 3:if(null!=(o=e.sent.data)&&o.courses){e.next=7;break}return e.abrupt("return",[]);case 7:return e.abrupt("return",o.courses.map(function(e){return{id:e.id,label:e.metadata.displayTitle,course:e,courseName:e.metadata.courseName}}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var en=(0,p.forwardRef)(function(e,t){var n,r,o,f=e.initialContent,m=e.autoFocus,v=e.placeholder,b=e.onChange,g=e.onSelectionChange,x=e.onKeyboardSave,w=e.minHeight,C=e.userMentionsEnabled,j=e.courseReferencesEnabled,k=e.threadUsers,P=e.groupID,I=e.onFocus,D=e.onBlur,Z=e.onPaste,S=e.context,_=(0,y.bI)("isMobile").isMobile,A=(0,p.useRef)(k||[]),L=(0,p.useState)(null),T=L[0],R=L[1],G=(0,p.useRef)(null),U=(0,p.useRef)(0),$=(0,p.useRef)(!1),V=(0,p.useMemo)(function(){return!!(0,h.S_)()&&navigator.userAgent.toLowerCase().indexOf("android")>-1},[]),J=(0,p.useMemo)(function(){return C?V?Y:W:null},[C,V]),K=(0,p.useMemo)(function(){return j?V?X:M:null},[j,V]),Q=(0,p.useCallback)(function(e){return e.metadata={isMobile:_,context:S},e},[S,_]),en=(0,p.useCallback)((n=(0,i.Z)(a().mark(function e(t){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.next=3,function(e,t,n,r){return ee.apply(this,arguments)}(n,A,P,_);case 3:return r=e.sent,e.abrupt("return",Q(r));case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[P,_,Q]),er=(0,p.useCallback)((r=(0,i.Z)(a().mark(function e(t){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.next=3,function(e,t,n){return et.apply(this,arguments)}(n,P,_);case 3:return r=e.sent,e.abrupt("return",Q(r));case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[P,_,Q]);(0,p.useEffect)(function(){A.current=k||[]},[k]);var ei={};x&&(ei["Mod-Enter"]=function(){x()});var eo=[s.Z,B,l.Z,c.Z.configure({placeholder:v}),q.configure({handlers:ei}),N.configure({openOnClick:!1,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:"link"}}),u.Z,E,z,F];J&&eo.push(J.configure({suggestion:{items:en}})),K&&eo.push(K.configure({suggestion:{items:er}})),f&&(o={type:"doc",content:f});var ea=(0,d.jE)({content:o,editorProps:{handleClickOn:function(e,t,n){var r;null!=n&&null!==(r=n.attrs)&&void 0!==r&&r.id&&R(t+1)},clipboardTextParser:function(e,t){var n=e.replace().split(/(?:\r\n?|\n)/),r=[];n.forEach(function(e){var n={type:"paragraph"};e.length>0&&(n.content=[{type:"text",text:e}]);var i=H.NB.fromJSON(t.doc.type.schema,n);r.push(i)});var i=H.HY.fromArray(r);return H.p2.maxOpen(i)},attributes:{class:"skool-editor"}},extensions:eo,autofocus:!!m,onCreate:function(e){var t=e.editor;setTimeout(function(){var e;b(t.getJSON().content),g(null===(e=t.state)||void 0===e?void 0:e.selection)},0)},onUpdate:function(e){b(e.editor.getJSON().content)},onSelectionUpdate:function(e){var t;g(null===(t=e.editor.state)||void 0===t?void 0:t.selection)},onFocus:function(){I&&I()},onBlur:function(){D&&D()}}),es=(0,p.useCallback)(function(){U.current>window.scrollY&&(null==ea||ea.commands.blur()),U.current=window.scrollY},[ea]),el=(0,p.useCallback)(function(e){var t;if(null!=e&&null!==(t=e.touches)&&void 0!==t&&t.length&&G.current){var n=G.current.getBoundingClientRect().top+window.scrollY-window.innerHeight,r=e.touches[0];r.pageY+r.screenY<n&&(null==ea||ea.commands.blur())}},[ea]);return(0,p.useEffect)(function(){if(V)return window.addEventListener("scroll",es),window.addEventListener("touchstart",el),function(){window.removeEventListener("scroll",es),window.removeEventListener("touchstart",el)}},[es,el,V]),(0,p.useEffect)(function(){T&&(ea.commands.focus(T),R(null))},[T,ea]),(0,p.useEffect)(function(){return $.current=!0,m&&ea&&setTimeout(function(){try{ea.commands.focus("end")}catch(e){}},0),function(){$.current=!1}},[m,ea]),(0,p.useImperativeHandle)(t,function(){return{setLink:function(e){if($.current&&ea){var t=ea.state.selection,n=t.head,r=t.anchor;if(n===r){var i=(n>r?n:r)+e.length;return ea.chain().focus().insertContent({type:"text",marks:[{type:"link",attrs:{href:e,target:"_blank"}}],text:e}).setTextSelection({from:i,to:i}).run()}var o=n>r?n:r;return ea.chain().focus().setLink({href:e,target:"_blank"}).setTextSelection({from:o,to:o}).run()}},unsetLink:function(){if($.current&&ea)return ea.chain().focus().unsetLink().run()},canSetLink:function(){var e,t,n;return!!$.current&&!!ea&&!ea.isActive("link")&&!(null!==(e=ea.getAttributes("user-mention"))&&void 0!==e&&e.id)&&!(null!==(t=ea.getAttributes("course-reference"))&&void 0!==t&&t.id)&&!(null!==(n=ea.getAttributes("link"))&&void 0!==n&&n.href)},canUnsetLink:function(){return!!$.current&&!!ea&&ea.isActive("link")},set:function(e){return!!$.current&&!!ea&&ea.chain().focus().setContent(e,!0).run()},insert:function(e){return!!$.current&&!!ea&&ea.chain().focus().insertContent(e).run()},clear:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!$.current||!ea)return!1;var t=ea.chain();return e&&(t=t.focus()),t.clearContent(!0).run()},focus:function(e){return!!$.current&&!!ea&&ea.commands.focus(e||void 0)},blur:function(){return!!$.current&&!!ea&&ea.commands.blur()},textContent:function(){var e;return!!$.current&&!!ea&&(null==ea||null===(e=ea.contentComponent)||void 0===e||null===(e=e.editorContentRef)||void 0===e||null===(e=e.current)||void 0===e?void 0:e.textContent)}}}),(0,O.jsx)("div",{ref:G,style:{minHeight:w},onPaste:Z,children:(0,O.jsx)(d.kg,{editor:ea})})});en.defaultProps={minHeight:80};var er=(0,p.memo)(en)},15554:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(14251),i=n(67294),o=n(50378),a=n(86031),s=(0,o.F4)(["0%{transform:translateY(0px);}28%{transform:translateY(-5px);}44%{transform:translateY(0px);}"]),l=(0,o.ZP)(a.x).withConfig({displayName:"styled__Container",componentId:"sc-1wp2vrl-0"})(["align-items:center;height:17px;"]),c=o.ZP.div.withConfig({displayName:"styled__Dot",componentId:"sc-1wp2vrl-1"})(["animation:"," 1.5s infinite ease-in-out;background-color:",";border-radius:2px;height:4px;margin-right:2px;width:4px;&:nth-child(1){animation-delay:200ms;}&:nth-child(2){animation-delay:300ms;}&:nth-child(3){animation-delay:400ms;}"],s,function(e){var t=e.$color;return null!=t?t:r.O9.n5}),u=n(85893),d=(0,i.memo)(function(e){var t=e.color,n=void 0===t?r.O9.n5:t;return(0,u.jsxs)(l,{children:[(0,u.jsx)(c,{$color:n}),(0,u.jsx)(c,{$color:n}),(0,u.jsx)(c,{$color:n})]})})},29677:function(e,t,n){var r=n(20452),i=n(14251),o=n(67294),a=n(85893),s=(0,r.$o)();function l(e){var t=e.fillOpacity,n=e.className,r=e.padding,o=e.width,l=e.height,c=s?i.O9.n1:i.O9.n7;return(0,a.jsx)("div",{className:n,style:{padding:r,display:"flex",alignItems:"center",justifyContent:"center",width:o,height:l},children:(0,a.jsxs)("svg",{width:o,height:l,version:"1.1",viewBox:"0 0 64 46",fill:c,children:[(0,a.jsx)("path",{d:"M62.6071 7.28471C61.8729 4.52706 60.2635 2.19294 57.5059 1.45882C52.5082 0.122353 32 0 32 0C32 0 11.4918 0.122353 6.49412 1.45882C3.73647 2.19294 2.13647 4.52706 1.39294 7.28471C0.0564706 12.2824 0 22.5882 0 22.5882C0 22.5882 0.0564706 32.8941 1.39294 37.8918C2.12706 40.6494 3.73647 42.9835 6.49412 43.7176C11.4918 45.0541 32 45.1765 32 45.1765C32 45.1765 52.5082 45.0541 57.5059 43.7176C60.2635 42.9835 61.8729 40.6494 62.6071 37.8918C63.9435 32.8941 64 22.5882 64 22.5882C64 22.5882 63.9435 12.2824 62.6071 7.28471Z",fillOpacity:t,fill:c}),(0,a.jsx)("path",{d:"M42.3533 22.5883L25.4121 13.1765V32",fill:s?i.O9.n7:i.O9.n1})]})})}l.defaultProps={padding:0,width:64,height:46,fillOpacity:.5},t.Z=(0,o.memo)(l)},74109:function(e,t,n){var r=n(59499),i=n(50029),o=n(64687),a=n.n(o),s=n(67294),l=n(67631),c=n.n(l),u=n(73793),d=n(31545),p=n(12967),f=n(75331),m=n(11526),h=n(85893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=(0,p.G6)();t.Z=(0,s.memo)(function(e){var t=e.url,n=e.thumbnailUrl,o=e.duration,l=e.style,p=e.autoplay,v=e.startTime,x=e.refreshStartTime,y=e.streamURL,w=e.playDisabled,C=e.onPlay,j=(0,s.useState)(o),k=j[0],O=j[1],P=(0,s.useState)(!1),I=P[0],D=P[1],Z=(0,s.useRef)(),S=(0,s.useRef)(!1),_=(0,s.useRef)(),M=(0,u.bI)("isMobile").isMobile,N=(0,s.useState)(null),E=N[0],A=N[1],L=(0,s.useMemo)(function(){return(0,d.ak)(t)},[t]),T=L.provider===d.a.Bunny&&g,F=(0,s.useState)(!T&&!!p),B=F[0],R=F[1],z=(0,s.useState)(B||g&&M),G=z[0],U=z[1];(0,s.useEffect)(function(){var e=(0,f.tv)({key:f.H0.lastVideoTime}).value,n=void 0===e?{}:e;_.current=n[t],M&&T&&setTimeout(function(){Z.current&&Z.current.seekTo(n[t],"seconds")},200)},[t,T,M]),(0,s.useEffect)(function(){(0,i.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((0,d.Hh)(t)&&!n)){e.next=5;break}return e.next=3,(0,d.Rl)(t);case 3:A(e.sent);case 5:case"end":return e.stop()}},e)}))()},[n,t]),(0,s.useEffect)(function(){window.Hls=c()},[]),(0,s.useEffect)(function(){v&&(U(!0),Z.current?(Z.current.seekTo(v,"seconds"),R(!0)):setTimeout(function(){Z.current.seekTo(v,"seconds"),R(!0)},100))},[v,x]);var $=(0,s.useCallback)(function(){w||(null==C||C(),U(!0),R(!0))},[C,w]),W=(0,s.useCallback)(function(e){O(1e3*e)},[]),q=(0,s.useCallback)(function(){D(!0)},[]),H=(0,s.useCallback)(function(){if(!v&&!S.current&&!T){var e=(0,f.tv)({key:f.H0.lastVideoTime}).value,n=void 0===e?{}:e;n[t]&&(S.current=!0,Z.current.seekTo(n[t],"seconds"))}},[T,v,t]),V=(0,s.useCallback)(function(e){if(e){var n=(0,f.tv)({key:f.H0.lastVideoTime}).value;(0,f.co)({key:f.H0.lastVideoTime,value:b(b({},n),{},(0,r.Z)({},t,e))})}},[t]),Y=(0,s.useCallback)(function(e){var t=e.playedSeconds;V(t>k-5?null:t)},[V,k]),J=(0,s.useMemo)(function(){return L.provider!==d.a.Loom?null:(0,d.bi)({provider:L.provider,videoID:L.videoID,startsAt:v,autoPlay:!!v,additionalQueries:{hide_owner:!0,hide_share:!0,hide_title:!0,hideEmbedTopBar:!0}})},[v,L]),X=(0,s.useMemo)(function(){return L.provider===d.a.Bunny?y||(0,d.YD)(E||n):void 0},[E,y,n,null==L?void 0:L.provider]),K=(0,s.useMemo)(function(){return L.provider===d.a.Voomly?y:void 0},[y,null==L?void 0:L.provider]),Q=(0,s.useMemo)(function(){return(0,d.BI)(k)},[k]),ee=(0,s.useMemo)(function(){return{wistia:{options:{fitStrategy:"contain"}},vimeo:{playerOptions:{playsinline:!0}},file:{hlsOptions:{startPosition:v||_.current}}}},[v]);return L.provider===d.a.Loom?(0,h.jsx)(m.n9,{style:l,children:(0,h.jsx)(m.br,{src:J,frameBorder:0,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,h.jsxs)(m.n9,{style:l,children:[!I&&n&&(0,h.jsxs)(m.y5,{$playing:B,$thumbnailUrl:n,onClick:$,children:[(0,h.jsx)(m.s8,{fillOpacity:1,height:64,width:90,onClick:$}),(0,h.jsx)(m.QY,{$visible:!!k,children:Q})]}),G&&(0,h.jsx)(m.Il,{ref:Z,playing:B,onPlay:$,controls:!0,width:"100%",height:"100%",onDuration:W,onError:q,onProgress:Y,onReady:H,variant:"responsive",url:K||X||L.url,playsinline:!0,config:ee})]})})},11526:function(e,t,n){n.d(t,{Il:function(){return p},QY:function(){return b},br:function(){return d},n9:function(){return c},s8:function(){return h},y5:function(){return f}});var r=n(50378),i=n(22004),o=n(20668),a=n(14251),s=n(29677),l=n(31545),c=r.ZP.div.withConfig({displayName:"styled__VideoPlayerWrapper",componentId:"sc-bpv3k2-0"})(["position:relative;padding-top:56.25%;height:0;width:100%;"]),u=(0,r.iv)(["position:absolute;top:0;left:0;width:100%;height:100%;& iframe{width:100%;height:100%;}& .wistia_embed{max-width:100%;}"]),d=r.ZP.iframe.withConfig({displayName:"styled__IframePlayer",componentId:"sc-bpv3k2-1"})(["",""],u),p=(0,r.ZP)(i.Z).withConfig({displayName:"styled__ReactPlayer",componentId:"sc-bpv3k2-2"})(["",""],u),f=r.ZP.div.withConfig({displayName:"styled__CoverImage",componentId:"sc-bpv3k2-3"})(["width:100%;height:100%;position:absolute;top:0;left:0;background-position:center center;background-size:cover;background-repeat:no-repeat;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:2;transition:opacity 400ms ease-in-out;background-image:",";opacity:",";pointer-events:",";"],function(e){var t=e.$thumbnailUrl;return t?'url("'.concat((0,l.UO)(t),'")'):void 0},function(e){return e.$playing?0:1},function(e){return e.$playing?"none":"initial"}),m=(0,r.iv)(["> svg{width:63px;}"]),h=(0,r.ZP)(s.Z).withConfig({displayName:"styled__PlaybackButton",componentId:"sc-bpv3k2-4"})(["position:relative;z-index:3;cursor:pointer;",""],function(e){return e.theme.isMobile&&m}),v=(0,r.iv)(["right:4px;bottom:4px;"]),b=r.ZP.div.withConfig({displayName:"styled__DurationIndicator",componentId:"sc-bpv3k2-5"})(["position:absolute;right:16px;bottom:16px;border-radius:4px;color:",";background-color:",";padding:5px 8px;opacity:",";transition:opacity 50ms ease-in-out;"," ",""],function(e){return e.theme.isDarkTheme?a.O9.n7:a.O9.n1},function(e){return e.theme.isDarkTheme?a.O9.n1:a.O9.n7},function(e){return e.$visible?1:0},o.c.t11,function(e){return e.theme.isMobile&&v})},81849:function(e,t,n){n.d(t,{I:function(){return I}});var r=n(50029),i=n(64687),o=n.n(i),a=n(23450),s=n.n(a),l=n(67294),c=n(95419),u=n(14251),d=n(85064),p=n(66703),f=n(76958),m=n(73793),h=n(20452),v=n(50378),b=n(86031),g=n(36581),x=n(20668),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,v.iv)(["display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:",";"],e)},w=(0,v.ZP)(b.x).withConfig({displayName:"styled__LoadingContent",componentId:"sc-y3m9bz-0"})(["justify-content:center;padding:16px 0;min-width:127px;max-width:151px;"]),C=(0,v.ZP)(g.s).withConfig({displayName:"styled__TooltipContent",componentId:"sc-y3m9bz-1"})(["gap:4px;padding:4px;text-align:left;width:127px;"]),j=v.ZP.div.withConfig({displayName:"styled__TooltipTitle",componentId:"sc-y3m9bz-2"})(["color:",";",";",";"],u.O9.n5,function(e){var t=e.$maxLines;return t&&y(t)},x.c.t10),k=v.ZP.div.withConfig({displayName:"styled__LikesCount",componentId:"sc-y3m9bz-3"})(["color:",";",";",";"],function(e){return e.theme.isDarkTheme?u.O9.n7:u.O9.n1},function(e){var t=e.$maxLines;return t&&y(t)},x.c.t11),O=n(85893),P=(0,h.$o)(),I=(0,l.memo)(function(e){var t=e.postID,n=e.upvotes,i=e.children,a=e.newUpvotes,h=(0,m.bI)("currentGroup").currentGroup,v=(0,l.useState)([]),b=v[0],g=v[1],x=(0,l.useState)(!1),y=x[0],I=x[1],D=(0,l.useRef)(!1),Z=(0,l.useRef)(!1),S=(0,l.useRef)(!1),_=(0,l.useRef)(),M=(0,l.useRef)(!1),N=n+a;(0,l.useEffect)(function(){return D.current=!0,function(){D.current=!1,clearTimeout(_.current)}},[]),(0,l.useEffect)(function(){Z.current=!1,S.current=!1},[t,n,a]);var E=(0,l.useCallback)((0,r.Z)(o().mark(function e(){var n,r;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.listPostUpvoteUsers({postID:t,limit:7});case 2:n=e.sent.data,Z.current=!0,D.current&&g(null!==(r=null==n?void 0:n.users)&&void 0!==r?r:[]);case 6:case"end":return e.stop()}},e)})),[t]),A=(0,l.useCallback)(function(){M.current=!0,clearTimeout(_.current),D.current&&!Z.current&&D.current&&!S.current&&(I(!0),_.current=setTimeout((0,r.Z)(o().mark(function e(){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.current=!0,!(N>0)){e.next=6;break}return e.next=4,E();case 4:e.next=8;break;case 6:Z.current=!0,g([]);case 8:I(!1);case 9:case"end":return e.stop()}},e)})),250))},[N,E]),L=(0,l.useCallback)(function(){M.current=!1,clearTimeout(_.current)},[]),T=(0,l.useCallback)(function(e){e.stopPropagation()},[]),F=(0,l.useCallback)(function(){if(!Z.current&&N>0||y)return(0,O.jsx)(w,{children:(0,O.jsx)(d.D,{})});var e=[];if(e.push((0,O.jsx)(j,{$maxLines:1,children:"".concat(s()("Like",N,!0))},"likes")),b.forEach(function(t){return e.push((0,O.jsx)(f.Z,{user:t,group:h,color:P?u.O9.n7:u.O9.n1,hoverUnderline:!0,typographyVariant:"t11",maxLines:1},t.id))}),N-b.length>0){var t=N-b.length;e.push((0,O.jsx)(k,{$maxLines:1,children:"and ".concat(s()("other",t,!0),"...")},"like-others"))}return(0,O.jsx)(C,{onClick:T,children:e})},[N,y,b,T,h]);return(0,O.jsx)("div",{onMouseEnter:A,onMouseLeave:L,children:(0,O.jsx)(p.u,{content:F,interactive:!0,children:i})})})},60678:function(e,t,n){var r=n(67294),i=n(5095),o=n(70120),a=n(85893);function s(e){var t=e.group,n=e.sortType,s=e.category,l=e.children,c=e.underline,u=e.newTab,d=e.style,p=(0,i.AZ)({groupName:null==t?void 0:t.name,sortType:n,category:s}),f=p.href,m=p.as,h=(0,r.useCallback)(function(e){e.stopPropagation()},[]);return(0,a.jsx)(o.r,{href:f,as:m,underline:c,onClick:h,newTab:u,style:d,children:l})}s.defaultProps={underline:"none"},t.Z=(0,r.memo)(s)},84236:function(e,t,n){var r=n(67294),i=n(53531),o=n(73793),a=n(5095),s=n(70120),l=n(85893);t.Z=(0,r.memo)(function(e){var t=e.group,n=e.tab,c=e.page,u=e.online,d=e.children,p=e.levels,f=e.sortType,m=e.member,h=e.admin,v=e.onClick,b=(0,o.bI)("currentGroup","self"),g=b.currentGroup,x=b.self,y=(0,i.q2)({group:g,user:x,member:null==x?void 0:x.member}),w=(0,a.DW)({group:t,tab:h&&!y?"admin":u&&!y?"online":n,page:c,online:y&&u||void 0,levels:p,sortType:f,member:m,admin:y&&h||void 0}),C=w.href,j=w.as,k=(0,r.useCallback)(function(e){e.stopPropagation(),null==v||v()},[v]);return(0,l.jsx)(s.r,{href:C,as:j,underline:"none",onClick:k,children:d})})},63136:function(e,t,n){var r=n(59499),i=n(67294),o=n(11163),a=n(5095),s=n(73793),l=n(70120),c=n(30697),u=n(85893);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){var t=(0,s.bI)("isMobile","currentGroup"),n=t.isMobile,p=t.currentGroup,f=t.dispatch,m=e.groupName,h=e.postName,v=e.selectedPostID,b=e.children,g=e.underline,x=(0,a.P_)({groupName:m,postName:h,selectedPostID:v}),y=x.href,w=x.as,C=(0,o.useRouter)(),j=(0,a.D_)(C.query),k=(0,i.useCallback)(function(e){if(e.stopPropagation(),!n&&p){e.preventDefault();var t={pathname:C.pathname,query:{group:m,postName:h,selectedPostID:v,course:j}},i="/".concat(m,"/").concat(h);f(c.Rq,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},C)),C.push(t,i,{scroll:!1,shallow:!0})}},[j,p,f,m,n,h,C,v]);return(0,u.jsx)(l.r,{href:y,as:w,underline:g,onClick:k,children:b})}p.defaultProps={underline:"none"},t.Z=(0,i.memo)(p)},57619:function(e,t,n){n.d(t,{Z:function(){return eH}});var r,i=n(90116),o=n(59499),a=n(4730),s=n(50029),l=n(17674),c=n(64687),u=n.n(c),d=n(73475),p=n(67294),f=n(11163),m=n.n(f),h=n(95419),v=n(77902),b=n(5095),g=n(73793),x=n(13053),y=n(65009),w=n(36581),C=n(17590),j=n(73674),k=n(50591),O=n(80008),P=n.n(O),I=n(70131),D=n(14251),Z=n(59607),S=n(14760),_=n(53541),M=n(82354),N=n(75331),E=n(12967),A=n(30697),L=n(64727),T=n(36195),F=n(32512),B=n(500),R=n(86031),z=n(50378),G=n(47691),U=(0,z.ZP)(Z.z).withConfig({displayName:"styled__MobileSendButton",componentId:"sc-1w0nbeu-0"})(["svg{color:",";}"],function(e){return e.$canSend?D.O9.secondary:D.O9.n5}),$=(0,z.iv)(["padding:",";min-height:unset;border-radius:unset;gap:4px;"],function(e){var t=e.theme,n=e.$bottom;return(void 0===n?0:n)>0?"8px 10px 0 10px":t.isApp?"8px 10px":"8px 10px calc(env(safe-area-inset-bottom) + 8px) 10px"}),W=(0,z.ZP)(y.X).withConfig({displayName:"styled__InputWrapper",componentId:"sc-1w0nbeu-1"})(["align-items:center;padding:4px 8px;min-height:70px;background:",";width:100%;border-radius:8px;cursor:text;",";"],D.O9.n1,function(e){return e.theme.isMobile&&$}),q=(0,z.iv)(["border-radius:15px;background-color:",";border:1px solid "," !important;padding:0 13px;min-width:0;"],D.O9.n2,D.O9.n3),H=z.ZP.div.withConfig({displayName:"styled__ChatInputWrapper",componentId:"sc-1w0nbeu-2"})(["display:flex;width:100%;",";"],function(e){return e.theme.isMobile&&q}),V=(0,z.iv)(["margin:unset;width:unset;"]),Y=z.ZP.div.withConfig({displayName:"styled__FormControl",componentId:"sc-1w0nbeu-3"})(["margin:8px 0 6px;flex-grow:1;",";"],function(e){return e.theme.isMobile&&V}),J=(0,z.ZP)(G.I).withConfig({displayName:"styled__ChatTextArea",componentId:"sc-1w0nbeu-4"})(["background:none;color:",";display:inline-flex;outline:none;",";",';min-height:auto;width:100%;textarea:not([aria-hidden="true"]){padding:0;margin:0;width:100%;}'],D.O9.n7,function(e){return!e.theme.isMobile&&"padding: 10px 8px;"},function(e){return e.theme.isMobile&&"padding-bottom: 8px;"}),X=z.ZP.div.withConfig({displayName:"styled__SendIconWrapper",componentId:"sc-1w0nbeu-5"})(["align-self:end;",";"],function(e){return!e.theme.isMobile&&"margin-top: 4px;"}),K=z.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-1w0nbeu-6"})(["position:absolute;height:100%;width:100%;background:",";top:0;left:0;border-radius:15px;z-index:1000;padding:8px;"],D.O9.n1),Q=z.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-1w0nbeu-7"})(["height:100%;width:100%;border:3px dashed ",";border-radius:15px;display:flex;justify-content:center;align-items:center;"],D.O9.n5),ee=z.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-1w0nbeu-8"})(["width:100%;&:focus{outline:none;}"]),et=z.ZP.label.withConfig({displayName:"styled__AddAttachmentLabel",componentId:"sc-1w0nbeu-9"})(["cursor:pointer;"]),en=(0,z.iv)(["padding:8px 0 0 0;background:none;"]),er=z.ZP.div.withConfig({displayName:"styled__PostAttachmentsWrapper",componentId:"sc-1w0nbeu-10"})(["width:100%;padding:0 16px 16px;display:",";background:",";",";"],function(e){return e.$hasAttachments?"block":"none"},D.O9.n1,function(e){return e.theme.isMobile&&en}),ei=(0,z.iv)(["align-self:flex-end;transform:translateX(12px);"]),eo=z.ZP.div.withConfig({displayName:"styled__Actions",componentId:"sc-1w0nbeu-11"})(["display:flex;flex-direction:row;justify-content:flex-end;",";"],function(e){return e.theme.isMobile&&ei}),ea=n(59313),es=n(85893);function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eu=(0,p.memo)(function(e){var t,n,r,i,a,c=e.convoBottom,d=e.channelId,f=e.isModal,m=e.onFocus,v=e.onBlur,b=e.onGifPickerOpen,x=(0,g.bI)("isMobile","conversation","mobileBottomOffset"),y=x.isMobile,w=x.conversation,C=x.mobileBottomOffset,j=x.dispatch,k=(0,p.useState)(""),O=k[0],P=k[1],I=(0,p.useState)([]),z=I[0],G=I[1],$=null==w||null===(i=w.channel)||void 0===i?void 0:i.user,q=(0,p.useState)(!1),V=q[0],en=q[1],ei=(0,p.useRef)(),el=(0,p.useRef)(),eu=(0,p.useState)(!1),ed=eu[0],ep=eu[1],ef=!!z.length,em=(0,B.V)((0,p.useRef)({}).current),eh=(0,l.Z)(em,1)[0],ev=(0,p.useMemo)(function(){return(0,E.wN)(function(){(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=3;break}return e.next=3,h.Z.setTypingChat({channelId:d});case 3:case"end":return e.stop()}},e)}))()},2e3)},[d]);(0,p.useEffect)(function(){O&&ev()},[O,ev]),(0,p.useEffect)(function(){var e=(0,N.tv)({key:N.H0.chatMessages}).value;P((void 0===e?{}:e)[d]||""),en(!0)},[d]),(0,p.useEffect)(function(){var e=(0,N.tv)({key:N.H0.chatFiles}).value;G((void 0===e?{}:e)[d]||[])},[d]);var eb=(0,p.useCallback)(function(e){var t=(0,N.tv)({key:N.H0.chatMessages}).value;(0,N.co)({key:N.H0.chatMessages,value:ec(ec({},void 0===t?{}:t),{},(0,o.Z)({},d,e.target.value))}),P(e.target.value)},[d]),eg=(0,p.useCallback)((t=(0,s.Z)(u().mark(function e(t){var n,r,i,a,s,l;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((!t||"Enter"===t.key&&!t.shiftKey)&&(O||null!=z&&z.length))){e.next=24;break}if(!(y&&(null==t?void 0:t.key)==="Enter")){e.next=3;break}return e.abrupt("return");case 3:if(y&&el.current.focus(),null==t||t.preventDefault(),!ed){e.next=7;break}return e.abrupt("return");case 7:return P(""),G([]),r=void 0===(n=(0,N.tv)({key:N.H0.chatMessages}).messageValue)?{}:n,a=void 0===(i=(0,N.tv)({key:N.H0.chatFiles}).filesValue)?{}:i,(0,N.co)({key:N.H0.chatMessages,value:ec(ec({},r),{},(0,o.Z)({},d,""))}),(0,N.co)({key:N.H0.chatFiles,value:ec(ec({},a),{},(0,o.Z)({},d,""))}),s=y?"wmc":"wdc",f&&(s=y?"wmm":"wdm"),e.next=17,h.Z.sendMessage({channelId:d,msg:O,clientType:s,fileIDs:z});case 17:if((null==(l=e.sent.error)?void 0:l.status)!==429){e.next=21;break}return e.abrupt("return",j(A.bI,{message:"You’ve hit your message limit",severity:"error"}));case 21:setTimeout(function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView()},0),e.next=25;break;case 24:!t||"Enter"!==t.key||t.shiftKey||O||t.preventDefault();case 25:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[O,d,j,c,f,y,z,ed]),ex=(0,p.useCallback)(function(){setTimeout(function(){document.activeElement===el.current&&(null==m||m())},100)},[m]),ey=(0,p.useCallback)(function(){setTimeout(function(){document.activeElement!==el.current&&(null==v||v())},0)},[v]),ew=(0,p.useCallback)(function(e){null!=e&&e.persist&&e.persist(),el.current&&el.current.focus(),ei.current?(0,s.Z)(u().mark(function t(){var n;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ei.current.addFiles({files:e.target.files});case 2:if(!(n=t.sent.error)){t.next=6;break}return t.abrupt("return",j(A.bI,{message:n,severity:"error"}));case 6:e.target.value="";case 7:case"end":return t.stop()}},t)}))():(console.error("attachments ref not available"),e.target.value="")},[j]),eC=(0,p.useCallback)((n=(0,s.Z)(u().mark(function e(t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ei.current.addFiles({files:[{id:t.id,isGiphy:!0,metadata:{fileName:"".concat(t.query,".gif"),contentType:"image/gif",externalSrc:t.md,externalSrcSmall:t.sm}}]});case 2:if(!(n=e.sent.error)){e.next=6;break}return e.abrupt("return",j(A.bI,{message:n,severity:"error"}));case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[j]),ej=(0,p.useCallback)(function(e){ep(e)},[]),ek=(0,p.useCallback)(function(e){var t=e.files,n=(void 0===t?[]:t).map(function(e){return e.id}),r=(0,N.tv)({key:N.H0.chatFiles}).value;(0,N.co)({key:N.H0.chatFiles,value:ec(ec({},void 0===r?{}:r),{},(0,o.Z)({},d,n))}),G(n)},[d]),eO=(0,p.useCallback)(function(e){ew({target:{files:e}})},[ew]),eP=(0,F.u)({onDrop:eO}),eI=eP.getRootProps,eD=eP.getInputProps,eZ=eP.isDragActive,eS=eI(),e_=eD({onClick:function(e){return e.preventDefault()}}),eM=(0,p.useCallback)(function(e){setTimeout(function(){el.current.focus(),eb({target:{value:(0,E.QS)({emoji:e,inputRef:el})}})},0)},[eb]),eN=(0,p.useCallback)(function(){if(!y){var e;null==el||null===(e=el.current)||void 0===e||e.focus()}},[y]),eE=(0,p.useCallback)((r=(0,s.Z)(u().mark(function e(t){var n,r;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=(0,L.QT)({e:t,accept:(0,L.Yw)()}))){e.next=13;break}if(t.preventDefault(),!ei.current){e.next=12;break}return e.next=6,ei.current.addFiles({files:n});case 6:if(!(r=e.sent.error)){e.next=10;break}return e.abrupt("return",j(A.bI,{message:r,severity:"error"}));case 10:e.next=13;break;case 12:console.error("attachments ref not available");case 13:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[j]),eA=(0,p.useMemo)(function(){return(0,es.jsx)(er,{$hasAttachments:ef,children:(0,es.jsx)(T.Z,{ref:ei,editing:!0,post:{metadata:{attachments:z?null==z?void 0:z.join(","):""}},onFileInputChange:ew,onStateChange:ej,onChange:ek,level:1,isChatInput:!0,isChatInputUploading:ed})})},[z,ek,ej,ew,ef,ed]),eL=null==C||null===(a=C[ea.V.CHAT_INPUT])||void 0===a?void 0:a.bottom;return(0,es.jsxs)(es.Fragment,{children:[(0,es.jsxs)(ee,ec(ec({},eS),{},{children:[(0,es.jsx)("input",ec({},e_)),(eh||eZ)&&(0,es.jsx)(K,{children:(0,es.jsx)(Q,{children:(0,es.jsx)(S.Z,{variant:"t1",color:D.O9.n5,children:"Drop files here to upload"})})}),(0,es.jsxs)(W,{onClick:eN,$bottom:eL,children:[(0,es.jsx)(H,{children:(0,es.jsxs)(R.x,{flexDirection:y&&ef?"column":"row",width:"100%",flexWrap:"wrap",justifyContent:"space-between",children:[(0,es.jsx)(Y,{children:(0,es.jsx)(J,{autoFocus:!y,maxRows:10,multiline:!0,value:O,onChange:eb,onKeyPress:eg,placeholder:"Message ".concat($.firstName),variant:"borderless",ref:el,staticLabel:!0,onPaste:eE,onFocus:ex,onBlur:ey},"".concat(d,"-").concat(V?"loaded":"loading"))}),y&&eA,(0,es.jsxs)(eo,{children:[(0,es.jsxs)(R.x,{alignSelf:"flex-start",marginTop:y?0:8,children:[(0,es.jsx)("input",{type:"file",style:{display:"none"},accept:(0,L.Yw)(),multiple:!0,onChange:ew,id:"chat-file-attachment"}),y&&(0,es.jsx)(M.g,{onSelect:eC,onOpen:b}),(0,es.jsx)(et,{htmlFor:"chat-file-attachment",children:(0,es.jsx)(Z.z,{variant:y?"icon-borderless-no-hover":"icon-borderless",icon:"PaperClip",iconSize:y?20:16.66,as:"span"})})]}),!y&&(0,es.jsx)(_.h,{style:{marginTop:8},onClick:eM}),!y&&(0,es.jsx)(M.g,{onSelect:eC,onOpen:b,style:{marginTop:8,height:40}})]})]})}),y&&(ef||!!O)&&(0,es.jsx)(X,{children:(0,es.jsx)(U,{onClick:function(){return eg()},variant:"icon-borderless-no-hover",icon:"Send",iconSize:21,$canSend:!ed&&(!!O||!!(null!=z&&z.length))})})]})]})),!y&&eA]})}),ed=n(33894),ep=n(27849),ef=n(96486),em=n(85064),eh=n(15554),ev=n(91575),eb=n(54361),eg=n(42108),ex=n(88325),ey=n(91194),ew=n(76958),eC=n(70299),ej=(0,z.ZP)(Z.z).withConfig({displayName:"styled__ChatUnblockButton",componentId:"sc-cfaah3-0"})(["height:","px;width:100%;"],function(e){return e.theme.isMobile?56:53}),ek=(0,z.ZP)(y.X).withConfig({displayName:"styled__ChatUnblockButtonWrapper",componentId:"sc-cfaah3-1"})(["height:",";width:100%;padding:8px;border-top:1px solid ",";"],function(e){return e.theme.isMobile?"56px":void 0},D.O9.n3),eO=(0,z.ZP)(w.s).withConfig({displayName:"styled__MessagesWrapper",componentId:"sc-cfaah3-2"})(["flex:1;padding-left:",";padding-right:",";width:100%;padding-bottom:20px;"],function(e){return e.theme.isMobile?"13px":"16px"},function(e){return e.theme.isMobile?"13px":"16px"}),eP=(0,z.iv)(["flex:unset;border-bottom:unset;height:100%;"]),eI=z.ZP.div.withConfig({displayName:"styled__OuterChatContainer",componentId:"sc-cfaah3-3"})(["flex:1 1 auto;overflow:auto;min-height:0;height:0;width:100%;position:relative;border-bottom:1px solid ",";",";"],D.O9.n3,function(e){return e.theme.isMobile&&eP}),eD=(0,z.iv)(["position:fixed;bottom:","px;z-index:1299;",""],function(e){var t=e.$bottom;return void 0===t?0:t},eC.Wn),eZ=z.ZP.div.withConfig({displayName:"styled__BottomContainer",componentId:"sc-cfaah3-4"})(["width:100%;",";"],function(e){return e.theme.isMobile&&eD}),eS=z.ZP.div.withConfig({displayName:"styled__ChatContainer",componentId:"sc-cfaah3-5"})(["overflow:auto;height:100%;padding-top:8px;padding-bottom:",";background:",";width:100%;&:focus{outline:none;}"],function(e){return e.theme.isMobile?"64px":"16px"},D.O9.n1),e_=(0,z.iv)(["padding:4px 16px;position:absolute;bottom:0;left:0;width:calc(100% - 16px);"]),eM=(0,z.iv)(["padding:8px 10px 0;"]),eN=(0,z.ZP)(y.X).withConfig({displayName:"styled__TypingIndicatorWrapper",componentId:"sc-cfaah3-6"})(["align-items:center;background:",";gap:8px;",";"],D.O9.n1,function(e){return e.theme.isMobile?eM:e_}),eE=z.ZP.div.withConfig({displayName:"styled__NoConvoWrapper",componentId:"sc-cfaah3-7"})(["padding-top:8px;"]),eA=(0,z.ZP)(w.s).withConfig({displayName:"styled__ChatBubble",componentId:"sc-cfaah3-8"})(["background-color:",";border:1px solid ",";border-radius:15px;padding:8px 13px;width:100%;min-width:0;"],function(e){return e.$bgColor},D.O9.n3),eL=z.ZP.div.withConfig({displayName:"styled__ChatAttachmentsWrapper",componentId:"sc-cfaah3-9"})(["height:100px;margin:8px 0 5px;"]),eT=z.ZP.div.withConfig({displayName:"styled__OnlineIcon",componentId:"sc-cfaah3-10"})(["position:absolute;bottom:0px;right:-8px;width:16px;height:16px;background-color:",";border-radius:50%;margin:0px 4px;border:2px solid ",";"],D.O9.s2,D.O9.n1),eF=(0,z.ZP)(w.s).withConfig({displayName:"styled__UserColumn",componentId:"sc-cfaah3-11"})(["flex:1;min-width:1px;max-width:calc(100vw - 196px);"]),eB=z.ZP.div.withConfig({displayName:"styled__ChatMessageHeader",componentId:"sc-cfaah3-12"})(["display:flex;justify-content:space-between;width:100%;> *:first-child{min-width:0px;padding-right:8px;}"]),eR=["messages","hasMoreBefore","hasMoreAfter"],ez=["messages","hasMoreBefore","hasMoreAfter"],eG=["messages","hasMoreBefore","hasMoreAfter"],eU=["messages","hasMoreBefore","hasMoreAfter"];function e$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eq(e){var t,n,r=e.channelId,c=e.contentOnly,m=e.onClose,v=e.lastRead,O=(0,f.useRouter)(),Z=r||(0,b.bR)(O.query),_=v||(0,b.pS)(O.query),M=(0,eb.CM)([]),N=(0,l.Z)(M,2),E=N[0],L=N[1],F=(0,p.useRef)(0),B=(0,p.useRef)(null),z=(0,p.useRef)(null),G=(0,p.useRef)(!1),U=(0,p.useRef)(null),$=(0,p.useRef)(null),W=(0,p.useState)(!1),q=W[0],H=W[1],V=(0,p.useRef)(0),Y=(0,p.useRef)(0),J=(0,p.useState)(!1),X=J[0],K=J[1],Q=(0,p.useRef)(!0),ee=(0,p.useRef)(!1),et=(0,p.useRef)({before:!1,after:!1}),en=(0,p.useRef)(0),er=(0,p.useRef)(null),ei=(0,p.useRef)(!1),eo=(0,p.useState)(null),el=eo[0],ec=eo[1],ep=(0,p.useState)(null),eC=ep[0],eP=ep[1],eD=(0,eb.c8)(),e_=(0,l.Z)(eD,3),eM=e_[0],e$=e_[1],eq=e_[2],eH=(0,p.useRef)(!1),eV=(0,g.bI)("conversation","onlineStatuses","lastNotification","noConversations","self","isMobile","isApp","isChat","mobileBottomOffset"),eY=eV.conversation,eJ=eV.onlineStatuses,eX=eV.lastNotification,eK=eV.noConversations,eQ=eV.self,e0=eV.isMobile,e1=eV.isApp,e2=eV.isChat,e9=eV.mobileBottomOffset,e3=eV.dispatch,e5=null==e9||null===(n=e9[ea.V.CHAT_INPUT])||void 0===n?void 0:n.bottom;(0,p.useEffect)(function(){if(eC&&e0&&(e3(A.qp,{type:ea.V.CHAT_INPUT,height:null!==(e=null===(t=eC.current)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0,hideType:eM?ea.V.NAV_BAR:void 0}),"ResizeObserver"in window)){var e,t,n=new ResizeObserver(function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.borderBoxSize;null!=n&&n.length&&e3(A.qp,{type:ea.V.CHAT_INPUT,height:n[0].blockSize,hideType:eM?ea.V.NAV_BAR:void 0})});return n.observe(eC,{box:"border-box"}),function(){n.disconnect(),e3(A.qp,{type:ea.V.CHAT_INPUT,height:null})}}},[e3,e0,eM,eC]),(0,p.useEffect)(function(){e0&&(!eM&&eH.current&&B.current.scrollIntoView(),eH.current=eM)},[eM,e0]);var e4=(0,p.useCallback)(function(){eH.current=!1},[]);(0,p.useEffect)(function(){var e,t=(e=(0,s.Z)(u().mark(function e(t){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.markChatMessageRead({channelId:Z,last:t});case 2:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});er.current=(0,ef.debounce)(t,500)},[Z]),(0,p.useEffect)(function(){et.current={before:!1,after:!1},z.current=null,H(!1)},[Z]);var e6=(0,p.useCallback)((0,s.Z)(u().mark(function e(){var t,n,r,i,s,l,c;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages({channelId:Z,msg:_,after:35,before:35});case 2:if(n=(t=e.sent).data,!t.error){e.next=9;break}return e3(A.bI,{message:"Something went wrong, please try again later.",severity:"error"}),null==m||m(),e.abrupt("return");case 9:return r=n.messages,i=n.hasMoreBefore,s=n.hasMoreAfter,l=(0,a.Z)(n,eR),et.current={before:et.current.before||!i,after:et.current.after||!s},en.current=((null==l?void 0:l.channel.metadata.lastReadAt)||0)/1e6,c=l.channel.user,e3(A.WT,function(e){return{conversation:l,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,o.Z)({},c.id,c.metadata.online)),newConversation:l.channel.metadata.firstMsgUser?null:l.channel}}),L(r||[]),F.current=r?r.length:0,e.abrupt("return",n);case 17:case"end":return e.stop()}},e)})),[Z,_,e3,m,L]),e8=(0,p.useCallback)((0,s.Z)(u().mark(function e(){var t,n,r,i,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages({channelId:Z,noMsg:!0,before:1});case 2:(t=e.sent.data).messages,n=t.hasMoreBefore,r=t.hasMoreAfter,i=(0,a.Z)(t,ez),et.current={before:et.current.before||!n,after:et.current.after||!r},s=i.channel.user,e3(A.WT,function(e){return{conversation:i,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,o.Z)({},s.id,s.metadata.online))}});case 8:case"end":return e.stop()}},e)})),[Z,e3]),e7=(0,p.useCallback)((0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.unblockChat({userId:null==eY?void 0:eY.channel.user.id});case 2:return e.next=4,e8();case 4:case"end":return e.stop()}},e)})),[eY,e8]),te=(0,p.useMemo)(function(){if(!e0||!eY)return null;var e,t=eY.channel.user;return(0,es.jsxs)(y.X,{alignItems:"center",children:[(0,es.jsxs)("div",{style:{position:"relative",marginRight:8},children:[(0,es.jsx)(j.Z,{user:t,size:40}),eJ[t.id]&&(0,es.jsx)(eT,{})]}),(0,es.jsxs)(eF,{children:[(0,es.jsx)(ew.Z,{user:t,typographyVariant:"t6",ellipsis:!0}),(0,es.jsx)(S.Z,{variant:"t11",color:D.O9.n5,ellipsis:!0,children:eJ[t.id]?"online now":null!==(e=t.metadata)&&void 0!==e&&e.lastOffline?"active ".concat((0,ex.ur)({value:t.metadata.lastOffline,justNow:!1,ago:!0})," ago"):"not active yet"})]})]})},[e0,eY,eJ]),tt=(0,p.useMemo)(function(){if(!e0||!eY)return null;var e,t,n,r=eY.channel,i=r.user,l=r.metadata.blocked,c=(e=(0,s.Z)(u().mark(function e(){var t,n,r,i,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages({channelId:Z,noMsg:!0,before:1});case 2:(t=e.sent.data).messages,n=t.hasMoreBefore,r=t.hasMoreAfter,i=(0,a.Z)(t,eG),et.current={before:et.current.before||!n,after:et.current.after||!r},s=i.channel.user,e3(A.WT,function(e){return{conversation:i,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,o.Z)({},s.id,s.metadata.online))}});case 8:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),d=(t=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.blockChat({userId:null==eY?void 0:eY.channel.user.id});case 2:return e.next=4,c();case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),p=(n=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.unblockChat({userId:null==eY?void 0:eY.channel.user.id});case 2:return e.next=4,c();case 4:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return[{label:"View profile",onClick:function(){(0,ey.VF)(O,(0,b.sB)({userName:i.name}),e0&&!e1)}},{label:"".concat(l?"Unblock":"Block"," ").concat(i.firstName," ").concat(i.lastName),onClick:l?p:d}]},[e0,eY,Z,e3,O,e1]),tn=(0,p.useMemo)(function(){return te?{title:te,dropdownOptions:tt}:null},[te,tt]);(0,eg.l)(eg.C.CHAT,tn),(0,p.useEffect)(function(){if(U.current){var e=U.current.scrollHeight-U.current.clientHeight;Q.current&&(U.current.scrollTop=V.current+(e-Y.current))}},[E]);var tr=(0,p.useCallback)((t=(0,s.Z)(u().mark(function e(t,n){var r,s,l,c,d,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Z.getChannelMessages((0,o.Z)({channelId:Z,msg:t,noMsg:!0},n,35));case 2:s=(r=e.sent.data).messages,l=r.hasMoreBefore,c=r.hasMoreAfter,d=(0,a.Z)(r,eU),Q.current="before"===n,et.current={before:et.current.before||!l,after:et.current.after||!c},p=d.channel.user,e3(A.WT,function(e){return{conversation:d,onlineStatuses:eW(eW({},e.onlineStatuses),{},(0,o.Z)({},p.id,p.metadata.online)),newConversation:d.channel.metadata.firstMsgUser?null:d.channel}}),U.current&&(V.current=U.current.scrollTop,Y.current=U.current.scrollHeight-U.current.clientHeight),F.current=F.current+((null==s?void 0:s.length)||0),"before"===n?L(function(e){return[].concat((0,i.Z)(s),(0,i.Z)(e))}):L(function(e){return[].concat((0,i.Z)(e),(0,i.Z)(s))});case 12:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[Z,e3,L]);(0,p.useEffect)(function(){Z&&(0,s.Z)(u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,e6();case 2:t=e.sent,!ee.current&&t&&((n=t.channel.metadata.blocked?"blocked":void 0)&&e3(A.WT,function(){return{chatListType:n}}),ee.current=!0);case 4:case"end":return e.stop()}},e)}))()},[e6,Z,e3]),(0,p.useEffect)(function(){!ei.current&&ee.current&&(ei.current=!0,$.current?$.current.scrollIntoView():B.current&&(B.current.scrollIntoView(),setTimeout(function(){var e;null===(e=U.current)||void 0===e||e.scrollTo(0,U.current.scrollHeight)},0)))},[E]);var ti=(0,p.useCallback)(function(){B.current&&X&&B.current.scrollIntoView()},[X]),to=(0,p.useCallback)(function(e){Q.current=!1,e.userId!==eQ.id&&(H(!1),z.current=null,X&&!eQ.metadata.noChatSound&&(0,ed.O)()),L(function(t){return F.current=t.length+1,[].concat((0,i.Z)(t),[{createdAt:e.createdAt/1e6,metadata:{content:e.content,src:e.userId,attachments:null!=e&&e.attachments?null==e?void 0:e.attachments.join(","):null,attachmentsData:null==e?void 0:e.attachmentsData,videoLinks:null!=e&&e.videoLinks?null==e?void 0:e.videoLinks.join("\n"):null,videoLinksData:null==e?void 0:e.videoLinksData}}])},ti)},[X,ti,eQ.id,eQ.metadata.noChatSound,L]);(0,p.useEffect)(function(){G.current=!0;var e=setInterval(function(){G.current&&z.current&&(new Date().getTime()<=z.current?H(!0):q&&H(!1))},1e3);return function(){G.current=!1,clearInterval(e)}},[q]);var ta=(0,p.useCallback)(function(e){e.userId!==(null==eQ?void 0:eQ.id)&&(z.current=new Date().getTime()+e.duration)},[eQ]);(0,p.useEffect)(function(){if(Z)return(0,k.Ld)([(0,k.jy)(Z)],to)},[Z,to]),(0,p.useEffect)(function(){if(Z)return(0,k.Ld)([(0,k.U5)(Z)],ta)},[Z,ta]);var ts=(0,p.useCallback)(function(){ec(null),e3(A.WT,function(){return{disableEscapeChat:!1}})},[e3]),tl=(0,p.useCallback)(function(e){var t,n,r,i=e.post,o=e.file,a=e.videoLink,s=(null==o||null===(t=o.metadata)||void 0===t?void 0:t.contentType)||"",l=(null==o||null===(n=o.metadata)||void 0===n?void 0:n.readUrl)||(null==o||null===(r=o.metadata)||void 0===r?void 0:r.srcReadUrl);e0&&"application/pdf"===s?window.open(l,"_blank"):(ec({post:i,file:o,videoLink:a}),e3(A.WT,function(){return{disableEscapeChat:!0}}))},[e3,e0]),tc=(0,p.useCallback)(function(e,t,n){var r,i,o,a,l,c,d,p=e.metadata.src,f=eY.channel,m=f.user,h=f.metadata,v=null==t?void 0:t.createdAt,b=null,g=null===(o=e.metadata)||void 0===o?void 0:o.content,w=null===(a=e.metadata)||void 0===a?void 0:a.attachments,C=null===(l=e.metadata)||void 0===l?void 0:l.attachmentsData,k=null===(c=e.metadata)||void 0===c?void 0:c.videoLinks,O=null===(d=e.metadata)||void 0===d?void 0:d.videoLinksData;v?P()(e.createdAt).diff(v,"hours",!0)>1&&(b=e.createdAt):b=e.createdAt;var Z=P()(e.createdAt).format((r=e.createdAt,P()().isSame(r,"day")?"h:mma":P()().isSame(r,"week")?"dddd h:mma":"MMM Do YYYY h:mma")),M=p===eQ.id,N=M?eQ:m;return(0,es.jsx)(I.df,{onChange:(i=(0,s.Z)(u().mark(function t(r){var i,o,a,s,l,c,d;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=13;break}if(i=F.current-1===n&&et.current.after,eX&&eX.id===eY.channel.id&&e3(A.WT,function(){return{lastNotification:null}}),o=h.unread,a=h.numUnread,i&&P()(e.createdAt).isAfter(en.current)?(en.current=e.createdAt,er.current()):P()(e.createdAt).isAfter(en.current)?(en.current=e.createdAt,er.current(e.id)):o&&0===a&&er.current(),!(3===n&&!et.current.before)){t.next=9;break}return l=null===(s=E[0])||void 0===s?void 0:s.id,t.next=9,tr(l,"before");case 9:if(!(n===F.current-4&&!et.current.after)){t.next=13;break}return d=null===(c=E[E.length-1])||void 0===c?void 0:c.id,t.next=13,tr(d,"after");case 13:case"end":return t.stop()}},t)})),function(e){return i.apply(this,arguments)}),children:(0,es.jsxs)("div",{ref:e.id===_?$:void 0,children:[b&&(0,es.jsx)(y.X,{style:{width:"100%"},justifyContent:"center",marginTop:8,marginBottom:13,children:(0,es.jsx)(S.Z,{variant:"t9",color:D.O9.n5,children:P()(b).format("MMM Do YYYY")})}),(0,es.jsxs)(y.X,{gap:8,alignItems:"flex-start",children:[(0,es.jsx)(j.Z,{size:40,user:N,newTab:!e0}),(0,es.jsxs)(eA,{$bgColor:M?D.O9.n2:D.O9.n1,children:[(0,es.jsxs)(eB,{children:[(0,es.jsx)(ew.Z,{user:N,typographyVariant:"t6"}),(0,es.jsx)(S.Z,{variant:"t11",color:D.O9.n5,children:P()(e.createdAt).format("h:mma")})]}),(0,es.jsxs)("div",{title:Z,children:[g&&(0,es.jsx)(x.ZP,{value:g,textVariant:"t7"}),(w||C||k)&&(0,es.jsx)(eL,{children:(0,es.jsx)(T.Z,{post:{metadata:{attachments:w,attachmentsData:C,videoLinks:k,videoLinksData:O}},onItemClick:tl,level:1})})]})]})]},n)]})},"".concat(e.id||"new","-").concat(n))},[eY,eQ,tr,_,e3,eX,tl,E,e0]),tu=(0,p.useMemo)(function(){if(!(null!=eY&&null!==(e=eY.channel)&&void 0!==e&&e.user))return null;var e,t=eY.channel.user;return(0,es.jsxs)(eN,{children:[(0,es.jsx)(eh.Z,{}),(0,es.jsx)(S.Z,{maxLines:1,color:D.O9.n5,variant:e0?"t9":"t7",children:"".concat(t.firstName," ").concat(t.lastName," is typing...")})]})},[e0,eY]),td=(0,p.useMemo)(function(){return eY?(0,es.jsx)(eO,{children:(0,es.jsx)(w.s,{gap:8,children:E.map(function(e,t){return E.length-1===t?(0,es.jsx)(I.df,{onChange:K,children:tc(e,E[t-1],t)},"".concat(e.id||"new","-").concat(t)):tc(e,E[t-1],t)})})}):null},[E,tc,eY]),tp=(0,p.useMemo)(function(){if(!eY)return null;var e=eY.channel,t=e.metadata,n=e.user;return t.blocked?(0,es.jsxs)(w.s,{style:{background:D.O9.n1},children:[(0,es.jsx)(y.X,{padding:"10px ".concat(e0?10:24,"px"),children:(0,es.jsx)(S.Z,{variant:"t9",color:D.O9.e2,textAlign:e0?"center":"left",children:"You blocked ".concat(n.firstName," ").concat(n.lastName,". You won't be notified of messages, and they won't know they're blocked. You can check your list of blocked users in user settings.")})}),(0,es.jsx)(ek,{children:(0,es.jsx)(ej,{disableRipple:!0,variant:"borderless",label:"UNBLOCK",typography:"t5",onClick:e7})})]}):(0,es.jsx)(eu,{channelId:Z,convoBottom:B,isModal:c,onFocus:e$,onBlur:eq,onGifPickerOpen:e4})},[eY,e7,c,Z,e0,e$,eq,e4]),tf=(0,p.useMemo)(function(){if(!eY||!et.current.before)return null;var e=eY.channel,t=e.user,n=e.metadata,r=e.requestGroup;if(null!=n&&n.coachUserId){var i=(null==n?void 0:n.coachUserId)===(null==eQ?void 0:eQ.id)?"You're ".concat(t.firstName,"'s Skool account manager."):"".concat(t.firstName," was assigned to you as your Skool account manager.");return(0,es.jsx)(S.Z,{variant:"t9",color:D.O9.n5,textAlign:"center",children:i})}return(0,es.jsxs)(S.Z,{variant:"t9",color:D.O9.n5,textAlign:"center",children:["You and ".concat(t.firstName," ").concat(t.lastName," know each other from"),(0,es.jsx)("br",{}),"".concat(null==r?void 0:r.metadata.displayName),n.sharedGroups>1&&" and ".concat(n.sharedGroups," other groups")]})},[eY,eQ]),tm=(0,p.useMemo)(function(){if(!eY||!et.current.before)return null;var e=eY.channel,t=e.user,n=e.metadata;if(null!=n&&n.forCoach)return null;var r=E[0]?E[0].metadata.src===eQ.id?"You broke the ice!":"".concat(t.firstName," ").concat(t.lastName," broke the ice!"):"You're about to break the ice!";return(0,es.jsx)(S.Z,{variant:"t9",color:D.O9.n5,children:r})},[eY,E,eQ]),th=(0,p.useMemo)(function(){if(!eY||!et.current.before)return null;var e=eY.channel,t=e.user,n=e.requestGroup;return n?(0,es.jsxs)(w.s,{alignItems:"center",gap:24,paddingTop:e0?16:56,paddingBottom:e0?16:56,children:[(0,es.jsxs)(w.s,{alignItems:"center",gap:8,children:[(0,es.jsx)(C.Z,{newTab:!e0,group:n,iconSize:40}),(0,es.jsxs)(y.X,{alignItems:"center",gap:8,children:[(0,es.jsx)(j.Z,{user:eQ,size:40}),(0,es.jsx)(R.x,{justifyContent:"center",marginBottom:28,style:{width:24},children:(0,es.jsx)(d.J,{name:"Refresh",color:D.O9.n5,size:20})}),(0,es.jsx)(j.Z,{user:t,size:40})]})]}),tf,tm]}):null},[e0,eY,tm,tf,eQ]),tv=(0,p.useMemo)(function(){return eY?(0,es.jsxs)(w.s,{alignItems:"center",height:"calc(100% - 52px)",width:"100%",children:[(0,es.jsxs)(eI,{children:[(0,es.jsxs)(eS,{ref:U,children:[th,td,(0,es.jsx)("div",{ref:B})]}),q&&!e0&&tu]}),(0,es.jsxs)(eZ,{ref:eP,$bottom:e5,children:[q&&e0&&tu,tp,!!el&&(0,es.jsx)(ev.Z,{open:!0,post:el.post,file:el.file,videoLink:el.videoLink,onClose:ts})]})]}):c?(0,es.jsx)(w.s,{alignItems:"center",justifyContent:"center",style:{height:"100%",position:"relative",width:"100%"},children:(0,es.jsx)(em.D,{})}):Z?null:(0,es.jsx)(y.X,{padding:e0?16:0,children:(0,es.jsx)(eE,{children:(0,es.jsx)(S.Z,{color:D.O9.n5,variant:"t9",children:eK?"No chat yet":"Select a conversation"})})})},[eY,th,td,q,tu,tp,el,ts,c,Z,e0,eK,e5]);return!e0&&e2?null:tv}eq.initPage=(r=(0,s.Z)(u().mark(function e(t){var n,r,i,o,a,s,l,c,d,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ctx,r=t.props,i=(0,b.bR)(n.query),r.self){e.next=8;break}return o=(0,b.rv)({channelId:i}).as,s=(a=(0,b.Iy)({redirectPath:o})).href,l=a.as,(0,v.Z)({Router:m(),ctx:n,url:s,as:l}),e.abrupt("return",r);case 8:if(r.isMobile){e.next=12;break}return d=(c=(0,b.kr)({channelId:i})).href,p=c.as,(0,v.Z)({Router:m(),ctx:n,url:d,as:p}),e.abrupt("return",r);case 12:return e.abrupt("return",eW({settings:{pageTitle:"Chat",mainMenuName:ep.K0.Chat}},r));case 14:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)});var eH=eq},54408:function(e,t,n){n.d(t,{DP:function(){return h},Fs:function(){return l},I2:function(){return o},IX:function(){return a},LC:function(){return u},Nr:function(){return v},Z0:function(){return p},_A:function(){return d},f2:function(){return r},fX:function(){return f},pf:function(){return c},q$:function(){return i},xO:function(){return s},y2:function(){return m}});var r=50,i=500,o="You have unsaved changes. Do you want to leave without saving?",a=0,s=1,l=2,c=3,u=4,d=[{value:0,label:"Open",description:"All members can access."},{value:2,label:"Level unlock",description:"Members unlock at a specific level."},{value:3,label:"Buy now",description:"Members pay a 1-time price to unlock."},{value:4,label:"Time unlock",description:"Members unlock after x days."},{value:1,label:"Private",description:"Members you select can access."}],p=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}],f=1,m=999,h=1,v=999},80181:function(e,t,n){n.d(t,{Fy:function(){return x},Jo:function(){return O},MK:function(){return D},Nl:function(){return I},Vl:function(){return j},XK:function(){return P},aA:function(){return h},eI:function(){return u},h3:function(){return b},nS:function(){return m},ni:function(){return p},vb:function(){return y},y5:function(){return d},yB:function(){return w},zm:function(){return C}});var r=n(50378),i=n(20668),o=n(70299),a=n(14251),s=n(12476),l=n(8024);n(59607);var c=(0,r.iv)(["overflow:hidden;height:187px;"]),u=r.ZP.div.withConfig({displayName:"styled__CourseCover",componentId:"sc-ugqan8-0"})(["position:relative;height:200px;width:100%;opacity:1;"," background-color:",";"],function(e){return!e.theme.isMobile&&c},function(e){return e.$bgColor}),d=r.ZP.img.withConfig({displayName:"styled__CoverImage",componentId:"sc-ugqan8-1"})(["display:block;height:",";width:100%;object-fit:cover;"],function(e){return e.theme.isMobile?"200px":"187px"}),p=r.ZP.div.withConfig({displayName:"styled__CourseCoverContent",componentId:"sc-ugqan8-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;background-color:rgba(0,0,0,0.5);color:",";",""],function(e){return e.theme.isDarkTheme?a.O9.n7:a.O9.n1},function(e){var t=e.theme;return i.c[t.isMobile?"t5":"t2"]}),f=(0,r.iv)(["grid-template-columns:none;row-gap:0px;margin-top:16px;"]),m=r.ZP.div.withConfig({displayName:"styled__CourseWrapper",componentId:"sc-ugqan8-3"})(["width:100%;display:grid;column-gap:16px;row-gap:32px;grid-template-columns:repeat(3,1fr);",";"],function(e){return e.theme.isMobile&&f}),h=r.ZP.div.withConfig({displayName:"styled__CourseLinkWrapper",componentId:"sc-ugqan8-4"})(["position:relative;"]),v=(0,r.iv)(["border-left:0px !important;border-right:0px !important;width:100vw;border-radius:0px;margin-bottom:16px;"]),b=r.ZP.div.withConfig({displayName:"styled__CourseContent",componentId:"sc-ugqan8-5"})(["width:350px;border-radius:10px;border:1px solid ",";overflow:hidden;background:",";display:flex;flex-direction:column;min-height:378px;",";",";cursor:",";&:hover{","}"],a.O9.n3,a.O9.n1,function(e){return e.theme.isMobile&&v},function(e){return!e.$published&&"opacity: 0.75;"},function(e){return e.$dragEnabled?"grab":"pointer"},o.Wn),g=(0,r.iv)(["visibility:visible;"]),x=(0,r.ZP)(s.h_).withConfig({displayName:"styled__CourseDropdownMenu",componentId:"sc-ugqan8-6"})(["position:absolute;top:8px;right:8px;visibility:hidden;",":hover &{visibility:visible;}",";",";"],h,function(e){return e.theme.isMobile&&g},function(e){return e.$forceDropdownVisible&&"visibility: visible;"}),y=(0,r.ZP)(l.A).withConfig({displayName:"styled__DraftChip",componentId:"sc-ugqan8-7"})(["position:absolute;top:8px;left:8px;color:",";background-color:",";border:",";&:hover{color:",";background-color:",";border:",";}"],function(e){return e.theme.isDarkTheme?a.O9.n7:a.O9.n1},a.O9.n5,a.O9.n5,a.O9.n1,a.O9.n5,a.O9.n5),w=(0,r.ZP)(b).withConfig({displayName:"styled__NewCourse",componentId:"sc-ugqan8-8"})(["border:2px dashed ",";background:",";flex-direction:row;justify-content:center;align-items:center;color:",";"," > :first-child{margin-right:13px;}> div{width:14px;color:",";}&:hover{color:",";background:",";box-shadow:none;> div{color:",";}}"],a.O9.n3,a.O9.n2,a.O9.n5,i.c.t6,a.O9.n5,a.O9.n7,a.O9.n3,a.O9.n7),C=r.ZP.div.withConfig({displayName:"styled__CourseInfo",componentId:"sc-ugqan8-9"})(["flex:1;display:flex;flex-direction:column;padding:16px 13px;"]),j=r.ZP.div.withConfig({displayName:"styled__CourseTitle",componentId:"sc-ugqan8-10"})(["margin-bottom:8px;"," ",""],i.c.ellipsis,function(e){return e.theme.isMobile?i.c.t4:i.c.t2}),k=(0,r.iv)(["height:42px;",""],i.c.t9),O=r.ZP.div.withConfig({displayName:"styled__CourseDescription",componentId:"sc-ugqan8-11"})(["margin-bottom:24px;word-break:break-word;height:72px;overflow:hidden;"," ",""],i.c.t7,function(e){return e.theme.isMobile&&k}),P=r.ZP.div.withConfig({displayName:"styled__ClassroomWrapper",componentId:"sc-ugqan8-12"})(["display:flex;flex-direction:column;"]),I=r.ZP.div.withConfig({displayName:"styled__PaginationWrapper",componentId:"sc-ugqan8-13"})(["padding:32px 0px;"]),D=r.ZP.div.withConfig({displayName:"styled__ClassroomNoCourses",componentId:"sc-ugqan8-14"})(["display:flex;justify-content:center;flex:1;color:",";margin-top:","px;",""],a.O9.n7,function(e){return e.theme.isMobile?32:0},i.c.t7)},51544:function(e,t,n){n.d(t,{n:function(){return el}});var r=n(90116),i=n(59499),o=n(50029),a=n(64687),s=n.n(a),l=n(67294),c=n(75331),u=n(33894),d=n(73793),p=n(95419),f=n(50591),m=n(70131),h=n(30697),v=n(15673),b=n(14251),g=n(96486),x=n.n(g),y=n(12476),w=n(36581),C=n(65009),j=n(85064),k=n(17674),O=n(5095),P=n(73674),I=n(88325),D=n(29610),Z=n(70120),S=n(86031),_=n(66703),M=n(76958),N=n(50378),E=n(20668),A=(0,N.ZP)(C.X).withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-5xhq84-0"})(["height:40px;width:40px;align-items:center;justify-content:center;cursor:pointer;visibility:",";border-radius:50%;&:hover{background-color:",";}"],function(e){var t=e.$unread,n=e.theme;return t||n.isMobile?"visible":"hidden"},function(e){return!e.theme.isMobile&&b.O9.n3}),L=N.ZP.div.withConfig({displayName:"styled__ReadButton",componentId:"sc-5xhq84-1"})(["height:12px;width:12px;background-color:",";border:",";border-radius:50%;"],function(e){return e.$unread?b.O9.sd1:"transparent"},function(e){var t=e.$unread;return"3px solid ".concat(t?b.O9.sd1:b.O9.n5)}),T=(0,N.ZP)(C.X).withConfig({displayName:"styled__NotificationRow",componentId:"sc-5xhq84-2"})(["align-items:center;border-bottom:1px solid ",";gap:",";height:72px;padding:",";transition:background 150ms ease-in-out;&:hover{background-color:",";","{visibility:inherit;}}"],b.O9.n3,function(e){return e.theme.isMobile?0:"12px"},function(e){var t=e.theme;return"12px ".concat(t.isMobile?13:16,"px")},function(e){var t=e.$readHover;return e.theme.isMobile?void 0:t?b.O9.n1:b.O9.n3},A),F=N.ZP.div.withConfig({displayName:"styled__AvatarWrapper",componentId:"sc-5xhq84-3"})(["opacity:",";position:relative;"],function(e){return e.$unread?1:.5}),B=N.ZP.div.withConfig({displayName:"styled__OnlineIcon",componentId:"sc-5xhq84-4"})(["position:absolute;bottom:0;right:-8px;height:16px;width:16px;background-color:",";border-radius:50%;margin:0 4px;border:2px solid ",";"],b.O9.s2,b.O9.n1),R=(0,N.ZP)(S.x).withConfig({displayName:"styled__LastMessageWrapper",componentId:"sc-5xhq84-5"})(["flex-shrink:0;margin-left:4px;min-width:40px;"]),z=N.ZP.div.withConfig({displayName:"styled__Overlay",componentId:"sc-5xhq84-6"})(["margin-left:",";min-width:0;opacity:",";"],function(e){return e.theme.isMobile?"12px":void 0},function(e){return e.$unread?1:.5}),G=N.ZP.div.withConfig({displayName:"styled__UnreadCount",componentId:"sc-5xhq84-7"})(["",";"],E.c.t5),U=N.ZP.div.withConfig({displayName:"styled__LastMessageTime",componentId:"sc-5xhq84-8"})(["color:",";",";"],b.O9.n5,E.c.t7),$=N.ZP.div.withConfig({displayName:"styled__MessageContent",componentId:"sc-5xhq84-9"})(["",";",";"],E.c.t9,E.c.ellipsis),W=n(54361),q=n(85893),H=(0,l.memo)(function(e){var t,n,r,i,a,c,u=e.item,f=e.batchIdx,v=e.itemIdx,b=e.fetchChannels,g=e.onClose,x=u.id,y=u.user,j=u.metadata,N=u.lastMessage,E=j.lastRead,H=j.numUnread,V=j.unread,Y=(0,l.useState)(V||H),J=Y[0],X=Y[1],K=(0,d.bI)("onlineStatuses","lastNotification","isMobile","self"),Q=K.onlineStatuses,ee=K.lastNotification,et=K.isMobile,en=K.self,er=K.dispatch,ei=(0,W.c8)(),eo=(0,k.Z)(ei,3),ea=eo[0],es=eo[1],el=eo[2];(0,l.useEffect)(function(){X(V||H)},[V,H]);var ec=(0,l.useCallback)((t=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),ee&&ee.id===x&&er(h.WT,function(){return{lastNotification:null}}),e.next=5,p.Z.markChatMessageRead({channelId:x});case 5:X(!1);case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[er,x,ee]),eu=(0,l.useCallback)((n=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),t.preventDefault(),e.next=4,p.Z.markChatMessageUnread({channelId:x});case 4:X(!0);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[x]),ed=(0,O.rv)({channelId:x,chatLastRead:E||void 0}),ep=(0,l.useCallback)(function(e){et||(e.preventDefault(),er(h.WT,function(){return{channelId:x,chatModalProps:{id:x,lastRead:E}}}),g())},[er,x,et,E,g]),ef=(0,q.jsx)(A,{onMouseEnter:et?void 0:es,onMouseLeave:et?void 0:el,onClick:J?ec:eu,$unread:J,children:(0,q.jsx)(L,{$unread:J})});return(0,q.jsx)(m.df,{onChange:(r=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&20===v)){e.next=3;break}return e.next=3,b(f+1);case 3:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),children:(0,q.jsx)(Z.r,{href:ed.href,as:ed.as,onClick:ep,children:(0,q.jsxs)(T,{$readHover:ea,children:[(0,q.jsxs)(F,{$unread:J,children:[(0,q.jsx)(P.Z,{user:y,size:40,disableLink:!0}),Q[y.id]&&(0,q.jsx)(B,{})]}),(0,q.jsx)(z,{$unread:J,children:(0,q.jsxs)(w.s,{children:[(0,q.jsxs)(C.X,{children:[(0,q.jsx)(M.Z,{disableLink:!0,disableStatusBadgeModal:!0,user:y,typographyVariant:"t5"}),(H>0||V)&&(0,q.jsx)(S.x,{marginLeft:4,children:(0,q.jsx)(G,{children:"(".concat(H||1,")")})}),(0,q.jsx)(R,{children:(0,q.jsx)(U,{children:(null==N?void 0:N.createdAt)&&"• ".concat((0,I.ur)({value:null==N?void 0:N.createdAt,justNow:!1}))})})]}),(0,q.jsx)($,{children:(0,D.Kv)({content:"".concat(null!=N&&null!==(i=N.metadata)&&void 0!==i&&i.content?null==N||null===(a=N.metadata)||void 0===a?void 0:a.content:(null==en?void 0:en.id)===(null==N||null===(c=N.metadata)||void 0===c?void 0:c.src)?"Sent an attachment":"Received an attachment")})})]})}),(0,q.jsx)(S.x,{flexGrow:1,justifyContent:"flex-end",children:et?ef:(0,q.jsx)(_.u,{content:"Mark ".concat(J?"read":"unread"),children:ef})})]})})},u.id)}),V=n(73475),Y=n(47691),J=(0,N.ZP)(C.X).withConfig({displayName:"styled__HeaderWrapper",componentId:"sc-ukqy8p-0"})(["align-items:center;border-bottom:1px solid ",";gap:8px;height:52px;"],b.O9.n3),X=N.ZP.div.withConfig({displayName:"styled__ChatHeader",componentId:"sc-ukqy8p-1"})(["",";"],E.c.t6),K=N.ZP.div.withConfig({displayName:"styled__SearchResultsText",componentId:"sc-ukqy8p-2"})(["color:",";",";"],b.O9.n5,E.c.t7),Q=(0,N.ZP)(V.J).withConfig({displayName:"styled__SearchIcon",componentId:"sc-ukqy8p-3"})(["color:",";height:18px;width:18px;"],b.O9.n5),ee=(0,N.ZP)(V.J).withConfig({displayName:"styled__CloseIcon",componentId:"sc-ukqy8p-4"})(["color:",";height:14px;width:14px;"],b.O9.n5),et=N.ZP.button.withConfig({displayName:"styled__CloseButton",componentId:"sc-ukqy8p-5"})(["width:24px;padding:0;margin-right:4px;background:none;border:none;cursor:pointer;"]),en=N.ZP.span.withConfig({displayName:"styled__MarkAllRead",componentId:"sc-ukqy8p-6"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],b.O9.sd1,E.c.t11),er=N.ZP.div.withConfig({displayName:"styled__ChatSearchWrapper",componentId:"sc-ukqy8p-7"})(["padding:8px 13px;border-bottom:1px solid ",";"],b.O9.n3),ei=(0,N.ZP)(Y.I).withConfig({displayName:"styled__SearchInput",componentId:"sc-ukqy8p-8"})(["background-color:",";border-radius:10px;padding-left:16px;padding-right:8px;height:40px;min-height:unset;width:100%;input{color:",";height:32px;padding:6px 0 7px;",";&::placeholder{color:",";padding-top:2px;",";}}"],b.O9.n3,b.O9.n7,E.c.t7,b.O9.n5,E.c.t7),eo=n(42108);function ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ea(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var el=(0,l.memo)(function(e){var t=e.onItemClick,n=(0,d.bI)("unreadChat","self","isMobile"),a=n.unreadChat,g=n.self,k=n.isMobile,O=n.dispatch,P=(0,l.useState)(!0),I=P[0],D=P[1],Z=(0,l.useRef)([]),_=(0,l.useRef)(!1),M=(0,l.useState)([]),N=M[0],E=M[1],A=(0,l.useRef)([]),L=(0,l.useState)(""),T=L[0],F=L[1],B=(0,l.useState)(null),R=B[0],z=B[1],G=(0,l.useState)(!1),U=G[0],$=G[1],W=(0,l.useRef)(""),V=(0,l.useState)(function(){var e,t;return null!==(e=null===(t=(0,c.tv)({key:c.H0.lastChatFilter}))||void 0===t?void 0:t.value)&&void 0!==e?e:"all"}),Y=V[0],ea=V[1];(0,l.useEffect)(function(){T?$(!0):(z(null),$(!1))},[T]),(0,l.useEffect)(function(){var e=T||"";if(e){if(e!==W.current){if(W.current=e,e.trim()){var t=setTimeout((0,o.Z)(s().mark(function t(){var n,r;return s().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.Z.searchChatUsers({query:e});case 2:z(null!==(n=null==(r=t.sent.data)?void 0:r.channels)&&void 0!==n?n:[]),$(!1);case 6:case"end":return t.stop()}},t)})),500);return function(){clearTimeout(t)}}z(null),$(!1)}}else W.current="",z(null),$(!1)},[T]);var el=(0,l.useCallback)(function(e){var t=e.online,n=e.topic.mainId;O(h.WT,function(e){return{onlineStatuses:es(es({},e.onlineStatuses),{},(0,i.Z)({},n,t))}})},[O]);(0,l.useEffect)(function(){if(null!=N&&N.flat){var e={};N.flat().forEach(function(t){var n=t.user,r=n.id,i=n.metadata;e[r]=i.online}),O(h.WT,function(t){return{onlineStatuses:es(es({},t.onlineStatuses),e)}});var t=N.flat().map(function(e){return(0,f.Cq)(e.user.id)});if(t.length)return(0,f.Ld)(t,el)}},[N,el,O]);var ec=(0,l.useCallback)((0,o.Z)(s().mark(function e(){var t,n,i,o,a,l,c=arguments;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:0,n=c.length>1?c[1]:void 0,!(i=W.current.trim())){e.next=12;break}return e.next=6,p.Z.searchChatUsers({query:i});case 6:if(z(e.sent.data.channels||[]),$(!1),n){e.next=12;break}return e.abrupt("return");case 12:if(!_.current){e.next=14;break}return e.abrupt("return");case 14:if(!(!n&&Z.current.length>=t+1)){e.next=16;break}return e.abrupt("return");case 16:if(!(Z.current.length<t+1||Z.current[t])){e.next=33;break}return D(!0),e.next=20,p.Z.getChannels({limit:30,offset:30*t,last:!0,unreadOnly:"unread"===Y});case 20:if(a=(o=e.sent).data,!o.error){e.next=25;break}return e.abrupt("return");case 25:if(l=a.channels,0===t&&O(h.WT,function(){return{noNotifications:!l}}),!(!l&&0!==t)){e.next=30;break}return _.current=!0,e.abrupt("return");case 30:l||(l=[],_.current=!0),E(function(e){return Z.current.length?void 0!==Z.current[t]?(Z.current[t]=!1,[].concat((0,r.Z)(e.slice(0,t)),[l],(0,r.Z)(e.slice(t+1)))):(Z.current=[].concat((0,r.Z)(Z.current),[!1]),[].concat((0,r.Z)(e),[l])):(Z.current=[!1],[l])}),D(!1);case 33:case"end":return e.stop()}},e)})),[O,Y]),eu=(0,l.useCallback)(function(e){(0,c.co)({key:c.H0.lastChatFilter,value:e}),ea(e),ec()},[ec]),ed=(0,l.useMemo)(function(){return k?[]:[{key:"all",label:"All",onClick:function(){return eu("all")},active:"all"===Y},{key:"unread",label:"Unread",onClick:function(){return eu("unread")},active:"unread"===Y}]},[eu,Y,k]),ep=(0,l.useCallback)(function(e){e.senderName&&!g.metadata.noChatSound&&(0,u.O)(),e.senderName&&O(h.WT,function(){return{lastNotification:{name:e.senderName,id:e.channelId}}}),Z.current=Array(Z.current.length).fill(!0),_.current=!1,A.current.length?A.current.forEach(function(e,t){e&&ec(t,!0)}):ec(0,!0)},[g,ec,O]);(0,l.useEffect)(function(){if(g)return(0,f.Ld)([(0,f.LS)(g.id)],ep)},[g,ep]),(0,l.useEffect)(function(){Z.current=[],A.current=[],_.current=!1,ec()},[ec]);var ef=(0,l.useCallback)((0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Z.markAllChatMessageRead();case 2:Z.current=Array(Z.current.length).fill(!0),_.current=!1,A.current.forEach(function(e,t){e&&ec(t,!0)});case 5:case"end":return e.stop()}},e)})),[ec]),em=(0,l.useCallback)(function(e){F(e.target.value)},[]),eh=(0,l.useCallback)(function(){F("")},[]),ev=(0,l.useMemo)(function(){return k?null:(0,q.jsx)(w.s,{children:(0,q.jsxs)(J,{children:[(0,q.jsx)(X,{children:"Chats"}),(0,q.jsxs)(C.X,{flexGrow:1,gap:16,alignItems:"center",justifyContent:"flex-end",children:[!!a&&(0,q.jsx)(en,{onClick:ef,children:"Mark all as read"}),(0,q.jsx)(y.h_,{label:"all"===Y?"All":"Unread",options:ed,variant:"borderless",style:{height:40}})]})]})})},[ef,a,Y,ed,k]),eb=(0,l.useMemo)(function(){return k?[{label:"Mark all as read",onClick:ef,disabled:!a},{label:"All",onClick:function(){return eu("all")},disabled:"all"===Y,icon:"Filter"},{label:"Unread",onClick:function(){return eu("unread")},disabled:"unread"===Y,icon:"Filter"}]:null},[Y,eu,ef,k,a]),eg=(0,l.useMemo)(function(){return k?{title:"Chats",dropdownOptions:eb}:null},[k,eb]);(0,eo.l)(eo.C.CHATS,eg);var ex=(0,l.useMemo)(function(){var e=(x().isNull(R)?N:[R]).map(function(e,n){return(0,q.jsx)(m.df,{onChange:function(e){N.length<A.current.length?A.current=[].concat((0,r.Z)(A.current),[e]):A.current=[].concat((0,r.Z)(A.current.slice(0,n)),[e],(0,r.Z)(A.current.slice(n+1))),e&&ec(n,!0)},children:e.length?e.map(function(e,r){return(0,q.jsx)(H,{item:e,batchIdx:n,itemIdx:r,fetchChannels:ec,onClose:t},e.id)}):(0,q.jsx)(C.X,{flexGrow:1,justifyContent:"center",paddingTop:24,paddingBottom:24,children:(0,q.jsx)(K,{children:W.current?"No results":"No chats yet"})})},n)});return[(0,q.jsx)(er,{children:(0,q.jsx)(ei,{autoFocus:!k,value:T,onChange:em,placeholder:"Search users",prefix:(0,q.jsx)(S.x,{marginRight:16,children:(0,q.jsx)(Q,{name:"Search"})}),suffix:T?(0,q.jsx)(S.x,{marginLeft:8,children:U?(0,q.jsx)(S.x,{marginRight:8,children:(0,q.jsx)(j.D,{size:20,color:b.O9.n5})}):(0,q.jsx)(et,{type:"button",onClick:eh,children:(0,q.jsx)(ee,{name:"Close"})})}):void 0,variant:"borderless",staticLabel:!0})},"chat-search")].concat((0,r.Z)(e))},[R,N,T,U,eh,em,ec,t,k]);return(0,q.jsx)(v.J,{loading:I&&1===ex.length,headerItem:ev,items:ex})})},85240:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(67294),i=n(85064),o=n(73475),a=n(73793),s=n(5095),l=n(91194),c=n(11163),u=n(50378),d=n(20668),p=n(14251),f=u.ZP.input.withConfig({displayName:"styled__SearchInput",componentId:"sc-19ku97b-0"})(["box-sizing:border-box;width:100%;height:100%;border:none;background-color:",";&:focus{outline:none;}&::placeholder{color:",";","}",""],p.O9.n3,p.O9.n5,d.c.t7,d.c.t7),m=u.ZP.div.withConfig({displayName:"styled__SearchWrapper",componentId:"sc-19ku97b-1"})(["display:flex;align-items:center;gap:16px;height:40px;background-color:",";border-radius:10px;padding:11px 10px 11px 16px;cursor:text;svg{color:",";}> form{flex:1;}"],p.O9.n3,p.O9.n5),h=u.ZP.button.withConfig({displayName:"styled__SearchIconButton",componentId:"sc-19ku97b-2"})(["border:none;background:none;cursor:pointer;&:hover{svg{color:",";}}"],p.O9.n7),v=n(85893),b=(0,r.forwardRef)(function(e,t){var n=e.value,u=e.onChange,d=e.onSubmit,p=e.onClear,b=e.placeholder,g=e.isPending,x=(0,c.useRouter)(),y=(0,a.bI)("isMobile","self"),w=y.isMobile,C=y.self,j=(0,r.useCallback)(function(){var e;null==t||null===(e=t.current)||void 0===e||e.focus()},[t]),k=(0,r.useCallback)(function(e){e.preventDefault(),n.trim()&&d()},[n,d]),O=(0,r.useCallback)(function(){(0,l.gx)(x,(0,s.tL)({tab:"communities"}),!C)},[x,C]),P=(0,r.useCallback)(function(){return g?(0,v.jsx)(i.D,{}):n?(0,v.jsx)(h,{type:"button",onClick:p,children:(0,v.jsx)(o.J,{name:"Close",style:{width:14,height:14}})}):(0,v.jsx)(h,{onClick:O,children:(0,v.jsx)(o.J,{name:"GearOutlined",style:{width:18,height:18}})})},[g,p,O,n]);return(0,v.jsxs)(m,{onClick:j,children:[(0,v.jsx)(o.J,{name:"Search",style:{width:18,height:18}}),(0,v.jsx)("form",{onSubmit:k,children:(0,v.jsx)(f,{ref:t,value:n,onChange:u,autoFocus:!w,placeholder:null!=b?b:"Search"})}),P()]})}),g=(0,r.memo)(b)},80847:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(59499),i=n(50029),o=n(64687),a=n.n(o),s=n(73475),l=n(11163),c=n(67294),u=n(14251),d=n(91194),p=n(5095),f=n(73793),m=n(95419),h=n(38449),v=n(50378),b=n(59607),g=n(47691),x=n(20668),y=v.ZP.div.withConfig({displayName:"styled__SearchIconWrapper",componentId:"sc-1oa6nzm-0"})(["display:inline-flex;align-items:center;justify-content:",";margin-right:16px;flex-grow:1;flex-shrink:0;flex-basis:",";"],function(e){return e.theme.isMobile?"flex-start":"center"},function(e){return e.theme.isMobile?"21px":"24px"}),w=(0,v.ZP)(b.z).withConfig({displayName:"styled__CloseButton",componentId:"sc-1oa6nzm-1"})(["height:25px;width:25px;"]),C=v.ZP.div.withConfig({displayName:"styled__SearchInputWrapper",componentId:"sc-1oa6nzm-2"})(["flex-grow:1;"]),j=(0,v.ZP)(g.I).withConfig({displayName:"styled__SearchInput",componentId:"sc-1oa6nzm-3"})(["background-color:",";border-radius:10px;padding-left:",";padding-right:",";height:48px;min-height:unset;width:100%;&:focus-within{border:0;outline:none;}input{color:",";height:32px;padding:6px 0 7px;",";&::placeholder{color:",";padding-top:2px;",";}}"],u.O9.n3,function(e){return e.theme.isMobile?"15px":"16px"},function(e){return e.theme.isMobile?"14px":"16px"},u.O9.n7,x.c.t7,u.O9.n5,x.c.t7),k=n(30697),O=n(85893);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D(e){var t,n=e.group,r=e.autoFocus,o=e.onSubmit,v=e.searchMembers,b=e.searchInvites,g=(0,l.useRouter)(),x=g.query,P=g.pathname,D=(0,c.useState)((0,p.wk)(x)||""),Z=D[0],S=D[1],_=(0,f.bI)("isMobile","self","showSkoolCat"),M=_.isMobile,N=_.dispatch,E=_.showSkoolCat,A=_.self,L=(0,c.useRef)(!1),T=(0,p.iH)(g);(0,c.useEffect)(function(){return L.current=!0,function(){L.current=!1}},[]);var F=(0,c.useCallback)((t=(0,i.Z)(a().mark(function e(t){var r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(!M&&A)){e.next=17;break}if(!("let there be cat"===Z.toLowerCase()&&!E)){e.next=10;break}return N(k.S3,!0),N(k.Pr,"gangster"),N(k._$,function(e){var t=I({},e);return t.metadata.catEnabled=!0,t}),(0,h.P3)({eventName:h.qI.catEnabled,userID:null==A?void 0:A.id}),e.next=9,m.Z.updateUserMeta({userID:A.id,key:"cat_enabled",valueType:"bool",value:!0});case 9:case 16:return e.abrupt("return");case 10:if(!("shoo cat"===Z.toLowerCase()&&E)){e.next=17;break}return N(k.jf,!1),N(k._$,function(e){var t=I({},e);return t.metadata.catEnabled=!1,t}),(0,h.P3)({eventName:h.qI.catDisabled,userID:null==A?void 0:A.id}),e.next=16,m.Z.updateUserMeta({userID:A.id,key:"cat_enabled",valueType:"bool",value:"false"});case 17:if(r=Z.trim()){e.next=21;break}return S(""),e.abrupt("return");case 21:if(!T){e.next=24;break}return(0,d.VF)(g,(0,p.Gt)({query:Z.trim()})),e.abrupt("return");case 24:i=v?"members":(0,p.q$)(x),(0,p.kA)({pathname:P})&&(i="courses"),(0,p.ni)({pathname:P})&&(i="invited"),e.t0=i,e.next="posts"===e.t0?30:"members"===e.t0?30:"invited"===e.t0?30:"courses"===e.t0?30:31;break;case 30:return e.abrupt("break",32);case 31:i=void 0;case 32:if("invited"!==i){e.next=37;break}return e.next=35,(0,d.VF)(g,(0,p.ZG)({group:n,searchQuery:r}));case 35:e.next=39;break;case 37:return e.next=39,(0,d.VF)(g,(0,p.gT)({group:n,searchQuery:r,tab:i}));case 39:o&&o();case 40:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[n,o,P,x,g,v,Z,T,N,M,A,E]),B=(0,c.useCallback)((0,i.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S(""),!(0,p.ni)({pathname:P})){e.next=4;break}return e.next=4,(0,d.VF)(g,(0,p.ZG)({group:n}));case 4:case"end":return e.stop()}},e)})),[n,g,P]),R=(0,c.useCallback)(function(e){S(e.target.value)},[]),z=(0,c.useMemo)(function(){var e=M?v?"Search members":"Search group":v?"Search members":"Search";return b?e="Search invited emails":T&&(e="Search for anything"),e},[T,M,b,v]);return(0,O.jsx)(C,{children:(0,O.jsx)("form",{onSubmit:F,action:"#",children:(0,O.jsx)(j,{autoFocus:r,prefix:(0,O.jsx)(y,{children:(0,O.jsx)(s.J,{name:"Search",color:u.O9.n5,size:18})}),suffix:Z?(0,O.jsx)(w,{variant:"icon-borderless-no-hover",icon:"Close",onClick:B,iconSize:14}):void 0,value:Z,onChange:R,placeholder:z,staticLabel:!0,variant:"borderless"})})})}D.defaultProps={autoFocus:!1,searchMembers:!1};var Z=(0,c.memo)(D)},73758:function(e,t,n){n.d(t,{C:function(){return x},Z:function(){return g}});var r=n(67294),i=n(80008),o=n.n(i),a=n(59607),s=n(14251),l=n(88325),c=n(75331),u=n(50378),d=n(20668),p=(0,u.iv)(["height:92px;padding:0px 4px 0px 13px;> div{&:first-child{width:0px;height:0px;}}> button{flex-shrink:0;}"]),f=u.ZP.div.withConfig({displayName:"styled__MaintenanceBannerWrapper",componentId:"sc-33foma-0"})(["display:flex;justify-content:space-between;align-items:center;height:56px;background-color:",";color:",";padding:0px 24px;> div{&:first-child{width:40px;height:40px;}}> button{color:",";}",""],s.O9.p2,s.O9.fgPrimary,s.O9.n7,function(e){return e.theme.isMobile&&p}),m=u.ZP.div.withConfig({displayName:"styled__MaintenanceCopy",componentId:"sc-33foma-1"})(["text-align:center;",""],d.c.t10),h=n(23450),v=n.n(h),b=n(85893),g=function(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],o=(null==e?void 0:e.startTimeSec)||0,a=(null==e?void 0:e.durationSec)||0;return(0,r.useEffect)(function(){var e=(0,c.tv)({key:c.H0.maintenanceClosed}).value;o&&e!==o&&i(!0)},[o]),{maintenanceStartTime:o,maintenanceDuration:a,showMaintenanceBanner:n,closeMaintenanceBanner:function(){(0,c.co)({key:c.H0.maintenanceClosed,value:o}),i(!1)}}},x=(0,r.memo)(function(e){var t=e.startTime,n=e.duration,i=e.onClose,c=(0,r.useMemo)(function(){return o()(1e3*t).tz(l.ey).format("h:mma z [on] MMMM Do YYYY")},[t]),u=(0,r.useMemo)(function(){var e=Math.round(n/60);return e<=50?"for ".concat(v()("minute",e,!0)):"for ".concat(v()("hour",Math.round(e/60),!0))},[n]);return(0,b.jsxs)(f,{children:[(0,b.jsx)("div",{}),(0,b.jsxs)(m,{children:[(0,b.jsx)("div",{children:"⏰  SCHEDULED MAINTENANCE:"}),(0,b.jsx)("div",{children:"Skool will be offline ".concat(u," starting ").concat(c,".")})]}),(0,b.jsx)(a.z,{iconSize:14,icon:"Close",onClick:i,variant:"icon-borderless-no-hover",style:{color:s.O9.fgPrimary}})]})})},42108:function(e,t,n){n.d(t,{C:function(){return c},l:function(){return u}});var r=n(59499),i=n(67294),o=n(73793),a=n(30697);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={POST:"POST",CHAT:"CHAT",CHATS:"CHATS",NOTIFS:"NOTIFS",PROFILE:"PROFILE",COURSE:"COURSE",SETTINGS_MODAL:"SETTINGS_MODAL",USER_SETTINGS:"USER_SETTINGS"};function u(e,t){var n=(0,o.bI)("isMobile"),s=n.isMobile,u=n.dispatch;(0,i.useEffect)(function(){if(s&&c[e])return u(a.kC,function(n){return l(l({},n),{},(0,r.Z)({},e,t))}),function(){u(a.kC,function(t){return l(l({},t),{},(0,r.Z)({},e,null))})}},[e,u,t,s])}},34811:function(e,t,n){n.d(t,{s:function(){return q},Z:function(){return H}});var r=n(50029),i=n(17674),o=n(59499),a=n(4730),s=n(64687),l=n.n(s),c=n(30697),u=n(67294),d=n(50378),p=n(73793),f=n(20668),m=n(59607),h=n(80847),v=n(16531),b=n(65009),g=n(85893),x=(0,d.ZP)(m.z).withConfig({displayName:"MobileSearchInputForm__MobileSearchCancelButton",componentId:"sc-18wu2kl-0"})(["width:auto;height:auto;",";"],f.c.t10),y=(0,u.memo)(function(e){var t=e.open,n=e.searchMembers,r=e.searchInvites,i=e.onSubmit,o=e.onCancel,a=(0,p.bI)("currentGroup").currentGroup,s=(0,u.useCallback)(function(){o&&o()},[o]);return(0,g.jsx)(v.u_,{open:t,shouldFullscreenOnMobile:!0,wrapperStyle:{padding:0},children:(0,g.jsxs)(b.X,{padding:12,children:[(0,g.jsx)(h.Z,{group:a,searchMembers:n,searchInvites:r,onSubmit:i,autoFocus:!0}),(0,g.jsx)(x,{variant:"borderless",label:"Cancel",onClick:s})]})})}),w=n(12476),C=n(95419),j=n(33850),k=n(91194),O=n(5095),P=n(193),I=n(14760),D=n(14251),Z=n(73475),S=n(70120),_=n(11163),M=n(81343),N=n(42470),E=n(85240),A=d.ZP.div.withConfig({displayName:"styled__SwitcherItem",componentId:"sc-isvdbp-0"})(["display:flex;align-items:center;gap:8px;padding:12px;span{"," ","}",""],f.c.ellipsis,f.c.t4,function(e){return e.$selected&&"background-color: ".concat(D.O9.p2)}),L=d.ZP.div.withConfig({displayName:"styled__SwitcherItemIconWrapper",componentId:"sc-isvdbp-1"})(["display:flex;justify-content:center;align-items:center;width:40px;height:40px;background-color:",";border-radius:10px;svg{color:",";}"],D.O9.n3,D.O9.n5),T=d.ZP.div.withConfig({displayName:"styled__SearchWrapper",componentId:"sc-isvdbp-2"})(["padding:16px 13px 4px;"]),F=(0,u.memo)(function(e){var t=e.open,n=e.onClose,i=e.onItemClick,o=(0,p.bI)("currentGroup","self"),a=o.currentGroup,s=o.self,c=(0,_.useRouter)(),d=(0,u.useState)((null==s?void 0:s.allGroups)||[]),f=d[0],m=d[1],h=(0,u.useState)((null==s?void 0:s.hasMore)||!1),v=h[0],x=h[1],y=(0,u.useState)(!1),w=y[0],F=y[1],B=(0,u.useState)(""),R=B[0],z=B[1],G=(0,u.useRef)();(0,u.useEffect)(function(){R.trim()?F(!0):(F(!1),m((null==s?void 0:s.allGroups)||[]),x((null==s?void 0:s.hasMore)||!1))},[R,s]),(0,u.useEffect)(function(){var e=R.trim();if(!e){G.current="";return}var t=setTimeout((0,r.Z)(l().mark(function t(){var n;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(G.current!==e){t.next=3;break}return F(!1),t.abrupt("return");case 3:return G.current=e,t.next=6,C.Z.readSelfGroups({limit:10,q:e||void 0});case 6:null!=(n=t.sent.data)&&n.hasMore?x(!0):x(!1),F(!1),m((null==n?void 0:n.groups)||[]);case 11:case"end":return t.stop()}},t)})),500);return function(){return clearTimeout(t)}},[R]);var U=(0,u.useCallback)((0,r.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.readSelfGroups({offset:f.length,limit:10,q:R.trim()||void 0});case 2:null!=(t=e.sent.data)&&t.hasMore?x(!0):x(!1),null!=t&&t.groups&&m(f.concat(t.groups));case 6:case"end":return e.stop()}},e)})),[f,R]),$=(0,u.useCallback)(function(e){i&&i((0,O.AZ)({groupName:e.name}))},[i]),W=(0,u.useCallback)(function(){(0,k.VF)(c,(0,O.Gt)({}))},[c]),q=(0,u.useCallback)(function(e){z(e.target.value)},[]),H=(0,u.useCallback)(function(){(0,k.VF)(c,(0,O.Gt)({query:R.trim()}))},[R,c]),V=(0,u.useCallback)(function(){z("")},[]),Y=(0,u.useMemo)(function(){return f.map(function(e){switch(null===(t=e.metadata)||void 0===t?void 0:t.privacy){case 0:case 1:break;default:return}var t,n=e.id===(null==a?void 0:a.id);return{key:e.id,selected:n,onClick:function(){return $(e)},content:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(P.Z,{group:e,iconSize:40,disableLink:!0,iconOnly:!0}),(0,g.jsx)("span",{style:{color:n?D.O9.fgPrimary:void 0},children:e.metadata.displayName})]})}}).filter(function(e){return!!e})},[f,a,$]),J=(0,u.useMemo)(function(){return(0,g.jsxs)("div",{style:{marginBottom:64},children:[(0,g.jsx)(b.X,{padding:"19px 13px",children:(0,g.jsx)(I.Z,{variant:"t6",children:"Switch communities"})}),(0,g.jsx)(M.i,{}),(0,g.jsx)(T,{children:(0,g.jsx)(E.Z,{value:R,onChange:q,onSubmit:H,onClear:V,isPending:w})}),R.trim()?(0,g.jsxs)(A,{onClick:H,children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"Search",style:{width:18}})}),(0,g.jsx)("span",{children:"Search all communities"})]}):(0,g.jsx)(g.Fragment,{children:!(0,j.lF)(null==s?void 0:s.id)&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(S.r,{href:"/signup".concat(a?"?g=".concat(a.id):""),children:(0,g.jsxs)(A,{children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"Plus",style:{width:16}})}),(0,g.jsx)("span",{children:"Create a community"})]})}),(0,g.jsxs)(A,{onClick:W,children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"Compass",style:{width:24}})}),(0,g.jsx)("span",{children:"Discover communities"})]})]})}),Y.map(function(e){var t=e.key,n=e.onClick,r=e.selected,i=e.content;return(0,g.jsx)(A,{$selected:r,onClick:r?function(){}:n,children:i},t)}),v&&(0,g.jsxs)(A,{onClick:U,children:[(0,g.jsx)(L,{children:(0,g.jsx)(Z.J,{name:"ArrowDown",style:{width:12}})}),(0,g.jsx)("span",{children:"See more"})]})]})},[a,Y,U,W,q,H,V,v,R,w,s]);return(0,g.jsx)(N.d,{anchor:"left",open:t,onClose:n,width:280,disableAnimation:!0,children:J})}),B=n(3881),R=n(16557),z=n(54361),G=n(42108),U=["children","scrollOnClick"];function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,o.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function q(e){var t=e.children,n=e.scrollOnClick,r=(0,a.Z)(e,U),i=(0,u.useCallback)(function(){n&&window.scrollTo({top:0,left:0,behavior:"smooth"})},[n]);return(0,g.jsx)(I.Z,W(W({variant:"t8",ellipsis:!0,onClick:i},r),{},{children:t}))}var H=(0,u.memo)(function(e){var t=e.settings,n=e.canAccessGroup,o=(0,z.c8)(),a=(0,i.Z)(o,3),s=a[0],d=a[1],f=a[2],h=(0,z.c8)(),v=(0,i.Z)(h,3),x=v[0],C=v[1],j=v[2],I=(0,u.useState)(!1),D=I[0],Z=I[1],S=(0,u.useState)(null),M=S[0],N=S[1],E=(0,_.useRouter)(),A=(0,u.useRef)(!1),L=(0,p.bI)("self","currentGroup","mobileHeaderExtra","isChat","settingsModal"),T=L.self,U=L.currentGroup,$=L.mobileHeaderExtra,H=L.isChat,V=L.settingsModal,Y=L.dispatch,J=(0,O.iH)(E),X=(0,O.wl)(E),K=(0,O.mS)(E),Q=(0,O.wk)(E.query)||"";(0,u.useEffect)(function(){N(window.history.length);var e=function(){A.current=!0};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[E]);var ee=(0,u.useCallback)(function(e){var t=e.href,n=e.as;f(),(0,k.VF)(E,{href:t,as:n})},[E,f]),et=(0,u.useCallback)(function(){window.location.reload()},[]),en=(0,u.useCallback)(function(){U&&(!(0,O.g7)(E)||n)?(0,k.gx)(E,(0,O.AZ)({groupName:U.name})):(0,k.gx)(E,{href:"/",as:"/"})},[n,U,E]),er=(0,u.useCallback)(function(){Y(c.fi,function(e){return W(W({},e),{},{settingsModal:null})})},[Y]),ei=(0,u.useCallback)(function(){E.back(),setTimeout(function(){A.current||en()},500)},[E,en]),eo=(0,u.useCallback)(function(){J&&Z(window.scrollY>175)},[J]);(0,u.useEffect)(function(){return eo(),window.addEventListener("scroll",eo),function(){window.removeEventListener("scroll",eo)}},[eo]);var ea=(0,u.useMemo)(function(){return V||(0,O.Tx)(E)?(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Close",iconSize:15,onClick:V?er:ei,style:{flexShrink:0},dataTestId:"back-button"}):!(0,O.TL)(E)&&((0,O.mp)(E)||(0,O.iH)(E)||X||K||(0,O.pi)(E)&&(null==T?void 0:T.name)===(0,O.wg)(E.query)||(0,O.g7)(E)&&M&&!(M>1))?(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Menu",iconSize:18,onClick:d,style:{flexShrink:0}}):(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Left",iconSize:15,onClick:ei,style:{flexShrink:0},dataTestId:"back-button"})},[V,E,X,K,null==T?void 0:T.name,M,d,er,ei]),es=(0,u.useMemo)(function(){if(H)return G.C.CHAT;if(V)return G.C.SETTINGS_MODAL;if(X)return G.C.CHATS;if(K)return G.C.NOTIFS;if((0,O.DG)(E))return G.C.POST;if((0,O.pi)(E))return G.C.PROFILE;if((0,O.aR)(E))return G.C.COURSE;else if((0,O.Tx)(E))return G.C.USER_SETTINGS;return null},[H,V,X,K,E]),el=(0,u.useMemo)(function(){if(es){var e,t=null!==(e=null==$?void 0:$[es])&&void 0!==e?e:{},n=t.title,r=t.withDefaultTitle,i=t.disableGroupLogo;return r?U?(0,g.jsx)(P.Z,{group:U,variant:"t8",iconSize:24}):(0,g.jsx)(R.Z,W({width:77},(0,O.Gt)({}))):(0,g.jsxs)(g.Fragment,{children:[U&&!i&&(0,g.jsx)(P.Z,{group:U,variant:"t8",iconSize:24,iconOnly:!0}),"string"==typeof n?(0,g.jsx)(q,{children:n}):n]})}return U?(0,g.jsx)(P.Z,{group:U,variant:"t8",iconSize:24}):(0,g.jsx)(R.Z,W({width:77},(0,O.Gt)({})))},[es,U,$]),ec=(0,u.useMemo)(function(){if(V)return null;if(!T)return(0,g.jsx)(b.X,{flexShrink:0,alignItems:"center",children:(0,g.jsx)(B.Z,{signIn:!0,onSuccess:et})});var e,t,i,o=(!!U&&n||J&&(D||!!Q))&&!(0,O.DG)(E),a=null!==(t=null==$?void 0:$[es])&&void 0!==t?t:{},s=a.dropdownOptions,u=a.searchOverride;return null!==(i=s)&&void 0!==i&&i.length||(s=U?[{label:"Copy link",onClick:(e=(0,r.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(location.origin).concat(location.pathname),e.next=3,navigator.clipboard.writeText(t);case 3:Y(c.bI,{message:"Link copied to clipboard"});case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})}]:null),(0,g.jsxs)(b.X,{alignItems:"center",flexShrink:0,children:[o&&!u?(0,g.jsx)(m.z,{variant:"icon-borderless-no-hover",icon:"Search",iconSize:17.5,onClick:C}):u,s&&(0,g.jsx)(w.h_,{variant:"icon-borderless",icon:"HorizontalDots",options:s})]})},[T,U,n,J,D,Q,C,$,es,et,Y,E,V]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(b.X,{justifyContent:"space-between",padding:"0 4px",style:{width:"100%",height:"100%"},children:[(0,g.jsx)(b.X,{style:{width:"100%",minWidth:0},children:(0,g.jsxs)(b.X,{gap:8,alignItems:"center",marginRight:8,style:{minWidth:0},children:[ea,el]})}),ec]}),s&&(0,g.jsx)(F,{open:!0,onItemClick:ee,onClose:f}),(0,g.jsx)(y,{open:x,searchMembers:!!t.searchMembers,searchInvites:!!t.searchInvites,onSubmit:j,onCancel:j})]})})},32413:function(e,t,n){n.d(t,{w:function(){return ev}});var r=n(59499),i=n(90116),o=n(50029),a=n(64687),s=n.n(a),l=n(67294),c=n(73793),u=n(14760),d=n(65009),p=n(14251),f=n(85064),m=n(85893);function h(e){var t=e.loading;return(0,m.jsx)(d.X,{alignItems:"center",justifyContent:"center",style:{padding:"24px 0"},children:t?(0,m.jsx)(f.D,{}):(0,m.jsx)(u.Z,{variant:"t7",color:p.O9.n5,children:"No notifications yet"})})}h.defaultProps={loading:!1};var v=(0,l.memo)(h),b=n(50378),g=n(59607),x=(0,b.ZP)(g.z).withConfig({displayName:"NotificationLoadMoreItem__NotificationLoadMoreButton",componentId:"sc-k1banu-0"})(["height:44px;padding:0 12px;"]);function y(e){var t=e.loading,n=e.onClick;return(0,m.jsx)(d.X,{alignItems:"center",justifyContent:"center",style:{height:60},children:t?(0,m.jsx)(f.D,{}):(0,m.jsx)(x,{typography:"t5",variant:"borderless-hover",onClick:n,disableRipple:!0,label:"LOAD MORE"})})}y.defaultProps={loading:!1};var w=(0,l.memo)(y),C=n(17674),j=n(29610),k=n(88325),O=n(12967),P=n(5095),I=n(36581),D=n(70120),Z=n(86031),S=n(66703),_=n(30697),M=n(76958),N=n(95419),E=n(20668),A=n(73475),L=b.ZP.div.withConfig({displayName:"styled__ActionItem",componentId:"sc-bymlbk-0"})(["margin-left:6px;visibility:",";"],function(e){var t=e.$unread,n=e.theme;return t||n.isMobile?"visible":"hidden"}),T=b.ZP.div.withConfig({displayName:"styled__ReadButton",componentId:"sc-bymlbk-1"})(["height:12px;width:12px;border:",";border-radius:50%;background-color:",";"],function(e){var t=e.$unread;return"3px solid ".concat(t?p.O9.sd1:p.O9.n5)},function(e){return e.$unread?p.O9.sd1:"transparent"}),F=(0,b.ZP)(Z.x).withConfig({displayName:"styled__ReadButtonWrapper",componentId:"sc-bymlbk-2"})(["align-items:center;justify-content:center;height:40px;width:40px;cursor:pointer;border-radius:50%;&:hover{background-color:",";}"],function(e){return!e.theme.isMobile&&p.O9.n3}),B=b.ZP.div.withConfig({displayName:"styled__UserAvatarWrapper",componentId:"sc-bymlbk-3"})(["position:relative;"]),R=b.ZP.div.withConfig({displayName:"styled__IconCircle",componentId:"sc-bymlbk-4"})(["height:40px;width:40px;border-radius:50%;background:",";"],p.O9.p3),z=b.ZP.img.withConfig({displayName:"styled__GroupLogoAvatar",componentId:"sc-bymlbk-5"})(["height:16px;width:16px;border-radius:5px;position:absolute;bottom:4px;right:0;"]),G=(0,b.ZP)(Z.x).withConfig({displayName:"styled__GroupLogoPlaceholder",componentId:"sc-bymlbk-6"})(["align-items:center;justify-content:center;background-color:",";border-radius:3px;height:13px;width:13px;position:absolute;bottom:4px;right:0;"],function(e){return e.$groupColor}),U=b.ZP.img.withConfig({displayName:"styled__NotificationAvatar",componentId:"sc-bymlbk-7"})(["border-radius:50%;object-fit:cover;text-align:center;text-indent:10000px;height:40px;width:40px;"]),$=(0,b.ZP)(Z.x).withConfig({displayName:"styled__NotificationAvatarPlaceholder",componentId:"sc-bymlbk-8"})(["align-items:center;justify-content:center;height:40px;width:40px;flex-shrink:0;border:1px solid ",";border-radius:50%;background-color:",";user-select:none;"],p.O9.n3,function(e){return e.$groupColor}),W=(0,b.ZP)(d.X).withConfig({displayName:"styled__MobileContent",componentId:"sc-bymlbk-9"})(["align-items:center;flex-grow:1;gap:8px;min-width:0;& > div:last-child{overflow:hidden !important;}"]),q=b.ZP.div.withConfig({displayName:"styled__GroupInitials",componentId:"sc-bymlbk-10"})(["color:",";",";"],function(e){return e.color},function(e){return e.theme.isMobile?E.c.t10:E.c.t11});E.c.ellipsis;var H=b.ZP.div.withConfig({displayName:"styled__DisplaySubText",componentId:"sc-bymlbk-12"})(["",";",";"],E.c.t9,E.c.ellipsis),V=b.ZP.div.withConfig({displayName:"styled__CreatedAt",componentId:"sc-bymlbk-13"})(["color:",";white-space:nowrap;",";"],p.O9.n5,function(e){return e.theme.isMobile?E.c.t9:E.c.t7}),Y=(0,b.iv)(["&:first-letter{text-transform:uppercase;}"]),J=b.ZP.div.withConfig({displayName:"styled__NotificationContent",componentId:"sc-bymlbk-14"})(["color:",";",";",";",";"],function(e){return e.theme.isMobile?p.O9.n5:p.O9.n7},function(e){return e.$sentenceCase&&Y},E.c.t9,E.c.ellipsis),X=(0,b.ZP)(Z.x).withConfig({displayName:"styled__DisplayHeading",componentId:"sc-bymlbk-15"})(["flex:",";",";",";"],function(e){return e.$fullWidth?1:void 0},E.c.t7,E.c.ellipsis),K=(0,b.ZP)(A.J).withConfig({displayName:"styled__StyledIcon",componentId:"sc-bymlbk-16"})(["color:",";"],p.O9.n7),Q=(0,b.ZP)(Z.x).withConfig({displayName:"styled__NotificationItem",componentId:"sc-bymlbk-17"})(["align-items:center;border-bottom:1px solid ",";height:",";transition:background 150ms ease-in-out;&:hover{background-color:",";","{visibility:inherit;}}"],p.O9.n3,function(e){return e.theme.isMobile?"93px":"72px"},function(e){var t=e.$readHover;return e.theme.isMobile?void 0:t?p.O9.n1:p.O9.n3},L),ee=b.ZP.div.withConfig({displayName:"styled__NotificationItemLink",componentId:"sc-bymlbk-18"})(["display:flex;align-items:center;width:100%;user-select:none;opacity:",";overflow:hidden;> a{overflow:hidden;transform:translateZ(0);}"],function(e){return e.$unread?1:.5}),et=(0,b.ZP)(I.s).withConfig({displayName:"styled__NotificationWrapper",componentId:"sc-bymlbk-19"})(["flex-grow:1;max-width:350px;"]),en=n(54361),er=(0,l.memo)(function(e){var t,n,r=e.message,i=e.onMarkAsRead,a=e.onMarkAsUnread,u=r.action,p=r.imageUrl,f=r.displayName,h=r.text,v=r.groupColor,b=r.groupInitials,g=r.linkAs,x=r.linkHref,y=r.content,w=r.groupLogo,E=r.groupName,A=r.levelTitle,Y=r.groupId,er=r.srcUserMrrStatus,ei=r.srcUserActStatus,eo=(0,c.bI)("currentGroup","isMobile"),ea=eo.currentGroup,es=eo.isMobile,el=eo.dispatch,ec=(0,l.useState)(!!parseInt(r.metadata.unread)),eu=ec[0],ed=ec[1],ep=(0,en.c8)(),ef=(0,C.Z)(ep,3),em=ef[0],eh=ef[1],ev=ef[2],eb=(0,P.Xt)({group:{name:E||Y||(null==ea?void 0:ea.name)}}),eg=eb.href,ex=eb.as;(0,l.useEffect)(function(){ed(!!parseInt(r.metadata.unread))},[r]);var ey=(0,l.useMemo)(function(){if(f){var e=f.split(" "),t=(0,C.Z)(e,2),n=t[0],r=t[1];return(0,m.jsx)(M.Z,{disableLink:!0,user:{firstName:n,lastName:r,metadata:{mrrStatus:er,actStatus:ei}},typographyVariant:es?"t6":"t5",disableStatusBadgeModal:!0})}},[f,er,ei,es]),ew="follow"===u&&ea?"".concat(g,"?g=").concat(ea.id):"level-up"===u&&ea?ex:g,eC="follow"===u&&ea?"".concat(x,"?g=").concat(ea.id):"level-up"===u&&ea?eg:x,ej=(0,l.useCallback)((0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.markMessageAsRead({messageID:r.id});case 2:ed(!1),null==i||i(r);case 4:case"end":return e.stop()}},e)})),[r,i]),ek=(0,l.useCallback)((0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.markMessageAsUnread({messageID:r.id});case 2:ed(!0),null==a||a(r);case 4:case"end":return e.stop()}},e)})),[r,a]),eO=(0,l.useCallback)((t=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),ej();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[ej]),eP=(0,l.useCallback)((n=(0,o.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),ek();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[ek]),eI=(0,l.useCallback)(function(){ej(),es&&el(_.fi,function(){return{settingsModal:null}})},[es,ej,el]),eD=(0,l.useMemo)(function(){var e=function(){var e="join-decline"===u||"join-approve"===u;return"level-up"===u?(0,m.jsxs)(B,{children:[(0,m.jsx)(R,{children:(0,m.jsx)(K,{name:"Up"})}),w&&!e?(0,m.jsx)(z,{src:w,style:{bottom:0}}):b&&!e?(0,m.jsx)(G,{$groupColor:v,style:{bottom:0}}):null]}):"course-unlocked"===u?(0,m.jsxs)(B,{children:[(0,m.jsx)(R,{children:(0,m.jsx)(K,{name:"Unlock"})}),w&&!e?(0,m.jsx)(z,{src:w,style:{bottom:0}}):b&&!e?(0,m.jsx)(G,{$groupColor:v,style:{bottom:0}}):null]}):!p&&v?(0,m.jsx)($,{$groupColor:v,children:(0,m.jsx)(q,{color:(0,O.zP)(v),children:b})}):(0,m.jsxs)(B,{children:[(0,m.jsx)(U,{src:p}),w&&!e?(0,m.jsx)(z,{src:w}):b&&!e?(0,m.jsx)(G,{$groupColor:v}):null]})};if(es)return(0,m.jsx)(ee,{$unread:eu,children:(0,m.jsxs)(D.r,{href:eC,as:ew,onClick:eI,style:{padding:"12px 16px",width:"100%",display:"flex",alignItems:"center",flexGrow:1},children:[(0,m.jsxs)(W,{children:[e(),(0,m.jsxs)(I.s,{children:[ey,(0,m.jsxs)(d.X,{children:[(0,m.jsx)(H,{children:(0,j.kC)(h)}),(0,m.jsxs)(V,{children:[" ","\xa0","• ".concat((0,k.ur)({value:r.createdAt,justNow:!1}))]})]}),(0,m.jsx)(J,{children:y})]})]}),(0,m.jsx)(L,{$unread:eu,children:(0,m.jsx)(F,{onClick:eu?eO:eP,children:(0,m.jsx)(T,{$unread:eu})})})]})});var t="".concat(f," ").concat(h).length;return(0,m.jsx)(D.r,{href:eC,as:ew,onClick:eI,style:{width:"100%"},children:(0,m.jsxs)(d.X,{alignItems:"center",flexGrow:1,padding:"12px 16px",children:[(0,m.jsx)(ee,{$unread:eu,children:(0,m.jsxs)(d.X,{alignItems:"center",flexGrow:1,gap:12,children:[e(),(0,m.jsxs)(et,{children:[(0,m.jsxs)(d.X,{alignItems:"center",marginBottom:4,children:[(0,m.jsxs)(X,{$fullWidth:t>48,children:[ey,"\xa0",h,"level-up"===u&&!!A&&" - ".concat(A)]}),(0,m.jsx)(Z.x,{padding:"0px 4px",children:(0,m.jsx)(V,{children:" • ".concat((0,k.ur)({value:r.createdAt,justNow:!1}))})})]}),(0,m.jsx)(J,{$sentenceCase:!(null!=y&&y.startsWith("[attachment")),children:y})]})]})}),(0,m.jsx)(L,{onMouseEnter:eh,onMouseLeave:ev,$unread:eu,children:(0,m.jsx)(S.u,{content:"Mark ".concat(eu?"read":"unread"),children:(0,m.jsx)(F,{onClick:eu?eO:eP,children:(0,m.jsx)(T,{$unread:eu})})})})]})})},[r.createdAt,es,eI,eu,eP,eO,u,h,f,v,b,p,eC,ew,w,y,A,eh,ev,ey]);return(0,m.jsx)(Q,{$readHover:em,children:eD})}),ei=n(15673),eo=n(12476),ea=n(4730),es=["data"],el=["metadata"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=function(e){var t=e.metadata,n=t.data,r=(0,ea.Z)(t,es),i=(0,ea.Z)(e,el);return eu(eu({},(0,O.W4)(JSON.parse(n))),{},{metadata:r},i)},ep=b.ZP.div.withConfig({displayName:"styled__NotificationsHeader",componentId:"sc-1gca0gh-0"})(["",""],E.c.t6),ef=b.ZP.span.withConfig({displayName:"styled__MarkAllRead",componentId:"sc-1gca0gh-1"})(["margin-right:16px;color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],p.O9.sd1,E.c.t11),em=n(42108);function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ev=(0,l.memo)(function(){var e,t=(0,c.bI)("currentGroup","isMobile"),n=t.currentGroup,a=t.isMobile,u=(0,l.useState)(!0),p=u[0],f=u[1],h=(0,l.useState)([]),b=h[0],g=h[1],x=(0,l.useState)({}),y=x[0],C=x[1],j=(0,l.useState)(!1),k=j[0],O=j[1],P=(0,l.useState)(!1),I=P[0],D=P[1],Z=(0,en.yl)(!a),S=!!b.find(function(e){return!!e.metadata.unread}),_=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:null==Z?void 0:Z.id,M=(0,l.useCallback)((0,o.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,N.Z.listNotificationMessages({limit:30,type:I?"group":"all",groupID:I?_:void 0});case 3:null!=(n=e.sent.data)&&null!==(t=n.messages)&&void 0!==t&&t.length?g(n.messages.map(ed)):g([]),C({totalUnread:(null==n?void 0:n.totalUnread)||0,groupUnread:(null==n?void 0:n.groupUnread)||0,cursor:(null==n?void 0:n.cursor)||void 0,hasMore:!!(null!=n&&n.hasMore)}),f(!1);case 8:case"end":return e.stop()}},e)})),[_,I]),E=(0,l.useCallback)((0,o.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.Z.markMessagesAsRead({all:!I,groupID:I?_:void 0});case 2:return e.next=4,M();case 4:case"end":return e.stop()}},e)})),[_,I,M]),A=(0,l.useCallback)((0,o.Z)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,N.Z.listNotificationMessages({limit:30,type:I?"group":"all",groupID:I?_:void 0,cursor:y.cursor});case 3:null!=(n=e.sent.data)&&null!==(t=n.messages)&&void 0!==t&&t.length&&(r=n.messages.map(ed),g([].concat((0,i.Z)(b),(0,i.Z)(r)))),C({totalUnread:(null==n?void 0:n.totalUnread)||0,groupUnread:(null==n?void 0:n.groupUnread)||0,cursor:(null==n?void 0:n.cursor)||void 0,hasMore:!!(null!=n&&n.hasMore)}),O(!1);case 8:case"end":return e.stop()}},e)})),[_,I,y,b]),L=(0,l.useCallback)(function(e,t){var n=b.indexOf(e);if(-1!==n){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);o.metadata.unread=t?1:0,g([].concat((0,i.Z)(b.slice(0,n)),[o],(0,i.Z)(b.slice(n+1))))}},[b]),T=(0,l.useCallback)(function(e){return L(e,!1)},[L]),F=(0,l.useCallback)(function(e){return L(e,!0)},[L]);(0,l.useEffect)(function(){M()},[I]);var B=(0,l.useMemo)(function(){var e=[{label:"All groups",onClick:function(){return D(!1)},active:!I}];return _&&e.push({label:"Just this group",onClick:function(){return D(!0)},active:I}),e},[I,_]),R=(0,l.useMemo)(function(){return a?null:(0,m.jsxs)(d.X,{gap:8,alignItems:"center",justifyContent:"space-between",style:{height:"100%"},children:[(0,m.jsx)(ep,{children:"Notifications"}),(0,m.jsxs)(d.X,{alignItems:"center",children:[S&&(0,m.jsx)(ef,{onClick:E,children:"Mark all as read"}),(0,m.jsx)(eo.h_,{options:B,label:I?"Just this group":"All groups",variant:"borderless"})]})]})},[S,E,B,I,a]),z=(0,l.useMemo)(function(){return a?[{label:"Mark all as read",onClick:E,disabled:!S}].concat((0,i.Z)(B)):null},[E,S,a,B]),G=(0,l.useMemo)(function(){return a?{title:"Notifications",dropdownOptions:z}:null},[a,z]);(0,em.l)(em.C.NOTIFS,G);var U=(0,l.useMemo)(function(){var e=!p&&b.length?b.map(function(e){return(0,m.jsx)(er,{message:e,onMarkAsRead:T,onMarkAsUnread:F},e.id)}):[(0,m.jsx)(v,{loading:p},"empty")];return y.hasMore&&!p&&e.push((0,m.jsx)(w,{onClick:A,loading:k},"load-more")),e},[A,p,k,null==y?void 0:y.hasMore,b,T,F]);return(0,m.jsx)(ei.J,{headerItem:R,items:U})})},3881:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),i=n(73793),o=n(94118),a=n(59607),s=(0,n(50378).ZP)(a.z).withConfig({displayName:"styled__SignUpButtonDesktop",componentId:"sc-1y5fz1y-0"})(["width:","px;padding:11px 24px;"],function(e){return e.$signIn?116:127}),l=n(85893);o.Z.defaultProps={signIn:!1};var c=(0,r.memo)(function(e){var t=e.signIn,n=e.onSuccess,c=e.onCancel;e["data-testid"];var u=(0,r.useState)(!1),d=u[0],p=u[1],f=(0,i.bI)("isMobile","currentGroup"),m=f.isMobile,h=f.currentGroup,v=(0,r.useCallback)(function(){p(!0)},[]),b=(0,r.useCallback)(function(){p(!1),c&&c()},[c]),g=(0,r.useCallback)(function(){p(!1),n&&n()},[n]),x=(0,r.useMemo)(function(){return d?(0,l.jsx)(o.Z,{group:h,signIn:t,reason:"",open:!0,onCancel:b,onSuccess:g}):null},[t,d,b,g,h]);return(0,l.jsxs)(l.Fragment,{children:[m?(0,l.jsx)(a.z,{onClick:v,label:"Log In",variant:"borderless",typography:"t5",style:{padding:"0px 24px"}}):(0,l.jsx)(s,{$signIn:t,variant:"secondary",label:t?"Log In":"Sign Up",onClick:v}),x]})})},47504:function(e,t,n){n.d(t,{Z:function(){return mw}});var r=n(50029),i=n(59499),o=n(64687),a=n.n(o),s=n(5152),l=n.n(s),c=n(67534);n(63144);var u=n(67294),d=n(11163),p=n.n(d);n(42238);var f=n(95419),m=n(33850),h=n(75331),v=n(53531),b=n(79698),g=n(38475),x=n(29610),y=n(14251),w=n(4730),C=n(50378),j=(0,C.iv)(["bottom:24px;left:24px;"]),k=(0,C.iv)(["bottom:",";left:16px;right:16px;display:flex;justify-content:center;align-items:center;"],function(e){var t=e.theme,n=e.$bottom,r=void 0===n?0:n;return 0===r?t.isApp?"24px":"calc(env(safe-area-inset-bottom) + ".concat(r+8,"px)"):"".concat(r+8,"px")}),O=C.ZP.div.withConfig({displayName:"styled__SnackbarWrapper",componentId:"sc-1b3hq8y-0"})(["position:fixed;z-index:1400;",""],function(e){return e.theme.isMobile?k:j}),P=n(73793),I=n(59313),D=n(85893),Z=["onClose","autoHideDuration","children"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=(0,u.memo)(function(e){var t,n=e.onClose,r=e.autoHideDuration,i=e.children,o=(0,w.Z)(e,Z),a=(0,P.bI)("mobileBottomOffset").mobileBottomOffset;return(0,u.useEffect)(function(){var e;return r&&(e=setTimeout(n,r)),function(){e&&clearInterval(e)}},[r,n]),(0,D.jsx)(O,_(_({},o),{},{$bottom:null==a||null===(t=a[I.V.SAFE])||void 0===t?void 0:t.offset,children:i}))}),N=n(20668),E=n(59607),A={error:(0,C.iv)(["color:",";background-color:",";> button{color:",";}"],y.O9.fgError,y.O9.e2,y.O9.fgError),success:(0,C.iv)(["color:",";background-color:",";> button{color:",";}"],y.O9.fgSuccess,y.O9.s2,y.O9.fgSuccess)},L=(0,C.iv)(["min-height:48px;width:100%;"]),T=(0,C.iv)(["min-height:64px;min-width:320px;"]),F=(0,C.iv)(["color:",";background-color:",";border:1px solid ",";"],y.O9.n7,y.O9.n1,y.O9.n3),B=(0,C.iv)(["color:",";background-color:",";"],y.O9.n1,y.O9.n7),R=C.ZP.div.withConfig({displayName:"styled__AlertWrapper",componentId:"sc-1l4wkgh-0"})(["padding:0 12px 0 16px;display:flex;align-items:center;border-radius:10px;cursor:",";"," ",";"," "," > span{flex:1;padding:12px 16px 12px 0;}"],function(e){return e.onClick?"pointer":"inherit"},N.c.t7,function(e){return e.theme.isDarkTheme?F:B},function(e){return e.theme.isMobile?L:T},function(e){return A[e.$severity]}),z=(0,C.ZP)(E.z).withConfig({displayName:"styled__CloseButton",componentId:"sc-1l4wkgh-1"})(["color:",";"],y.O9.fgError),G=["open","onClose","severity","message","autoHideDuration","onClick"];function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W=(0,u.memo)(function(e){var t=e.open,n=e.onClose,r=e.severity,i=e.message,o=e.autoHideDuration,a=e.onClick,s=(0,w.Z)(e,G),l=(0,u.useCallback)(function(e){null==e||e.stopPropagation(),n&&n()},[n]);return t?(0,D.jsx)(M,{onClose:l,autoHideDuration:void 0===o?6e3:o,children:(0,D.jsxs)(R,$($({$severity:r,onClick:a},s),{},{children:[(0,D.jsx)("span",{children:i}),(0,D.jsx)(z,{"data-test-id":"alert-close-button",variant:"icon-borderless-no-hover",icon:"Close",iconSize:16.66,onClick:l})]}))}):null}),q=n(5095),H=n(12967),V=n(97059),Y=n(70120),J=n(5569),X=n(91194),K=n(70299),Q=n(67256),ee=(0,u.memo)(function(){var e=(0,u.useState)(null),t=e[0],n=e[1];(0,u.useEffect)(function(){var e=(0,Q.$O)();e.value?(n(e.value),e.value.persist||(0,Q.fz)()):n(null)},[]);var r=null!=t&&t.expire?new Date(null==t?void 0:t.expire)-new Date:void 0;return(0,D.jsx)(W,{open:!!(null!=t&&t.message),message:null==t?void 0:t.message,severity:null==t?void 0:t.severity,autoHideDuration:r,onClose:function(){return n(null)}})}),et=n(73758),en=n(17674),er=n(12476),ei=n(66703),eo=n(54361),ea=n(51544),es=C.ZP.div.withConfig({displayName:"styled__NotificationBubbleWrapper",componentId:"sc-10vh3jl-0"})(["display:flex;align-items:center;justify-content:center;width:","px;height:24px;border-radius:33px;background-color:",";color:",";",""],function(e){return e.$isOverMax?35:24},y.O9.e2,y.O9.fgError,N.c.t11),el=["value"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=(0,u.memo)(function(e){var t=e.value,n=(0,w.Z)(e,el),r=(0,u.useMemo)(function(){return t>99},[t]);return t?(0,D.jsx)(es,eu(eu({$isOverMax:r},n),{},{children:r?"99+":t})):null}),ep=(0,C.ZP)(E.z).withConfig({displayName:"styled__ChatNotificationsIconButton",componentId:"sc-14ipnak-0"})(["width:48px;height:48px;"]),ef=(0,C.ZP)(ed).withConfig({displayName:"styled__UnreadNotificationBubble",componentId:"sc-14ipnak-1"})(["position:absolute;top:-2px;left:30px;pointer-events:none;z-index:1;"]),em=C.ZP.div.withConfig({displayName:"styled__NotificationButtonWrapper",componentId:"sc-14ipnak-2"})(["position:relative;"]),eh=(0,u.memo)(function(){var e=(0,eo.c8)(),t=(0,en.Z)(e,3),n=t[0],r=t[1],i=t[2],o=(0,P.bI)("unreadChat").unreadChat,a=(0,u.useRef)(),s=(0,u.useRef)(),l=(0,u.useCallback)(function(){var e;null===(e=s.current)||void 0===e||e.closeDropdown(),i()},[i]);return(0,D.jsxs)(em,{ref:a,children:[(0,D.jsx)(ef,{value:o}),(0,D.jsx)(er.h_,{customContent:n?(0,D.jsx)(ea.n,{onItemClick:l}):null,contentPadding:0,onClick:r,onClose:i,xOffset:112,yOffset:16,contentWidth:500,contentHeight:570,blockPageScroll:!0,ref:s,noAnimation:!0,children:(0,D.jsx)(ei.u,{placement:"bottom",content:"Chats",yOffset:8,children:(0,D.jsx)(ep,{variant:"icon-borderless",icon:"Chat",iconSize:22.5,active:n})})})]})}),ev=n(32413),eb=(0,C.ZP)(E.z).withConfig({displayName:"styled__NotificationsIconButton",componentId:"sc-kvqul9-0"})(["width:48px;height:48px;"]),eg=C.ZP.div.withConfig({displayName:"styled__NotificationButtonWrapper",componentId:"sc-kvqul9-1"})(["position:relative;"]),ex=(0,C.ZP)(ed).withConfig({displayName:"styled__UnreadNotificationBubble",componentId:"sc-kvqul9-2"})(["position:absolute;top:-2px;left:30px;pointer-events:none;z-index:1;"]),ey=(0,u.memo)(function(){var e=(0,eo.c8)(),t=(0,en.Z)(e,3),n=t[0],r=t[1],i=t[2],o=(0,u.useState)(!1),a=o[0],s=o[1],l=(0,P.bI)("unread").unread;return(0,u.useEffect)(function(){s(!1)},[l]),(0,D.jsx)("div",{children:(0,D.jsxs)(eg,{children:[!!l&&(0,D.jsx)(ex,{value:a?0:l||0}),(0,D.jsx)(er.h_,{customContent:n?(0,D.jsx)(ev.w,{}):null,contentPadding:0,onClick:r,onClose:i,xOffset:56,yOffset:16,contentWidth:501,contentHeight:570,blockPageScroll:!0,noAnimation:!0,children:(0,D.jsx)(ei.u,{placement:"bottom",content:"Notifications",yOffset:8,children:(0,D.jsx)(eb,{variant:"icon-borderless",icon:"Bell",active:n,iconSize:25})})})]})})}),ew=n(36581),eC=n(73674),ej=n(76958),ek=n(55847),eO=n(47108),eP=(0,C.ZP)(eO.Z).withConfig({displayName:"styled__LeaderboardsPreviewWrapper",componentId:"sc-fdzhoh-0"})(["margin-top:16px;"]),eI=C.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewTitle",componentId:"sc-fdzhoh-1"})(["",";"],N.c.t6),eD=C.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewPoints",componentId:"sc-fdzhoh-2"})(["",";flex-shrink:0;padding-left:8px;white-space:nowrap;color:",";"],N.c.t10,function(e){return e.theme.isDarkTheme?y.O9.sd1:y.O9.g1}),eZ=C.ZP.div.withConfig({displayName:"styled__LeaderboardPreviewSeeAllWrapper",componentId:"sc-fdzhoh-3"})(["border-top:1px solid ",";padding-top:16px;display:flex;align-items:center;justify-content:center;width:100%;"],y.O9.n3),eS=(0,C.ZP)(E.z).withConfig({displayName:"styled__LeaderboardPreviewSeeAll",componentId:"sc-fdzhoh-4"})(["",";height:auto;"],N.c.t11),e_=C.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewUser",componentId:"sc-fdzhoh-5"})(["display:flex;align-items:center;flex:1;min-width:0px;gap:9px;"]),eM=C.ZP.div.withConfig({displayName:"styled__LeaderboardsPreviewItem",componentId:"sc-fdzhoh-6"})(["display:flex;position:relative;align-items:center;justify-content:flex-start;height:38px;"]),eN=(0,u.memo)(function(e){var t,n,r=e.data,i=(0,P.bI)("currentGroup").currentGroup,o=(0,d.useRouter)(),a=null==r||null===(t=r.users)||void 0===t?void 0:t.map(function(e,t){var n=e.rank,r=e.points,o=e.user;return(0,D.jsxs)(eM,{children:[n<=3&&(0,D.jsx)(ek.qm,{children:(0,D.jsx)("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,D.jsx)("path",{d:"M0 0L11 0V10.0442L5.73392 6.32786L0 10.0442L0 0Z",fill:1===n?"#F8CA60":2===n?y.O9.n5:"#A77B53"})})}),(0,D.jsx)(ek.F9,{$rank:n,$marginRight:"8px",children:(0,D.jsx)(ek.Q8,{variant:"t5",color:n<=3?y.O9.n1:y.O9.n5,textAlign:"center",lineHeight:25,children:"".concat(n)})}),(0,D.jsxs)(e_,{children:[(0,D.jsx)(eC.Z,{size:32,user:o,userPreview:!0,group:i}),(0,D.jsx)(ej.Z,{user:o,ellipsis:!0,userPreview:!0,group:i,hoverUnderline:!0,typographyVariant:"t7"})]}),(0,D.jsx)(eD,{children:"+".concat(r)})]},t)}),s=(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsx)(eI,{children:"Leaderboard (30-day)"}),(0,D.jsx)(ew.s,{gap:16,children:a}),(0,D.jsx)(eZ,{children:(0,D.jsx)(eS,{onClick:function(){var e=(0,q.Xt)({group:i}),t=e.href,n=e.as;o.push(t,n)},variant:"link",label:"See all leaderboards",disableRipple:!0})})]});return(null===(n=r.users)||void 0===n?void 0:n.length)>0?(0,D.jsx)(eP,{children:s}):null});function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eL=eA(eA({},N.w.t7),{},{padding:"10.5px 15px",color:y.O9.n5}),eT={content:"User menu",placement:"bottom",yOffset:8},eF=(0,u.memo)(function(){var e=(0,P.bI)("currentGroup","self"),t=e.currentGroup,n=e.self,r=(0,d.useRouter)(),i=(0,u.useCallback)(function(){(0,h.pN)({key:h.H0.inviteCode}),(0,h.pN)({key:h.H0.onboardingSkipped}),(0,Q.Lx)({message:"Logged out"}),f.Z.logout()},[]),o=(0,u.useMemo)(function(){return[{label:"Profile",style:{marginTop:4},onClick:function(){(0,X.VF)(r,(0,q.sB)({userName:n.name,group:t}))}},{label:"Settings",style:{marginBottom:4},onClick:function(){(0,X.VF)(r,(0,q.tL)({}))}},{type:"divider",dividerStyle:{padding:"0px 16px"}},{label:"Help center",link:"https://help.skool.com/",style:eA(eA({},eL),{},{marginTop:4}),newTab:!0},{label:"Create a community",style:eL,link:"/signup".concat(t?"?g=".concat(t.id):"")},{label:"Discover communities",link:"/discovery",style:eL},{label:"Log out",onClick:i,confirmAction:{header:"Log out",content:"Are you sure you want to log out?",confirmLabel:"Log out"},style:eA(eA({},eL),{},{marginBottom:8})}]},[t,i,r,n]);return(0,D.jsx)("div",{children:(0,D.jsx)(er.h_,{noAnimation:!0,options:o,dropdownTitle:n.email,contentPadding:0,contentWidth:224,yOffset:16,tooltip:eT,children:(0,D.jsx)(E.z,{disableRipple:!0,style:{width:48,height:48},variant:"round-borderless",label:(0,D.jsx)(eC.Z,{user:n,size:32,disableLink:!0})})})})}),eB=n(80847),eR=n(193),ez=n(73475),eG=n(60678),eU=n(16557),e$=n(85240),eW=n(86031),eq=(0,C.ZP)(eW.x).withConfig({displayName:"styled__SwitcherContent",componentId:"sc-zk3028-0"})(["gap:8px;height:100%;a{display:flex;}"]),eH=C.ZP.div.withConfig({displayName:"styled__SwitcherItem",componentId:"sc-zk3028-1"})(["display:flex;align-items:center;gap:8px;width:100%;span{"," ","}"],N.c.ellipsis,N.c.t4),eV=C.ZP.div.withConfig({displayName:"styled__SwitcherItemIconWrapper",componentId:"sc-zk3028-2"})(["display:flex;justify-content:center;align-items:center;width:40px;height:40px;background-color:",";border-radius:10px;svg{color:",";}"],y.O9.n3,y.O9.n5),eY=C.ZP.div.withConfig({displayName:"styled__SwitcherHome",componentId:"sc-zk3028-3"})(["padding:4px 0px;border-radius:10px;cursor:pointer;transition:background 150ms ease-in-out;"]),eJ=C.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-zk3028-4"})(["> div > div:first-child{width:100%;height:100%;button{width:48px;height:48px;svg{width:12px;height:20px;}}}.skool-ui-dropdown-option{width:295px;padding:12px 15px;}"]);function eX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var eK=(0,u.memo)(function(){var e=(0,u.useRef)(),t=(0,u.useRef)(),n=(0,u.useRef)(),o=(0,P.bI)("self","currentGroup"),s=o.self,l=o.currentGroup,c=(0,d.useRouter)(),p=(0,u.useState)((null==s?void 0:s.allGroups)||[]),m=p[0],h=p[1],v=(0,u.useState)(!!(null!=s&&s.hasMore)),b=v[0],g=v[1],x=(0,u.useState)(!1),y=x[0],w=x[1],C=(0,u.useState)(""),j=C[0],k=C[1],O=(0,u.useRef)(),I=(0,eo.c8)(),Z=(0,en.Z)(I,3),S=Z[0],_=Z[1],M=Z[2],N="/discovery"===c.pathname;(0,u.useEffect)(function(){var e=function(e){var r,i,o,a;"k"===e.key&&(e.metaKey||e.ctrlKey)&&(S?null===(r=t.current)||void 0===r||r.closeDropdown():(null===(i=t.current)||void 0===i||i.openDropdown(),null===(o=n.current)||void 0===o||o.focus())),"Escape"===e.key&&(null===(a=t.current)||void 0===a||a.closeDropdown())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[S,M]),(0,u.useEffect)(function(){j.trim()?w(!0):(w(!1),h((null==s?void 0:s.allGroups)||[]),g((null==s?void 0:s.hasMore)||!1))},[j,s]),(0,u.useEffect)(function(){var e=j.trim();if(!e){O.current="";return}var t=setTimeout((0,r.Z)(a().mark(function t(){var n;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(O.current!==e){t.next=3;break}return w(!1),t.abrupt("return");case 3:return O.current=e,t.next=6,f.Z.readSelfGroups({limit:10,q:e||void 0});case 6:null!=(n=t.sent.data)&&n.hasMore?g(!0):g(!1),w(!1),h(null==n?void 0:n.groups);case 11:case"end":return t.stop()}},t)})),500);return function(){return clearTimeout(t)}},[j]);var E=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.readSelfGroups({offset:m.length,limit:10,q:j.trim()||void 0});case 2:g(!!(null!=(t=e.sent.data)&&t.hasMore)),null!=t&&t.groups&&h(m.concat(t.groups));case 6:case"end":return e.stop()}},e)})),[m,j]),A=(0,u.useCallback)(function(){h((null==s?void 0:s.allGroups)||[]),g(!!(null!=s&&s.hasMore))},[s]),L=(0,u.useCallback)(function(){var e=(0,q.Gt)({}),t=e.href,n=e.as;c.push(t,n,{shallow:!1})},[c]),T=(0,u.useCallback)(function(e){k(e.target.value)},[]),F=(0,u.useCallback)(function(){t.current.getNavigatedOption()||(0,X.VF)(c,(0,q.Gt)({query:j.trim()}))},[j,c]),B=(0,u.useCallback)(function(){k("")},[]),R=(0,u.useCallback)(function(){A(),M(),k("")},[A,M]),z=(0,u.useMemo)(function(){if(l)return(0,D.jsx)(eG.Z,{group:l,underline:"none",children:(0,D.jsx)(eY,{children:(0,D.jsx)(eR.Z,{group:l,iconSize:40,variant:"t4",disableLink:!0})})});var e=N?(0,q.Gt)({}):{href:"/",as:"/ "};return(0,D.jsx)(eU.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({width:98},e))},[l,N]),G=(0,u.useCallback)(function(){var e;null==n||null===(e=n.current)||void 0===e||e.blur()},[]),U=(0,u.useMemo)(function(){var e=[{label:(0,D.jsx)(e$.Z,{ref:n,value:j,onChange:T,onSubmit:F,onClear:B,isPending:y}),disableHighlight:!0,style:{padding:"16px 16px 4px 16px"}}];return j.trim()?e.push({label:(0,D.jsxs)(eH,{children:[(0,D.jsx)(eV,{children:(0,D.jsx)(ez.J,{name:"Search",style:{width:18}})}),(0,D.jsx)("span",{children:"Search all communities"})]}),onClick:F,canArrowNavigate:!0}):(e.push({label:(0,D.jsxs)(eH,{children:[(0,D.jsx)(eV,{children:(0,D.jsx)(ez.J,{name:"Plus",style:{width:16}})}),(0,D.jsx)("span",{children:"Create a community"})]}),link:"/signup".concat(l?"?g=".concat(l.id):""),canArrowNavigate:!0}),e.push({label:(0,D.jsxs)(eH,{children:[(0,D.jsx)(eV,{children:(0,D.jsx)(ez.J,{name:"Compass",style:{width:24}})}),(0,D.jsx)("span",{children:"Discover communities"})]}),onClick:L,canArrowNavigate:!0})),null!=m&&m.length&&m.forEach(function(t){var n;switch(null===(n=t.metadata)||void 0===n?void 0:n.privacy){case 0:case 1:break;default:return}e.push({label:(0,D.jsxs)(eH,{children:[(0,D.jsx)(eR.Z,{group:t,iconSize:40,variant:"t4",disableLink:!0,iconOnly:!0}),(0,D.jsx)("span",{children:t.metadata.displayName})]}),onClick:function(){t.id!==(null==l?void 0:l.id)&&(0,X.VF)(c,(0,q.AZ)({groupName:t.name}))},active:t.id===(null==l?void 0:l.id),canArrowNavigate:!0})}),b&&(e.push({type:"divider"}),e.push({label:(0,D.jsxs)(eH,{children:[(0,D.jsx)(eV,{children:(0,D.jsx)(ez.J,{name:"ArrowDown",style:{width:12}})}),(0,D.jsx)("span",{children:"See more"})]}),onClick:E,canArrowNavigate:!0,keepOpenOnClick:!0})),(0,D.jsxs)(eq,{justifyContent:"space-between",children:[z,(0,D.jsx)(eJ,{children:(0,D.jsx)(er.h_,{ref:t,options:e,variant:"icon-borderless",icon:"ArrowsUpDown",placement:"bottom",noAnimation:!0,onShow:_,onHide:R,onClose:G,contentPadding:"0px 0px 16px 0px",contentWidth:307,yOffset:8,tooltip:{content:"Switch communities",yOffset:4}})})]})},[j,T,L,F,B,m,b,z,R,c,E,_,G,y,l]);return(0,D.jsx)("div",{ref:e,style:{height:"100%"},children:U})}),eQ=n(27849),e0=n(56726),e1=n(80008),e2=n.n(e1),e9=n(30697),e3=n(88325),e5=n(95151),e4=n(30126),e6=n(97221),e8=n(65009),e7=n(19975),te=n(14760),tt=(0,u.memo)(function(e){var t,n,r,i=e.user,o=(null===(t=i.profileData)||void 0===t?void 0:t.totalContributions)||0,a=(null===(n=i.profileData)||void 0===n?void 0:n.totalFollowers)||0,s=(null===(r=i.profileData)||void 0===r?void 0:r.totalFollowing)||0,l=(0,P.bI)("isMobile").isMobile;return(0,D.jsx)(ew.s,{gap:l?0:16,style:l?{borderBottom:"1px solid ".concat(y.O9.n3),borderTop:"1px solid ".concat(y.O9.n3),paddingBottom:8,paddingTop:8,marginBottom:8}:void 0,children:(0,D.jsxs)(e8.X,{alignItems:"center",justifyContent:"space-evenly",style:{borderWidth:l?0:"1px 0px",borderColor:y.O9.n3,borderStyle:"solid",padding:l?"0 13px":"8px 0px"},children:[(0,D.jsx)(e7.Z,{user:i,tab:eQ.t5.UserProfilePosts,children:(0,D.jsxs)(ew.s,{alignItems:"center",children:[(0,D.jsx)(te.Z,{variant:"t4",children:(0,H.TN)(o)}),(0,D.jsx)(te.Z,{variant:"t11",color:y.O9.n5,children:"Contributions"})]})}),(0,D.jsx)("div",{style:{width:"1px",backgroundColor:y.O9.n3,height:48,margin:l?"0 13px":"0 4px"}}),(0,D.jsx)(e7.Z,{user:i,tab:eQ.t5.UserProfileFollowers,children:(0,D.jsxs)(ew.s,{alignItems:"center",children:[(0,D.jsx)(te.Z,{variant:"t4",children:(0,H.TN)(a)}),(0,D.jsx)(te.Z,{variant:"t11",color:y.O9.n5,children:"Followers"})]})}),(0,D.jsx)("div",{style:{width:"1px",backgroundColor:y.O9.n3,height:48,margin:l?"0 13px":"0 4px"}}),(0,D.jsx)(e7.Z,{user:i,tab:eQ.t5.UserProfileFollowing,children:(0,D.jsxs)(ew.s,{alignItems:"center",children:[(0,D.jsx)(te.Z,{variant:"t4",children:(0,H.TN)(s)}),(0,D.jsx)(te.Z,{variant:"t11",color:y.O9.n5,children:"Following"})]})})]})})}),tn=n(61022),tr=C.ZP.div.withConfig({displayName:"styled__UserSocialLinksWrapper",componentId:"sc-vbxyw2-0"})(["display:flex;width:100%;justify-content:center;align-items:center;"]),ti=n(20142),to=(0,u.memo)(function(){var e=(0,P.bI)("currentUser").currentUser,t=(0,u.useCallback)(function(t){var n=t.key,r=t.icon,i=null==e?void 0:e.metadata[n];if(i)return(0,D.jsx)(Y.r,{href:i,newTab:!0,children:(0,D.jsx)(E.z,{variant:"icon-borderless",icon:r})},n)},[e]);return(0,D.jsx)(tr,{children:ti.n.map(t)})}),ta=n(26201),ts=C.ZP.div.withConfig({displayName:"styled__ProgressWrapper",componentId:"sc-1gipnml-0"})(["display:flex;flex-direction:column;align-items:center;"]),tl=C.ZP.div.withConfig({displayName:"styled__CtaColumn",componentId:"sc-1gipnml-1"})(["display:flex;flex-direction:column;gap:8px;"]),tc=C.ZP.div.withConfig({displayName:"styled__CtaRow",componentId:"sc-1gipnml-2"})(["display:flex;gap:8px;> *{flex:1;}"]),tu=(0,C.iv)(["padding:0px 0px 8px 0px;"]),td=C.ZP.div.withConfig({displayName:"styled__MidInfo",componentId:"sc-1gipnml-3"})(["display:flex;flex-direction:column;gap:8px;",""],function(e){return e.theme.isMobile&&tu}),tp=(0,C.iv)(["top:64px;"]),tf=C.ZP.div.withConfig({displayName:"styled__QuickSettingsButton",componentId:"sc-1gipnml-5"})(["position:absolute;top:4px;right:10px;> button > div{height:20px !important;width:20px !important;}",""],function(e){return e.theme.isMobile&&tp}),tm=(0,C.iv)(["text-align:center;margin-bottom:4px;"]),th=C.ZP.div.withConfig({displayName:"styled__UserHandle",componentId:"sc-1gipnml-6"})(["color:",";"," ",""],y.O9.n5,N.c.t8,function(e){return e.theme.isMobile&&tm}),tv=C.ZP.div.withConfig({displayName:"styled__IconInfoItem",componentId:"sc-1gipnml-7"})(["display:flex;align-items:center;gap:16px;color:",";",";> div{color:",";height:16px;width:16px;}"],y.O9.n7,N.c.t7,y.O9.n5),tb=C.ZP.div.withConfig({displayName:"styled__GreenDot",componentId:"sc-1gipnml-8"})(["height:16px;width:16px;border-radius:50%;background:",";"],y.O9.s2),tg=C.ZP.div.withConfig({displayName:"styled__Bio",componentId:"sc-1gipnml-9"})(["overflow-wrap:break-word;"," ",""],function(e){return e.theme.isMobile&&"text-align: center;"},N.c.t7),tx=(0,C.ZP)(E.z).withConfig({displayName:"styled__SettingsButton",componentId:"sc-1gipnml-10"})(["height:",";width:",";margin-right:-8px;"],function(e){return e.theme.isMobile?"40px":"48px"},function(e){return e.theme.isMobile?"40px":"48px"}),ty=(0,C.ZP)(E.z).withConfig({displayName:"styled__FullWidthButton",componentId:"sc-1gipnml-11"})(["width:100%;"]),tw=(0,C.ZP)(ty).withConfig({displayName:"styled__UnfollowButton",componentId:"sc-1gipnml-12"})(["background-color:",";&:hover{background-color:",";}"],function(e){return e.theme.isDarkTheme?y.O9.n5:y.O9.n3},function(e){return e.theme.isDarkTheme?y.O9.n5:y.O9.n3}),tC=(0,C.ZP)(ty).withConfig({displayName:"styled__FollowingButton",componentId:"sc-1gipnml-13"})(["background-color:",";color:",";&:hover{background-color:",";}"],y.O9.n3,function(e){return e.theme.isDarkTheme?y.O9.n7:void 0},y.O9.n3),tj=C.ZP.div.withConfig({displayName:"styled__UserAvatarWrapper",componentId:"sc-1gipnml-14"})(["display:flex;justify-content:center;position:relative;"]),tk=C.ZP.div.withConfig({displayName:"styled__UserActionsWrapper",componentId:"sc-1gipnml-15"})(["margin:16px 0;"]),tO=C.ZP.div.withConfig({displayName:"styled__UserCardWrapper",componentId:"sc-1gipnml-16"})(["padding:",";"],function(e){var t=e.$padding;return null!=t?t:void 0}),tP=n(20338),tI=n(81343);function tD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tD(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tS={width:"100%"},t_=(0,u.memo)(function(e){var t,n,i,o,s,l=e.padding,c=(0,P.bI)("self","currentGroup","currentUser","isMobile"),p=c.dispatch,m=c.self,h=c.currentGroup,b=c.isMobile,g=c.currentUser,x=!!g.profileData,y=(0,d.useRouter)(),w=(0,u.useState)(!1),C=w[0],j=w[1],k=(0,eo.C1)(),O=(0,en.Z)(k,3),I=O[0],Z=O[1],S=O[2],_=(0,V._g)(g)||{},M=_.level,N=_.pointsToNextLevel,E=void 0===N?0:N,A=!h&&!!(null!=m&&null!==(t=m.metadata)&&void 0!==t&&t.chatAdmin)&&(null==m?void 0:m.id)!==g.id,L=(0,u.useMemo)(function(){return(0,v.q2)({group:h,user:m,member:null==m?void 0:m.member})},[h,m]),T=(0,u.useMemo)(function(){var e;return!b&&(null==g?void 0:g.id)!==(null==m?void 0:m.id)&&L&&(0,v.cD)({member:null==g||null===(e=g.profileData)||void 0===e?void 0:e.member,group:h})},[L,g,m,h,b]),F=(0,u.useCallback)(function(){p(e9.wj,tZ(tZ({},g.profileData),g))},[p,g]),B=(0,u.useMemo)(function(){return T?(0,D.jsx)(tf,{children:(0,D.jsx)(tx,{onClick:F,variant:"icon-borderless",icon:"GearOutlined"})}):null},[T,F]),R=(0,u.useMemo)(function(){var e=g.metadata,t=e.lastOffline;return e.online?(0,D.jsxs)(tv,{children:[(0,D.jsx)(tb,{}),(0,D.jsx)("span",{children:"Online now"})]}):t?(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"Clock"}),(0,D.jsx)("span",{children:"Active ".concat((0,e3.ur)({value:t,justNow:!1,ago:!0})," ago")})]}):null},[g]),z=(0,u.useMemo)(function(){var e,t=h?null==g||null===(e=g.profileData)||void 0===e||null===(e=e.member)||void 0===e?void 0:e.approvedAt:null==g?void 0:g.createdAt;return"Joined ".concat(e2()(t).format("MMM D, YYYY"))},[h,g]),G=(0,u.useMemo)(function(){var e,t,n,r,i,o,a,s;return b?(0,D.jsxs)(D.Fragment,{children:[R,(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"NewCalendar"}),(0,D.jsx)("span",{children:z})]}),(0,D.jsxs)(eW.x,{gap:24,children:[(null==g||null===(e=g.metadata)||void 0===e?void 0:e.myersBriggs)&&(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"Smile"}),(0,D.jsx)("span",{children:null==g||null===(t=g.metadata)||void 0===t?void 0:t.myersBriggs})]}),(null==g||null===(n=g.metadata)||void 0===n?void 0:n.location)&&(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"Location"}),(0,D.jsx)("span",{children:null==g||null===(r=g.metadata)||void 0===r?void 0:r.location})]})]})]}):(0,D.jsxs)(D.Fragment,{children:[R,(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"NewCalendar"}),(0,D.jsx)("span",{children:z})]}),(null==g||null===(i=g.metadata)||void 0===i?void 0:i.myersBriggs)&&(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"Smile"}),(0,D.jsx)("span",{children:null==g||null===(o=g.metadata)||void 0===o?void 0:o.myersBriggs})]}),(null==g||null===(a=g.metadata)||void 0===a?void 0:a.location)&&(0,D.jsxs)(tv,{children:[(0,D.jsx)(ez.J,{name:"Location"}),(0,D.jsx)("span",{children:null==g||null===(s=g.metadata)||void 0===s?void 0:s.location})]})]})},[R,null==g||null===(n=g.metadata)||void 0===n?void 0:n.location,null==g||null===(i=g.metadata)||void 0===i?void 0:i.myersBriggs,b,z]),U=(0,u.useMemo)(function(){if((null==m?void 0:m.id)===g.id){var e,t,n,i=(0,q.tL)({}),o=i.href,s=i.as;return y.pathname===o?null:(0,D.jsx)(ty,{onClick:function(){(0,X.VF)(y,{href:o,as:s})},label:"Edit Profile",variant:"secondary"})}if(null!==(e=g.profileData)&&void 0!==e&&e.followed){if(null!==(n=g.profileData)&&void 0!==n&&n.following){var l,c,u=(c=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.unfollowUser({userName:g.name});case 2:(0,X.H5)(y);case 3:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)});return(0,D.jsx)(tP.s,{header:"Unfollow ".concat(g.firstName," ").concat(g.lastName),content:"Are you sure you want to unfollow ".concat(g.firstName," ").concat(g.lastName,"?"),confirmLabel:"Unfollow",onConfirm:u,triggerStyles:tS,children:(0,D.jsx)(tw,{label:"Following",icon:"Refresh"})})}var d=(l=(0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.followUser({userName:g.name,groupID:null==h?void 0:h.id});case 2:if((null==(t=e.sent.error)?void 0:t.status)!==429){e.next=6;break}return e.abrupt("return",p(e9.bI,{message:"You’ve hit your follow limit",severity:"error"}));case 6:(0,X.H5)(y);case 7:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)});return(0,D.jsx)(ty,{onClick:d,label:"Follow Back"})}if(null!==(t=g.profileData)&&void 0!==t&&t.following){var v,b=(v=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.unfollowUser({userName:g.name});case 2:(0,X.H5)(y);case 3:case"end":return e.stop()}},e)})),function(){return v.apply(this,arguments)});return(0,D.jsx)(tP.s,{header:"Unfollow ".concat(g.firstName," ").concat(g.lastName),content:"Are you sure you want to unfollow ".concat(g.firstName," ").concat(g.lastName,"?"),confirmLabel:"Unfollow",onConfirm:b,triggerStyles:tS,children:(0,D.jsx)(tC,{label:"Following"})})}var x,w=(x=(0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.followUser({userName:g.name,groupID:null==h?void 0:h.id});case 2:if((null==(t=e.sent.error)?void 0:t.status)!==429){e.next=6;break}return e.abrupt("return",p(e9.bI,{message:"You’ve hit your follow limit",severity:"error"}));case 6:(0,X.H5)(y);case 7:case"end":return e.stop()}},e)})),function(){return x.apply(this,arguments)});return(0,D.jsx)(ty,{onClick:w,label:"Follow"})},[m,g,p,y,h]),$=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.sendChatRequest({userId:g.id,groupId:null==h?void 0:h.id});case 2:if(n=(t=e.sent).data,(null==(r=t.error)?void 0:r.status)!==429){e.next=7;break}return e.abrupt("return",p(e9.vb,!0));case 7:if(!n){e.next=19;break}if(o=(i=n.channel).id,s=i.metadata.lastRead,!b){e.next=16;break}return e.next=14,(0,X.VF)(y,(0,q.rv)({channelId:o,chatLastRead:s}));case 14:e.next=17;break;case 16:p(e9.WT,function(){return{chatModalProps:{id:o,lastRead:s}}});case 17:e.next=20;break;case 19:p(e9.bI,{message:"Chat request error",severity:"error"});case 20:case"end":return e.stop()}},e)})),[g,h,p,b,y]),W=(0,u.useMemo)(function(){var e=!g.profileData.chatRequest;return!A&&e?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ty,{variant:"disabled",label:"Chat",icon:"ChatOff",onClick:Z}),I&&(0,D.jsx)(e4.Z,{user:g,onClose:S})]}):(0,D.jsx)(ty,{label:"Chat",onClick:$,icon:"Chat"})},[g,$,A,I,Z,S]),H=(0,u.useMemo)(function(){return h&&(0,e6.M)(m)||(null==g?void 0:g.id)===(null==m?void 0:m.id)?A||h&&m&&(null==g?void 0:g.id)!==(null==m?void 0:m.id)?b?(0,D.jsxs)(tc,{children:[U,W]}):(0,D.jsxs)(tl,{children:[U,W]}):(0,D.jsx)(tl,{children:U}):null},[U,W,h,null==g?void 0:g.id,b,m,A]);return b?(0,D.jsxs)("div",{children:[(0,D.jsxs)(ew.s,{paddingTop:8,gap:8,children:[B,(0,D.jsxs)("div",{children:[(0,D.jsx)(eW.x,{height:h?16:24}),(0,D.jsx)(tj,{children:(0,D.jsx)(eC.Z,{user:g,group:h,showProgress:!!h,showLevel:!0,size:100})}),h&&g&&(0,D.jsx)(eW.x,{marginTop:4,justifyContent:"center",children:(0,D.jsx)(tn.Z,{group:h,user:g,noParens:!0})}),M&&(0,D.jsx)(eW.x,{marginTop:2,justifyContent:"center",children:(0,D.jsx)(e5.E,{points:E})})]}),(0,D.jsxs)(ew.s,{children:[(0,D.jsxs)(ew.s,{children:[(0,D.jsx)(e8.X,{gap:8,justifyContent:"center",children:(0,D.jsx)(ej.Z,{user:g,group:h,typographyVariant:"t2",maxLines:1,usernameCentered:!0,maxWidth:"100%"})}),(0,D.jsx)(th,{children:"@".concat(null==g?void 0:g.name)})]}),(0,D.jsx)(tg,{children:null===(s=g.metadata)||void 0===s?void 0:s.bio}),(0,D.jsx)(tk,{children:H})]}),(0,D.jsx)(td,{children:G}),x&&(0,D.jsx)(tt,{user:g,group:h}),(0,D.jsx)(to,{})]}),(0,D.jsx)(ta.Z,{type:"user",open:C,onClose:function(){return j(!1)}})]}):(0,D.jsxs)(tO,{$padding:l,children:[(0,D.jsxs)(ew.s,{gap:16,children:[B,(0,D.jsxs)(ew.s,{gap:8,children:[(0,D.jsxs)(ts,{children:[(0,D.jsx)("div",{style:{height:h?"24px":"32px"}}),(0,D.jsx)(eC.Z,{showLevel:!0,user:g,group:h,showProgress:!!h,size:200}),h&&g&&(0,D.jsx)("div",{style:{marginTop:8,textAlign:"center"},children:(0,D.jsx)(tn.Z,{group:h,user:g,noParens:!0})}),M&&(0,D.jsx)(e5.E,{style:{marginTop:2},points:E,dataTestId:"user-card-levels-points-to-go"}),!h&&(0,D.jsx)("div",{style:{height:"24px"}})]}),(0,D.jsxs)(ew.s,{children:[(0,D.jsx)(e8.X,{flexGrow:1,children:(0,D.jsx)(ej.Z,{user:g,group:h,component:"div",maxLines:1,typographyVariant:"t1",maxWidth:"100%"})}),(0,D.jsx)(th,{children:"@".concat(null==g?void 0:g.name)})]}),(0,D.jsx)(tg,{children:null===(o=g.metadata)||void 0===o?void 0:o.bio})]}),(0,D.jsx)(tI.i,{}),(0,D.jsx)(td,{children:G}),x&&(0,D.jsx)(tt,{user:g,group:h}),H,(0,D.jsx)(to,{})]}),(0,D.jsx)(ta.Z,{type:"user",open:C,onClose:function(){return j(!1)}})]})}),tM=(0,u.memo)(function(){return(0,D.jsxs)(e8.X,{gap:6,alignItems:"baseline",justifyContent:"center",children:[(0,D.jsx)(te.Z,{variant:"t11",color:y.O9.n5,children:"powered by"}),(0,D.jsx)(eU.Z,{width:40,disableLink:!0})]})}),tN=C.ZP.div.withConfig({displayName:"styled__UploadText",componentId:"sc-1qg8wku-0"})(["",";color:",";&:hover{text-decoration:underline;}"],N.c.t7,function(e){return e.$color}),tE=(0,C.ZP)(eO.Z).withConfig({displayName:"styled__AsideGroupCard",componentId:"sc-1qg8wku-1"})(["padding:0;overflow:hidden;"]),tA=C.ZP.div.withConfig({displayName:"styled__AsideGroupCardContent",componentId:"sc-1qg8wku-2"})(["padding:16px;"]),tL=C.ZP.img.withConfig({displayName:"styled__AsideGroupCardImage",componentId:"sc-1qg8wku-3"})(["display:block;height:144px;width:100%;object-fit:cover;position:relative;"]),tT=(0,C.ZP)(eO.Z).withConfig({displayName:"styled__AsideUserProfileCard",componentId:"sc-1qg8wku-4"})(["padding:0;"]),tF=C.ZP.div.withConfig({displayName:"styled__UploadCoverPhotoWrapper",componentId:"sc-1qg8wku-5"})(["cursor:pointer;"]),tB=C.ZP.div.withConfig({displayName:"styled__MediaContentWrapper",componentId:"sc-1qg8wku-6"})(["height:144px;background-color:",";display:flex;align-items:center;justify-content:center;user-select:none;"],function(e){return e.$bgColor}),tR=C.ZP.div.withConfig({displayName:"styled__AsideGroupCardWrapper",componentId:"sc-1qg8wku-7"})(["position:relative;"]);function tz(e){var t=e.hideCard,n=e.mainMenuName,r=e.canAccessGroup,i=e.extraContent,o=(0,P.bI)("self","currentGroup"),a=o.self,s=o.currentGroup,l=o.dispatch,c=(0,u.useMemo)(function(){if(n===eQ.K0.GroupDefault){var e,t,o,c,u=(null==s||null===(e=s.metadata)||void 0===e?void 0:e.coverSmallUrl)||(null==s||null===(t=s.metadata)||void 0===t?void 0:t.logoBigUrl),d=null==s||null===(o=s.metadata)||void 0===o?void 0:o.displayName,p=null==s||null===(c=s.metadata)||void 0===c?void 0:c.color,f=u?(0,D.jsx)(tL,{src:u,alt:d}):null,m=!u&&(0,v.CP)({user:a,member:null==a?void 0:a.member,group:s})?(0,D.jsx)(tF,{onClick:function(){return l(e9.fi,function(){return{settingsModal:"adminGeneral"}})},children:(0,D.jsxs)(tN,{$color:(0,H.zP)(p),children:["Upload cover photo","\xa0"]})}):null;return(0,D.jsxs)(tR,{children:[(0,D.jsxs)(tE,{children:[(0,D.jsxs)(tB,{$bgColor:u?void 0:p,children:[f,m]}),(0,D.jsx)(tA,{children:(0,D.jsx)(e0.Z,{group:s,canAccessGroup:r})})]}),i]})}return n===eQ.K0.UserProfile?(0,D.jsx)(tT,{children:(0,D.jsx)(t_,{padding:"8px 16px"})}):null},[i,l,n,s,a,r]);return t?null:(0,D.jsxs)(ew.s,{gap:16,children:[c,(0,D.jsx)(Y.r,{href:"/signup".concat(s?"?g=".concat(s.id):""),newTab:!0,children:(0,D.jsx)(tM,{})})]})}tz.defaultProps={hideCard:!1};var tG=(0,u.memo)(tz),tU=n(3881),t$=n(25874),tW=C.ZP.div.withConfig({displayName:"styled__PinnedGroupSwitcherContainer",componentId:"sc-10stisx-1"})(["position:fixed;left:0px;top:",";display:flex;flex-direction:column;> button{margin-left:16px;margin-top:16px;display:none;}&:hover{> button{display:flex;}}@media (max-width:1200px){display:none;}"],function(e){return e.$maintenanceBannerVisible?"200px":"145px"}),tq=(0,C.iv)(["&::after{position:absolute;top:0px;left:0px;height:100%;background:",';width:6px;content:"";border-top-right-radius:10px;border-bottom-right-radius:10px;}'],y.O9.n7),tH=C.ZP.div.withConfig({displayName:"styled__GroupItem",componentId:"sc-10stisx-2"})(["width:100%;display:flex;align-items:center;justify-content:center;padding-left:16px;position:relative;height:40px;> a > div{border:1px solid ",";}",""],y.O9.n3,function(e){return e.$active&&tq}),tV=C.ZP.div.withConfig({displayName:"styled__GroupsWrapper",componentId:"sc-10stisx-3"})(["display:flex;flex-direction:column;gap:16px;"]);function tY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tJ=function(e){var t=e.pinnedGroups,n=e.maintenanceBannerVisible,r=(0,P.bI)("currentGroup").currentGroup,i=(0,u.useCallback)(function(e){return(0,D.jsx)(tH,{$active:(null==r?void 0:r.name)===e.name,children:(0,D.jsx)(t$.F,{group:e})},e.id)},[r]);return(0,D.jsx)(tW,{$maintenanceBannerVisible:n,children:(0,D.jsx)(tV,{children:t.map(i)})})},tX=(0,u.memo)(function(e){var t=(0,P.bI)("isMobile","self"),n=t.isMobile,r=t.self,o=(0,u.useMemo)(function(){return null!=r&&r.pinnedGroups?r.pinnedGroups.sort(function(e){return"games"===e.name?-1:1}):[]},[r]);return n?null:(0,D.jsx)(tJ,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tY(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({pinnedGroups:o},e))}),tK=C.ZP.div.withConfig({displayName:"styled__DesktopLayoutWrapper",componentId:"sc-vae51c-0"})(["display:flex;flex-direction:column;"]),tQ=C.ZP.div.withConfig({displayName:"styled__BottomFullWidth",componentId:"sc-vae51c-1"})(["height:calc(100% - ","px);margin-top:","px;position:relative;display:flex;"],function(e){return e.$topHeight},function(e){return e.$topHeight}),t0=(0,C.ZP)(tQ).withConfig({displayName:"styled__Bottom",componentId:"sc-vae51c-2"})(["width:100%;flex-wrap:nowrap;justify-content:flex-start;min-width:","px;max-width:","px;"],768,1075),t1=C.ZP.div.withConfig({displayName:"styled__BottomLeft",componentId:"sc-vae51c-3"})(["flex-shrink:1;flex-grow:2;min-width:","px;max-width:","px;",""],471,760,function(e){var t=e.$maxWidth;return t&&"max-width: ".concat(t,";")}),t2=C.ZP.div.withConfig({displayName:"styled__BottomGap",componentId:"sc-vae51c-4"})(["flex-shrink:1;flex-grow:1;min-width:","px;max-width:","px;user-select:none;"],24,42),t9=C.ZP.div.withConfig({displayName:"styled__BottomRight",componentId:"sc-vae51c-5"})(["flex-shrink:0;flex-grow:0;width:","px;"],273),t3=(0,C.iv)(["padding:8px 0px 0px 0px;"]),t5=C.ZP.div.withConfig({displayName:"styled__NavContainer",componentId:"sc-vae51c-6"})(["display:flex;flex-direction:column;width:100%;height:100%;max-width:","px;min-width:","px;position:relative;justify-content:space-between;padding:8px 0px;",""],1075,768,function(e){return e.$showHeader&&t3}),t4=C.ZP.div.withConfig({displayName:"styled__DesktopLayoutRoot",componentId:"sc-vae51c-7"})(["height:100%;width:100%;display:flex;flex-direction:column;align-items:center;padding:0px;"]),t6=C.ZP.div.withConfig({displayName:"styled__ContentWrapper",componentId:"sc-vae51c-8"})(["height:100%;width:100%;min-width:","px;max-width:","px;"],768,function(e){return e.$isCourse?"1085":1075}),t8=C.ZP.div.withConfig({displayName:"styled__BottomLeftContentWrapper",componentId:"sc-vae51c-9"})(["display:flex;flex-direction:column;margin-bottom:32px;gap:","px;"],function(e){return e.$noSpacing?0:24}),t7=C.ZP.div.withConfig({displayName:"styled__LayoutNav",componentId:"sc-vae51c-10"})(["top:0px;width:100%;z-index:1100;display:flex;position:absolute;align-items:center;justify-content:center;background:",";background-color:",";border-bottom:1px solid ",";height:","px;@media (max-width:975px){padding-left:8px;}"],y.O9.n1,function(e){return e.theme.isDarkTheme?y.O9.n2:y.O9.n1},y.O9.n3,function(e){return e.$headerHeight}),ne=C.ZP.div.withConfig({displayName:"styled__LayoutNavCenter",componentId:"sc-vae51c-11"})(["flex:1;padding:0px 8px;"]),nt=(0,C.iv)(["border-bottom:4px solid ",";color:",";"],y.O9.n7,y.O9.n7),nn=C.ZP.div.withConfig({displayName:"styled__RouteTab",componentId:"sc-vae51c-12"})(["height:40px;cursor:pointer;margin-right:32px;border-bottom:4px solid transparent;color:",";"," &:hover{color:",";}",""],y.O9.n5,N.c.t6,y.O9.n7,function(e){return e.$active&&nt}),nr=C.ZP.div.withConfig({displayName:"styled__NavButtonWrapper",componentId:"sc-vae51c-13"})(["display:flex;justify-content:flex-end;"]),ni=C.ZP.div.withConfig({displayName:"styled__MainNavContent",componentId:"sc-vae51c-14"})(["display:flex;width:100%;"]),no=C.ZP.div.withConfig({displayName:"styled__HeaderLinks",componentId:"sc-vae51c-15"})(["display:flex;"]);function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nl=(0,u.memo)(function(e){var t,n,r=(0,P.bI)("previousRouterState","hasNoGroups"),i=r.previousRouterState,o=r.hasNoGroups,a=e.leaderboardsData,s=e.content,l=e.canAccessGroup,c=e.currentGroup,p=e.currentUser,f=e.maintenance,m=e.settings,h=e.isApp,v=e.self,g=(0,u.useRef)(),x=(0,u.useRef)(),y=(0,d.useRouter)(),w=(0,q.mp)({pathname:y.pathname,query:y.query}),C=(0,q.PS)({pathname:y.pathname}),j=(0,q.J2)({pathname:y.pathname}),k=(0,q.YN)({pathname:y.pathname}),O=(0,q.kA)({pathname:y.pathname}),I=(0,q.aR)({query:y.query}),Z=(0,q.Xx)({pathname:y.pathname}),S=(0,q.nM)(y.query),_=(0,q.g7)({pathname:y.pathname}),M=(0,q.pi)({query:y.query}),N=(0,q.VP)({pathname:y.pathname}),E=(0,q.DG)({query:y.query}),A=(0,q.yS)({pathname:y.pathname}),L=(0,q.NX)({pathname:y.pathname}),T=(0,q.eJ)({pathname:y.pathname}),F=(0,q.EW)({pathname:y.pathname}),B=(0,q.Hp)({pathname:y.pathname}),R=(0,q.J5)({pathname:y.pathname}),z=(0,q.pi)({query:i.query}),G=(0,q.iH)({pathname:y.pathname}),U=(0,q.wk)(y.query)||"",$=z&&y.query.postName,W=E||w,H="/games/affiliates"===y.asPath,V=(0,q.WC)({pathname:y.pathname}),Q=(0,q.ni)({pathname:y.pathname}),en=(0,u.useMemo)(function(){return(0,q.Sw)(y)},[]),er=!k&&(O||W||C||A||Z||_&&l||N||j||H||V||Q)&&!$&&!M,ei=(0,u.useState)(!1),eo=ei[0],ea=ei[1],es=er||k,el=es||G,ec=Z||E||en,eu=es?112:64,ed=eu+32,ep=(0,q.Tx)({pathname:y.pathname}),ef=(0,q.ZZ)({pathname:y.pathname}),em=(null==c?void 0:c.name)==="games",ev=_&&em,eb="/games/onboarding"===y.asPath,eg=ep||ef||O||j||G||ev||eb||L||T||B||R||F||Z&&"list"!==S,ex=[b.oN,b.bD,b.xC].includes(null==p||null===(t=p.profileData)||void 0===t||null===(t=t.member)||void 0===t?void 0:t.role),ew=!!(null!=c&&null!==(n=c.metadata)&&void 0!==n&&n.archived),eC=(0,et.Z)(f),ej=eC.maintenanceStartTime,ek=eC.maintenanceDuration,eO=eC.showMaintenanceBanner,eP=eC.closeMaintenanceBanner,eI=(0,u.useMemo)(function(){var e,t;return JSON.parse(null!==(e=null==c||null===(t=c.metadata)||void 0===t?void 0:t.tabs)&&void 0!==e?e:"{}")},[c]),eD=(!o&&v||!v&&h)&&(null==y?void 0:y.route)==="/",eZ=(0,u.useCallback)(function(){window.location.reload()},[]),eS=(0,u.useCallback)(function(){if(el){var e=G&&!U?250:80;ea(window.scrollY>e)}},[el,G,U]);(0,u.useEffect)(function(){return eS(),window.addEventListener("scroll",eS),function(){window.removeEventListener("scroll",eS)}},[eS]);var e_=(0,u.useMemo)(function(){var e,t;return null!==(e=null==m||null===(t=m.secondaryMenusItems)||void 0===t?void 0:t.map(function(e){var t=e.value,n=e.text,r=e.stat,i=e.dataTestId;return{id:t,label:"number"==typeof r?"".concat(n," ").concat(r):n,dataTestId:i}}))&&void 0!==e?e:[]},[null==m?void 0:m.secondaryMenusItems]),eM=(0,u.useMemo)(function(){var e;return null!=m&&null!==(e=m.secondaryMenusItems)&&void 0!==e&&e.length?(0,D.jsx)(J.m,{tabs:e_,activeTab:m.secondaryMenusCurrentValue,onChangeTab:function(e,t){var n=m.secondaryMenusItems.find(function(e){return e.value===t});n&&(0,X.VF)(y,n.link)}}):null},[m,y,e_]);(0,u.useEffect)(function(){M&&p&&c&&!ex&&(0,X.VF)(y,(0,q.sB)({userName:null==p?void 0:p.name}))},[M,c,p,ex,y]);var eE=(0,u.useCallback)(function(e){return(0,D.jsxs)(ni,{children:[e!==eo&&(0,D.jsx)(eK,{mainMenuName:null==m?void 0:m.mainMenuName}),(0,D.jsx)(ne,{children:c&&l||G&&(eo||U)?(0,D.jsx)(eB.Z,{group:c,searchMembers:!!m.searchMembers,searchInvites:!!m.searchInvites}):(0,D.jsx)("div",{})}),(0,D.jsx)("div",{children:v?(0,D.jsxs)(nr,{style:{gap:8},children:[(0,D.jsx)(eh,{}),(0,D.jsx)(ey,{}),(0,D.jsx)(eF,{})]}):(0,D.jsx)(nr,{children:(0,D.jsx)(tU.Z,{signIn:!0,onSuccess:eZ})})})]})},[v,m,c,l,eo,G,eZ,U]),eA=(0,u.useMemo)(function(){return eE(!0)},[eE]),eL=(0,u.useMemo)(function(){return eE(!1)},[eE]),eT=(0,u.useCallback)(function(e){e.testId;var t=e.href,n=e.label,r=e.active;return(0,D.jsx)(Y.r,{href:t,children:(0,D.jsx)(nn,{$active:r,children:n})},n)},[]),eR=(0,u.useMemo)(function(){var e,t,n=null==c?void 0:c.name;if("games"===n)return[{testId:"desktop-layout-community-tab",href:"/games",active:W,label:"Community"},{testId:"desktop-layout-classroom-tab",href:"/".concat(n,"/classroom"),active:O,label:"Classroom"},{testId:"desktop-layout-calendar-tab",href:"/games/calendar",active:Z,label:"Calendar"},{testId:"desktop-layout-members-tab",href:"/games/-/members",active:C,label:"Members"},{testId:"desktop-layout-leaderboard-tab",href:"/".concat(n,"/-/leaderboards?mrr=true"),active:j,label:"Leaderboards"},{testId:"desktop-layout-about-tab",href:"/games/affiliates",active:H,label:"Affiliates"}];var r=null!=eI&&null!==(e=eI.classroom)&&void 0!==e&&e.visible?[{testId:"desktop-layout-classroom-tab",href:"/".concat(n,"/classroom"),active:O,label:"Classroom"}]:[],i=null!=eI&&null!==(t=eI.calendar)&&void 0!==t&&t.visible?[{testId:"desktop-layout-calendar-tab",href:"/".concat(n,"/calendar"),active:Z,label:"Calendar"}]:[],o=l?[{testId:"desktop-layout-leaderboard-tab",href:"/".concat(n,"/-/leaderboards"),active:j,label:"Leaderboards"}]:[];return[{testId:"desktop-layout-community-tab",href:"/".concat(n),active:W,label:"Community"}].concat(r,i,[{testId:"desktop-layout-members-tab",href:"/".concat(n,"/-/members"),active:C,label:"Members"}],o,[{testId:"desktop-layout-about-tab",href:"/".concat(n,"/about"),active:_,label:"About"}])},[_,H,c,O,W,Z,C,j,l,eI]),ez=(0,u.useMemo)(function(){var e=ns({height:64,transition:ec?"none":"transform 300ms ease",transform:"translateY(".concat(eo?0:-200,"px)"),position:"fixed",zIndex:eo?1102:void 0},K.uM),t={position:el?void 0:"fixed",top:eO?56:void 0};return eO&&!el&&(t.position="sticky",t.top=0),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(t7,{style:t,$headerHeight:eu,children:(0,D.jsxs)(t5,{ref:x,$showHeader:er,children:[eA,er&&(0,D.jsx)(no,{children:eR.map(eT)}),k&&eM]})}),el&&(0,D.jsx)(t7,{$headerHeight:eu,style:e,children:(0,D.jsx)(t5,{ref:g,children:eL})})]})},[el,er,k,eu,ec,eA,eL,eo,eM,eO,eT,eR]),eG=(0,u.useMemo)(function(){if(a)return(0,D.jsx)(eN,{data:a})},[a]),eU=(0,u.useMemo)(function(){return eg?(0,D.jsxs)(tQ,{$topHeight:ed,children:[eM,(0,D.jsx)(s,ns({},e))]}):(0,D.jsxs)(t0,{$topHeight:ed,children:[(0,D.jsx)(t1,{style:{paddingBottom:ew?48:void 0},$maxWidth:m.bottomLeftMaxWidth,children:(0,D.jsxs)(t8,{$noSpacing:m.secondaryMenuNoSpacing,children:[!k&&eM,(0,D.jsx)(s,ns({},e))]})}),(0,D.jsx)(t2,{}),(0,D.jsx)(t9,{children:(0,D.jsx)(tG,{extraContent:eG,hideCard:!!(null!=m&&m.hideCard),canAccessGroup:l,mainMenuName:null==m?void 0:m.mainMenuName,mainMenuItem:null==m?void 0:m.mainMenuItem,hideMainMenu:!!(null!=m&&m.hideMainMenu)})})]})},[e,m,ed,eG,ew,k,eg,l,eM]),e$=(0,u.useMemo)(function(){if(eO)return(0,D.jsx)(et.C,{startTime:ej,duration:ek,onClose:eP})},[eO,ej,eP,ek]);return M&&p&&c&&!ex?null:(0,D.jsxs)(tK,{children:[e$,(0,D.jsxs)(t4,{onDrop:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},children:[!eD&&ez,(0,D.jsxs)(t6,{$isCourse:I,children:[eU,(0,D.jsx)(ee,{})]})]}),(0,D.jsx)(tX,{maintenanceBannerVisible:eO})]})}),nc=n(66409),nu=C.ZP.div.withConfig({displayName:"styled__MobileLayoutHeaderWrapper",componentId:"sc-1ureqtt-1"})(["border-bottom:1px solid ",";background-color:",";position:sticky;z-index:1101;height:52px;width:100%;top:0px;"],y.O9.n3,y.O9.n1),nd=C.ZP.div.withConfig({displayName:"styled__UserCardWrapper",componentId:"sc-1ureqtt-2"})(["padding:0px 13px 16px 13px;border-bottom:1px solid ",";"],y.O9.n3),np=C.ZP.div.withConfig({displayName:"styled__TopSection",componentId:"sc-1ureqtt-3"})(["background-color:",";flex-direction:column;display:flex;width:100%;gap:16px;"],y.O9.n1),nf=(0,u.memo)(function(e){var t=e.items,n=e.currentValue,r=(0,d.useRouter)(),i=(0,u.useCallback)(function(e,n){var i,o=null==t?void 0:t.find(function(e){return e.value===n});o.link&&(0,X.VF)(r,o.link),null===(i=o.onClick)||void 0===i||i.call(o)},[t,r]),o=(0,u.useMemo)(function(){var e;return null!==(e=null==t?void 0:t.map(function(e){var t=e.value,n=e.text,r=e.stat,i=e.dataTestId;return{id:t,label:"number"==typeof r?"".concat(n," ").concat(r):n,dataTestId:i}}))&&void 0!==e?e:[]},[t]);return(0,D.jsx)(J.m,{tabs:o,activeTab:n,onChangeTab:i,style:{borderBottom:"1px solid ".concat(y.O9.n3)}})});function nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nm(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nv=(0,u.memo)(function(e){var t,n=(0,P.bI)("self"),r=n.dispatch,i=n.self,o=e.group,a=e.selected,s=e.canAccessGroup,l=(0,d.useRouter)().query,c=(0,u.useMemo)(function(){var e,t;return JSON.parse(null!==(e=null==o||null===(t=o.metadata)||void 0===t?void 0:t.tabs)&&void 0!==e?e:"{}")},[o]),p=(0,d.useRouter)(),f=(0,v.CP)({user:i,member:null==i?void 0:i.member,group:o}),m=(null==o||null===(t=o.metadata)||void 0===t?void 0:t.archived)===1,h="userMembership";f&&(h=m?"adminBilling":"adminInvite");var b=(0,u.useCallback)(function(){r("setSettingsModalState",function(e){return nh(nh({},e),{},{settingsModal:h})})},[r,h]),g=(0,u.useMemo)(function(){if((null==o?void 0:o.name)==="games")return[{value:eQ.t5.GroupDefaultNewsfeed,text:"Community",onClick:function(){(0,X.VF)(p,(0,q.AZ)({groupName:null==o?void 0:o.name,sortType:(0,q.hK)(l)}))}},{value:eQ.t5.GroupDefaultClassroom,text:"Classroom",onClick:function(){(0,X.VF)(p,(0,q.v0)({group:o}))}},{value:eQ.t5.GroupDefaultCalendar,text:"Calendar",onClick:function(){(0,X.VF)(p,(0,q.dg)({group:o}))}},{value:eQ.t5.GroupDefaultMembers,text:"Members",onClick:function(){(0,X.VF)(p,(0,q.DW)({group:o}))}},{value:eQ.t5.GroupDefaultLeaderboards,text:"Leaderboards",onClick:function(){p.push("/games/-/leaderboards?mrr=true")}},{value:eQ.t5.GamesAffiliates,text:"Affiliates",onClick:function(){return p.push("/games/affiliates")}}];var e,t,n=[{value:eQ.t5.GroupDefaultNewsfeed,text:"Community",onClick:function(){(0,X.VF)(p,(0,q.AZ)({groupName:null==o?void 0:o.name,sortType:(0,q.hK)(l)}))}}];return null!=c&&null!==(e=c.classroom)&&void 0!==e&&e.visible&&n.push({value:eQ.t5.GroupDefaultClassroom,text:"Classroom",onClick:function(){(0,X.VF)(p,(0,q.v0)({group:o}))}}),null!=c&&null!==(t=c.calendar)&&void 0!==t&&t.visible&&n.push({value:eQ.t5.GroupDefaultCalendar,text:"Calendar",onClick:function(){(0,X.VF)(p,(0,q.dg)({group:o}))}}),n.push({value:eQ.t5.GroupDefaultMembers,text:"Members",onClick:function(){(0,X.VF)(p,(0,q.DW)({group:o}))}}),s&&n.push({value:eQ.t5.GroupDefaultLeaderboards,text:"Leaderboards",onClick:function(){(0,X.VF)(p,(0,q.Xt)({group:o}))}}),n.push({value:eQ.t5.GroupDefaultAbout,text:"About",onClick:function(){(0,X.VF)(p,(0,q.jQ)({group:o}))}}),(0,v.tf)({member:null==i?void 0:i.member,group:o})&&n.push({value:eQ.t5.GroupDefaultSettings,text:"Settings",onClick:b}),n},[o,b,c,s,l,p,i]);return(0,D.jsx)(nf,{items:g,currentValue:a})});function nb(e){var t=e.user,n=e.group,r=e.selected,i=(0,d.useRouter)(),o=[{value:eQ.t5.UserProfilePosts,text:"Contributions",onClick:function(){(0,X.VF)(i,(0,q.sB)({userName:t.name,group:n,tab:eQ.t5.UserProfilePosts}))}},{value:eQ.t5.UserProfileFollowers,text:"Followers",onClick:function(){(0,X.VF)(i,(0,q.sB)({userName:t.name,group:n,tab:eQ.t5.UserProfileFollowers}))}},{value:eQ.t5.UserProfileFollowing,text:"Following",onClick:function(){(0,X.VF)(i,(0,q.sB)({userName:t.name,group:n,tab:eQ.t5.UserProfileFollowing}))}}];return(0,D.jsx)(nf,{items:o,currentValue:r})}nb.defaultProps={selected:eQ.t5.UserProfileDefaultItem};var ng=(0,u.memo)(nb),nx=(0,u.memo)(function(e){var t=e.menuName,n=e.menuItem,r=e.canAccessGroup,i=(0,P.bI)("currentGroup","currentUser"),o=i.currentGroup,a=i.currentUser;switch(t){case eQ.K0.GroupDefault:return(0,D.jsx)(nv,{group:o,selected:n,canAccessGroup:r});case eQ.K0.UserProfile:return(0,D.jsx)(ng,{user:a,group:o,selected:n});default:return null}}),ny=n(34811),nw=C.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-y3srqb-0"})(["position:fixed;bottom:0;width:100%;height:",";background-color:",";border-top:",";display:flex;justify-content:space-between;padding:0 24px;z-index:1299;visibility:",";"],function(e){var t=e.$height;return"calc(env(safe-area-inset-bottom) + ".concat(t,"px)")},y.O9.n1,function(e){var t=e.$noBorder;return"1px solid ".concat(t?"transparent":y.O9.n3)},function(e){return e.$visible?"visible":"hidden"}),nC=C.ZP.div.withConfig({displayName:"styled__NavButtonWrapper",componentId:"sc-y3srqb-1"})(["position:relative;padding-top:5px;"]),nj=(0,C.ZP)(E.z).withConfig({displayName:"styled__NavButton",componentId:"sc-y3srqb-2"})(["width:50px;height:50px;&:active{color:",";background-color:",";}svg{color:",";}"],y.O9.n7,y.O9.n3,function(e){return e.$active?y.O9.n7:y.O9.n5}),nk=C.ZP.div.withConfig({displayName:"styled__NavProbileButton",componentId:"sc-y3srqb-3"})(["display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;span{outline:",";outline-offset:-1px;}&:active{color:",";background-color:",";}"],function(e){return e.$active&&"1px solid ".concat(y.O9.n7)},y.O9.n7,y.O9.n3),nO=(0,C.ZP)(ed).withConfig({displayName:"styled__UnreadNotificationBubble",componentId:"sc-y3srqb-4"})(["position:absolute;top:5px;left:34px;"]),nP=(0,C.ZP)(nO).withConfig({displayName:"styled__UnreadChatNotificationBubble",componentId:"sc-y3srqb-5"})(["left:37px;"]),nI=(0,u.memo)(function(){var e,t=(0,P.bI)("self","unreadChat","unread","isApp","currentGroup","mobileBottomOffset"),n=t.self,i=t.unreadChat,o=t.unread,s=t.isApp,l=t.currentGroup,c=t.mobileBottomOffset,p=t.dispatch,m=(0,d.useRouter)(),v=(0,u.useRef)(),b=(0,q.iH)(m),g=(0,q.mp)(m),x=(0,q.wl)(m),y=(0,q.mS)(m),w=(0,q.DG)(m),C=(0,q.n3)(m),j=(0,u.useMemo)(function(){return(0,q.pi)(m)&&(0,q.wg)(m.query)===(null==n?void 0:n.name)},[m,null==n?void 0:n.name]),k=(0,u.useCallback)(function(){(0,X.VF)(m,(0,q.kr)({}))},[m]),O=(0,u.useCallback)(function(){(0,X.VF)(m,(0,q.Iu)())},[m]),Z=(0,u.useCallback)(function(){(0,X.VF)(m,(0,q.yq)())},[m]),S=(0,u.useCallback)(function(e){(0,X.VF)(m,(0,q.sB)({userName:null==n?void 0:n.name,group:e?{name:e}:void 0}))},[m,null==n?void 0:n.name]),_=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=l&&l.name)){e.next=2;break}return e.abrupt("return",S(l.name));case 2:return e.next=4,f.Z.readSelfGroups({limit:11});case 4:if(i=(r=e.sent).data,!r.error){e.next=9;break}return e.abrupt("return",S());case 9:if(!((o=(0,h.tv)({key:h.H0.lastGroupAccessed}).value)&&null!=i&&null!==(t=i.groups)&&void 0!==t&&t.some(function(e){return e.name===o}))){e.next=12;break}return e.abrupt("return",S(o));case 12:S(null==i||null===(n=i.groups)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.name);case 13:case"end":return e.stop()}},e)})),[l,S]);(0,u.useEffect)(function(){if(v.current&&(p(e9.qp,{type:I.V.NAV_BAR,height:null!==(e=null===(t=v.current)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0}),"ResizeObserver"in window)){var e,t,n=new ResizeObserver(function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.borderBoxSize;null!=n&&n.length&&p(e9.qp,{type:I.V.NAV_BAR,height:n[0].blockSize})});return n.observe(v.current,{box:"border-box"}),function(){n.disconnect(),p(e9.qp,{type:I.V.NAV_BAR,height:null})}}},[p]);var M=null==c||null===(e=c[I.V.NAV_BAR])||void 0===e?void 0:e.visible;return(0,D.jsxs)(nw,{ref:v,$height:s?80:61,$noBorder:w||C,$visible:M,children:[(0,D.jsx)(nC,{children:(0,D.jsx)(nj,{icon:"Home",iconSize:20,variant:"icon-borderless",onClick:k,$active:b||g})}),(0,D.jsxs)(nC,{children:[(0,D.jsx)(nj,{icon:"Chat",iconSize:21,variant:"icon-borderless",onClick:O,$active:x}),(0,D.jsx)(nP,{value:i||0,onClick:O})]}),(0,D.jsxs)(nC,{children:[(0,D.jsx)(nj,{icon:"Bell",iconSize:22,variant:"icon-borderless",onClick:Z,$active:y}),(0,D.jsx)(nO,{value:o||0,onClick:Z})]}),(0,D.jsx)(nC,{children:(0,D.jsx)(nk,{onClick:_,$active:j,children:(0,D.jsx)(eC.Z,{disableLink:!0,size:30,user:n})})})]})});function nD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nD(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nS=(0,u.memo)(function(e){var t=e.content,n=e.settings,r=e.canAccessGroup,i=e.maintenance,o=e.isApp,a=e.self,s=(0,P.bI)("isChat","currentUser","hasNoGroups","mobileBottomOffset","settingsModal"),l=s.isChat,c=s.currentUser,p=s.hasNoGroups,f=s.mobileBottomOffset,m=s.settingsModal,h=(0,d.useRouter)(),v=(0,q.Tx)(h),b=(0,q.pi)(h),g=(0,q.g7)(h),x=(0,q.ZZ)(h),w=(0,q.kA)(h),C=(0,q.zh)(h),j=(0,q.aR)(h),k=(0,q.Xx)(h),O=(0,q.J5)(h),Z=(0,q.wl)(h),S=(0,q.mS)(h),_=(0,q.DG)(h),M=(0,u.useRef)((0,q.Sw)(h)),N=(0,et.Z)(i),E=N.maintenanceStartTime,A=N.maintenanceDuration,L=N.showMaintenanceBanner,T=N.closeMaintenanceBanner,F=(0,u.useMemo)(function(){if(L)return(0,D.jsx)(et.C,{startTime:E,duration:A,onClose:T})},[L,T,E,A]),B=(0,u.useMemo)(function(){return a&&!g&&!v&&!m&&!M.current&&(null==h?void 0:h.asPath)!=="/games/onboarding"},[a,g,v,m,h]),R=(0,u.useMemo)(function(){var e,t,n,r,i=l||x||g||w||k||Z||S?0:64;return B&&!l&&(i+=null!==(n=null==f||null===(r=f[I.V.NAV_BAR])||void 0===r?void 0:r.offset)&&void 0!==n?n:0),{paddingBottom:i,height:l?"calc(100% - ".concat(null!==(e=null==f||null===(t=f[I.V.SAFE])||void 0===t?void 0:t.offset)&&void 0!==e?e:0,"px)"):void 0,backgroundColor:_||l?y.O9.n1:void 0}},[l,x,g,w,k,Z,S,B,f,_]),z=(0,u.useMemo)(function(){return j||_||Z||S?{backgroundColor:y.O9.n1}:{}},[j,_,Z,S]),G=(0,u.useMemo)(function(){if(n.showMobileHeaderCard&&c)return(0,D.jsx)(nd,{children:(0,D.jsx)(t_,{})})},[c,n]),U=(0,u.useMemo)(function(){var e;return g&&!r||C?null:null!=n&&null!==(e=n.secondaryMenusItems)&&void 0!==e&&e.length?(0,D.jsx)(nf,{items:n.secondaryMenusItems,currentValue:null==n?void 0:n.secondaryMenusCurrentValue}):null!=n&&n.hideMobileMainMenu||v||x?void 0:(0,D.jsx)(nx,{menuName:null==n?void 0:n.mainMenuName,menuItem:null==n?void 0:n.mainMenuItem,canAccessGroup:r})},[n,r,x,v,g,C]),$=(0,u.useMemo)(function(){return l||g||w||k||v||x||O||Z||S||_?0:b?10:16},[l,b,g,w,k,x,O,v,Z,S,_]),W=(0,u.useMemo)(function(){return(!p&&a||!a&&o)&&(null==h?void 0:h.route)==="/"?null:(0,D.jsx)(nu,{children:(0,D.jsx)(ny.Z,nZ({canAccessGroup:r},e))})},[o,e,r,h,a,p]);return(0,D.jsxs)(nc.ZP,{style:z,children:[(0,D.jsxs)("div",{style:R,children:[F,W,(0,D.jsxs)(np,{style:{marginBottom:$,gap:b?0:void 0},children:[G,U]}),(0,D.jsx)(t,nZ({},e))]}),B&&(0,D.jsx)(nI,{}),(0,D.jsx)(ee,{})]})}),n_=n(11462),nM=n(73935),nN=C.ZP.div.withConfig({displayName:"styled__BaseModalWrapper",componentId:"sc-z30hfz-0"})(["height:100%;width:100%;position:fixed;overflow:hidden;display:flex;flex-direction:column;align-items:center;top:0px;left:0px;z-index:1300;inset:0px;"]),nE=C.ZP.div.withConfig({displayName:"styled__ModalBackground",componentId:"sc-z30hfz-1"})(["background-color:rgba(0,0,0,0.75);position:fixed;height:100%;width:100%;z-index:-1;left:0;top:0;"]),nA=C.ZP.div.withConfig({displayName:"styled__ModalContent",componentId:"sc-z30hfz-2"})(["width:791px;margin-top:62px;margin-bottom:0px;overflow:auto;border-radius:10px;background-color:",";"," ",""],y.O9.n1,K.Wn,function(e){return e.$sharpCorners&&"border-radius: 0px;"}),nL=(0,C.ZP)(E.z).withConfig({displayName:"styled__CloseButton",componentId:"sc-z30hfz-3"})(["z-index:1301;position:fixed;top:8px;left:8px;background:",";color:",";"],y.O9.n5,y.O9.n1),nT=n(88889),nF=["rootId","onEscapeDisabled","disableEscape","children","onClose","open"];function nB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nB(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nz=(0,u.memo)(function(e){var t=e.rootId,n=e.onEscapeDisabled,r=e.disableEscape,i=e.children,o=e.onClose,a=e.open,s=(0,w.Z)(e,nF),l=(0,P.bI)("sharpCorners").sharpCorners,c=(0,u.useRef)();(0,nT.P)(a),(0,u.useEffect)(function(){if(a){var e=function(e){"modalBackground"===e.target.id&&(c.current.scrollTop=c.current.scrollTop+e.deltaY)};return window.addEventListener("wheel",e),function(){window.removeEventListener("wheel",e)}}},[a]);var d=(0,u.useCallback)(function(){if(!r){o();return}n&&n()},[n,r,o]);(0,u.useEffect)(function(){if(a){var e=function(e){"Escape"===e.key&&d()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}},[r,d,o,a]);var p=(0,u.useMemo)(function(){if(!r)return(0,D.jsx)(nL,{icon:"Close",onClick:d,variant:"icon-borderless"})},[r,d]);return a?(0,nM.createPortal)((0,D.jsxs)(nN,nR(nR({className:"skool-ui-scrolling-modal"},s),{},{onClose:d,children:[(0,D.jsx)(nE,{onClick:d,id:"modalBackground"}),(0,D.jsx)(nA,{id:"modal-scroll-container",ref:c,$sharpCorners:l,children:(0,D.jsx)("div",{style:{overflow:"visible"},children:i})}),p]})),document.getElementById(void 0===t?"__next":t)):null});function nG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nG(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nG(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n$=function(e,t){var n=new URL(window.document.URL);n.searchParams.set(e,t),window.history.replaceState(null,"",n.toString())},nW=(0,u.memo)(function(e){var t,n=e.isBot,i=(0,P.bI)("postDetailModal","currentGroup","disableEscape","postData","reloadOnModalClose","previousRouterState","postListData"),o=i.dispatch,s=i.postDetailModal,l=i.currentGroup,c=i.disableEscape,p=i.postData,m=i.reloadOnModalClose,h=i.previousRouterState,v=i.postListData,b=(0,u.useState)(!1),g=b[0],x=b[1],y=(0,d.useRouter)(),w=null===(t=y.query)||void 0===t?void 0:t.postName,C=null==l?void 0:l.name,j=(0,u.useState)(null),k=j[0],O=j[1],I=(0,u.useState)(null),Z=I[0],S=I[1],_=(0,u.useState)(!1),M=_[0],N=_[1];(0,u.useEffect)(function(){if(s){var e=v.find(function(e){return e.post.name===w});if(null!=e&&null!==(t=e.post)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.pollData){var t,n,r=(0,H.W4)(JSON.parse(e.post.metadata.pollData));O(nU(nU({},r),{},{id:e.post.metadata.poll,totalVotes:null==r||null===(n=r.entries)||void 0===n?void 0:n.reduce(function(e,t){return e+t.count},0)}))}}else O(null)},[s,v,w]);var E=(0,u.useCallback)(function(){(0,r.Z)(a().mark(function e(){var t,n,r,i,l,c,u,d,p,m,h,v,b;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getPostDetail(nU({},s));case 2:if(l=e.sent.data){e.next=6;break}return e.abrupt("return",(0,X.VF)(y,(0,q.P_)({groupName:s.groupName,postName:s.postName})));case 6:c=l.postTree,u=l.followers,d=l.follow,null!=c&&null!==(t=c.post)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.pollData&&S(nU(nU({},h=(0,H.W4)(JSON.parse(null==c||null===(p=c.post)||void 0===p||null===(p=p.metadata)||void 0===p?void 0:p.pollData))),{},{id:l.postTree.post.metadata.poll,totalVotes:null===(m=h.entries)||void 0===m?void 0:m.reduce(function(e,t){return e+t.count},0)})),N(!!(null!=l&&null!==(n=l.postTree)&&void 0!==n&&null!==(n=n.post)&&void 0!==n&&null!==(n=n.metadata)&&void 0!==n&&n.pinned)),o(e9.aK,nU(nU({},c),{},{followers:u,followingPost:"on"===d,selectedPostID:s.selectedPostID||(null===(r=y.query)||void 0===r?void 0:r.selectedPostID),initialFetchDone:!0})),(v=nU({},l.postTree.post)).metadata.hasNewComments=0,o(e9.gQ,v),!s.selectedPostID&&null!==(i=y.query)&&void 0!==i&&i.selectedPostID&&n$("p",null===(b=y.query)||void 0===b?void 0:b.selectedPostID),x(!1);case 16:case"end":return e.stop()}},e)}))()},[s,y,o]);(0,u.useEffect)(function(){w&&o(e9.UG,{postName:w,groupName:C}),w||(o(e9.UG,null),o(e9.aK,null))},[w,C,o]),(0,u.useEffect)(function(){s&&!p&&(x(!0),E())},[s,p,E]),(0,u.useEffect)(function(){!w&&m&&(0,X.H5)(y,!0)},[w,m,y]),(0,u.useEffect)(function(){null!=s&&s.replace&&E()},[s,E]),(0,u.useEffect)(function(){window.onpopstate=function(){o(e9.WT,function(){return{chatModalProps:{}}})}},[o]);var A=(0,u.useCallback)(function(){o(e9.UG,null),o(e9.aK,null),h.asPath?y.push(h.asPath,void 0,{shallow:!0,scroll:!1}):y.back()},[o,null==h?void 0:h.asPath,y]),L=(0,u.useMemo)(function(){if(!s)return null;var e,t=p;return(g&&(t=v.find(function(e){return e.post.name===w})),t)?(t.children&&(t=nU(nU({},t),{},{children:void 0})),(0,D.jsx)(n_.Z,{isModal:!0,postTree:t||{},selectedPostID:null===(e=t)||void 0===e?void 0:e.selectedPostID,isPinned:M,loading:g,poll:k,updatePoll:Z,setUpdatePoll:S,isBot:n})):null},[g,p,v,s,w,Z,k,M,n]),T=(0,u.useCallback)(function(){o(e9.Ek,function(){return{showInputCancelMessage:!0}})},[o]);return(0,D.jsx)(nz,{open:!((!p||!s)&&!g),onClose:A,disableEscape:c,onEscapeDisabled:T,children:L})}),nq=n(50591),nH=n(57619),nV=(0,C.iv)(["height:772px;width:950px;"]),nY=C.ZP.div.withConfig({displayName:"styled__ChatContainer",componentId:"sc-f4viec-0"})(["height:542px;width:632px;display:flex;justify-content:center;align-items:center;flex-direction:column;background:",";border-radius:10px;overflow:hidden;border:1px solid ",";"," ",""],y.O9.n1,y.O9.n3,K.Wn,function(e){return e.$expanded&&nV}),nJ=C.ZP.div.withConfig({displayName:"styled__OnlineIcon",componentId:"sc-f4viec-1"})(["position:absolute;bottom:0px;right:-8px;width:16px;height:16px;background-color:",";border-radius:50%;margin:0px 4px;border:2px solid ",";"],y.O9.s2,y.O9.n1),nX=C.ZP.div.withConfig({displayName:"styled__ChatModalHeader",componentId:"sc-f4viec-2"})(["display:flex;align-items:center;gap:8px;width:100%;> div:last-child{min-width:0px;}"]),nK=n(43201);function nQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nQ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var n1=(0,u.memo)(function(){var e,t=(0,u.useState)(!1),n=t[0],o=t[1],s=(0,u.useState)(!1),l=s[0],c=s[1],d=(0,u.useState)(!1),p=d[0],m=d[1],v=(0,P.bI)("conversation","onlineStatuses","chatModalProps","disableEscapeChat"),b=v.conversation,g=v.onlineStatuses,x=v.chatModalProps,w=v.disableEscapeChat,C=v.dispatch,j=x.id,k=x.lastRead,O=(0,u.useState)(e2()().unix()),I=O[0],Z=O[1],S=(0,u.useState)(null==b||null===(e=b.channel)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.metadata.lastOffline),_=S[0],M=S[1];(0,u.useEffect)(function(){var e=setInterval(function(){Z(function(e){var t=e2()();return e2().unix(e).minutes()===t.minutes()?e:t.unix()})},1e3);return function(){clearInterval(e)}},[]),(0,u.useEffect)(function(){var e=(0,h.tv)({key:h.H0.chatExpanded}).value;c(!!(void 0===e?{}:e).expanded)},[]),(0,u.useEffect)(function(){var e;M(null==b||null===(e=b.channel)||void 0===e||null===(e=e.user)||void 0===e?void 0:e.metadata.lastOffline)},[b]),(0,u.useEffect)(function(){var e,t=(null==b||null===(e=b.channel)||void 0===e?void 0:e.user)||{};void 0===g[t.id]||g[t.id]||M(1e6*Date.now())},[b,g]);var N=(0,u.useCallback)(function(e){var t=e.online,n=e.topic.mainId;C(e9.WT,function(e){return{onlineStatuses:n0(n0({},e.onlineStatuses),{},(0,i.Z)({},n,t))}})},[C]);(0,u.useEffect)(function(){var e,t=null==b||null===(e=b.channel)||void 0===e?void 0:e.user.id;if(t)return(0,nq.Ld)([(0,nq.Cq)(t)],N)},[b,N]),(0,u.useEffect)(function(){j||C(e9.WT,function(){return{conversation:null}})},[j,C]);var A=(0,u.useCallback)(function(){C(e9.WT,function(){return{chatModalProps:{}}})},[C]),L=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.blockChat({userId:null==b?void 0:b.channel.user.id});case 2:m(function(e){return!e});case 3:case"end":return e.stop()}},e)})),[b]),T=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.unblockChat({userId:null==b?void 0:b.channel.user.id});case 2:m(function(e){return!e});case 3:case"end":return e.stop()}},e)})),[b]),F=(0,u.useCallback)(function(){c(function(e){return(0,h.co)({key:h.H0.chatExpanded,value:{expanded:!e}}),!e})},[]),B=(0,u.useMemo)(function(){if(!b)return null;var e,t=b.channel,r=t.user,i=t.metadata,o=i.blocked,a=i.otherUserTz,s=[{label:"View profile",link:(0,q.sB)({userName:r.name}).as,newTab:!0},{label:"".concat(o?"Unblock":"Block"," ").concat(r.firstName," ").concat(r.lastName),onClick:o?T:L}];return(0,D.jsxs)(e8.X,{style:{width:"100%",backgroundColor:y.O9.n1,borderBottom:"1px solid ".concat(y.O9.n3),boxShadow:n?"0 3px 2px -2px rgba(0,0,0,.1)":"none"},alignItems:"center",justifyContent:"space-between",padding:"12px 16px",gap:8,children:[(0,D.jsxs)(nX,{children:[(0,D.jsxs)("div",{style:{position:"relative"},children:[(0,D.jsx)(eC.Z,{user:r,size:40,newTab:!0}),g[r.id]&&(0,D.jsx)(nJ,{})]}),(0,D.jsxs)(ew.s,{children:[(0,D.jsx)(ej.Z,{user:r,typographyVariant:"t6"}),(0,D.jsxs)(te.Z,{variant:"t11",color:y.O9.n5,children:[g[r.id]?"online now":_?"active ".concat((0,e3.ur)({value:_,justNow:!1,ago:!0})," ago"):"not active yet",I&&a&&(0,D.jsx)("span",{children:" (".concat(e2().unix(I).tz(a).format("h:mma")," in ").concat(null==a||null===(e=a.split("/")[1])||void 0===e?void 0:e.replace("_"," ").replace(/_/g," ").replace(/Kiev/,"Kyiv"),")")})]})]})]}),(0,D.jsxs)(e8.X,{children:[(0,D.jsx)(E.z,{variant:"icon-borderless",icon:l?"Minimize":"Expand",iconSize:14,onClick:F}),(0,D.jsx)(er.h_,{options:s,variant:"icon-borderless",icon:"HorizontalDots"}),(0,D.jsx)(E.z,{variant:"icon-borderless",icon:"Close",iconSize:14,onClick:A})]})]})},[F,g,b,A,n,L,T,I,_,l]),R=(0,u.useMemo)(function(){return j?(0,D.jsxs)(nY,{$expanded:l,children:[B,(0,D.jsx)(nH.Z,{channelId:j,lastRead:k,contentOnly:!0,onClose:A,setShowCrease:o},"chat-".concat(p?"refresh":"initial"))]}):null},[j,k,B,A,p,l]);return(0,D.jsx)(nK.I,{open:!!j,onClose:A,disableEscape:w,children:R})}),n2=n(64597),n9=(0,u.memo)(function(){var e=(0,P.bI)("showChatLimitModal"),t=e.showChatLimitModal,n=e.dispatch,r=(0,u.useCallback)(function(){return n(e9.vb,!1)},[n]);return(0,D.jsx)(n2.T,{header:"You hit your chat limit",open:t,confirmLabel:"Got it",onClose:r,onConfirm:r,children:"You get 10 new chat conversations per week. Use them to make genuine connections with people. Spamming/pitching via chat may result in your chat being disabled."})}),n3=n(23450),n5=n.n(n3),n4=C.ZP.div.withConfig({displayName:"styled__UserBio",componentId:"sc-190yi79-0"})(["",";",";"],N.c.t9,N.c.ellipsis),n6=C.ZP.div.withConfig({displayName:"styled__MessageText",componentId:"sc-190yi79-1"})(["color:",";margin:",";",";"],y.O9.n5,function(e){return e.theme.isMobile?"18px 16px":"32px 16px"},N.c.t7),n8=(0,C.ZP)(ew.s).withConfig({displayName:"styled__PostLikesContainer",componentId:"sc-190yi79-2"})(["align-items:center;max-height:500px;overflow:hidden;border-radius:10px;"]),n7=C.ZP.div.withConfig({displayName:"styled__PostLikesContent",componentId:"sc-190yi79-3"})(["flex:1 1 auto;height:calc(100vh - 82px);min-height:0;width:100%;position:relative;overflow-y:auto;"]),re=(0,C.ZP)(e8.X).withConfig({displayName:"styled__HeaderRow",componentId:"sc-190yi79-4"})(["border-bottom:1px solid ",";box-shadow:0 3px 2px -2px rgba(0,0,0,0.1);align-items:center;justify-content:space-between;padding:0 16px;width:100%;"],y.O9.n3),rt=C.ZP.div.withConfig({displayName:"styled__PostLikesHeader",componentId:"sc-190yi79-6"})(["",";padding:16px 0;"],N.c.t6),rn=(0,C.ZP)(E.z).withConfig({displayName:"styled__PostLikesChatButton",componentId:"sc-190yi79-7"})(["height:40px;padding:0 12px;",""],N.c.t8),rr=(0,C.ZP)(E.z).withConfig({displayName:"styled__PostLikesLoadMore",componentId:"sc-190yi79-8"})(["width:",";margin:auto;"],function(e){return e.theme.isMobile?"100%":"auto"}),ri=n(16531),ro=function(e){var t,n,r=e.user,i=e.onClick,o=e.group,a=(0,P.bI)("isMobile","self"),s=a.isMobile,l=a.self,c=(0,eo.C1)(),d=(0,en.Z)(c,3),p=d[0],f=d[1],m=d[2],h=(0,u.useCallback)(function(){return i(r.id)},[i,r.id]),v=1===r.metadata.chatRequest?s?(0,D.jsx)(E.z,{variant:"icon",icon:"Chat",iconSize:17,onClick:function(){return h(r.id)}}):(0,D.jsx)(rn,{variant:"secondary",label:"Chat",icon:"Chat",iconSize:18,onClick:function(){return h(r.id)}}):s?(0,D.jsx)(E.z,{variant:"icon-disabled",icon:"ChatOff",iconSize:17,onClick:f}):(0,D.jsx)(rn,{variant:"disabled",label:"Chat",icon:"ChatOff",iconSize:18,onClick:f});return(0,D.jsxs)(e8.X,{padding:"12px 16px",alignItems:"center",style:{width:"100%",height:72},children:[(0,D.jsx)(eW.x,{marginRight:8,paddingTop:6,children:(0,D.jsx)(eC.Z,{user:r,size:40,group:o,userPreview:!0})}),(0,D.jsx)(e8.X,{style:{width:"100%",minWidth:0},children:(0,D.jsxs)(ew.s,{style:{width:"100%"},children:[(0,D.jsx)(ej.Z,{user:r,group:o,userPreview:!0,typographyVariant:"t5",maxWidth:s?"100%":275}),s?"":(0,D.jsx)(e7.Z,{user:r,group:o,children:(0,D.jsx)(n4,{children:(null==(t=(0,x.Kv)({content:null===(n=r.metadata)||void 0===n?void 0:n.bio}))?void 0:t.length)>50?"".concat(t.slice(0,50).trim(),"..."):t})})]})}),(null==l?void 0:l.id)===r.id?"":(0,D.jsx)(ew.s,{paddingLeft:8,marginLeft:"auto",children:v}),p&&(0,D.jsx)(e4.Z,{user:r,onClose:m})]})},ra=(0,u.memo)(function(){var e,t=(0,P.bI)("postLikeModalProps","isMobile"),n=t.postLikeModalProps,i=t.isMobile,o=t.dispatch,s=n.post,l=n.group,c=(0,d.useRouter)(),m=function(){return{users:[],totalUpvoteUsers:0,cursor:""}},h=(0,u.useState)(m()),v=h[0],b=h[1],g=(0,u.useState)(""),x=g[0],y=g[1],w=(0,u.useState)("upvotes"),C=w[0],j=w[1],k=(0,u.useState)([]),O=k[0],I=k[1];(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.Z.listPostVoteUsers({postID:s.id,tab:C,cursor:x,limit:10});case 4:if(n=(t=e.sent).error,r=t.data,!n){e.next=10;break}return o(e9.bI,{message:"Likes request error",severity:"error"}),e.abrupt("return");case 10:x?I(function(e){return e.concat(r.users)}):I(r.users),b(r);case 12:case"end":return e.stop()}},e)}))()},[s,x,C,o]);var Z=(0,u.useCallback)(function(){o(e9.Qg,function(){return{postLikeModalProps:{}}}),y(""),b(m()),j("upvotes"),I([])},[o]);(0,u.useEffect)(function(){var e=function(){Z()};return p().events.on("routeChangeStart",e),function(){p().events.off("routeChangeStart",e)}},[Z]);var S=(0,u.useCallback)((e=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,r.Z)(a().mark(function e(){var n,r,s,u,d,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.sendChatRequest({userId:t,groupId:l.id});case 2:if(r=(n=e.sent).data,(null==(s=n.error)?void 0:s.status)!==429){e.next=7;break}return e.abrupt("return",o(e9.vb,!0));case 7:if(!r){e.next=19;break}if(d=(u=r.channel).id,p=u.metadata.lastRead,!i){e.next=16;break}return e.next=14,(0,X.VF)(c,(0,q.rv)({channelId:d,chatLastRead:p}));case 14:e.next=17;break;case 16:o(e9.WT,function(){return{chatModalProps:{id:d,lastRead:p}}});case 17:e.next=20;break;case 19:o(e9.bI,{message:"Chat request error",severity:"error"});case 20:case"end":return e.stop()}},e)}))();case 1:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[l,o,i,c]),_=(0,u.useMemo)(function(){return(0,D.jsxs)(re,{children:[(0,D.jsx)(rt,{children:"".concat(n5()("Like",v.totalUpvoteUsers,!0))}),(0,D.jsx)(E.z,{variant:"icon-borderless",icon:"Close",onClick:Z,iconSize:16.66})]})},[Z,v]),M=(0,u.useMemo)(function(){if(!s)return null;var e,t=null!==(e=v.users)&&void 0!==e&&e.length?"":"No likes yet.",n=function(e){i&&Z(),S(e)};return(0,D.jsxs)(n8,{children:[_,(0,D.jsxs)(n7,{children:[null!=O&&O.length?O.map(function(e,t){return(0,D.jsx)(ro,{user:e,onClick:n,group:l},t)}):null,t?(0,D.jsx)(n6,{children:t}):null,v.hasMore&&null!=O&&O.length?(0,D.jsx)(ew.s,{padding:"16px 0",margin:"0 16px",children:(0,D.jsx)(rr,{variant:"secondary",label:"Load More",onClick:function(){return y(v.cursor)}})}):null]})]})},[s,_,S,Z,i,v,O,l]);return(0,D.jsx)(ri.u_,{open:!!s,onClose:Z,wrapperStyle:{padding:0},size:"small",children:M})}),rs=(0,C.iv)(["flex-direction:column;"]),rl=C.ZP.div.withConfig({displayName:"styled__LevelChart",componentId:"sc-1x75m5m-0"})(["width:100%;display:flex;",""],function(e){return e.theme.isMobile&&rs}),rc=(0,C.iv)(["width:100%;"]),ru=C.ZP.div.withConfig({displayName:"styled__LevelColumn",componentId:"sc-1x75m5m-1"})(["width:50%;display:flex;flex-direction:column;"," ",""],N.c.t7,function(e){return e.theme.isMobile&&rc}),rd=C.ZP.div.withConfig({displayName:"styled__SectionHeader",componentId:"sc-1x75m5m-2"})(["margin-bottom:4px;",""],N.c.t5),rp=[{level:1,points:"0"},{level:2,points:"5"},{level:3,points:"20"},{level:4,points:"65"},{level:5,points:"155"}],rf=[{level:6,points:"515"},{level:7,points:"2,015"},{level:8,points:"8,015"},{level:9,points:"33,015"}],rm=(0,u.memo)(function(){var e=(0,P.bI)("showSkoolPointsInfoModal","isMobile"),t=e.showSkoolPointsInfoModal,n=e.isMobile,r=e.dispatch,i=(0,u.useCallback)(function(){r(e9.or,{showSkoolPointsInfoModal:!1})},[r]),o=(0,u.useCallback)(function(e){var t=e.level,n=e.points;return(0,D.jsx)("span",{children:"Level ".concat(t," - ").concat(n," points")},t)},[]),a=(0,D.jsxs)(ri.fe,{children:[(0,D.jsx)(rd,{children:"Points"}),(0,D.jsx)(eW.x,{marginBottom:16,children:"You earn points when other members like your posts or comments. 1 like = 1 point. This encourages users to produce quality content and interact with other members in their community."}),(0,D.jsx)(rd,{children:"Levels"}),(0,D.jsx)(eW.x,{marginBottom:16,children:"As you gain points, you level up. Your level is shown at the bottom right of your avatar. The number of points required to get to the next level is shown under your avatar on your profile page."}),(0,D.jsxs)(rl,{children:[(0,D.jsx)(ru,{children:rp.map(o)}),(0,D.jsx)(ru,{children:rf.map(o)})]})]});return(0,D.jsxs)(ri.u_,{size:"small",open:t,onClose:i,scrollable:!0,shouldFullscreenOnMobile:!0,children:[(0,D.jsx)(ri.xB,{style:{paddingTop:n?32:void 0},children:"Skool points"}),a]})}),rh=(0,u.memo)(function(){var e=(0,d.useRouter)(),t=(0,u.useCallback)(function(){(0,X.H5)(e,!0)},[e]);return(0,D.jsx)(n2.T,{open:!0,header:"There was an issue",confirmLabel:"Refresh",onConfirm:t,children:"Skool uses first-party cookies that are essential to site usage. Please enable cookies on your device before refreshing the page."})}),rv=n(64487),rb=n(94787),rg=(0,C.ZP)(ew.s).withConfig({displayName:"styled__Wrapper",componentId:"sc-17fy7p3-0"})(["width:100%;height:100vh;justify-content:center;align-items:center;"]),rx=(0,C.ZP)(ew.s).withConfig({displayName:"styled__Card",componentId:"sc-17fy7p3-1"})(["gap:32px;border-radius:10px;border:1px solid ",";background-color:",";padding:32px;max-width:454px;align-items:center;",""],y.O9.n3,y.O9.n1,N.c.t7),ry=C.ZP.div.withConfig({displayName:"styled__Title",componentId:"sc-17fy7p3-2"})(["text-align:center;",""],N.c.t1),rw=C.ZP.div.withConfig({displayName:"styled__Subtitle",componentId:"sc-17fy7p3-3"})(["text-align:center;"]);function rC(){return(0,D.jsx)(rg,{children:(0,D.jsxs)(rx,{children:[(0,D.jsx)(eU.Z,{width:72}),(0,D.jsxs)(ew.s,{gap:8,children:[(0,D.jsx)(ry,{children:"Oops"}),(0,D.jsx)(rw,{children:"Sorry, something went wrong or Skool is just having a hiccup. Please try again"})]}),(0,D.jsx)(E.z,{label:"Back to Home",onClick:function(){return(0,X.VF)(p(),{href:"/",as:"/"})},style:{width:"100%"}})]})})}var rj=(0,u.memo)(function(e){var t=e.children,n=(0,P.bI)("self").self;return(0,u.useEffect)(function(){null!=n&&n.id&&rv.av({id:n.id})},[null==n?void 0:n.id]),(0,D.jsx)(rb.SV,{fallback:rC,showDialog:!1,children:t})}),rk=n(9008),rO=n.n(rk),rP=n(90116),rI=(0,C.iv)(["padding:16px 13px;height:auto;"]),rD=C.ZP.div.withConfig({displayName:"styled__TabContentWrapper",componentId:"sc-1p35nnr-0"})(["padding:24px 32px;height:100%;flex:1;position:relative;overflow:auto;",""],function(e){return e.theme.isMobile&&rI}),rZ=C.ZP.div.withConfig({displayName:"styled__TabModalDesktop",componentId:"sc-1p35nnr-1"})(["height:","px;width:","px;max-height:calc(100vh - 24px);border-radius:10px;overflow:hidden;border:1px solid ",";background:",";display:flex;flex-direction:column;",""],function(e){return e.$height},function(e){return e.$width},y.O9.n3,y.O9.n1,K.Wn),rS=C.ZP.div.withConfig({displayName:"styled__DesktopNav",componentId:"sc-1p35nnr-2"})(["width:","px;height:100%;padding:12px 16px 0px 16px;border-right:1px solid ",";"],function(e){return e.$navWidth},y.O9.n3),r_=(0,C.iv)(["background:",";color:",";pointer-events:none;&:hover{background:",";}"],y.O9.p2,y.O9.fgPrimary,y.O9.p2),rM=(0,C.iv)(["pointer-events:none;opacity:0.33;"]),rN=C.ZP.div.withConfig({displayName:"styled__DesktopNavItem",componentId:"sc-1p35nnr-3"})(["display:flex;align-items:center;height:48px;border-radius:10px;padding:0px 16px;cursor:pointer;"," transition:background 300ms ease;&:hover{background:",";}"," ",""],N.c.t5,y.O9.n3,function(e){return e.$active&&r_},function(e){return e.$disabled&&rM}),rE=C.ZP.div.withConfig({displayName:"styled__DesktopBottom",componentId:"sc-1p35nnr-4"})(["display:flex;flex:1;height:calc(100% - 77px);"]),rA=(0,C.ZP)(nc.ZP).withConfig({displayName:"styled__TabModalMobile",componentId:"sc-1p35nnr-5"})(["background:",";height:100%;width:100vw;display:flex;flex-direction:column;"],y.O9.n1),rL=C.ZP.div.withConfig({displayName:"styled__MobileNav",componentId:"sc-1p35nnr-6"})(["display:flex;width:100%;gap:24px;height:56px;padding:0px 13px;border-bottom:1px solid ",";overflow:auto;",""],y.O9.n3,K.KZ),rT=(0,C.iv)(["color:",';&:after{content:"";position:absolute;bottom:0px;left:0px;height:4px;background:',";width:100%;}"],y.O9.n7,y.O9.n7),rF=C.ZP.div.withConfig({displayName:"styled__MobileNavItem",componentId:"sc-1p35nnr-7"})(["height:100%;padding:16px 0px;position:relative;color:",";white-space:nowrap;"," ",""],y.O9.n5,N.c.t6,function(e){return e.$active&&rT}),rB=C.ZP.div.withConfig({displayName:"styled__TabModalDesktopHeader",componentId:"sc-1p35nnr-8"})(["border-bottom:1px solid ",";height:76px;"],y.O9.n3),rR=(0,u.memo)(function(e){var t=e.tabs,n=e.open,r=e.header,i=e.onClose,o=e.content,a=e.activeTab,s=e.onTabChange,l=e.width,c=void 0===l?800:l,d=e.height,p=void 0===d?554:d,f=e.navWidth,m=void 0===f?204:f,h=(0,P.bI)("isMobile").isMobile,v=(0,u.useRef)({}),b=(0,u.useRef)();(0,u.useEffect)(function(){b.current.scrollIntoView()},[o]);var g=(0,u.useCallback)(function(e){v.current[e].scrollIntoView(),s(e)},[s]),x=(0,u.useCallback)(function(e){var t=e.key,n=e.label,r=e.disabled;e.dataTestId;var i=h?rF:rN;return(0,D.jsx)(i,{ref:function(e){v.current[t]=e},$disabled:r,$active:a===t,onClick:function(){return g(t)},children:n},t)},[a,g,h]),y=(0,u.useMemo)(function(){return(0,D.jsxs)(rA,{children:[r,(0,D.jsx)(rL,{children:t.map(x)}),(0,D.jsx)(rD,{ref:b,children:o})]})},[r,o,x,t]),w=(0,u.useMemo)(function(){return(0,D.jsxs)(rZ,{$height:p,$width:c,children:[(0,D.jsx)(rB,{children:r}),(0,D.jsxs)(rE,{children:[(0,D.jsx)(rS,{$navWidth:m,children:t.map(x)}),(0,D.jsx)(rD,{ref:b,children:o})]})]})},[t,r,c,p,o,m,x]),C=(0,u.useMemo)(function(){return h?y:w},[h,y,w]);return(0,D.jsx)(nK.I,{open:n,onClose:i,withoutWrapper:h,children:C})}),rz=n(85064),rG=n(96486),rU=n.n(rG),r$=(0,C.iv)(["> div:first-child{display:none;}"]),rW=C.ZP.div.withConfig({displayName:"styled__SettingsModalWrapper",componentId:"sc-2rio63-0"})(["display:flex;flex-direction:column;",""],function(e){return e.$contentLoading&&r$}),rq=C.ZP.div.withConfig({displayName:"styled__SettingsModalMobileWrapper",componentId:"sc-2rio63-1"})(["",""],function(e){return e.$contentLoading&&r$}),rH=C.ZP.div.withConfig({displayName:"styled__GroupNotificationsWrapper",componentId:"sc-1yj7xnk-0"})(["padding-bottom:32px;display:flex;flex-direction:column;gap:24px;"]),rV=C.ZP.div.withConfig({displayName:"styled__GroupNotificationsItem",componentId:"sc-1yj7xnk-1"})(["> div:first-child{margin-bottom:6px;color:",";"," > span{color:",";","}}"],y.O9.n5,N.c.t7,y.O9.n7,N.c.t5),rY=C.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-1yj7xnk-2"})(["margin-top:12px;width:100%;> div > div:first-child{width:100%;button{width:100%;}}"]),rJ=[{key:"digest",header:"Digest email",label:"summary of popular posts",defaultLabel:"Weekly (default)",selections:[{value:"1d",label:"Daily"},{value:"7d",label:"Weekly (default)"},{value:"14d",label:"Every 14-Days"},{value:"30d",label:"Monthly"},{value:"off",label:"Never"}]},{header:"Notifications email",key:"emails",label:"summary of unread notifications",defaultLabel:"Hourly (default)",selections:[{value:"5m",label:"5-mins"},{value:"1h",label:"Hourly (default)"},{value:"3h",label:"3-hours"},{value:"6h",label:"6-hours"},{value:"12h",label:"12-hours"},{value:"1d",label:"Daily"},{value:"2d",label:"Every 2nd day"},{value:"7d",label:"Weekly"},{value:"off",label:"Never"}]},{key:"likes",header:"Likes",label:"when somebody likes my posts or comments",defaultLabel:"Notify me (default)",selections:[{value:"on",label:"Notify me (default)"},{value:"off",label:"Don't notify me"}]},{key:"admin-posts",header:"Admin announcements",label:"get email broadcasts sent by admins",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]},{key:"calendar-event",header:"Event reminders",label:"notify me of calendar events the day before they happen",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)"},{value:"off",label:"No"}]}],rX=["key"];function rK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rQ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rK(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var r0=(0,u.memo)(function(e){var t,n,o=e.dispatch,s=e.onSetState,l=e.onGetState,c=e.currentGroup,d=e.setContentLoading,p="nfg-".concat(null==c?void 0:c.id),m=(0,P.bI)("self").self,h=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,f.Z.getPrefs({category:p});case 3:(n=null==(t=e.sent.data)?void 0:t.find(function(e){return"chat"===e.key}))?s({chatOn:"on"===n.value}):s({chatOn:!0}),null!=t&&t.length?(r={},t.forEach(function(e){var t=e.key,n=e.value;r[t]=n}),s({prefs:r})):s({prefs:{}}),d(!1);case 9:case"end":return e.stop()}},e)})),[p,s,d]);(0,u.useEffect)(function(){h()},[h]);var v=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t,n){var r,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s({prefs:r=rQ(rQ({},l("prefs")||{}),{},(0,i.Z)({},t,n))}),c=Object.keys(r).map(function(e){return{key:e,value:r[e]}}),e.next=6,f.Z.postPrefs({category:p,body:c});case 6:o(e9.bI,{message:"Settings updated"});case 7:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[p,o,l,s]),b=(0,u.useCallback)(function(e){var t,n=e.key,r=e.header,i=e.label,o=e.defaultLabel,a=e.selections,s=l("prefs")||{},c=a.find(function(e){return e.value===s[n]}),u=null!==(t=null==c?void 0:c.label)&&void 0!==t?t:o;return(0,D.jsxs)(rV,{children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)("span",{children:[r,"\xa0\xa0"]}),i]}),(0,D.jsx)(rY,{children:(0,D.jsx)(er.h_,{variant:"input",fitButton:!0,label:u,options:a,shouldFlip:!0})})]},n)},[l]),g=(0,u.useMemo)(function(){var e,t=l("prefs")||{},n=rJ.map(function(e){var n=e.key,r=(0,w.Z)(e,rX);return rQ(rQ({key:n},r),{},{selections:r.selections.map(function(e){return rQ(rQ({},e),{},{active:t[n]?t[n]===e.value:r.defaultLabel===e.label,onClick:function(){return v(n,e.value)}})})})});return null!=m&&null!==(e=m.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.billingMgr&&n.push({key:"new-member-billing-email",header:"New customer emails",label:"notify me when my group gets a new customer",defaultLabel:"Yes (default)",selections:[{value:"on",label:"Yes (default)",active:!t["new-member-billing-email"]||"on"===t["new-member-billing-email"],onClick:function(){return v("new-member-billing-email","on")}},{value:"off",label:"No",active:!!t["new-member-billing-email"]&&"off"===t["new-member-billing-email"],onClick:function(){return v("new-member-billing-email","off")}}]}),n.map(b)},[v,l,b,null==m||null===(n=m.member)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.billingMgr]);return(0,D.jsx)(rH,{children:g})}),r1=C.ZP.div.withConfig({displayName:"styled__GroupChatWrapper",componentId:"sc-idvbgl-0"})(["> div{&:not(:last-child){margin-bottom:32px;}}"]),r2=C.ZP.div.withConfig({displayName:"styled__GroupChatRow",componentId:"sc-idvbgl-1"})(["display:flex;align-items:center;justify-content:space-between;padding-right:8px;> div{&:first-child{display:flex;align-items:center;> a{margin-right:12px;}}}"]),r9=(0,C.iv)(["> div{&:first-child{height:22px;width:22px;margin-right:12px;}&:last-child{height:12px;width:12px;margin-left:0px;}}"]),r3=C.ZP.div.withConfig({displayName:"styled__ChatButtonWrapper",componentId:"sc-idvbgl-2"})(["display:flex;align-items:center;> div{&:first-child{height:22px;width:22px;margin-right:8px;}&:last-child{height:12px;width:12px;margin-left:20px;}}",""],function(e){return e.theme.isMobile&&r9}),r5=n(17590),r4=["chatOn","isMobile","active"];function r6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var r8=function(e){var t=e.chatOn,n=e.isMobile,r=(e.active,(0,w.Z)(e,r4)),o=(0,D.jsxs)(r3,{children:[(0,D.jsx)(ez.J,{name:t?"Chat":"ChatOff"}),n?"":t?"On":"Off",(0,D.jsx)(ez.J,{name:"ArrowDown"})]});return(0,D.jsx)(E.z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r6(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({style:{padding:"0px 16px",height:48},label:o,variant:"secondary"},r))},r7=(0,u.memo)(function(e){var t,n,i=e.dispatch,o=e.isMobile,s=e.onSetState,l=e.onGetState,c=e.currentGroup,d=e.setContentLoading,p="nfg-".concat(null==c?void 0:c.id),m=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,f.Z.getPrefs({category:p});case 3:(n=null==(t=e.sent.data)?void 0:t.find(function(e){return"chat"===e.key}))?s({chatOn:"on"===n.value}):s({chatOn:!0}),null!=t&&t.length?(r={},t.forEach(function(e){var t=e.key,n=e.value;r[t]=n}),s({prefs:r})):s({prefs:{}}),d(!1);case 9:case"end":return e.stop()}},e)})),[p,s,d]);(0,u.useEffect)(function(){m()},[m]);var h=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.postPrefs({category:p,body:[{key:"chat",value:t}]});case 2:s({chatOn:"on"===t}),i(e9.bI,{message:"Settings updated"});case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[p,i,s]),v=(0,u.useMemo)(function(){var e=l("chatOn"),t=[{"data-testid":"group-chat-chat-on",label:"Chat on",onClick:function(){return h("on")},active:e},{"data-testid":"group-chat-chat-off",label:"Chat off",onClick:function(){return h("off")},active:!e}];return(0,D.jsx)(er.h_,{yOffset:12,options:t,children:(0,D.jsx)(r8,{chatOn:e,isMobile:o})})},[h,o,l]);return(0,D.jsxs)(r1,{children:[(0,D.jsx)(te.Z,{variant:o?"t4":"t2",style:{marginBottom:8},children:"Chat"}),(0,D.jsx)(te.Z,{variant:"t7",style:{marginBottom:16},children:"Choose whether members of this group can message you or not."}),(0,D.jsxs)(r2,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(r5.Z,{group:c,iconSize:48}),(0,D.jsx)(te.Z,{variant:"t5",children:null==c||null===(n=c.metadata)||void 0===n?void 0:n.displayName})]}),v]})]})}),ie=(0,C.iv)(["> h2{","}"],N.c.t4),it=C.ZP.div.withConfig({displayName:"styled__GroupMembershipWrapper",componentId:"sc-16f37kx-0"})(["> h2{margin:0px 0px 8px 0px;","}",""],N.c.t2,function(e){return e.theme.isMobile&&ie}),ir=C.ZP.div.withConfig({displayName:"styled__SubscriptionActions",componentId:"sc-16f37kx-1"})(["display:flex;flex-direction:column;margin-top:16px;> p{margin:0px 0px 32px 0px;","}> div{gap:16px;display:flex;flex-direction:column;> a{width:fit-content;}}"],N.c.t7),ii=(0,C.ZP)(E.z).withConfig({displayName:"styled__SubscriptionAction",componentId:"sc-16f37kx-2"})(["height:fit-content;width:fit-content;color:",";gap:16px;&:hover{color:",";}",";"],y.O9.n5,y.O9.n5,N.c.t7),io=C.ZP.div.withConfig({displayName:"styled__DisplayMessage",componentId:"sc-16f37kx-3"})([""," > p{margin:0;}"],N.c.t7),ia=(0,C.ZP)(E.z).withConfig({displayName:"styled__FixPaymentIssueButton",componentId:"sc-16f37kx-4"})(["margin-bottom:32px;"]),is={"system-admin":"system admin","group-admin":"admin","group-moderator":"moderator",member:"member"},il=[{tab:"userMembershipUpdatePayment",icon:"Card",label:"Update payment method",testId:"update-payment-link"},{tab:"userMembershipSupport",icon:"Support",label:"Contact support",testId:"contact-support-link"},{tab:"userMembershipManageSubscription",label:"Manage membership",testId:"manage-subscription-link"}],ic=[{tab:"userMembershipUpdatePayment",icon:"Card",label:"Update payment method",testId:"update-payment-link"},{tab:"userMembershipSupport",icon:"Support",label:"Contact support",testId:"contact-support-link"},{href:"/settings?t=payment-history",label:"View payment history",testId:"view-payment-history-link"},{tab:"userMembershipCancelSubscription",label:"Cancel membership",testId:"cancel-subscription-link"}],iu=[{tab:"userMembershipReactivate",icon:"Reactivate",label:"Reactivate membership",testId:"reactivate-subscrition-link"},{tab:"userMembershipSupport",icon:"Support",label:"Contact support",testId:"contact-support-link"},{tab:"userMembershipLeaveGroup",icon:"Leave",label:"Leave group",testId:"leave-group-link"}],id=n(99802),ip=n(38449);function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iv=(0,u.memo)(function(e){var t,n,i=e.onStackPush,o=e.setContentLoading,s=e.onSetState,l=e.onClose,c=(0,P.bI)("self","currentGroup"),d=c.self,p=c.currentGroup,m=c.dispatch,h="pending"===d.member.role,b=(0,u.useState)(null),g=b[0],x=b[1],w=(0,eo.c8)(),C=(0,en.Z)(w,2),j=C[0],k=C[1],O=!!(null!==(t=d.member)&&void 0!==t&&t.billingCanceled),I=!!(null!==(n=d.member)&&void 0!==n&&n.billingDeclined),Z=(0,u.useMemo)(function(){return(0,v.Td)({user:d,member:null==d?void 0:d.member,group:p})},[p,d]),S=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,f.Z.getGroupSubscription({groupId:p.id});case 3:x(e.sent.data),o(!1);case 7:case"end":return e.stop()}},e)})),[p,o]);(0,u.useEffect)(function(){var e;null!=d&&null!==(e=d.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.msbs&&S()},[d,o,S]);var _=(0,u.useCallback)(function(){if(Z){m(e9.bI,{message:"Owner can't leave group",severity:"error"});return}h?i("userMembershipCancelJoin"):((0,ip.P3)({eventName:ip.qI.initLeaveGroup,userID:null==d?void 0:d.id,metadata:ih(ih({},(0,ip.Ju)({currentGroup:p})),{},{paid_price:null==g?void 0:g.amount})}),i("userMembershipLeave"))},[Z,h,m,i,null==d?void 0:d.id,p,null==g?void 0:g.amount]),M=(0,u.useCallback)(function(e){var t,n=e.tab,o=e.label,l=e.icon,c=(e.testId,e.href),u=(t=(0,r.Z)(a().mark(function e(){var t,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("userMembershipManageSubscription"===n&&(0,ip.P3)({eventName:ip.qI.manageMembership,value:2,userID:null==d?void 0:d.id,metadata:ih(ih({},(0,ip.Ju)({currentGroup:p})),{},{paid_price:null==g?void 0:g.amount})}),"userMembershipCancelSubscription"===n&&(0,ip.P3)({eventName:ip.qI.initCancelSubscription,value:2,userID:null==d?void 0:d.id,metadata:ih(ih({},(0,ip.Ju)({currentGroup:p})),{},{paid_price:null==g?void 0:g.amount,has_cancel_video:!!(null!==(t=p.metadata)&&void 0!==t&&t.retentionVideo)})}),"userMembershipReactivate"!==n){e.next=11;break}return e.next=5,f.Z.reactivateGroupSubscription({groupId:p.id});case 5:if(!(r=e.sent.error)){e.next=10;break}return m(e9.bI,{message:(null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}),e.abrupt("return");case 10:m(e9._$,function(e){var t=ih({},e);return t.member.billingCanceled=null,t});case 11:if("userMembershipManageSubscription"!==n){e.next=14;break}return k(),e.abrupt("return");case 14:s({subscription:g},n),i(n);case 16:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)});return(0,D.jsx)(ii,{label:o,icon:l,iconSize:14,variant:"link",iconLeft:!0,onClick:c?void 0:u,href:c},o)},[i,s,g,p,m,d,k]),N=(0,u.useMemo)(function(){if(!g||Z)return(0,D.jsx)(E.z,{variant:"secondary",label:h?"Cancel Request":"Leave This Group",onClick:_,style:{marginTop:32}});if(O)return(0,D.jsxs)(ir,{children:[(0,D.jsx)("p",{style:{marginBottom:16},children:"Your membership has been cancelled. You will not be charged again."}),(0,D.jsx)("p",{style:{marginBottom:24},children:"You will be removed from the group at the end of your current billing cycle. If you change your mind, you can reactivate your membership."}),(0,D.jsx)("div",{children:iu.map(M)})]});var e=g.cardBrand,t=g.cardLast4,n=g.nextPayment,r=I?il.filter(function(e){return"userMembershipUpdatePayment"!==e.tab}):il;return(0,D.jsxs)(ir,{children:[!I&&(0,D.jsx)("p",{children:"Next payment: ".concat(e2().unix(n).format("MMMM Do, YYYY")," — ").concat(e.toUpperCase()," ending in ").concat(t)}),(0,D.jsx)("div",{children:(j?ic:r).map(M)})]})},[g,Z,O,I,j,M,h,_]),A=(0,u.useCallback)(function(){m(e9.RV,!0),l()},[m,l]),L=(0,u.useMemo)(function(){var e,t;return h?(0,D.jsxs)(io,{children:["You requested membership to ",(0,D.jsx)("span",{children:is[d.member.role]})," ".concat(p.metadata.displayName," on "),(0,D.jsx)("span",{children:"".concat(e2()(null==d||null===(e=d.member)||void 0===e?void 0:e.createdAt).format("L"),".")})]}):(0,D.jsx)(io,{children:j?(0,D.jsx)("p",{children:"You're paying ".concat((0,id.O5)(g),"/month for your ").concat(p.metadata.displayName," membership.")}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{children:["You've been ".concat("admin"===is[d.member.role]?"an":"a"," ").concat(is[d.member.role]," ")," of ".concat(p.metadata.displayName," since "),(0,D.jsx)("b",{children:"".concat(e2()(null==d||null===(t=d.member)||void 0===t?void 0:t.createdAt).format("L"))}),"."]}),I&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(te.Z,{color:y.O9.e2,variant:"t7",children:(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Your payment has declined"}),(0,D.jsx)("br",{}),"Fix payment issue to keep your membership."]})}),(0,D.jsx)(ia,{label:"Fix payment issue",variant:"primary",onClick:A})]})]})})},[p,d,h,g,j,A,I]);return(0,D.jsxs)(it,{children:[(0,D.jsx)("h2",{children:j?"Manage membership":"Membership"}),L,N]})}),ib=C.ZP.div.withConfig({displayName:"styled__ConfirmationViewWrapper",componentId:"sc-iuj7de-0"})(["display:flex;flex-direction:column;> p{&:nth-child(2){margin:","px 0px 32px 0px !important;}}"],function(e){return e.theme.isMobile?16:8}),ig=(0,C.iv)(["flex-direction:column;gap:8px;"]),ix=C.ZP.div.withConfig({displayName:"styled__ConfirmationViewButtons",componentId:"sc-iuj7de-1"})(["display:flex;gap:16px;",""],function(e){return e.theme.isMobile&&ig}),iy=(0,C.iv)(["flex-direction:column;"]),iw=C.ZP.div.withConfig({displayName:"styled__ConfirmationViewHeader",componentId:"sc-iuj7de-2"})(["display:flex;justify-content:space-between;",""],function(e){return e.theme.isMobile&&iy}),iC=C.ZP.div.withConfig({displayName:"styled__ConfirmationViewHeaderLeft",componentId:"sc-iuj7de-3"})(["display:flex;flex-direction:column;"]),ij=C.ZP.div.withConfig({displayName:"styled__ConfirmationTitle",componentId:"sc-iuj7de-4"})(["",""],function(e){var t=e.$typographyVariant;return N.c[t]}),ik=C.ZP.p.withConfig({displayName:"styled__ConfirmationDescription",componentId:"sc-iuj7de-5"})(["",""],N.c.t7),iO=(0,u.memo)(function(e){var t=e.title,n=e.header,i=e.onBack,o=e.isAsync,s=e.onCancel,l=e.onConfirm,c=e.description,d=e.headerVariant,p=e.headerMarginBottom,f=e.confirmLabel,m=(0,P.bI)("isMobile"),h=m.isMobile,v=m.dispatch,b=(0,u.useState)(!1),g=b[0],x=b[1],y=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=14;break}return x(!0),e.next=4,l();case 4:n=(t=e.sent).errors,r=t.onError,i=t.message,s=t.onSuccess,i&&v(e9.bI,{message:i}),n&&r?r(n):s(),x(!1),e.next=15;break;case 14:l();case 15:case"end":return e.stop()}},e)})),[l,o,v]);return(0,D.jsxs)(ib,{children:[(0,D.jsxs)(iw,{children:[(0,D.jsxs)(iC,{children:[(0,D.jsx)(ij,{$typographyVariant:d||(h?"t1":"t2"),style:{marginBottom:p},children:t}),i&&(0,D.jsx)(E.z,{variant:"link",label:"< Back",onClick:i,style:{marginBottom:h?16:0,left:6,width:"fit-content",height:"fit-content"}})]}),n]}),(0,D.jsx)(ik,{children:c}),(0,D.jsxs)(ix,{children:[!n&&(0,D.jsx)(E.z,{loading:g,label:void 0===f?"Confirm":f,onClick:y}),s&&(0,D.jsx)(E.z,{label:"Cancel",onClick:s,variant:"secondary"})]})]})}),iP=(0,u.memo)(function(e){var t,n,i=e.onStackPop,o=e.currentGroup,s=e.onClose,l=(0,P.bI)("self").self,c=(0,d.useRouter)(),p=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.leaveGroup({groupName:o.name});case 2:return e.sent.error&&(0,Q.Lx)({message:"There was an issue with your request, please try again.",severity:"error"}),(0,ip.P3)({eventName:ip.qI.leaveGroup,userID:null==l?void 0:l.id,metadata:(0,ip.Ju)({currentGroup:o})}),e.abrupt("return",{onSuccess:function(){s(),(0,X.H5)(c)}});case 7:case"end":return e.stop()}},e)})),[o,c,s,null==l?void 0:l.id]);return(0,D.jsx)(iO,{isAsync:!0,onCancel:i,onConfirm:p,confirmLabel:"Leave this group",title:"Leave ".concat(null==o||null===(t=o.metadata)||void 0===t?void 0:t.displayName),description:"Are you sure you want to leave ".concat(null==o||null===(n=o.metadata)||void 0===n?void 0:n.displayName,"? If you rejoin, you'll have to request membership and be approved by an admin again.")})}),iI=C.ZP.div.withConfig({displayName:"styled__GroupMembershipSupportWrapper",componentId:"sc-bzse8k-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;","}a{color:",";&:hover{text-decoration:underline;}}"],function(e){var t=e.theme;return N.c[t.isMobile?"t4":"t2"]},N.c.t7,y.O9.sd1),iD=n(84236),iZ=(0,u.memo)(function(e){var t=e.onClose,n=e.onStackPop,r=(0,P.bI)("currentGroup").currentGroup,i=r.metadata.gbSupportEmail;return(0,D.jsxs)(iI,{children:[(0,D.jsx)("h2",{children:"Support"}),(0,D.jsxs)("p",{children:["If you need help, you can DM the ",(0,D.jsx)(iD.Z,{group:r,admin:!0,onClick:t,children:"community admins"})," or email ",(0,D.jsx)(Y.r,{href:"mailto:".concat(i),children:i}),".",(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),"Still need help? Email the Skool team ",(0,D.jsx)(Y.r,{href:"mailto:help@skool.com",children:"help@skool.com"}),"."]}),(0,D.jsx)(E.z,{label:"Got it",variant:"secondary",onClick:n})]})}),iS=(0,u.memo)(function(e){var t,n,i=e.onStackPop,o=e.currentGroup,s=e.onClose,l=(0,d.useRouter)(),c=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.cancelJoinGroup({groupName:o.name});case 2:return e.sent.error&&(0,Q.Lx)({message:"There was an issue with your request, please try again.",severity:"error"}),(0,ip.P3)({eventName:ip.qI.userPendingCancel,metadata:(0,ip.Ju)({currentGroup:o})}),e.abrupt("return",{onSuccess:function(){s(),(0,X.H5)(l)}});case 7:case"end":return e.stop()}},e)})),[o,l,s]);return(0,D.jsx)(iO,{isAsync:!0,onCancel:i,onConfirm:c,confirmLabel:"Cancel join request",title:"Cancel join request from ".concat(null==o||null===(t=o.metadata)||void 0===t?void 0:t.displayName),description:"Are you sure you want to cancel the join request from ".concat(null==o||null===(n=o.metadata)||void 0===n?void 0:n.displayName,"?")})}),i_=C.ZP.div.withConfig({displayName:"styled__GroupMembershipReactivateWrapper",componentId:"sc-1h0bydq-0"})(["> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 16px 0px;white-space:pre-line;","}> button{margin-top:32px;}"],function(e){var t=e.theme;return N.c[t.isMobile?"t4":"t2"]},N.c.t7),iM=(0,u.memo)(function(e){var t=e.onStackPop,n=(0,e.onGetState)("subscription"),r=n.cardBrand,i=n.cardLast4,o=n.nextPayment;return(0,D.jsxs)(i_,{children:[(0,D.jsx)("h2",{children:"Reactivated"}),(0,D.jsx)("p",{children:"Your subscription has been reactivated."}),(0,D.jsx)("p",{children:"You're currently paying ".concat((0,id.O5)(n),"/month with your ").concat(r.toUpperCase()," ending in ").concat(i,".\n      Your next billing date is ").concat(e2().unix(o).format("MMMM Do, YYYY"),".")}),(0,D.jsx)(E.z,{label:"Got it",variant:"secondary",onClick:t})]})}),iN=C.ZP.div.withConfig({displayName:"styled__GroupMembershipLeaveGroupWrapper",componentId:"sc-19o2yaj-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 16px 0px;","}> ul{padding-left:24px;","}> div{margin-top:32px;}> button{margin-top:16px;}"],function(e){var t=e.theme;return N.c[t.isMobile?"t4":"t2"]},N.c.t7,N.c.t7),iE=n(30899),iA=n(16695),iL=(0,u.memo)(function(e){var t=e.onStackPop,n=e.onClose,i=(0,u.useState)(!1),o=i[0],s=i[1],l=(0,P.bI)("currentGroup","self"),c=l.dispatch,p=l.currentGroup,m=l.self,h=(0,d.useRouter)().push,v=(0,u.useCallback)(function(e){c(e9.bI,{message:e||"There was an issue with your request, please try again",severity:"error"})},[c]),b=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,f.Z.deleteGroupSubscription({groupId:p.id});case 3:if(r=(t=e.sent).data,!(i=t.error)){e.next=10;break}return v(null===(o=i.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error),s(!1),e.abrupt("return");case 10:return e.prev=10,e.next=13,(0,iE.Cx)({token:r.token,userID:null==m?void 0:m.id,timeoutMS:6e4});case 13:(0,Q.Lx)({message:"You left the group",expireInMSec:3e3}),n(),h("/".concat(p.name,"/about")),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),v(),s(!1);case 22:case"end":return e.stop()}},e,null,[[10,18]])})),[v,p,n,m,h]);return(0,D.jsxs)(iN,{children:[(0,D.jsx)("h2",{children:"Leave ".concat(p.metadata.displayName)}),(0,D.jsx)("p",{children:"Are you sure you want to leave ".concat(p.metadata.displayName,"?")}),(0,D.jsx)("p",{style:{margin:0},children:"If you leave, your subscription will be cancelled and your billing cycle will end immediately. If you want to join again, you'll start a new subscription with a new billing cycle."}),(0,D.jsx)(iA.e,{onConfirm:b,onCancel:t,loading:o,confirmVariant:"error",confirmLabel:"Leave group",confirmTestId:"confirm-leave-group",cancelTestId:"confirm-want-to-stay",cancelLabel:"Actually, I want to stay"})]})}),iT=(0,C.iv)(["> h2{margin:0px 0px 24px 0px;","}"],N.c.t4),iF=C.ZP.div.withConfig({displayName:"styled__GroupMembershipUpdatePaymentWrapper",componentId:"sc-1lax90t-0"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 32px 0px;","}> div:nth-child(2){width:390px;max-width:100%;}> div:last-child{margin-top:32px;}",""],N.c.t2,function(e){return e.theme.isMobile&&iT}),iB=n(66271),iR=(0,u.memo)(function(e){var t=e.onStackPop,n=e.onGetState,i=(0,P.bI)("currentGroup"),o=i.currentGroup,s=i.dispatch,l=(0,u.useState)(null),c=l[0],d=l[1],p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,u.useRef)(),b=n("subscription"),g=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,v.current.getSelectedPayment();case 3:if(!(n=e.sent).stripeError){e.next=7;break}return h(!1),e.abrupt("return");case 7:return e.next=9,f.Z.updatePaymentMethodForGroup({groupId:o.id,newPaymentMethodId:n.id});case 9:if(!e.sent.error){e.next=15;break}return s(e9.bI,{message:"There was an issue with your request, please try again",severity:"error"}),h(!1),e.abrupt("return");case 15:s(e9.bI,{message:"Payment method updated"}),h(!1),t();case 18:case"end":return e.stop()}},e)})),[o,s,t]);return(0,D.jsxs)(iF,{children:[(0,D.jsx)("h2",{children:"Update payment method"}),(0,D.jsx)(iB.t,{ref:v,initialPaymentId:b.paymentMethodId,onPaymentMethodChange:d}),(0,D.jsx)(iA.e,{onConfirm:g,onCancel:t,loading:m,confirmLabel:"Save",confirmDisabled:b.paymentMethodId===(null==c?void 0:c.stripePaymentMethodId)})]})}),iz=n(74109),iG=(0,C.ZP)(E.z).withConfig({displayName:"styled__GroupMembershipCancelConfirmButton",componentId:"sc-1gvdhz3-0"})(["width:fit-content;height:fit-content;margin-bottom:16px;color:",";&:hover{color:",";}",""],y.O9.n5,y.O9.n5,N.c.t7),iU=C.ZP.div.withConfig({displayName:"styled__GroupMembershipCancelSubscriptionWrapper",componentId:"sc-1gvdhz3-1"})(["display:flex;flex-direction:column;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px;","}> ul{padding-left:24px;margin-bottom:0;","}> button{margin-top:32px;}a{color:",";&:hover{text-decoration:underline;}}"],function(e){var t=e.theme;return N.c[t.isMobile?"t4":"t2"]},N.c.t7,N.c.t7,y.O9.sd1),i$=C.ZP.div.withConfig({displayName:"styled__GroupMembershipCancelSubscriptionPriceNotice",componentId:"sc-1gvdhz3-2"})(["margin-top:16px;"," > p{margin:0;}strong{color:",";}"],N.c.t7,y.O9.e2);function iW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var iq=(0,u.memo)(function(e){var t,n,o,s=e.onStackPop,l=(0,u.useState)(!1),c=l[0],d=l[1],p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,P.bI)("currentGroup","self"),b=v.dispatch,g=v.currentGroup,x=v.self,y=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,f.Z.cancelGroupSubscription({groupId:g.id});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return b(e9.bI,{message:(null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}),h(!1),e.abrupt("return");case 10:return(0,ip.P3)({eventName:ip.qI.cancelSubscription,value:2,userID:null==x?void 0:x.id,metadata:(0,ip.Ju)({currentGroup:g})}),e.prev=11,e.next=14,(0,iE.Cx)({token:n.token,userID:null==x?void 0:x.id});case 14:b(e9._$,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iW(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.member.billingCanceled=!0,t}),h(!1),d(!0),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),b(e9.bI,{message:"There was an issue with your request, please try again",severity:"error"}),h(!1);case 23:case"end":return e.stop()}},e,null,[[11,19]])})),[b,g,x]),w=(0,u.useCallback)(function(){(0,ip.P3)({eventName:ip.qI.cancelKeepMembership,value:2,userID:null==x?void 0:x.id,metadata:(0,ip.Ju)({currentGroup:g})}),s()},[s,g,null==x?void 0:x.id]),C=(0,u.useMemo)(function(){return{borderRadius:10,marginTop:8,marginBottom:16,overflow:"hidden"}},[]),j=(0,u.useMemo)(function(){var e;return JSON.parse((null===(e=g.metadata)||void 0===e?void 0:e.retentionVideo)||"{}")},[null==g?void 0:g.metadata]),k=j.video_url,O=j.video_thumbnail,I=j.video_length_ms,Z=j.video_stream,S=(0,u.useMemo)(function(){var e,t,n,r=null!==(e=x.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mmbp?JSON.parse(x.member.metadata.mmbp):null,i=null!==(t=g.metadata)&&void 0!==t&&t.currentMBp?JSON.parse(null===(n=g.metadata)||void 0===n?void 0:n.currentMBp):null,o=r?(0,id.O5)(r):null,a=i?(0,id.O5)(i):null;return r?(0,D.jsxs)(i$,{children:[(0,D.jsx)("strong",{children:"Warning:"}),null!=i&&i.amount&&i.amount>r.amount?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{children:["You're paying ".concat(o,"/month,"),(0,D.jsx)("strong",{children:" the new price is ".concat(a,"/month")}),"."]}),(0,D.jsx)("p",{children:"If you want to join again, you'll have to pay ".concat(a,"/month.")})]}):(0,D.jsx)("p",{children:"You're paying ".concat(o,"/month. The price may increase later if you want to join again.")})]}):null},[null===(t=g.metadata)||void 0===t?void 0:t.currentMBp,null===(n=x.member)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.mmbp]);return c?(0,D.jsxs)(iU,{children:[(0,D.jsx)("h2",{children:"Membership cancelled"}),(0,D.jsx)("p",{children:"You will not be charged again."}),(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:"You will be removed from the group at the end of your billing cycle"}),(0,D.jsx)("li",{children:"If you change your mind, you can reactivate your membership"})]}),(0,D.jsx)(E.z,{label:"Got it",variant:"secondary",onClick:s})]}):(0,D.jsxs)(iU,{children:[(0,D.jsx)("h2",{children:"Cancel membership"}),(null===(o=g.metadata)||void 0===o?void 0:o.retentionVideo)&&(0,D.jsx)(iz.Z,{url:k,thumbnailUrl:O,duration:I,streamURL:Z,style:C}),(0,D.jsx)("p",{children:"Are you sure you want to cancel your ".concat(g.metadata.displayName," membership?")}),(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:"You will be removed from the group"}),(0,D.jsx)("li",{children:"You will lose access to all courses, calendar events, and members"})]}),S,(0,D.jsx)(E.z,{label:"Keep membership",variant:"secondary",onClick:w,disabled:m}),(0,D.jsx)(iG,{label:"Finish cancellation",variant:"link",onClick:y,disabled:m,disableRipple:!0})]})}),iH=C.ZP.div.withConfig({displayName:"styled__BulkErrorWrapper",componentId:"sc-17xz622-0"})(["color:",";",""],y.O9.e2,N.c.t7),iV=C.ZP.div.withConfig({displayName:"styled__GroupInviteWrapper",componentId:"sc-17xz622-1"})(["display:flex;flex-direction:column;"]),iY=(0,C.iv)(["",""],N.c.t4),iJ=C.ZP.div.withConfig({displayName:"styled__GroupInviteTitle",componentId:"sc-17xz622-2"})(["margin-bottom:8px;"," ",""],N.c.t2,function(e){return e.theme.isMobile&&iY}),iX=C.ZP.div.withConfig({displayName:"styled__GroupAdminContent",componentId:"sc-17xz622-3"})(["display:flex;flex-direction:column;gap:","px;margin-top:104px;"],function(e){return e.$isAdmin?32:24}),iK=C.ZP.a.withConfig({displayName:"styled__GroupPendingInvitesLink",componentId:"sc-17xz622-4"})(["color:",";text-decoration:none;width:fit-content;margin-bottom:16px;"," &:hover{text-decoration:underline;}"],y.O9.n5,N.c.t7),iQ=C.ZP.div.withConfig({displayName:"styled__ActionItemContent",componentId:"sc-17xz622-5"})(["display:flex;flex-direction:column;margin-right:32px;> label{margin-bottom:3px;","}> p{margin:0px;","}"],N.c.t5,N.c.t9),i0=(0,C.iv)(["flex-direction:column;gap:8px;width:auto;> div{margin-right:0;}"]),i1=(0,C.iv)(["width:475px;margin-right:32px;"]),i2=(0,C.iv)(["width:491px;margin-right:16px;"]),i9=(0,C.iv)(["align-items:flex-start;> div{","}> button{margin-top:2px;width:125px;}"],function(e){return e.$isAdmin?i1:i2}),i3=C.ZP.div.withConfig({displayName:"styled__GroupAdminEmailInput",componentId:"sc-17xz622-6"})(["display:flex;",""],function(e){return e.theme.isMobile?i0:i9}),i5=(0,C.iv)(["flex-direction:column;> div{margin-bottom:16px;}","{margin-right:0px;}"],iQ),i4=C.ZP.div.withConfig({displayName:"styled__ActionRow",componentId:"sc-17xz622-7"})(["display:flex;align-items:center;> div{display:flex;align-items:flex-start;}",""],function(e){return e.theme.isMobile&&i5}),i6=C.ZP.div.withConfig({displayName:"styled__ActionRowImage",componentId:"sc-17xz622-8"})(["height:48px;width:48px;background-position:center;background-size:cover;border-radius:10px;flex-shrink:0;margin-right:12px;"]),i8=C.ZP.div.withConfig({displayName:"styled__ActionItems",componentId:"sc-17xz622-9"})(["display:flex;flex-direction:column;gap:32px;"]),i7=C.ZP.div.withConfig({displayName:"styled__CoursePermissionsLine",componentId:"sc-17xz622-10"})([""," margin-top:16px;> span{color:",";cursor:pointer;&:hover{text-decoration:underline;}}"],N.c.t7,y.O9.sd1),oe=C.ZP.div.withConfig({displayName:"styled__GroupInviteLinkSection",componentId:"sc-17xz622-11"})(["position:relative;margin-top:24px;width:100%;input{"," color:",";}"],N.c.t5,y.O9.sd1),ot=C.ZP.div.withConfig({displayName:"styled__InviteLinkText",componentId:"sc-17xz622-12"})(["",""],N.c.t7),on=n(28506),or=C.ZP.div.withConfig({displayName:"styled__ManageCoursePermissionsDialogWrapper",componentId:"sc-1e2g2au-0"})(["",""],N.c.t7),oi=C.ZP.div.withConfig({displayName:"styled__CourseContainer",componentId:"sc-1e2g2au-1"})(["display:flex;align-items:center;> span{padding:0px 11px !important;}"]),oo=C.ZP.div.withConfig({displayName:"styled__CourseList",componentId:"sc-1e2g2au-2"})(["display:flex;flex-direction:column;margin-bottom:16px;> div{&:not(:last-child){margin-bottom:12px;}}"]),oa=C.ZP.div.withConfig({displayName:"styled__CourseContainerRight",componentId:"sc-1e2g2au-3"})(["display:flex;flex-direction:column;align-items:flex-start;"]);y.O9.sd1,N.c.t7;var os=C.ZP.div.withConfig({displayName:"styled__CoursePermissionsDescription",componentId:"sc-1e2g2au-5"})(["margin-bottom:16px;",""],N.c.t7);N.c.t5;var ol=(0,C.ZP)(on.Y).withConfig({displayName:"styled__CourseCheckbox",componentId:"sc-1e2g2au-7"})(["margin:2px 12px 0px 12px;"]),oc=n(54408),ou=(0,u.memo)(function(e){var t=e.open,n=e.onClose,r=e.courses,i=e.onSave,o=e.selectedCourses,a=void 0===o?[]:o,s=(0,u.useState)(a),l=s[0],c=s[1],d=(0,u.useRef)([]),p=(0,u.useRef)(!1),f=(0,u.useMemo)(function(){return(r||[]).filter(function(e){return 2===e.state})},[r]),m=(0,u.useMemo)(function(){return!(0,rG.isEqual)(l,a)},[l,a]);(0,u.useEffect)(function(){return p.current=!0,function(){p.current=!1}},[]);var h=(0,u.useCallback)(function(){i(l.filter(function(e){return!d.current.includes(e)})),n()},[l,n,i]),v=(0,u.useCallback)(function(e){var t=e.currency,n=e.amount,r=e.metadata,i=r.title,o=r.privacy,a=r.minAccessLevel,s=o===oc.IX,u=o===oc.xO,d=o===oc.Fs,p=o===oc.pf,f=o===oc.LC,m=o===oc.IX,h=o===oc.IX||l.includes(e.id),v=h?y.O9.sd1:y.O9.n5,b=t&&n?(0,id.O5)({currency:t,amount:n,showZeroes:!1}):"",g=JSON.parse(e.metadata.dripConfig||"{}");return(0,D.jsxs)(oi,{checkboxColor:v,children:[(0,D.jsx)(ol,{size:20,variant:"square",active:h,onClick:function(){o!==oc.IX&&(l.includes(e.id)?c(function(t){return t.filter(function(t){return t!==e.id})}):c(function(t){return[].concat((0,rP.Z)(t),[e.id])}))},disabled:m}),(0,D.jsxs)(oa,{children:[(0,D.jsx)(te.Z,{variant:"t7",children:i}),s&&(0,D.jsxs)(te.Z,{variant:"t7",color:y.O9.n5,children:[(0,D.jsx)("strong",{children:"Open: "}),"All members have access"]}),u&&(0,D.jsxs)(te.Z,{variant:"t7",color:y.O9.n5,children:[(0,D.jsx)("strong",{children:"Private: "}),"Specific members have access"]}),d&&(0,D.jsxs)(te.Z,{variant:"t7",color:y.O9.n5,children:[(0,D.jsx)("strong",{children:"Level unlock: "}),"Level ".concat(a," members have access")]}),p&&(0,D.jsxs)(te.Z,{variant:"t7",color:y.O9.n5,children:[(0,D.jsx)("strong",{children:"Buy now: "}),"Members pay ".concat(b," for access")]}),f&&(0,D.jsxs)(te.Z,{variant:"t7",color:y.O9.n5,children:[(0,D.jsx)("strong",{children:"Time unlock: "}),"Members get access at Day ".concat(null==g?void 0:g.days)]})]})]},e.id)},[l]),b=(0,u.useMemo)(function(){return(0,D.jsx)(oo,{children:f.map(v)})},[v,f]);return(0,D.jsx)(n2.T,{open:t,onClose:n,scrollable:!0,onCancel:n,confirmLabel:"Save",disabled:!m,header:"Manage access",onConfirm:h,children:(0,D.jsxs)(or,{children:[(0,D.jsx)(os,{children:"Members will have access to the following courses:"}),(0,D.jsx)(oo,{children:b})]})})}),od=n(64727),op=n(13656),of=n(47691),om="There was a problem uploading your csv. Please try again later.",oh=function(e,t){var n=e.label,r=e.description,i=e.image,o=e.cta;return(0,D.jsxs)(i4,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(i6,{style:{backgroundImage:'url("'.concat(i,'")')}}),(0,D.jsxs)(iQ,{children:[(0,D.jsx)("label",{children:n}),(0,D.jsx)("p",{children:r})]})]}),o]},t)},ov=(0,u.memo)(function(e){var t=e.self,n=e.dispatch,i=e.onStackPush,o=e.currentGroup,s=e.onTabChange,l=e.setContentLoading,c=(0,v.CP)({user:t,member:null==t?void 0:t.member,group:o}),d=(0,v.q2)({user:t,member:null==t?void 0:t.member,group:o}),p=(0,u.useState)(null),m=p[0],h=p[1],b=(0,u.useState)(""),g=b[0],x=b[1],y=(0,u.useState)(null),w=y[0],C=y[1],j=(0,u.useState)(null),k=j[0],O=j[1],P=(0,u.useState)([]),I=P[0],Z=P[1],S=(0,u.useState)([]),_=S[0],M=S[1],N=(0,eo.C1)(),A=(0,en.Z)(N,3),L=A[0],T=A[1],F=A[2],B=(0,u.useCallback)(function(e){M(e)},[]),R=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.Z.getMemberCoursePermissions({groupID:o.id,memberID:t.member.id});case 4:Z((null==(n=e.sent.data)?void 0:n.courses)||[]);case 7:case"end":return e.stop()}},e)})),[o,t,c]),z=(0,u.useMemo)(function(){return I.filter(function(e){var t;return 2===e.state&&(null===(t=e.metadata)||void 0===t?void 0:t.privacy)===oc.IX}).length+_.length},[I,_]),G=(0,u.useCallback)(function(){s("adminPlugins",!0),i("adminZapier")},[s,i]),U=(0,u.useMemo)(function(){return[{label:"Import .CSV file",description:"Invite members in bulk by uploading a .CSV file of email addresses.",image:"https://assets.skool.com/skool/7feb150c4e064cd099e78e8a3a749a76.png",cta:(0,D.jsx)(E.z,{onClick:function(){return i("adminInviteCsv")},variant:"secondary",label:"Import"})},{label:"Zapier integration",description:"Invite members by connecting Skool to over 500 tools using Zapier.",image:"https://assets.skool.com/skool/be42073f7ce84d079e3e1d9f4f6fd844.png",cta:(0,D.jsx)(E.z,{variant:"secondary",label:"Integrate",onClick:G})}]},[i,G]),$=(0,u.useCallback)(function(e){if(m&&h(null),null!==(t=e.target)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length){var t,n=e.target.files[0],s=new FileReader;s.onload=function(e){var t;if(!(null===(t=e.target)||void 0===t||null===(t=t.result)||void 0===t?void 0:t.split("\n").some(function(e){var t=(e||"").split(",");return!!t.length&&(0,H.vV)(t[0].trim())})))return h("There was a problem uploading your csv. Please check that the list contains a valid email as the first item in each line.");(0,r.Z)(a().mark(function e(){var t,r,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.createFile({fileName:n.name,contentType:n.type,contentLength:n.size});case 2:if(r=(t=e.sent).data,!t.error){e.next=8;break}return h(om),e.abrupt("return");case 8:return e.prev=8,e.next=11,(0,od.cT)({fileID:r.file.id,writeUrl:r.writeUrl,acl:r.acl,contentType:r.contentType,data:n,timeout:6e4});case 11:if(!(s=e.sent)){e.next=22;break}return e.next=15,f.Z.addBulkGroupMembers({groupName:o.id,fileId:s.id});case 15:if(!e.sent.error){e.next=20;break}return h(om),e.abrupt("return");case 20:return i("adminMembershipCsv"),e.abrupt("return");case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(8),h(om),e.abrupt("return");case 28:case"end":return e.stop()}},e,null,[[8,24]])}))()},s.readAsText(n)}},[m,o,i]),W=(0,u.useMemo)(function(){var e=(0,q.jQ)({group:o});return"".concat(window.location.protocol,"//").concat(window.location.host).concat(e.as)},[o]),V=(0,q.ZG)({group:o}),Y=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.Z.countGroupPendingInvites({groupID:o.id});case 4:C(e.sent.data.pendingInvites);case 7:case"end":return e.stop()}},e)})),[o,c]);(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,Promise.all([Y(),R()]);case 3:l(!1);case 4:case"end":return e.stop()}},e)}))()},[l,Y,R]);var J=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.Z.inviteUsersToGroup({groupName:o.id,emails:[g],courseIds:_});case 4:if(!(t=e.sent.error)){e.next=9;break}return 422===t.status&&null!=t&&null!==(r=t.data)&&void 0!==r&&null!==(r=r.fields)&&void 0!==r&&r.length&&t.data.fields[0].name.startsWith("emails.")&&O("Invalid email"),e.abrupt("return");case 9:x(""),n(e9.bI,{message:"Group invite sent"}),Y();case 12:case"end":return e.stop()}},e)})),[Y,_,o,n,g]),X=(0,u.useMemo)(function(){var e;return c?(0,D.jsxs)(i7,{children:["This member will have access to ",(0,D.jsx)("span",{onClick:T,children:"(".concat(z,"/").concat((null==o||null===(e=o.metadata)||void 0===e?void 0:e.numCourses)||0," courses)")}),"."]}):null},[T,z,o,c]),K=(0,u.useMemo)(function(){return w?(0,D.jsx)(iK,{href:V.as,children:"See ".concat(w," pending ").concat(n5()("invite",w,!1))}):null},[w,V]),Q=(0,u.useCallback)(function(e){O(null),x(e.target.value)},[]),ee=(0,u.useMemo)(function(){return d?(0,D.jsxs)(iX,{$isAdmin:c,children:[(0,D.jsx)(ot,{children:c?"These invite methods will grant instant access without purchasing or requesting membership.":"Sending an email invite will grant instant access without purchasing or requesting membership."}),(0,D.jsxs)("div",{children:[(0,D.jsxs)(i3,{$isAdmin:c,children:[(0,D.jsx)(of.I,{label:"Email address",value:g,type:"text",onChange:Q,error:k}),(0,D.jsx)(E.z,{onClick:J,label:"Send",disabled:!g})]}),X]}),c&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(i8,{children:[(0,D.jsx)("input",{type:"file",style:{display:"none"},accept:".csv",multiple:!1,onChange:$,onClick:function(e){e.target.value=null},id:"upload-csv"}),U.map(oh)]}),m&&(0,D.jsx)(iH,{children:m}),K]})]}):null},[U,m,$,d,c,g,k,J,K,X,Q]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(iV,{children:[(0,D.jsx)(iJ,{children:d?"Share your group link":"Invite"}),(0,D.jsx)(ot,{children:d?"This will take people to your group’s About page where they can purchase or request membership.":"Share a link to ".concat(o.metadata.displayName," with your friends.")}),(0,D.jsx)(oe,{children:(0,D.jsx)(op.v,{value:W})}),ee]}),L&&(0,D.jsx)(ou,{open:!0,courses:I,onSave:B,selectedCourses:_,onClose:F})]})}),ob=C.ZP.div.withConfig({displayName:"styled__ImportCsvWrapper",componentId:"sc-1dwb5sb-0"})([""]),og=C.ZP.a.withConfig({displayName:"styled__ImportCsvLink",componentId:"sc-1dwb5sb-1"})(["color:",";text-decoration:none;"," &:hover{text-decoration:underline;}"],y.O9.sd1,N.c.t7),ox=C.ZP.div.withConfig({displayName:"styled__ImportCsvTitle",componentId:"sc-1dwb5sb-2"})(["",""],N.c.t2),oy=(0,C.iv)(["margin-top:24px;"]),ow=C.ZP.div.withConfig({displayName:"styled__ImportCsvSectionTitle",componentId:"sc-1dwb5sb-3"})(["margin-top:32px;margin-bottom:8px;"," ",""],N.c.t5,function(e){return e.theme.isMobile&&oy}),oC=C.ZP.div.withConfig({displayName:"styled__ImportCsvInfo",componentId:"sc-1dwb5sb-4"})(["",""],N.c.t7),oj=C.ZP.button.withConfig({displayName:"styled__LinkButton",componentId:"sc-1dwb5sb-5"})(["color:",";text-decoration:none;border:none;background:none;padding:0px;cursor:pointer;"," &:hover{text-decoration:underline;}"],y.O9.sd1,N.c.t7),ok=(0,C.ZP)(oj).withConfig({displayName:"styled__BackButton",componentId:"sc-1dwb5sb-6"})(["",""],N.c.t11),oO=(0,C.iv)(["flex-direction:column;align-items:flex-start;"]),oP=C.ZP.div.withConfig({displayName:"styled__ImportCsvButtonRow",componentId:"sc-1dwb5sb-7"})(["display:flex;align-items:center;gap:16px;margin-top:16px;> span{","}> div{display:flex;align-items:center;gap:6px;"," > div{color:",";height:24px;width:24px;}}",""],N.c.t7,N.c.t5,y.O9.s2,function(e){return e.theme.isMobile&&oO}),oI="There was a problem uploading your csv. Please try again later.",oD=(0,u.memo)(function(e){var t,n=e.self,i=e.isMobile,o=e.currentGroup,s=e.onStackPop,l=e.onStackPush,c=(0,u.useState)(null),d=c[0],p=c[1],m=(0,u.useState)(null),h=m[0],v=m[1],b=(0,u.useState)([]),g=b[0],x=b[1],w=(0,u.useState)(!1),C=w[0],j=w[1],k=(0,u.useState)([]),O=k[0],P=k[1],I=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getMemberCoursePermissions({groupID:o.id,memberID:n.member.id});case 2:x(e.sent.data.courses||[]);case 5:case"end":return e.stop()}},e)})),[o,n]);(0,u.useEffect)(function(){I()},[I]);var Z=(0,u.useCallback)(function(e){if(d&&p(null),null!==(t=e.target)&&void 0!==t&&null!==(t=t.files)&&void 0!==t&&t.length){var t,n=e.target.files[0],r=new FileReader;r.onload=function(e){var t;if(!(null===(t=e.target)||void 0===t||null===(t=t.result)||void 0===t?void 0:t.split("\n").some(function(e){var t=(e||"").split(",");return!!t.length&&(0,H.vV)(t[0].trim())})))return p("There was a problem uploading your csv. Please check that the list contains a valid email as the first item in each line.");v(n)},r.readAsText(n)}},[d]),S=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.createFile({fileName:h.name,contentType:h.type,contentLength:h.size});case 2:if(n=(t=e.sent).data,!t.error){e.next=8;break}return p(oI),e.abrupt("return");case 8:return e.prev=8,e.next=11,(0,od.cT)({fileID:n.file.id,writeUrl:n.writeUrl,acl:n.acl,contentType:n.contentType,data:h,timeout:6e4});case 11:if(!(r=e.sent)){e.next=22;break}return e.next=15,f.Z.addBulkGroupMembers({groupName:o.id,fileId:r.id,courseIds:O});case 15:if(!e.sent.error){e.next=20;break}return p(oI),e.abrupt("return");case 20:return l("adminMembershipCsv",i),e.abrupt("return");case 22:e.next=28;break;case 24:return e.prev=24,e.t0=e.catch(8),p(oI),e.abrupt("return");case 28:case"end":return e.stop()}},e,null,[[8,24]])})),[h,o,i,l,O]),_=(0,u.useMemo)(function(){var e=(0,D.jsx)("span",{children:"You haven't uploaded a file yet."});return d&&(e=(0,D.jsx)("span",{style:{color:y.O9.e2},children:d})),h&&(e=(0,D.jsxs)("div",{children:[(0,D.jsx)(ez.J,{name:"FileExcel"}),h.name]})),(0,D.jsxs)(oP,{children:[(0,D.jsx)("input",{type:"file",style:{display:"none"},accept:".csv",multiple:!1,onChange:Z,onClick:function(e){e.target.value=null},id:"upload-csv"}),(0,D.jsx)(E.z,{label:"Upload file",variant:"secondary",htmlFor:"upload-csv"}),e]})},[Z,d,h]),M=(0,u.useMemo)(function(){return g.filter(function(e){var t;return 2===e.state&&(null===(t=e.metadata)||void 0===t?void 0:t.privacy)===oc.IX}).length+O.length},[g,O]),N=(0,u.useCallback)(function(){j(!1)},[]),A=(0,u.useCallback)(function(){j(!0)},[]),L=(0,u.useCallback)(function(e){P(e)},[]);return(0,D.jsxs)(ob,{children:[(0,D.jsx)(ox,{children:"Import .CSV file"}),(0,D.jsx)(ok,{onClick:s,children:"< Back to invite"}),(0,D.jsx)(ow,{children:"Step 1. Upload .CSV file"}),(0,D.jsxs)(oC,{children:["Upload a .CSV file of email addresses you want to invite. You can ",(0,D.jsx)(og,{href:"https://assets.skool.com/skool/3a0f6f4f0a8448439ddf61185efc1d23.csv",children:"use this template"}),"."]}),_,(0,D.jsx)(ow,{children:"Step 2. Select what courses these members will have access to"}),(0,D.jsxs)(oC,{children:["These members will have access to ",(0,D.jsx)(oj,{type:"button",onClick:A,children:"(".concat(M,"/").concat((null==o||null===(t=o.metadata)||void 0===t?void 0:t.numCourses)||0," courses)")}),"."]}),(0,D.jsx)(ow,{children:"Step 3. Send invites"}),(0,D.jsxs)(oC,{children:["By clicking “Send Invites”, we'll send an email with a unique invite link to each member so they can join your group instantly without going through the membership approval process. The email ",(0,D.jsx)(og,{href:"https://assets.skool.com/skool/da839dc5d5024d5d93d0e569985e098c.png",target:"_blank",rel:"noreferrer",children:"looks like this"}),"."]}),(0,D.jsx)(E.z,{disabled:!h,onClick:S,label:"Send invites",style:{marginTop:i?16:32}}),C&&(0,D.jsx)(ou,{open:!0,courses:g,onSave:L,selectedCourses:O,onClose:N})]})}),oZ=C.ZP.div.withConfig({displayName:"styled__CsvSuccessfulUploadWrapper",componentId:"sc-1rez64n-0"})([""]),oS=C.ZP.a.withConfig({displayName:"styled__SuccessfulUploadLink",componentId:"sc-1rez64n-1"})(["color:",";text-decoration:none;&:hover:{text-decoration:underline;}"],y.O9.sd1),o_=(0,u.memo)(function(e){var t=e.self,n=e.currentGroup,r=e.onStackPop,i=e.isMobile,o=(0,q.DW)({group:n,tab:eQ.bI.GroupMembersInvited});return(0,D.jsxs)(oZ,{children:[(0,D.jsx)(te.Z,{variant:i?"t1":"t2",style:{marginBottom:16},children:"We’re sending your invites!"}),(0,D.jsxs)(te.Z,{variant:"t7",children:["We're sending your invites in the background. We'll send an email to ",(0,D.jsx)("b",{children:t.email})," when all invitations are sent. You can ",(0,D.jsx)(oS,{href:o.as,children:"see your pending invites here."})]}),(0,D.jsx)("div",{style:{marginTop:32},children:(0,D.jsx)(E.z,{label:"Got It",variant:"secondary",onClick:r})})]})}),oM=n(10925),oN=C.ZP.div.withConfig({displayName:"styled__DropdownLabel",componentId:"sc-1jv5kqg-0"})(["",""],N.c.t10),oE=C.ZP.div.withConfig({displayName:"styled__MetricLabel",componentId:"sc-1jv5kqg-1"})(["",""],N.c.t5),oA=(0,C.iv)(["",""],N.c.t2),oL=C.ZP.div.withConfig({displayName:"styled__MetricTitle",componentId:"sc-1jv5kqg-2"})(["width:100%;text-align:center;",";",""],N.c.t1,function(e){return e.theme.isMobile&&oA}),oT=C.ZP.div.withConfig({displayName:"styled__LoaderWrapper",componentId:"sc-1jv5kqg-3"})(["width:100%;display:flex;justify-content:center;"]),oF=C.ZP.div.withConfig({displayName:"styled__Weekday",componentId:"sc-1jv5kqg-4"})(["color:",";position:absolute;user-select:none;left:0;top:","px;",";"],y.O9.n5,function(e){return e.$top},N.c.t11),oB=C.ZP.div.withConfig({displayName:"styled__Square",componentId:"sc-1jv5kqg-5"})(["height:11px;width:11px;background-color:",";margin-right:2px;border-radius:2px;"],function(e){return e.$backgroundColor}),oR=C.ZP.div.withConfig({displayName:"styled__HeatmapWrapper",componentId:"sc-1jv5kqg-6"})(["background-color:",";position:relative;padding:",";"],y.O9.n1,function(e){return e.$padding}),oz=C.ZP.div.withConfig({displayName:"styled__LegendText",componentId:"sc-1jv5kqg-7"})(["color:",";user-select:none;",";"],y.O9.n5,N.c.t11),oG=C.ZP.span.withConfig({displayName:"styled__WhatIsThisLink",componentId:"sc-1jv5kqg-8"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}",";"],y.O9.n5,N.c.t11),oU=(0,u.memo)(function(e){var t=e.data,n=e.groupCreatedAt,r=Math.max.apply(Math,(0,rP.Z)(null==t?void 0:t.counts)),i=r<15,o=(0,u.useState)([{color:"rgba(0,143,83,1)",min:i?10:Math.floor(.9*r)},{color:"rgba(0,143,83,0.7)",min:i?6:Math.floor(.5*r)},{color:"rgba(0,143,83,0.5)",min:i?3:Math.floor(.1*r)},{color:"rgba(0,143,83,0.3)",min:1},{color:y.O9.n3,min:0}]),a=o[0],s=o[1],l=(0,eo.C1)(),c=(0,en.Z)(l,3),d=c[0],p=c[1],f=c[2],m=(0,P.bI)("isMobile").isMobile,h=(0,u.useCallback)(function(e,t){if(!m){e.preventDefault();var n=prompt("Want to try a different color?",a[t].color);n&&s(function(e){var r=(0,rP.Z)(e);return r[t].color=n,r})}},[a,m]),v=(0,u.useMemo)(function(){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(oF,{$top:23,children:"Mon"},"week-mon"),(0,D.jsx)(oF,{$top:49,children:"Wed"},"week-wed"),(0,D.jsx)(oF,{$top:75,children:"Fri"},"week-fri"),(0,D.jsx)(oF,{$top:101,children:"Sun"},"week-sun")]})},[]),b=(0,u.useMemo)(function(){for(var e=[],t=function(t){var n=0===a[t].min?"No activities":"".concat(a[t].min,"+ activities");e.push((0,D.jsx)(ei.u,{content:n,placement:"bottom",children:(0,D.jsx)(oB,{$backgroundColor:a[t].color,onDoubleClick:function(e){return h(e,t)}})},t))},n=a.length-1;n>=0;n--)t(n);return(0,D.jsxs)(e8.X,{alignItems:"center",gap:8,children:[(0,D.jsx)(oz,{children:"Less"}),(0,D.jsx)(e8.X,{children:e}),(0,D.jsx)(oz,{children:"More"})]})},[a,h]);return(0,D.jsx)(ew.s,{gap:16,marginBottom:m?16:32,children:(0,D.jsxs)(oR,{$padding:"".concat(0,"px ").concat(m?13:7,"px ").concat(0,"px ").concat(m?13:40,"px"),children:[v,(0,D.jsx)(eW.x,{marginBottom:16,marginLeft:m?40:10,children:(0,D.jsx)(oM.x,{startDate:e2().utc(t.startDate),counts:t.counts,ranks:a,since:n?e2()(n).utc().startOf("day"):void 0})}),(0,D.jsxs)(e8.X,{alignItems:"center",justifyContent:"space-between",marginLeft:10,children:[(0,D.jsx)(oG,{onClick:p,children:"What is this?"}),b]}),(0,D.jsxs)(ri.u_,{size:"small",open:d,onClose:f,shouldFullscreenOnMobile:!0,children:[(0,D.jsx)(ri.xB,{style:{paddingTop:m?32:void 0},children:"Daily activity"}),(0,D.jsx)(ri.fe,{children:(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsx)("div",{children:"The daily activity chart is a visual display of your group activity on Skool over the past year. Activities that contribute towards this chart include liking posts, writing posts, commenting on posts and voting on polls."}),(0,D.jsx)("div",{children:"Activities are timestamped according to Coordinated Universal Time (UTC) rather than your local time zone."})]})})]})]})})}),o$=n(29009),oW=n(77180),oq=n(14195),oH=n(3023),oV=n(75358),oY=n(26050),oJ=n(56880),oX=C.ZP.div.withConfig({displayName:"MetricChartTooltip__MetricChartTooltipWrapper",componentId:"sc-7wloeo-0"})(["width:100%;border-radius:5px;border:1px solid ",";box-shadow:0px 1px 2px rgba(60,64,67,0.32),0px 2px 6px rgba(60,64,67,0.15),0px 1px 8px rgba(0,0,0,0.1);padding:16px;background:",";display:flex;flex-direction:column;align-items:flex-start;"],y.O9.n3,y.O9.n1),oK=function(e){var t=e.payload,n=e.formatValue;if(!(null!=t&&t.length))return null;var r=n?n(t[0].payload):t[0].payload.value.toLocaleString("en-US");return(0,D.jsxs)(oX,{children:[(0,D.jsx)(te.Z,{variant:"t11",color:y.O9.n5,children:e2()(t[0].payload.time).utc().format("MMMM DD, YYYY")}),(0,D.jsx)(te.Z,{variant:"t1",color:y.O9.n7,children:r})]})};function oQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oQ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var o1=C.ZP.div.withConfig({displayName:"MetricChart__MetricChartWrapper",componentId:"sc-1qusg4x-0"})([".recharts-cartesian-axis-line{stroke:",";}.recharts-cartesian-axis-tick-value{color:",";}.recharts-text{","}"],y.O9.n3,y.O9.n5,N.c.t11);function o2(e){var t=e.entries,n=e.width,r=e.height,i=e.cursor,o=e.syncID,a=e.lineType,s=e.hideAxisX,l=e.hideAxisY,c=e.hideGrid,d=e.hideTooltip,p=e.formatValue,f=(0,u.useRef)(!1);(0,u.useEffect)(function(){return f.current=!0,function(){f.current=!1}},[]);var m=(0,u.useMemo)(function(){var e=t.slice(),n=0;return rU().each(e,function(e,t){return 0===e.result||(n=t,!1)}),t.length&&0===t[t.length-1].result&&(t[t.length-1].result=null),e.map(function(e,t){var r=!rU().isNull(e.value)&&t>=n?Math.round(e.value):null;return o0(o0({},e),{},{label:e2()(e.time).utc().format("MMM DD"),value:r})})},[t]);return(0,D.jsx)(o1,{children:(0,D.jsx)(o$.h,{width:n,height:r,children:(0,D.jsxs)(oW.w,{data:m,margin:{top:16},cursor:i,syncId:o,children:[!c&&(0,D.jsx)(oq.q,{horizontal:!0,vertical:!1,stroke:y.O9.n3}),!s&&(0,D.jsx)(oH.K,{dataKey:"label",tickLine:!1,minTickGap:75}),!l&&(0,D.jsx)(oV.B,{orientation:"left",axisLine:!1,tickLine:!1,type:"number",tickCount:5,tickFormatter:function(e){return null==e?void 0:e.toLocaleString()}}),!d&&(0,D.jsx)(oY.u,{content:oK,isAnimationActive:!1,formatValue:p}),(0,D.jsx)(oJ.x,{type:a,dataKey:"value",stroke:y.O9.sd1,fill:y.O9.sd1,fillOpacity:.75,strokeWidth:1+3*Math.min(1,20/((null==m?void 0:m.length)||1)),dot:{strokeWidth:0,r:1},activeDot:{stroke:y.O9.n1,strokeWidth:2,r:4},isAnimationActive:!1})]})})})}o2.defaultProps={lineType:"linear"};var o9=(0,u.memo)(o2),o3="daily",o5="weekly",o4="monthly",o6={daily:"Daily active",weekly:"Weekly active",monthly:"Monthly active"};function o8(e){if(!(null!=e&&e.length))return[];for(var t=e.slice().reverse(),n=0;n<t.length;n++)if(0===t[n].value)t[n].value=null;else break;return 0===t[t.length-1].value&&(t[t.length-1].value=null),t}var o7=(0,u.memo)(function(e){var t=e.currentGroup,n=e.isMobile,i=e.setContentLoading,o=(0,u.useState)(o4),s=o[0],l=o[1],c=(0,u.useState)(null),d=c[0],p=c[1],m=(0,u.useState)(null),h=m[0],v=m[1],b=(0,u.useState)(null),g=b[0],x=b[1],y=(0,u.useState)(0),w=y[0],C=y[1],j=(0,u.useState)(!0),k=j[0],O=j[1];(0,u.useEffect)(function(){i(!0),(0,r.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getGroupAdminMetrics({groupID:t.id,timeRange:"30d",activeMembersTerm:s});case 2:p(o8((n=e.sent.data).totalMembers)),v(o8(n.activeMembers)),x(n.dailyActivities),C(n.latestActiveMembers),O(!1),i(!1);case 10:case"end":return e.stop()}},e)}))()},[t,s,i]);var P=(0,u.useMemo)(function(){if(k)return null;var e,t=d.slice(-1)[0].value||0,r=t-((null===(e=d.find(function(e){return e.value>0}))||void 0===e?void 0:e.value)||0),i=r>0?" (+".concat(r.toLocaleString("en-US"),")"):r<0?" (".concat(r.toLocaleString("en-US"),")"):"",o=t>0?Math.min(Math.round(w/t*100),100):0;return(0,D.jsxs)(oL,{children:["In the past 30 days, your group ".concat(r>0?"grew to ":r<0?"shrank to":"stayed at"," ").concat(t.toLocaleString("en-US")," members").concat(i," "),!n&&(0,D.jsx)("br",{}),"and ".concat(w.toLocaleString("en-US")," members (").concat(o,"%) were active.")]})},[n,k,d,w]),I=(0,u.useCallback)(function(e){var t=e.value,n=e.time,r=d.find(function(e){return e.time===n}).value;return r?"".concat(t.toLocaleString("en-US")," (").concat(Math.floor(t/r*100),"%)"):t},[d]),Z=(0,u.useMemo)(function(){return[{label:"Daily active",active:s===o3,onClick:function(){return l(o3)}},{label:"Weekly active",active:s===o5,onClick:function(){return l(o5)}},{label:"Monthly active",active:s===o4,onClick:function(){return l(o4)}}]},[s]),S=(0,u.useMemo)(function(){return(0,D.jsx)(oN,{children:o6[s]})},[s]);return k?(0,D.jsx)(oT,{children:(0,D.jsx)(rz.D,{})}):(0,D.jsxs)(ew.s,{gap:32,children:[P,(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsx)(oE,{children:"Total members"}),(0,D.jsx)(o9,{width:"100%",height:220,entries:d,syncID:t.id})]}),(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsxs)(e8.X,{alignItems:"center",justifyContent:"space-between",children:[(0,D.jsx)(oE,{children:"Active members"}),(0,D.jsx)(er.h_,{variant:"borderless",options:Z,label:S})]}),(0,D.jsx)(o9,{width:"100%",height:220,entries:h,formatValue:I,syncID:t.id})]}),(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsx)(oE,{children:"Daily activity"}),(0,D.jsx)(oU,{data:g,groupCreatedAt:t.createdAt})]})]})}),ae=n(42668),at=C.ZP.div.withConfig({displayName:"styled__ColorPickerWrapper",componentId:"sc-p2888m-0"})(["display:flex;gap:8px;> div:last-child{flex:1;> div:first-child{width:100%;}button{height:52px;width:100%;}}"]),an=C.ZP.div.withConfig({displayName:"styled__SelectedColor",componentId:"sc-p2888m-1"})(["width:52px;height:52px;cursor:pointer;border-radius:4px;"]),ar=C.ZP.div.withConfig({displayName:"styled__ColorPickerDropdownContent",componentId:"sc-p2888m-2"})(["padding:16px;gap:8px;display:flex;flex-direction:column;"]),ai=C.ZP.div.withConfig({displayName:"styled__ColorItem",componentId:"sc-p2888m-3"})(["height:40px;width:40px;cursor:pointer;border-radius:7px;"]),ao=C.ZP.div.withConfig({displayName:"styled__ColorItemRow",componentId:"sc-p2888m-4"})(["display:flex;gap:8px;"]),aa=(0,u.memo)(function(e){var t=e.paletteColors,n=void 0===t?y.O9.defaultGroupColors:t,r=e.value,i=e.onChange,o=(0,u.useRef)(),a=(0,u.useState)(r),s=a[0],l=a[1],c=(0,u.useState)(r?r.slice(1):""),d=c[0],p=c[1],f=(0,P.bI)("isMobile").isMobile;10!==n.length&&console.error("palette must be 10 colors"),(0,u.useEffect)(function(){i&&i(s)},[i,s]),(0,u.useEffect)(function(){var e=d.replace(/#/g,"").toUpperCase();e.match(/^[0-9A-F]{3}$/)?l("#"+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]):e.match(/^[0-9A-F]{6}$/)&&l("#"+e)},[d]);var m=(0,u.useCallback)(function(e){l(e),p(e.slice(1)),o.current.closeDropdown()},[]),h=(0,u.useCallback)(function(e){return(0,D.jsx)(ai,{style:{backgroundColor:e},onClick:function(){return m(e)}},e)},[m]),v=(0,u.useCallback)(function(e){p(e.target.value)},[]),b=(0,u.useMemo)(function(){return(0,D.jsxs)(ar,{children:[(0,D.jsx)(ao,{children:n.slice(0,5).map(h)}),(0,D.jsx)(ao,{children:n.slice(5,10).map(h)}),!f&&(0,D.jsx)(of.I,{prefix:"#",value:d,onChange:v})]})},[f,d,n,h,v]),g=(0,u.useCallback)(function(e){e.preventDefault()},[]),x=(0,u.useCallback)(function(){o.current.openDropdown()},[]);return(0,D.jsxs)(at,{children:[(0,D.jsx)(an,{style:{backgroundColor:s},onClick:x}),(0,D.jsx)(er.h_,{yOffset:8,ref:o,inputLabel:"Color",onClick:g,customContent:b,label:s||"Select color",variant:"input-floating-label"})]})}),as=function(){return(0,D.jsx)("div",{style:{width:24,height:24,borderRadius:"50%",backgroundColor:"transparent",border:"1px solid #BABABA"}})},al=function(){return(0,D.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,D.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 4C5.76 4 4 5.76 4 8C4 10.24 5.76 12 8 12C10.24 12 12 10.24 12 8C12 5.76 10.24 4 8 4ZM8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8.00069 14.4C4.48069 14.4 1.60069 11.52 1.60069 7.99999C1.60069 4.47999 4.48069 1.59999 8.00069 1.59999C11.5207 1.59999 14.4007 4.47999 14.4007 7.99999C14.4007 11.52 11.5207 14.4 8.00069 14.4Z",fill:"#3D68CF"})})},ac=n(11990),au=n(32512),ad=C.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-svsks4-0"})(["position:absolute;height:100%;width:100%;background:",";border:1px solid ",";top:0;left:0;z-index:1000;padding:8px;border-radius:10px;"],y.O9.n2,y.O9.n3),ap=C.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-svsks4-1"})(["height:100%;width:100%;border:2px dashed ",";border-radius:10px;display:flex;justify-content:center;align-items:center;"],y.O9.n3),af=C.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-svsks4-2"})(["position:relative;&:focus{outline:none;}"]),am=C.ZP.div.withConfig({displayName:"styled__RemoveImageIcon",componentId:"sc-svsks4-3"})(["position:absolute;right:4px;top:4px;visibility:",";z-index:1;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),ah=(0,C.iv)(["width:222px;height:118px;border:1px solid ",";background-color:",";"],y.O9.n3,y.O9.n2),av=C.ZP.div.withConfig({displayName:"styled__ImageWrapper",componentId:"sc-svsks4-4"})(["width:271px;height:144px;border-radius:10px;background-color:",";position:relative;display:flex;align-items:center;justify-content:center;user-select:none;cursor:pointer;&:hover ","{visibility:inherit;}",""],y.O9.n3,am,function(e){return e.theme.isMobile&&ah});function ab(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ag(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ab(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ab(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ax=(0,u.forwardRef)(function(e,t){var n=e.handleCoverFileChange,r=e.handleRemoveCoverClick,i=e.coverURL,o=e.isDragging,a=(0,P.bI)("isMobile").isMobile,s=(0,u.useMemo)(function(){return i?{backgroundImage:'url("'.concat(i,'")'),backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{}},[i]),l=(0,u.useCallback)(function(e){n({target:{files:e}})},[n]),c=(0,au.u)({onDrop:l}),d=c.getRootProps,p=c.getInputProps,f=c.isDragActive,m=d(),h=p({}),v=(0,u.useCallback)(function(e){n(e)},[n]),b=(0,u.useCallback)(function(){var e;null===(e=t.current)||void 0===e||e.click()},[t]);return(0,D.jsxs)(eW.x,{children:[(0,D.jsxs)(af,ag(ag({},m),{},{children:[(0,D.jsx)("input",ag(ag({},h),{},{type:"file",style:{display:"none"},accept:"image/*",multiple:!1,onChange:v,id:"cover-file-upload-input",ref:t})),(o||f)&&(0,D.jsx)(ad,{children:(0,D.jsx)(ap,{children:(0,D.jsx)(te.Z,{variant:"t2",color:y.O9.n5,children:"Drop here"})})}),(0,D.jsx)(av,{style:s,onClick:i?void 0:b,children:i?(0,D.jsx)(am,{children:(0,D.jsx)(E.z,{variant:"icon",icon:"Close",onClick:r,iconSize:16.66})}):(0,D.jsx)(te.Z,{variant:"t7",color:y.O9.sd1,children:"Upload"})})]})),!a&&(0,D.jsxs)(ew.s,{alignItems:"flex-start",padding:"0 16px",children:[(0,D.jsx)(te.Z,{textAlign:"center",variant:"t5",color:y.O9.n7,children:"Cover"}),(0,D.jsxs)(te.Z,{textAlign:"center",variant:"t11",color:y.O9.n5,style:{marginBottom:16},children:["Recommended:",(0,D.jsx)("span",{style:{display:"flex"},children:"".concat(ae.Rj.coverWidth,"x").concat(ae.Rj.coverHeight)})]}),(0,D.jsx)(E.z,{variant:"secondary",label:"Change",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},style:{padding:"11px 24px"}})]})]})}),ay=(0,u.memo)(ax),aw=C.ZP.div.withConfig({displayName:"styled__Dropzone",componentId:"sc-126fsev-0"})(["position:absolute;height:72px;width:100%;background:",";border:1px solid ",";top:0;left:0;z-index:1000;padding:8px;border-radius:10px;"],y.O9.n2,y.O9.n3),aC=C.ZP.div.withConfig({displayName:"styled__DropzoneInner",componentId:"sc-126fsev-1"})(["height:100%;width:100%;border:2px dashed ",";border-radius:10px;display:flex;justify-content:center;align-items:center;"],y.O9.n3),aj=C.ZP.div.withConfig({displayName:"styled__DropzoneContainer",componentId:"sc-126fsev-2"})(["position:relative;&:focus{outline:none;}"]),ak=C.ZP.div.withConfig({displayName:"styled__RemoveImageIcon",componentId:"sc-126fsev-3"})(["position:absolute;right:4px;top:4px;visibility:",";z-index:1;"],function(e){return e.theme.isMobile?"inherit":"hidden"}),aO=(0,C.iv)(["height:64px;width:64px;border:1px solid ",";background-color:",";"],y.O9.n3,y.O9.n2),aP=C.ZP.div.withConfig({displayName:"styled__ImageWrapper",componentId:"sc-126fsev-4"})(["width:72px;height:72px;border-radius:10px;background-color:",";position:relative;display:flex;align-items:center;justify-content:center;user-select:none;cursor:pointer;&:hover ","{visibility:inherit;}",""],y.O9.n3,ak,function(e){return e.theme.isMobile&&aO});function aI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aI(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var aZ=(0,u.forwardRef)(function(e,t){var n=e.handleRemoveIconClick,r=e.handleIconFileChange,i=e.iconURL,o=e.isDragging,a=(0,P.bI)("isMobile").isMobile,s=(0,u.useMemo)(function(){var e={};return i&&(e.backgroundImage='url("'.concat(i,'")'),e.backgroundPosition="center center",e.backgroundSize="cover",e.backgroundRepeat="no-repeat"),e},[i]),l=(0,u.useCallback)(function(e){r({target:{files:e}})},[r]),c=(0,au.u)({onDrop:l}),d=c.getRootProps,p=c.getInputProps,f=c.isDragActive,m=d(),h=p({}),v=(0,u.useCallback)(function(){var e;null===(e=t.current)||void 0===e||e.click()},[t]);return(0,D.jsxs)(eW.x,{children:[(0,D.jsxs)(aj,aD(aD({},m),{},{children:[(0,D.jsx)("input",aD(aD({},h),{},{type:"file",style:{display:"none"},accept:"image/*",multiple:!1,onChange:function(e){r(e)},id:"icon-file-upload-input",ref:t})),(o||f)&&(0,D.jsx)(aw,{children:(0,D.jsx)(aC,{children:(0,D.jsx)(te.Z,{variant:"t2",color:y.O9.n5,children:"Drop"})})}),(0,D.jsx)(aP,{style:s,onClick:i?void 0:v,children:i?(0,D.jsx)(ak,{children:(0,D.jsx)(E.z,{variant:"icon",icon:"Close",onClick:n,iconSize:16.66})}):(0,D.jsx)(te.Z,{variant:"t7",color:y.O9.sd1,children:"Upload"})})]})),!a&&(0,D.jsxs)(ew.s,{alignItems:"flex-start",padding:"0 16px",children:[(0,D.jsx)(te.Z,{textAlign:"center",variant:"t5",color:y.O9.n7,children:"Icon"}),(0,D.jsxs)(te.Z,{textAlign:"center",variant:"t11",color:y.O9.n5,style:{marginBottom:16},children:["Recommended:",(0,D.jsx)("span",{style:{display:"flex"},children:"".concat(ae.Rj.iconWidth,"x").concat(ae.Rj.iconHeight)})]}),(0,D.jsx)(E.z,{variant:"secondary",label:"Change",onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},style:{padding:"11px 24px"}})]})]})}),aS=n(500);y.O9.sd1;var a_=C.ZP.div.withConfig({displayName:"styled__PrivacyCard",componentId:"sc-1q4v7i5-2"})(["width:100%;padding:14px;border:none;background-color:transparent;user-select:none;cursor:pointer;min-height:",";&.selected{background-color:",";}"],function(e){return e.theme.isMobile?"auto":"110px"},y.O9.n2),aM=C.ZP.div.withConfig({displayName:"styled__PrivacyTitle",componentId:"sc-1q4v7i5-3"})(["color:",";",""],y.O9.n7,N.c.t7),aN=C.ZP.div.withConfig({displayName:"styled__PrivacyDescription",componentId:"sc-1q4v7i5-4"})(["color:",";",""],y.O9.n7,N.c.t9),aE=(0,C.ZP)(eW.x).withConfig({displayName:"styled__InputWrapper",componentId:"sc-1q4v7i5-5"})(["flex:1 1 100%;> div{width:100%;}"]),aA=(0,C.ZP)(eW.x).withConfig({displayName:"styled__ColorPickerWrapper",componentId:"sc-1q4v7i5-6"})(["flex:1 1 100%;width:",";> div{width:100%;}"],function(e){return e.theme.isMobile?void 0:"100%"}),aL=function(e,t,n,r,i,o){e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+o),e.lineTo(t+r,n+i-o),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-o),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath()};function aT(){return(aT=(0,r.Z)(a().mark(function e(t){var n,r,i,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="image/png",(r=document.createElement("canvas")).width=ae.Rj.iconWidth,r.height=ae.Rj.iconHeight,i=r.getContext("2d"),e.next=7,(0,ae.Bi)({src:t.metadata.readUrl||t.metadata.srcReadUrl});case 7:return o=e.sent,s=.23*ae.Rj.iconWidth,aL(i,0,0,ae.Rj.iconWidth,ae.Rj.iconHeight,s),i.clip(),i.drawImage(o,0,0,ae.Rj.iconWidth,ae.Rj.iconHeight),e.abrupt("return",new Promise(function(e){r.toBlob(function(t){return e(t)},n)}));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var aF=(0,u.memo)(function(e){var t,n,i,o,s,l=e.onSetState,c=e.onMutateState,p=e.hasChanges,m=e.onGetFullContentState,h=(0,P.bI)("self","currentGroup","isMobile"),v=h.self,b=h.currentGroup,x=h.isMobile,w=h.dispatch,C=(0,u.useState)(null),j=C[0],k=C[1],O=(0,u.useState)(null),I=O[0],Z=O[1],S=(0,u.useState)(null),_=S[0],M=S[1],N=(0,u.useState)(null),A=N[0],L=N[1],T=(0,u.useState)(null),F=T[0],B=T[1],R=(0,u.useState)(null),z=R[0],G=R[1],U=(0,u.useRef)(),$=(0,u.useRef)(),W=(0,d.useRouter)(),q=m(),V=q.group,Y=q.iconURL,J=q.iconImage,K=q.faviconURL,ee=q.coverURL,et=q.coverSmallURL,er=q.coverImage,ei=q.displayName,eo=void 0===ei?"":ei,ea=q.description,es=void 0===ea?"":ea,el=q.initials,ec=void 0===el?"":el,eu=q.color,ed=void 0===eu?b.metadata.color||y.O9.defaultGroupColors[Math.floor(Math.random()*y.O9.defaultGroupColors.length)]:eu,ep=q.privacy,ef=q.noOwnerDisplay;(0,u.useEffect)(function(){l({group:b,iconURL:b.metadata.logoUrl,iconImage:null,faviconURL:null,coverURL:b.metadata.logoBigUrl,coverSmallURL:b.metadata.coverSmallUrl||b.metadata.logoBigUrl,coverImage:null,displayName:b.metadata.displayName,description:b.metadata.description,initials:b.metadata.initials||(0,H.$g)(b.metadata.displayName),color:b.metadata.color||y.O9.defaultGroupColors[Math.floor(Math.random()*y.O9.defaultGroupColors.length)],privacy:parseInt(b.metadata.privacy)||0,groupNameChanges:b.metadata.nameChanges||0,groupURL:b.name,noOwnerDisplay:!!b.metadata.noOwnerDisplay})},[l,b]),(0,u.useEffect)(function(){M(null)},[eo]),(0,u.useEffect)(function(){L(null)},[es]),(0,u.useEffect)(function(){k(null)},[Y]),(0,u.useEffect)(function(){Z(null)},[ee]),(0,u.useEffect)(function(){G(null)},[ed]);var em=(0,aS.V)((0,u.useRef)({}).curraent),eh=(0,en.Z)(em,1)[0],ev=(0,u.useCallback)(function(e){e.target.value.length>2||(c({initials:e.target.value.toUpperCase()}),B(null))},[c]),eb=(0,u.useCallback)(function(e){c({faviconURL:e.metadata.readUrl||e.metadata.srcReadUrl})},[c]),eg=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t,n,r){var i,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.createFile({fileName:"".concat(r,".png"),contentType:n,contentLength:t.size,ownerID:b.id});case 2:if(o=(i=e.sent).data,!i.error){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,(0,od.cT)({fileID:o.file.id,writeUrl:o.writeUrl,acl:o.acl,contentType:o.contentType,data:t,timeout:6e4,waitToken:o.waitToken,userID:null==v?void 0:v.id});case 10:(s=e.sent)&&eb(s),e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(7),e.abrupt("return");case 17:case"end":return e.stop()}},e,null,[[7,14]])})),function(e,n,r){return t.apply(this,arguments)}),[b,v,eb]),ex=(0,u.useCallback)(function(e){c({iconImage:null}),c({iconURL:e.metadata.readUrl||e.metadata.srcReadUrl}),k(null)},[c]),ey=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return aT.apply(this,arguments)}(t);case 2:eg(e.sent,"image/png","favicon"),ex(t);case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[eg,ex]),eC=(0,u.useCallback)(function(){c({iconImage:null})},[c]),ej=(0,u.useCallback)(function(e){c({iconImage:null}),(0,Q.Lx)({message:e,severity:"error",expireInMSec:3e3})},[c]),ek=(0,u.useCallback)((i=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c({coverImage:null}),c({coverURL:t.metadata.readUrl||t.metadata.srcReadUrl}),c({coverSmallURL:t.metadata.imageMdUrl||t.metadata.readUrl||t.metadata.srcReadUrl}),Z(null);case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),[c]),eO=(0,u.useCallback)(function(){c({coverImage:null})},[c]),eP=(0,u.useCallback)(function(e){c({coverImage:null}),(0,Q.Lx)({message:e,severity:"error",expireInMSec:3e3})},[c]),eI=(0,u.useCallback)((o=(0,r.Z)(a().mark(function e(t){var n,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.target)&&void 0!==n&&null!==(n=n.files)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.target.files[0],!(0,od.ZP)(r.type)){e.next=5;break}return e.abrupt("return");case 5:if(!(r.size>g.R.attachmentImageFileMaxSize)){e.next=8;break}return w(e9.bI,{message:"File too large, ".concat(Math.round(g.R.attachmentImageFileMaxSize/1024/1024),"mb max"),severity:"error"}),e.abrupt("return");case 8:return e.next=10,(0,ae.s4)({file:r,minWidth:ae.Rj.iconWidth,minHeight:ae.Rj.iconHeight});case 10:i=e.sent,o=(0,en.Z)(i,1)[0],t.target&&(t.target.value=null),c({iconImage:{image:o,contentType:r.type}});case 15:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),[w,c]),eD=(0,u.useCallback)((s=(0,r.Z)(a().mark(function e(t){var n,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.target)&&void 0!==n&&null!==(n=n.files)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.target.files[0],!(0,od.ZP)(r.type)){e.next=5;break}return e.abrupt("return");case 5:if(!(r.size>g.R.attachmentImageFileMaxSize)){e.next=8;break}return w(e9.bI,{message:"File too large, ".concat(Math.round(g.R.attachmentImageFileMaxSize/1024/1024),"mb max"),severity:"error"}),e.abrupt("return");case 8:return e.next=10,(0,ae.s4)({file:r,minWidth:ae.Rj.coverWidth,minHeight:ae.Rj.coverHeight});case 10:i=e.sent,o=(0,en.Z)(i,1)[0],t.target&&(t.target.value=null),c({coverImage:{image:o,contentType:r.type}});case 15:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)}),[w,c]),eZ=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={groupName:V.id,displayName:eo,description:es,logo:Y,faviconUrl:K,bigLogo:ee,coverSmall:et,initials:ec,color:ed,privacy:ep,removeLogo:""===Y,removeBigLogo:""===ee,noOwnerDisplay:!!ef},e.next=3,f.Z.updateGroup(t);case 3:if(n=e.sent.error,l(t),!n){e.next=9;break}return 422===n.status&&null!=n&&null!==(r=n.data)&&void 0!==r&&null!==(r=r.fields)&&void 0!==r&&r.length?n.data.fields.forEach(function(e){switch(e.name){case"metadata.description":L(e.error);break;case"metadata.logo_url":case"metadata.favicon_url":k(e.error);break;case"metadata.logo_big_url":Z(e.error);break;case"metadata.initials":B(e.error);break;case"metadata.color":G(e.error);break;default:M(e.error)}}):M("Failed to update group settings"),e.abrupt("return");case 9:w(e9.bI,{message:"Settings updated"}),(0,X.H5)(W);case 11:case"end":return e.stop()}},e)})),[ed,et,ee,es,w,eo,K,V,Y,ec,ef,l,ep,W]),eS=(0,u.useCallback)(function(e){e.stopPropagation(),e.preventDefault(),c({iconURL:""})},[c]),e_=(0,u.useCallback)(function(e){e.stopPropagation(),e.preventDefault(),c({coverURL:""}),c({coverSmallURL:""})},[c]),eM=(0,D.jsxs)(e8.X,{alignItems:"flex-start",gap:x?8:32,marginBottom:x?32:0,children:[(0,D.jsx)(aZ,{ref:U,handleIconFileChange:eI,handleRemoveIconClick:eS,iconURL:Y,isDragging:eh}),(0,D.jsx)(ay,{ref:$,handleCoverFileChange:eD,handleRemoveCoverClick:e_,coverURL:ee,isDragging:eh})]}),eN=V&&(0,D.jsx)(ew.s,{gap:8,marginBottom:x?32:void 0,marginTop:8,children:(0,D.jsx)(of.I,{autoFocus:!x,id:"display-name",label:"Group name",type:"text",value:eo,onChange:function(e){return c({displayName:e.target.value})},error:_||"",maxCharacters:g.R.maxDisplayName})}),eE=(0,u.useCallback)(function(e){c({color:e})},[c]),eA=(0,D.jsxs)(ew.s,{gap:8,children:[(0,D.jsx)(of.I,{id:"description",label:"Group description",type:"text",value:es,onChange:function(e){return c({description:e.target.value})},error:A||"",multiline:!0,rows:3,maxCharacters:g.R.maxDescription}),(0,D.jsxs)(e8.X,{gap:x?24:8,alignItems:"flex-start",style:{overflow:"inherit"},children:[(0,D.jsx)(aE,{children:(0,D.jsx)(of.I,{id:"initials",label:"Initials",type:"text",style:{maxWidth:x?72:"100%"},value:ec,onChange:ev,error:F||""})}),(0,D.jsx)(aA,{children:(0,D.jsx)(aa,{value:ed,onChange:eE})})]})]}),eL=(0,D.jsx)(ew.s,{gap:16,marginBottom:16,children:(0,D.jsxs)(e8.X,{alignItems:"flex-start",style:{borderRadius:4,border:"1px solid ".concat(y.O9.n3)},children:[(0,D.jsx)(a_,{onClick:function(){return c({privacy:1})},className:"".concat(1===ep?"selected":""),children:(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsxs)(e8.X,{gap:8,alignItems:"center",children:[1===ep?(0,D.jsx)(al,{}):(0,D.jsx)(as,{}),(0,D.jsxs)(e8.X,{gap:8,alignItems:"center",children:[(0,D.jsx)(ez.J,{name:"Lock",style:{color:y.O9.n7,width:20,height:20}}),(0,D.jsx)(aM,{children:"Private"})]})]}),(0,D.jsx)(aN,{children:"Only members can see who's in the group and what they post. Content is hidden from search engines."})]})}),(0,D.jsx)(a_,{onClick:function(){return c({privacy:0})},className:"".concat(0===ep?"selected":""),children:(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsxs)(e8.X,{gap:8,alignItems:"center",children:[0===ep?(0,D.jsx)(al,{}):(0,D.jsx)(as,{}),(0,D.jsxs)(e8.X,{gap:8,alignItems:"center",children:[(0,D.jsx)(ez.J,{name:"Globe",style:{color:y.O9.n7,width:20,height:20}}),(0,D.jsx)(aM,{children:"Public"})]})]}),(0,D.jsx)(aN,{children:"Anyone can see who's in the group and what they post. Content is discoverable by search engines."})]})})]})}),eT=x?"auto":"100%",eF=!p||!!_||!!A||!!j||!!I||!!F||!!z||!eo||!ec||!ed||eo.length>g.R.maxDisplayName||(null==es?void 0:es.length)>g.R.maxDescription;return(0,D.jsxs)(ew.s,{gap:24,children:[(0,D.jsx)("form",{children:(0,D.jsxs)(ew.s,{gap:16,style:{width:eT,minWidth:x?void 0:eT},children:[eM,eN,(0,D.jsxs)(ew.s,{gap:16,children:[eA,eL]}),_&&(0,D.jsx)("span",{style:{color:y.O9.e2},children:_}),(0,D.jsx)(E.z,{disabled:eF,onClick:eZ,label:"Update Settings"})]})}),!!J&&(0,D.jsx)(ac.Z,{cropShape:"rect",title:"Crop new icon",minWidth:ae.Rj.iconWidth,minHeight:ae.Rj.iconHeight,uploadFileName:"icon",onCancel:eC,onError:ej,onSuccess:ey,image:J.image,imageContentType:J.contentType,open:!0,waitForPostProcessing:!0,fileInputRef:U,fileOwnerID:b.id}),!!er&&(0,D.jsx)(ac.Z,{cropShape:"rect",title:"Crop new cover photo",minWidth:ae.Rj.coverWidth,minHeight:ae.Rj.coverHeight,uploadFileName:"cover",onCancel:eO,onError:eP,onSuccess:ek,image:er.image,imageContentType:er.contentType,open:!0,waitForPostProcessing:!0,fileInputRef:$,fileOwnerID:b.id})]})}),aB=C.ZP.span.withConfig({displayName:"styled__InputPrefix",componentId:"sc-fqe9od-0"})(["color:",";margin-right:-14px;",";"],y.O9.n5,N.c.t7),aR=(0,C.iv)(["margin-bottom:inherit;padding-left:32px;width:auto;"]),az=(0,C.iv)(["margin-bottom:8px;padding-left:0;width:100%;height:40px;"]),aG=(0,C.ZP)(E.z).withConfig({displayName:"styled__UrlChangeUpdateButton",componentId:"sc-fqe9od-1"})(["margin-right:16px;",""],function(e){return e.theme.isMobile?az:aR}),aU=(0,C.iv)(["padding-left:32px;padding-right:32px;width:auto;"]),a$=(0,C.iv)(["padding-left:0;padding-right:0;width:100%;height:40px;"]),aW=(0,C.ZP)(E.z).withConfig({displayName:"styled__UrlChangeCancelButton",componentId:"sc-fqe9od-2"})(["",""],function(e){return e.theme.isMobile?a$:aU}),aq=C.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-fqe9od-3"})(["position:",";top:0;left:0;width:100%;height:100%;background:",";z-index:1;padding:",";"],function(e){return e.theme.isMobile?"relative":"absolute"},y.O9.n1,function(e){return e.theme.isMobile?"0":"32px"}),aH=(0,u.memo)(function(e){var t,n=e.dispatch,i=e.isMobile,o=e.onGetState,s=e.onStackPop,l=e.currentGroup,c=e.onMutateState,p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,u.useState)(null),b=v[0],x=v[1],w=o("groupURL"),C=(0,d.useRouter)(),j=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.renameGroup({groupId:l.id,newName:t});case 2:if(!(r=e.sent.error)){e.next=8;break}return h(!1),422===r.status?x(r.data.fields[0].error):400===r.status?x("URL cannot be used, please try again."):x("Failed to update group url"),e.abrupt("return");case 8:n(e9.bI,{message:"Group URL Updated"}),(0,X.H5)(C),s({bypassCheck:!0}),c({groupURL:t}),c({groupNameChanges:-1});case 13:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[l,n,c,s,C]);return(0,D.jsxs)(aq,{children:[!m&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(te.Z,{variant:i?"t1":"t2",style:{marginBottom:8},children:"Change URL"}),(0,D.jsx)(te.Z,{variant:"t7",style:{marginBottom:24},children:"You can only change your URL once, so be careful."}),(0,D.jsx)(of.I,{autoFocus:!i,id:"url",label:"URL",type:"text",value:w,onChange:function(e){return c({groupURL:e.target.value})},error:b,prefix:(0,D.jsx)(aB,{children:"skool.com/"}),staticLabel:!0}),(0,D.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8,marginBottom:i?24:void 0},children:(0,D.jsx)(te.Z,{variant:"t11",color:w.length>g.R.maxURLName?y.O9.e2:y.O9.n5,children:"".concat(w.length,"/").concat(g.R.maxURLName)})})]}),m&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(te.Z,{variant:"t2",style:{marginBottom:"16px"},children:"Change URL?"}),(0,D.jsxs)(te.Z,{variant:"t7",style:{marginBottom:i?24:16},children:["Are you sure you want to change your URL from ",(0,D.jsx)(te.Z,{variant:"t5",inline:!0,children:"skool.com/".concat(l.name)})," to ",(0,D.jsx)(te.Z,{variant:"t5",inline:!0,children:"skool.com/".concat(w)}),"? You can only change your URL once, so be careful."]})]}),(0,D.jsxs)("div",{style:{display:"flex",marginTop:4},children:[(0,D.jsx)(aG,{label:"Change URL",onClick:function(){m?m&&j(w):h(!0)},disabled:w.length>g.R.maxURLName||!w.length>0}),(0,D.jsx)(aW,{variant:"secondary",label:"Cancel",onClick:function(){m?h(!1):s()}})]})]})}),aV=(0,C.iv)(["flex-direction:column;align-items:flex-start;margin:24px 0px 52px 0px;gap:0px;> div{margin-left:0px;}"]),aY=C.ZP.div.withConfig({displayName:"styled__BillingActionsWrapper",componentId:"sc-oaiix1-0"})(["display:flex;align-items:center;gap:40px;margin:12px 0px 40px;> div{margin-left:32px;}",""],function(e){return e.theme.isMobile&&aV}),aJ=C.ZP.div.withConfig({displayName:"styled__ReferralWrapper",componentId:"sc-oaiix1-1"})(["display:flex;flex-direction:column;> a{margin-top:32px;}"]),aX=C.ZP.div.withConfig({displayName:"styled__AffiliateUser",componentId:"sc-oaiix1-2"})(["display:flex;align-items:center;margin-bottom:32px;> div{margin-right:12px;}> span{"," margin-left:12px;color:",";cursor:pointer;&:hover{text-decoration:underline;}}"],N.c.t7,y.O9.sd1),aK=C.ZP.div.withConfig({displayName:"styled__LinkTitle",componentId:"sc-oaiix1-3"})(["display:flex;align-items:center;margin-bottom:16px;"]),aQ=C.ZP.button.withConfig({displayName:"styled__InvoiceHistoryBack",componentId:"sc-oaiix1-4"})(["border:none;background:none;cursor:pointer;padding:0px;color:",";",""],y.O9.sd1,N.c.t11),a0=(0,C.iv)(["",""],N.c.t4),a1=C.ZP.div.withConfig({displayName:"styled__InvoiceHistoryHeader",componentId:"sc-oaiix1-5"})([""," margin:0px;",""],N.c.t2,function(e){return e.theme.isMobile&&a0}),a2=C.ZP.div.withConfig({displayName:"styled__InvoiceList",componentId:"sc-oaiix1-6"})(["margin-top:32px;"]),a9=(0,C.iv)(["flex-direction:column;"]),a3=C.ZP.div.withConfig({displayName:"styled__InvoiceListItem",componentId:"sc-oaiix1-7"})(["display:flex;"," margin-bottom:16px;",""],N.c.t7,function(e){return e.theme.isMobile&&a9}),a5=(0,C.iv)(["margin-left:0;"]),a4=C.ZP.div.withConfig({displayName:"styled__InvoiceListItemData",componentId:"sc-oaiix1-8"})(["margin-left:16px;",""],function(e){return e.theme.isMobile&&a5}),a6=C.ZP.div.withConfig({displayName:"styled__LoadingWrapper",componentId:"sc-oaiix1-9"})(["height:60px;display:flex;justify-content:center;align-items:center;"]),a8=C.ZP.div.withConfig({displayName:"styled__InvoiceListEmpty",componentId:"sc-oaiix1-10"})(["display:flex;margin-top:32px;",""],N.c.t7),a7=C.ZP.div.withConfig({displayName:"styled__ReferralLinkTitle",componentId:"sc-oaiix1-11"})([""," color:",";"],N.c.t5,y.O9.n7),se=(0,C.iv)([""," margin-bottom:16px;"],N.c.t4),st=C.ZP.div.withConfig({displayName:"styled__ReferralTitle",componentId:"sc-oaiix1-12"})([""," color:",";margin-bottom:8px;",""],N.c.t2,y.O9.n7,function(e){return e.theme.isMobile&&se}),sn=C.ZP.div.withConfig({displayName:"styled__ReferralBodyText",componentId:"sc-oaiix1-13"})([""," color:",";margin-bottom:16px;"],N.c.t7,y.O9.n7),sr=(0,C.iv)(["ul{padding-inline-start:24px;}"]),si=C.ZP.div.withConfig({displayName:"styled__CancelSubscriptionWrapper",componentId:"sc-oaiix1-14"})([""," > div:last-child{gap:16px;}",""],N.c.t7,function(e){return e.theme.isMobile&&sr}),so=C.ZP.div.withConfig({displayName:"styled__CancelSubscriptionHeader",componentId:"sc-oaiix1-15"})(["",";margin-bottom:8px;"],function(e){return e.theme.isMobile?N.c.t4:N.c.t2}),sa=(0,C.ZP)(E.z).withConfig({displayName:"styled__BillingUpdateButton",componentId:"sc-oaiix1-16"})(["height:","px;margin:",";"],function(e){return e.theme.isMobile?40:48},function(e){return e.theme.isMobile?"16px 0px 8px":0}),ss=(0,C.ZP)(E.z).withConfig({displayName:"styled__BillingCancelButton",componentId:"sc-oaiix1-17"})(["height:","px;margin-left:","px;"],function(e){return e.theme.isMobile?40:48},function(e){return e.theme.isMobile?0:16}),sl=C.ZP.div.withConfig({displayName:"styled__PaymentElementWrapper",componentId:"sc-oaiix1-18"})(["width:",";"],function(e){return e.theme.isMobile?"100%":"390px"}),sc=C.ZP.div.withConfig({displayName:"styled__UpdatePaymentMethodButtonWrapper",componentId:"sc-oaiix1-19"})(["margin-top:24px;display:flex;flex-direction:",";"],function(e){return e.theme.isMobile?"column":"row"}),su=C.ZP.div.withConfig({displayName:"styled__BillingActionButtons",componentId:"sc-oaiix1-20"})(["display:flex;flex-direction:",";"],function(e){return e.theme.isMobile?"column":"row"}),sd=C.ZP.div.withConfig({displayName:"styled__InputWrapper",componentId:"sc-oaiix1-21"})(["margin:32px 0 32px;"]),sp=(0,C.ZP)(E.z).withConfig({displayName:"styled__SubscriptionAction",componentId:"sc-oaiix1-22"})([""," color:",";svg{width:13px;}&:hover{color:",";}"],N.c.t7,y.O9.n5,y.O9.n5),sf=(0,C.ZP)(Y.r).withConfig({displayName:"styled__ContactSupport",componentId:"sc-oaiix1-23"})(["display:flex;align-items:center;gap:16px;"," color:",";margin-bottom:16px;"],N.c.t7,y.O9.n5),sm=C.ZP.div.withConfig({displayName:"styled__RedText",componentId:"sc-oaiix1-24"})(["display:flex;flex-direction:column;color:",";"],y.O9.e2);function sh(e){var t=e.invoiceName,n=e.invoiceAddress,r=e.invoiceTaxID,i=e.onChange,o=e.onCancel,a=(0,u.useState)(t),s=a[0],l=a[1],c=(0,u.useState)(n),d=c[0],p=c[1],f=(0,u.useState)(r),m=f[0],h=f[1],v=(0,P.bI)("isMobile").isMobile,b=(0,u.useCallback)(function(){i({invoiceName:s,invoiceAddress:d,invoiceTaxID:m})},[s,d,m,i]),g=(0,u.useCallback)(function(e){l(e.target.value)},[]),x=(0,u.useCallback)(function(e){p(e.target.value)},[]),y=(0,u.useCallback)(function(e){h(e.target.value)},[]);return(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsxs)(ew.s,{gap:8,children:[(0,D.jsx)(te.Z,{variant:v?"t4":"t2",children:"Customize invoice"}),(0,D.jsx)(te.Z,{variant:"t7",children:"Custom fields added here will be reflected on all past and future invoices."})]}),(0,D.jsxs)(ew.s,{gap:32,children:[(0,D.jsxs)(ew.s,{gap:12,children:[(0,D.jsx)(of.I,{id:"invoice-name",label:"Name on invoice",type:"text",value:s,onChange:g}),(0,D.jsx)(of.I,{id:"invoice-address",label:"Address",value:d,onChange:x,multiline:!0,minRows:3,maxRows:3}),(0,D.jsx)(of.I,{id:"invoice-tax-id",label:"Tax ID",type:"text",value:m,onChange:y})]}),(0,D.jsxs)(su,{children:[(0,D.jsx)(sa,{label:"Update",onClick:b}),(0,D.jsx)(ss,{label:"Cancel",variant:"secondary",onClick:o})]})]})]})}sh.defaultProps={invoiceName:"",invoiceAddress:"",invoiceTaxID:""};var sv=(0,u.memo)(sh),sb=n(23332),sg=(0,u.memo)(function(e){var t,n=e.toggleUpdatePayment,i=e.handleStatusChange,o=(0,P.bI)("currentGroup","isMobile"),s=o.currentGroup,l=o.isMobile,c=o.dispatch,d=(0,u.useRef)(),p=(0,u.useState)(null),m=p[0],h=p[1],v=(0,u.useState)(""),b=v[0],g=v[1],x=(0,u.useState)(null),y=x[0],w=x[1],C=(0,u.useState)(!1),j=C[0],k=C[1],O=(0,u.useState)(!1),I=O[0],Z=O[1];(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){var t,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updatePaymentMethod({groupID:s.id});case 2:r=(t=e.sent).data,(i=t.error)&&(c(e9.bI,{message:(null===(o=i.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}),n()),null!=r&&r.clientSecret&&h(r.clientSecret),null!=r&&r.immediate?g("paymentIntent"):g("setupIntent"),null!=r&&r.waitToken&&w(r.waitToken);case 9:case"end":return e.stop()}},e)}))()},[s.id,c,n]);var S=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Z(!0),e.prev=2,e.next=5,d.current.handleIntentConfirmation(b);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),Z(!1),e.abrupt("return");case 11:Z(!1),i({waitToken:y}),n(),c(e9.bI,{message:"Payment info updated"});case 15:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return t.apply(this,arguments)}),[c,i,b,n,y]);return(0,D.jsxs)("div",{children:[(0,D.jsx)(te.Z,{variant:l?"t4":"t2",style:{marginBottom:32},children:"Update payment info"}),(0,D.jsx)(sl,{children:(0,D.jsx)(sb.Z,{ref:d,intentClientSecret:m,paymentElementOnChange:k,isLoading:I,alignLoaderLeft:!0})}),(0,D.jsxs)(sc,{children:[(0,D.jsx)(sa,{label:"Update",onClick:S,disabled:!j,loading:I}),(0,D.jsx)(ss,{label:"Cancel",variant:"secondary",onClick:n})]})]})}),sx=(0,u.memo)(function(e){var t,n,i,o=e.setShowManageSubscriptions,s=e.toggleCancelSubscription,l=e.handleStatusChange,c=e.paymentStatus,d=(0,P.bI)("currentGroup","self"),p=d.self,m=d.currentGroup,h=d.dispatch,v=(0,u.useState)(""),b=v[0],g=v[1],x=(0,u.useState)(!1),w=x[0],C=x[1],j=(null==m||null===(t=m.metadata)||void 0===t?void 0:t.nameChanges)===-1,k=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,f.Z.cancelTrial({groupID:m.id,reason:b});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return C(!1),h(e9.bI,{message:(null===(i=r.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue with your request, please try again",severity:"error"}),e.abrupt("return");case 10:return h(e9.bI,{message:"Free trial cancelled"}),e.next=13,l({waitToken:n.token,successMessage:"Subscription cancelled"});case 13:o(!1),s();case 15:case"end":return e.stop()}},e)})),[b,m,h,l,s,o]),O=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,f.Z.cancelSubscription({groupID:m.id,reason:b});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return C(!1),h(e9.bI,{message:null!==(i=null===(c=r.data)||void 0===c||null===(c=c.fields)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.error)&&void 0!==i?i:"There was an issue cancelling, please try again.",severity:"error"}),e.abrupt("return");case 10:return e.next=12,l({waitToken:null==n?void 0:n.token,successMessage:"Subscription cancelled"});case 12:o(!1),s();case 14:case"end":return e.stop()}},e)})),[b,m,h,l,s,o]);return(0,D.jsxs)(si,{children:[(0,D.jsx)(so,{children:"Cancel Subscription"}),(0,D.jsx)("div",{children:"Are you sure you want to cancel your subscription?"}),(0,D.jsxs)("ul",{children:[(0,D.jsx)("li",{children:"Your “".concat(null==m||null===(n=m.metadata)||void 0===n?void 0:n.displayName,"” group will be archived")}),(0,D.jsx)("li",{children:"Nobody will be able to discover it, join, like, post, comment, or chat"})]}),(0,D.jsxs)(sm,{children:[(0,D.jsx)("div",{children:"⚠️ Warning ⚠️"}),(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["You will lose your custom URL ",j?(0,D.jsx)("strong",{children:"skool.com/".concat(m.name," ")}):"","and it will be available for others to claim"]}),(0,D.jsx)("li",{children:"Your payouts will be paused"}),(null==p||null===(i=p.metadata)||void 0===i?void 0:i.gamesEnabled)&&(0,D.jsx)("li",{children:"You will lose access to The Skool Games community"})]})]}),(0,D.jsxs)("div",{children:["If you need help, you can post in ",(0,D.jsx)(Y.r,{label:"Skool Community",href:"/community",style:{color:y.O9.sd1},newTab:!0})," or email ",(0,D.jsx)(Y.r,{label:"help@skool.com.",href:"mailto:help@skool.com",style:{color:y.O9.sd1}})]}),(0,D.jsx)("br",{}),(0,D.jsx)("div",{children:"Still want to cancel your subscription? Please tell us why to help us improve!"}),(0,D.jsx)(sd,{children:(0,D.jsx)(of.I,{id:"cancellation-reason",label:"I'm cancelling because...",value:b,onChange:function(e){g(e.target.value)},multiline:!0,minRows:3,maxRows:3,inputProps:{"data-testid":"cancellation-reason-input"},maxCharacters:500})}),(0,D.jsx)(iA.e,{confirmTestId:"confirm-cancel-subscription",onConfirm:"trial"===c?k:O,confirmDisabled:!b||b.length>500,loading:w,confirmVariant:"error",confirmLabel:"Cancel subscription",cancelLabel:"Keep Subscription",cancelVariant:"outlined",onCancel:s})]})}),sy=function(e){var t,n=e.toggleUnarchiveGroup,i=e.handleStatusChange,o=(0,P.bI)("currentGroup","isMobile"),s=o.currentGroup,l=o.isMobile,c=o.dispatch,d=(0,u.useRef)(),p=(0,u.useState)(null),m=p[0],h=p[1],v=(0,u.useState)(""),b=v[0],g=v[1],x=(0,u.useState)(null),y=x[0],w=x[1],C=(0,u.useState)(!1),j=C[0],k=C[1],O=(0,u.useState)(!1),I=O[0],Z=O[1];(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){var t,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.activatePayment({groupID:s.id});case 2:r=(t=e.sent).data,(i=t.error)&&(c(e9.bI,{message:(null===(o=i.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}),n()),null!=r&&r.clientSecret&&h(r.clientSecret),null!=r&&r.immediate?g("paymentIntent"):g("setupIntent"),null!=r&&r.waitToken&&w(r.waitToken);case 9:case"end":return e.stop()}},e)}))()},[s.id,c,n]);var S=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Z(!0),e.prev=2,e.next=5,d.current.handleIntentConfirmation(b);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),Z(!1),e.abrupt("return");case 11:Z(!1),i({waitToken:y}),n(),c(e9.bI,{message:"Payment info updated"});case 15:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return t.apply(this,arguments)}),[c,i,b,n,y]);return(0,D.jsxs)("div",{children:[(0,D.jsx)(te.Z,{variant:l?"t4":"t2",style:{marginBottom:32},children:"Update payment info"}),(0,D.jsx)(sl,{children:(0,D.jsx)(sb.Z,{ref:d,intentClientSecret:m,paymentElementOnChange:k,isLoading:I,alignLoaderLeft:!0})}),(0,D.jsxs)(sc,{children:[(0,D.jsx)(sa,{label:"Update",onClick:S,disabled:!j,loading:I}),(0,D.jsx)(ss,{label:"Cancel",variant:"secondary",onClick:n})]})]})},sw=(0,u.memo)(function(e){var t=e.onSetState,n=e.onStackPush,i=e.currentGroup,o=e.onGetFullContentState,s=e.isMobile,l=o()||{},c=l.affiliateUser,d=l.affiliateCode,p=l.candidateUsers,m=(0,u.useState)(!1),h=m[0],v=m[1];(0,u.useEffect)(function(){var e;(e=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,f.Z.getGroupAutoAffiliateData({groupID:i.id});case 3:t(e.sent.data),v(!1);case 7:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[i,t]);var b=(0,u.useCallback)(function(){t({candidateUsers:p,affiliateUser:c},"adminBillingReferralChange"),n("adminBillingReferralChange")},[n,t,p,c]),g=(0,u.useMemo)(function(){return h||!c?(0,D.jsx)(eW.x,{height:200,justifyContent:"center",alignItems:"center",children:(0,D.jsx)(rz.D,{})}):h||c?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(aX,{children:[(0,D.jsx)(eC.Z,{user:c,size:40,disableLink:!0}),(0,D.jsx)(ej.Z,{user:c,disableLink:!0,typographyVariant:"t5"}),(0,D.jsx)("span",{onClick:b,children:"(Change)"})]}),(0,D.jsxs)(aK,{children:[(0,D.jsx)(ez.J,{name:"LinkAlt",style:{height:16,width:16,marginRight:8,color:y.O9.n7}}),(0,D.jsx)(a7,{children:"".concat(null==c?void 0:c.firstName,"'s affiliate link")})]}),(0,D.jsx)(op.v,{value:"".concat(location.origin,"/refer?ref=").concat(d)}),(0,D.jsx)(Y.r,{href:"/settings?t=referrals",children:(0,D.jsx)(E.z,{variant:"secondary",label:"See your referrals"})})]}):null},[d,c,b,h]);return(0,D.jsxs)(aJ,{children:[(0,D.jsx)(st,{children:"Affiliates"}),(0,D.jsxs)(sn,{children:["If somebody creates a group from your group, we'll automatically pay you 40% every month. ",!s&&(0,D.jsx)("br",{}),"This way Skool becomes an income stream, not a cost. Earnings will go to this admin:"]}),g]})}),sC=C.ZP.div.withConfig({displayName:"styled__ManageSubscriptionWrapper",componentId:"sc-152y2qg-0"})(["display:flex;flex-direction:column;> h3{margin:0px 0px 8px 0px;","}> div:last-child{margin-top:24px;display:flex;flex-direction:column;gap:16px;}"],N.c.t2),sj=(0,C.ZP)(E.z).withConfig({displayName:"styled__SubscriptionAction",componentId:"sc-152y2qg-1"})([""," color:",";height:fit-content;svg{width:13px;}&:hover{color:",";}"],N.c.t7,y.O9.n5,y.O9.n5),sk=(0,u.memo)(function(e){var t=e.paymentDetails,n=e.billingCycleEnd,r=e.paymentStatus,i=e.toggleUpdatePayment,o=e.toggleInvoiceHistory,a=e.toggleCustomizeInvoice,s=e.toggleCancelSubscription;return(0,D.jsxs)(sC,{children:[(0,D.jsx)("h3",{children:"Manage subscription"}),(0,D.jsxs)(te.Z,{variant:"t7",children:["Payment method\n          ".concat(null!=t&&t.brand&&null!=t&&t.last4?"— ".concat(t.brand.toUpperCase()," ending in ").concat(t.last4,"."):"."),(0,D.jsx)("br",{}),n&&"Your ".concat("active"===r?"next billing date is":"14-day free trial ends on"," ").concat(e2()(1e3*n).format("MMMM Do, YYYY"),". $99/month plan.\n        ")]}),(0,D.jsxs)("div",{children:[(0,D.jsx)(sj,{variant:"link",label:"Update payment method",icon:"Card",iconLeft:!0,onClick:i}),(0,D.jsx)(sj,{variant:"link",label:"View payment history",onClick:o,dataTestId:"view-payment-history"}),(0,D.jsx)(sj,{variant:"link",label:"Customize invoices",onClick:a,dataTestId:"customize-invoice"}),(0,D.jsx)(sj,{variant:"link",label:"Cancel subscription",onClick:s,dataTestId:"cancel-membership"})]})]})}),sO=C.ZP.div.withConfig({displayName:"styled__ReferralChangeWrapper",componentId:"sc-i1s7w9-0"})(["display:flex;flex-direction:column;"]),sP=C.ZP.div.withConfig({displayName:"styled__UserItems",componentId:"sc-i1s7w9-1"})(["display:flex;flex-direction:column;> button{display:flex;align-items:center;margin-bottom:16px;}"]),sI=C.ZP.div.withConfig({displayName:"styled__UserItem",componentId:"sc-i1s7w9-2"})(["display:flex;align-items:center;padding-left:14px;width:100%;> div{margin-right:12px;}"]),sD=(0,C.iv)(["flex-direction:column;gap:8px;"]),sZ=C.ZP.div.withConfig({displayName:"styled__ButtonsWrapper",componentId:"sc-i1s7w9-3"})(["display:flex;margin-top:16px;gap:16px;",""],function(e){return e.isMobile&&sD}),sS=C.ZP.div.withConfig({displayName:"styled__ReferralChangeLabel",componentId:"sc-i1s7w9-4"})(["margin-bottom:32px;",""],N.c.t2),s_=(0,C.iv)(["padding-inline-start:24px;"]),sM=C.ZP.ul.withConfig({displayName:"styled__BulletItems",componentId:"sc-i1s7w9-5"})([""," > div:last-child{gap:16px;}> li:last-child,li:nth-last-child(2){color:",";}",""],N.c.t7,y.O9.e2,function(e){return e.theme.isMobile&&s_});function sN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sN(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sA=C.ZP.div.withConfig({displayName:"GroupBilling__Wrapper",componentId:"sc-1ivrmrg-0"})(["position:relative;display:flex;flex-direction:column;"]),sL=(0,u.memo)(function(e){var t,n,i=(0,P.bI)("self","currentGroup","isMobile"),o=i.self,s=i.currentGroup,l=i.isMobile,c=i.dispatch,p=e.onStackPush,m=e.onClose,h=(0,u.useState)(!1),v=h[0],b=h[1],g=(0,u.useState)(null),x=g[0],w=g[1],C=(0,u.useState)(!1),j=C[0],k=C[1],O=(0,u.useState)(!1),I=O[0],Z=O[1],S=(0,u.useState)(!1),_=S[0],M=S[1],N=(0,u.useState)(!1),A=N[0],L=N[1],T=(0,u.useState)(!1),F=T[0],B=T[1],R=(0,u.useState)(!1),z=R[0],G=R[1],U=(0,u.useState)(!1),$=U[0],W=U[1],q=(0,d.useRouter)(),H=(null==x?void 0:x.billingCycleEnd)||null,V=(null==x?void 0:x.paymentCard)||null,Y=(null==x?void 0:x.paymentStatus)||null,J=JSON.parse(V),K=(null==o||null===(n=o.member)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.billingMgr)===1;(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getGroup({groupID:s.id});case 2:w(e.sent.data.metadata),b(!0);case 6:case"end":return e.stop()}},e)}))()},[s.id]);var Q=(0,u.useCallback)(function(){B(function(e){return!e})},[]),ee=(0,u.useCallback)(function(){Z(function(e){return!e})},[]),et=(0,u.useCallback)(function(){p("adminBillingInvoiceHistory")},[p]),en=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.waitToken,r=t.successMessage,L(!0),!n){e.next=13;break}return e.prev=3,e.next=6,(0,iE.Cx)({token:n,userID:null==o?void 0:o.id,timeoutMS:6e4});case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),c(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),L(!1),e.abrupt("return");case 13:return r&&c(e9.bI,{message:r}),e.next=16,f.Z.getGroup({groupID:s.id});case 16:w(e.sent.data.metadata),L(!1),(0,X.H5)(q);case 21:case"end":return e.stop()}},e,null,[[3,8]])})),function(e){return t.apply(this,arguments)}),[s,c,q,o]),er=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.next=3,f.Z.uncancelSubscription({groupID:s.id});case 3:if(n=(t=e.sent).data,!(r=t.error)){e.next=10;break}return G(!1),c(e9.bI,{message:null!==(i=null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)&&void 0!==i?i:"There was an issue with reactivation, please try again.",severity:"error"}),e.abrupt("return");case 10:return e.next=12,en({waitToken:null==n?void 0:n.token});case 12:G(!1);case 13:case"end":return e.stop()}},e)})),[s,c,en]),ei=(0,u.useCallback)(function(){k(!j)},[j]),eo=(0,u.useCallback)(function(){M(!_)},[_]),ea=(0,u.useCallback)(function(e){var t=e.invoiceName,n=e.invoiceAddress,i=e.invoiceTaxID;(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroupInvoiceFields({groupID:s.id,name:t,address:n,taxID:i});case 2:e.sent.error?c(e9.bI,{message:"Failed to update invoice fields, please try again.",severity:"error"}):(w(function(e){return sE(sE({},e),{},{invoiceName:t,invoiceAddress:n,invoiceTaxId:i})}),c(e9.bI,{message:"Invoice info updated"}));case 5:case"end":return e.stop()}},e)}))(),B(!1)},[s,c]),es=(0,u.useCallback)(function(){B(!1)},[]),el=(0,u.useCallback)(function(){W(!0)},[]),ec=(0,u.useCallback)(function(e){m(),c(e9.ZV,{showPaymentDialog:!0}),c(e9.dO,{paymentDialogType:e})},[c,m]),eu=(0,u.useCallback)(function(){ec("update")},[ec]),ed=(0,u.useCallback)(function(){ec("unarchive")},[ec]);if(!v)return(0,D.jsx)(sA,{children:(0,D.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,D.jsx)(rz.D,{})})});if(A)return(0,D.jsxs)(sA,{children:[(0,D.jsx)("div",{style:{marginBottom:16},children:(0,D.jsx)(rz.D,{})}),(0,D.jsx)(te.Z,{variant:l?"t4":"t2",textAlign:"left",children:"One moment.."}),(0,D.jsx)(te.Z,{variant:"t7",textAlign:"left",style:{margin:"8px 0"},children:"Your billing information is being updated."})]});if(_)return(0,D.jsx)(sy,{toggleUnarchiveGroup:eo,handleStatusChange:en});if(I)return(0,D.jsx)(sx,{toggleCancelSubscription:ee,paymentStatus:Y,handleStatusChange:en,setShowManageSubscriptions:W});if(j)return(0,D.jsx)(sg,{toggleUpdatePayment:ei,handleStatusChange:en});if(F)return(0,D.jsx)(sv,{invoiceName:null==x?void 0:x.invoiceName,invoiceAddress:null==x?void 0:x.invoiceAddress,invoiceTaxID:null==x?void 0:x.invoiceTaxId,onChange:ea,onCancel:es});if($)return(0,D.jsx)(sk,{paymentStatus:Y,paymentDetails:J,billingCycleEnd:H,toggleUpdatePayment:ei,toggleInvoiceHistory:et,toggleCustomizeInvoice:Q,toggleCancelSubscription:ee});var ep="canceled"===Y,ef="archived"===Y,em="active"===Y;return ep||ef?(0,D.jsxs)(sA,{children:[(0,D.jsx)(te.Z,{variant:l?"t4":"t2",style:{marginBottom:l?16:8},children:"Billing"}),(0,D.jsx)(te.Z,{variant:"t7",children:ep?"Your subscription has been cancelled.":"Your group has been archived."}),(0,D.jsxs)(sM,{children:[ep&&(0,D.jsx)("li",{children:"Your group will be archived at the end of your current billing cycle"}),(0,D.jsx)("li",{children:"Nobody can discover it, join, like, post, comment, or chat"}),(0,D.jsx)("li",{children:"Your payouts are paused"}),(0,D.jsx)("li",{children:"Your custom URL will be available for others to claim"})]}),(0,D.jsx)(te.Z,{variant:"t7",children:"Reactivate your group to restore full functionality."}),(0,D.jsx)(E.z,{variant:"primary",label:"Reactivate Group",onClick:ep?er:ed,loading:z,style:{margin:"32px 0"}})]}):K&&"failing"===Y?(0,D.jsxs)(sA,{children:[(0,D.jsx)(te.Z,{variant:l?"t4":"t2",style:{marginBottom:"16px"},children:"Billing"}),(0,D.jsxs)(te.Z,{variant:"t7",color:y.O9.e2,children:[(0,D.jsx)("strong",{children:"Your payment has declined."}),(0,D.jsx)("br",{}),"Fix payment issue to keep your group active."]}),(0,D.jsx)(E.z,{variant:"primary",label:"Fix Payment Issue",onClick:eu,style:{marginBottom:"32px",marginTop:"16px"}}),(0,D.jsxs)("div",{children:[(0,D.jsxs)(sf,{href:"/support",underline:"hover",children:[(0,D.jsx)(ez.J,{name:"Support",size:16}),"Contact support"]}),(0,D.jsx)(sp,{variant:"link",label:"Manage subscription",onClick:el})]})]}):(0,D.jsxs)(sA,{children:[(0,D.jsx)(te.Z,{variant:l?"t4":"t2",style:{marginBottom:l?16:8},children:"Billing"}),"legacy"===Y&&(0,D.jsxs)(te.Z,{variant:"t7",children:["You have a legacy account.",(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),"Skool is now $99/month. Please update your payment info to continue using the platform."]}),(em||"trial"===Y)&&(0,D.jsxs)(te.Z,{variant:"t7",children:["Payment method\n          ".concat(null!=J&&J.brand&&null!=J&&J.last4?"— ".concat(J.brand.toUpperCase()," ending in ").concat(J.last4,"."):"."),(0,D.jsx)("br",{}),H&&"Your ".concat(em?"next billing date is":"14-day free trial ends on"," ").concat(e2()(1e3*H).format("MMMM Do, YYYY"),".\n        ")]}),(0,D.jsxs)(aY,{children:[(0,D.jsx)(sp,{variant:"link",label:"Update payment method",icon:"Card",iconLeft:!0,onClick:"legacy"!==Y?ei:eo}),(0,D.jsx)(sp,{variant:"link",label:"Manage subscription",onClick:el})]}),(0,D.jsx)(sw,sE({},e))]})}),sT=(0,u.memo)(function(e){var t=e.onGetFullContentState,n=e.onMutateState,i=e.currentGroup,o=e.onStackPop,s=e.hasChanges,l=e.isMobile,c=e.dispatch,d=t()||{},p=d.candidateUsers,m=d.affiliateUser,h=void 0===m?{}:m,v=(0,u.useCallback)(function(e){var t=(0,D.jsxs)(sI,{children:[(0,D.jsx)(eC.Z,{user:e,size:40,disableLink:!0}),(0,D.jsx)(ej.Z,{user:e,disableLink:!0,typographyVariant:"t5"})]});return(0,D.jsx)(on.Y,{label:t,onClick:function(){n({affiliateUser:e})},active:e.id===h.id},t.id)},[h,n]),b=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroupAutoAffiliateUser({groupID:i.id,userID:h.id});case 2:if(!e.sent.error){e.next=7;break}return c(e9.bI,{message:"Failed to update. Try again later.",severity:"error"}),e.abrupt("return");case 7:c(e9.bI,{message:"Admin updated."}),o({bypassCheck:!0});case 9:case"end":return e.stop()}},e)})),[h,i,c,o]);return(0,D.jsxs)(sO,{children:[(0,D.jsx)(sS,{children:"Earnings will go to"}),(0,D.jsx)(sP,{children:(void 0===p?[]:p).map(v)}),(0,D.jsxs)(sZ,{isMobile:l,children:[(0,D.jsx)(E.z,{label:"Change",disabled:!s,onClick:b}),(0,D.jsx)(E.z,{label:"Cancel",onClick:o,variant:"secondary"})]})]})}),sF=n(5565),sB=(0,u.memo)(function(e){var t=e.onStackPop,n=(0,u.useState)([]),i=n[0],o=n[1],s=(0,u.useState)(!0),l=s[0],c=s[1],d=(0,P.bI)("currentGroup").currentGroup;(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getGroupInvoices({groupID:d.id});case 2:null!=(t=e.sent.data)&&t.invoices&&o(t.invoices),c(!1);case 6:case"end":return e.stop()}},e)}))()},[d]);var p=(0,u.useCallback)(function(e,t){return(0,D.jsxs)(a3,{children:[(0,D.jsx)(Y.r,{label:e2()(e.createdAt).format("MMMM Do, YYYY"),href:"/".concat(d.name,"/--/invoices/").concat(e.invoiceNumber),newTab:!0}),(0,D.jsx)(a4,{children:"(".concat((0,sF.v)({amount:e.totalAmount/100,currency:"usd"})," — ").concat(e.paymentMethod.replace("-"," ending in "),")")})]},"".concat(t,"-invoice"))},[d]);return l?(0,D.jsx)(a6,{children:(0,D.jsx)(rz.D,{})}):(0,D.jsxs)("div",{children:[(0,D.jsx)(a1,{children:"Invoice history"}),(0,D.jsx)(aQ,{type:"button",onClick:t,children:"< Back to billing"}),!i&&(0,D.jsx)(a8,{children:"No invoice history to display"}),i&&(0,D.jsx)(a2,{children:i.map(p)})]})}),sR=n(96864),sz=n(22063),sG=C.ZP.div.withConfig({displayName:"styled__ResourceListHeaderWrapper",componentId:"sc-3i6njg-0"})(["margin-bottom:16px;"]),sU=C.ZP.div.withConfig({displayName:"styled__ResourceListHeaderLeftColumn",componentId:"sc-3i6njg-1"})(["flex:1;> h2{"," margin:0px;}"],function(e){var t=e.theme;return N.c[t.isMobile?"t4":"t2"]}),s$=(0,C.iv)(["flex-direction:column;gap:16px;"]),sW=C.ZP.div.withConfig({displayName:"styled__ResourceListHeaderTop",componentId:"sc-3i6njg-2"})(["display:flex;gap:32px;",""],function(e){return e.theme.isMobile&&s$}),sq=C.ZP.div.withConfig({displayName:"styled__ResourceListHeaderLeft",componentId:"sc-3i6njg-3"})(["flex:1;display:flex;align-items:center;> h2{"," margin:0px;}"],N.c.t2),sH=C.ZP.div.withConfig({displayName:"styled__ResourceListHeaderDescription",componentId:"sc-3i6njg-4"})([""," margin-top:8px;"],N.c.t7),sV=C.ZP.button.withConfig({displayName:"styled__BackButton",componentId:"sc-3i6njg-5"})(["border:none;background:none;cursor:pointer;padding:0px;color:",";",""],y.O9.sd1,N.c.t11),sY=["onCta","title","description","onBack","ctaLabel","ctaDisabled","extraAction","backLabel"];function sJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sJ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sK=(0,u.memo)(function(e){var t=e.onCta,n=e.title,r=e.description,i=e.onBack,o=e.ctaLabel,a=e.ctaDisabled,s=e.extraAction,l=e.backLabel,c=void 0===l?"< Back":l,d=(0,w.Z)(e,sY),p=(0,u.useMemo)(function(){if(i)return(0,D.jsx)(sV,{type:"button",onClick:i,children:c})},[c,i]),f=(0,u.useMemo)(function(){if(t)return(0,D.jsx)(E.z,{label:o,onClick:t,disabled:a})},[t,o,a]);return(0,D.jsxs)(sG,sX(sX({},d),{},{children:[(0,D.jsxs)(sW,{children:[(0,D.jsxs)(sq,{children:[(0,D.jsxs)(sU,{children:[(0,D.jsx)("h2",{children:n}),p]}),s]}),f]}),r&&(0,D.jsx)(sH,{children:r})]}))}),sQ=C.ZP.span.withConfig({displayName:"styled__PluginEnabled",componentId:"sc-otor8f-0"})(["color:",";margin-left:4px;"],function(e){var t=e.$enabled;return y.O9[t?"s2":"n5"]}),s0=["id"];function s1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var s2=(0,u.memo)(function(e){var t=e.currentGroup,n=e.onStackPush,r=e.groupMembershipQuestions,o=(0,u.useMemo)(function(){var e,o,a,s,l,c,u,d,p,f=(null==t||null===(e=t.metadata)||void 0===e?void 0:e.pluginZapierEnabled)===1,m=(null==t||null===(o=t.metadata)||void 0===o?void 0:o.pluginWebhookEnabled)===1,h=(null==t||null===(a=t.metadata)||void 0===a?void 0:a.pluginAutoDmEnabled)===1,v=(null==t||null===(s=t.metadata)||void 0===s?void 0:s.pluginMinChatLevelEnabled)===1,b=(null==t||null===(l=t.metadata)||void 0===l?void 0:l.pluginMetaConversionsEnabled)===1,g=(null==t||null===(c=t.metadata)||void 0===c?void 0:c.minPostLevel)>0,x=!(null!=t&&null!==(u=t.metadata)&&void 0!==u&&u.currentMBp)&&(null==t||null===(d=t.metadata)||void 0===d?void 0:d.membership)===0,y=!(null!=t&&null!==(p=t.metadata)&&void 0!==p&&p.currentMBp)&&r.enabled;return[{logo:"https://assets.skool.com/skool/c113aabbdd6b48c7b0c3e8bdb3cd0259.png",title:(0,D.jsxs)(D.Fragment,{children:["Membership questions ",(0,D.jsx)(sQ,{$enabled:y,children:"(".concat(y?"On":"Off",")")})]}),description:"Ask members questions when they request access to your group.",id:"adminMembershipQuestions"},{logo:"https://assets.skool.com/skool/be42073f7ce84d079e3e1d9f4f6fd844.png",title:(0,D.jsxs)(D.Fragment,{children:["Zapier integration ",(0,D.jsx)(sQ,{$enabled:f,children:"(".concat(f?"On":"Off",")")})]}),description:"Invite members, unlock courses, and send membership questions to your CRM.",id:"adminZapier"},{logo:"https://assets.skool.com/skool/e6f613ba897e4dae8b34603e525bbee8.png",title:(0,D.jsxs)(D.Fragment,{children:["Webhook ",(0,D.jsx)(sQ,{$enabled:m,children:"(".concat(m?"On":"Off",")")})]}),description:"Invite members to your group with a simple webhook.",id:"adminWebhook"},{logo:"https://assets.skool.com/skool/75903c9daef8441fac49035c0ef9dccd.png",title:(0,D.jsxs)(D.Fragment,{children:["Auto DM new members ",(0,D.jsx)(sQ,{$enabled:h,children:"(".concat(h?"On":"Off",")")})]}),description:"Send an automated DM to new group members.",id:"adminAutoDm"},{logo:"https://assets.skool.com/skool/6e824025010348ffb70bdc6110139aa6.svg",title:(0,D.jsxs)(D.Fragment,{children:["Unlock chat at Level 2 ",(0,D.jsx)(sQ,{$enabled:v,children:"(".concat(v?"On":"Off",")")})]}),description:"Reduce DM spam by requiring members to be at Level 2 to chat.",id:"adminChatUnlock"},{logo:"https://assets.skool.com/skool/f6dfb6c691b2402881aa4cf7b45fab2e.svg",title:(0,D.jsxs)(D.Fragment,{children:["Unlock posting at Level 2 ",(0,D.jsx)(sQ,{$enabled:g,children:"(".concat(g?"On":"Off",")")})]}),description:"Reduce low quality posts by requiring members to be at Level 2 to post.",id:"adminPostUnlock"},{logo:"https://assets.skool.com/skool/6beb9ac148a5495b949e4a43eefb9446.svg",title:(0,D.jsxs)(D.Fragment,{children:["Meta pixel tracking",(0,D.jsx)(sQ,{$enabled:b,children:"(".concat(b?"On":"Off",")")})]}),description:"Run FB/IG ads to your about page, retarget visitors, and track signups with precision.",id:"adminMetaPixel"},{logo:"https://assets.skool.com/skool/2a645e548618456f90615ef90f6a164f.png",title:(0,D.jsxs)(D.Fragment,{children:["Instant membership approval ",(0,D.jsx)(sQ,{$enabled:x,children:"(".concat(x?"On":"Off",")")})]}),description:"Auto-approve membership requests so members get instant access.",id:"adminAutoApprove"}].map(function(e){var t=e.id,r=(0,w.Z)(e,s0);return(0,D.jsx)(sz.L,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s1(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onEdit:function(){return n(t)}},r),t)})},[r,n,t]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(sK,{title:"Plugins"}),(0,D.jsx)(sR.D,{resources:o,noBorder:!0,customNodes:!0})]})}),s9=n(22441),s3=C.ZP.div.withConfig({displayName:"styled__MembershipWebhookWrapper",componentId:"sc-1oreufy-0"})(["> div{&:first-child{margin-bottom:32px;}}",""],N.c.t7),s5=C.ZP.a.withConfig({displayName:"styled__VideoUrl",componentId:"sc-1oreufy-1"})(["color:",";text-decoration:underline;&:hover{text-decoration:underline;}"],y.O9.sd1),s4=(0,u.memo)(function(e){var t,n=e.currentGroup,i=e.onStackPop,o=(0,u.useState)(""),s=o[0],l=o[1],c=(0,u.useRef)(!1),p=(0,d.useRouter)();(0,u.useEffect)(function(){return c.current=!0,(0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.createGroupInviteWebhook({groupName:n.id});case 2:(t=e.sent.data.id)&&c.current&&l("".concat((0,H.QH)(),"/groups/").concat(n.name,"/webhooks/").concat(t));case 5:case"end":return e.stop()}},e)}))(),function(){c.current=!1}},[n]);var m=!!(null!=n&&null!==(t=n.metadata)&&void 0!==t&&t.pluginWebhookEnabled),h=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=5;break}return e.next=3,f.Z.disableWebhook({groupID:n.id});case 3:e.next=7;break;case 5:return e.next=7,f.Z.enableWebhook({groupID:n.id});case 7:return e.next=9,(0,X.H5)(p);case 9:case"end":return e.stop()}},e)})),[m,n,p]),v=(0,u.useMemo)(function(){return(0,D.jsx)(s9.Z,{label:m?"On":"Off",onClick:h,active:m})},[m,h]);return(0,D.jsxs)(s3,{children:[(0,D.jsx)(sK,{onBack:i,title:"Webhook",backLabel:"< Back to plugins",extraAction:v}),(0,D.jsx)(op.v,{label:"Webhook URL",value:s}),(0,D.jsxs)("div",{style:{marginTop:32},children:["Append emails to the end of your webhook URL like this:","\xa0",(0,D.jsx)("b",{children:"yourwebhookurl?email=bob@gmail.com"})]}),(0,D.jsxs)("p",{children:["Emails sent to this custom webhook URL will be sent a unique invite link so they can join your group instantly without going through the membership approval process. Don’t share this link with anybody, they'll be able to invite people to your group. ",(0,D.jsx)(s5,{href:"https://vimeo.com/483886415",target:"_blank",rel:"noreferrer",children:"Video instructions"}),"."]}),(0,D.jsx)(E.z,{style:{marginTop:32},label:"Done",variant:"secondary",onClick:i})]})}),s6=C.ZP.div.withConfig({displayName:"styled__GroupPluginsAutoDmWrapper",componentId:"sc-3ngwxc-0"})(["> div:first-child{margin-bottom:32px;}display:flex;flex-direction:column;"," > p{margin:0px;}"],N.c.t7),s8=(0,C.iv)(["flex-direction:column;margin:16px 0px 32px 0px;gap:8px;"]),s7=C.ZP.div.withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-3ngwxc-1"})(["display:flex;gap:16px;margin:4px 0px 32px 0px;",""],function(e){return e.theme.isMobile&&s8}),le=C.ZP.div.withConfig({displayName:"styled__UserWrapper",componentId:"sc-3ngwxc-2"})(["margin-bottom:24px;display:flex;align-items:center;> span{margin:0px 6px 0px 12px;","}> a{color:",";cursor:pointer;&:hover{text-decoration:underline;}}"],N.c.t5,y.O9.sd1),lt=C.ZP.div.withConfig({displayName:"styled__PreviewContent",componentId:"sc-3ngwxc-3"})(["white-space:pre-line;word-break:break-word;padding-top:24px;padding-bottom:8px;"]),ln=(0,u.memo)(function(e){var t,n,i=e.currentGroup,o=e.onStackPop,s=e.onSetState,l=e.onStackPush,c=e.dispatch,p=(0,u.useRef)(!1),m=(0,d.useRouter)(),h=(0,u.useState)(!0),v=h[0],b=h[1],g=(0,u.useState)(null),x=g[0],y=g[1],w=(0,u.useState)(null),C=w[0],j=w[1],k=(0,u.useState)(null),O=k[0],P=k[1],I=(0,u.useState)([]),Z=I[0],S=I[1],_=(0,u.useState)(null),M=_[0],N=_[1];(0,u.useEffect)(function(){return p.current=!0,(0,r.Z)(a().mark(function e(){var t,n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getAutoDmSettings({groupId:i.id});case 2:n=(t=e.sent.data).autoDmMessage,r=t.autoDmUser,o=t.candidateUsers,y(r),P(n),j(n),S(o),b(!1);case 12:case"end":return e.stop()}},e)}))(),function(){p.current=!1}},[i]);var A=!!(null!=i&&null!==(t=i.metadata)&&void 0!==t&&t.pluginAutoDmEnabled),L=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=5;break}return e.next=3,f.Z.disableAutoDm({groupId:i.id});case 3:e.next=7;break;case 5:return e.next=7,f.Z.enableAutoDm({groupId:i.id});case 7:return e.next=9,(0,X.H5)(m);case 9:case"end":return e.stop()}},e)})),[A,i,m]),T=(0,u.useMemo)(function(){return(0,D.jsx)(s9.Z,{label:A?"On":"Off",onClick:L,active:A})},[A,L]),F=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateAutoDmMessage({groupId:i.id,message:O.replace(/#NAME#/gi,"#NAME#").replace(/#GROUPNAME#/gi,"#GROUPNAME#")});case 2:j(O),c(e9.bI,{message:"Auto DM updated"});case 4:case"end":return e.stop()}},e)})),[c,i,O]),B=(0,u.useCallback)(function(){s({autoDmUser:x,candidateUsers:Z},"adminAutoDmChangeUser"),l("adminAutoDmChangeUser")},[x,Z,s,l]),R=(0,u.useCallback)(function(){N(!0)},[]);return v?null:(0,D.jsxs)(s6,{children:[(0,D.jsx)(sK,{onBack:o,title:"Auto DM new members",backLabel:"< Back to plugins",extraAction:T}),(0,D.jsxs)(le,{children:[(0,D.jsx)(eC.Z,{user:x,size:40,disableLink:!0}),(0,D.jsx)("span",{children:"From: ".concat(null==x?void 0:x.firstName," ").concat(null==x?void 0:x.lastName)}),(0,D.jsx)("a",{onClick:B,children:"(Change)"})]}),(0,D.jsx)(of.I,{multiline:!0,label:"Message",value:O,minRows:5,maxRows:5,maxCharacters:300,onChange:function(e){return P(e.target.value)},inputProps:{"data-testid":"auto-dm-message-input"}}),(0,D.jsxs)(s7,{children:[(0,D.jsx)(E.z,{label:"Save",onClick:F,disabled:C===O||!O.trim()||O.length>300}),(0,D.jsx)(E.z,{label:"Preview",variant:"secondary",onClick:R,disabled:!O.trim()||O.length>300})]}),(0,D.jsx)("p",{style:{marginBottom:16},children:"Send a DM to new members to welcome them or start a conversation. The DM will be sent at a random time 1-5 mins after the member joins. If a conversation already exists, we won't send the message."}),(0,D.jsxs)("p",{children:[(0,D.jsx)("b",{children:"Tips:"})," Use #NAME# to personalize your message with the member's first name. Use #GROUPNAME# for your groups name. Keep your message short and conversational, like you'd DM a friend. The goal is to start a conversation."]}),(0,D.jsx)(n2.T,{open:M,onClose:function(){return N(!1)},onConfirm:function(){return N(!1)},confirmLabel:"Close",header:"Preview",children:(0,D.jsx)(lt,{children:null==O?void 0:O.replace(/#NAME#/gi,null==x?void 0:x.firstName).replace(/#GROUPNAME#/gi,null==i||null===(n=i.metadata)||void 0===n?void 0:n.displayName)})})]})}),lr=C.ZP.div.withConfig({displayName:"styled__ConnectMetaPixelModalWrapper",componentId:"sc-101oeda-0"})(["display:flex;flex-direction:column;padding-top:16px;"]),li=C.ZP.div.withConfig({displayName:"styled__InputLabel",componentId:"sc-101oeda-1"})(["margin-bottom:8px;",";> a{margin-left:16px;}"],N.c.t5),lo=C.ZP.div.withConfig({displayName:"styled__InputErrorWrapper",componentId:"sc-101oeda-2"})(["margin-top:16px;color:",";",""],y.O9.e2,N.c.t7),la=C.ZP.div.withConfig({displayName:"styled__InputsWrapper",componentId:"sc-101oeda-3"})(["display:flex;flex-direction:column;gap:24px;"]);function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lc=(0,u.memo)(function(e){var t=e.onClose,n=(0,u.useState)(""),i=n[0],o=n[1],s=(0,u.useState)(""),l=s[0],c=s[1],p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,P.bI)("currentGroup"),b=v.currentGroup,g=v.dispatch,x=(0,d.useRouter)(),y=(0,u.useCallback)(function(e){h(!1),o(e.target.value)},[]),w=(0,u.useCallback)(function(e){h(!1),c(e.target.value)},[]),C=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.connectMetaPixel({groupId:b.id,accessToken:l,pixelId:i});case 2:if(!(n=e.sent.error)){e.next=10;break}if(422!==n.status){e.next=8;break}return h(!0),e.abrupt("return");case 8:return g(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 10:(0,X.H5)(x),t();case 12:case"end":return e.stop()}},e)})),[t,b,l,i,x,g]);return(0,D.jsx)(n2.T,ll(ll({header:"Connect Meta pixel",onConfirm:C,confirmLabel:"Connect"},e),{},{children:(0,D.jsxs)(lr,{children:[(0,D.jsxs)(la,{children:[(0,D.jsxs)(ew.s,{children:[(0,D.jsxs)(li,{children:[(0,D.jsx)("span",{children:"Meta pixel ID"}),(0,D.jsx)(Y.r,{label:"where can I find this?",href:"https://help.skool.com/article/163-how-to-set-up-facebook-pixel-tracking",newTab:!0})]}),(0,D.jsx)(of.I,{staticLabel:!0,placeholder:"Meta pixel ID",onChange:y,value:i})]}),(0,D.jsxs)(ew.s,{children:[(0,D.jsxs)(li,{children:[(0,D.jsx)("span",{children:"Access token"}),(0,D.jsx)(Y.r,{label:"where can I find this?",href:"https://help.skool.com/article/163-how-to-set-up-facebook-pixel-tracking",newTab:!0})]}),(0,D.jsx)(of.I,{staticLabel:!0,placeholder:"Access token",onChange:w,value:l})]})]}),m&&(0,D.jsx)(lo,{children:"Invalid pixel ID or access token"})]})}))}),lu=C.ZP.div.withConfig({displayName:"styled__GroupPluginsMetaPixelWrapper",componentId:"sc-1jt9z93-0"})(["display:flex;flex-direction:column;"]),ld=C.ZP.div.withConfig({displayName:"styled__PixelDescription",componentId:"sc-1jt9z93-1"})(["margin:16px 0px 32px 0px;",""],N.c.t7),lp=C.ZP.div.withConfig({displayName:"styled__InfoLabel",componentId:"sc-1jt9z93-2"})(["margin-top:40px;",""],N.c.t5),lf=C.ZP.ol.withConfig({displayName:"styled__InfoItems",componentId:"sc-1jt9z93-3"})(["display:flex;flex-direction:column;gap:24px;padding-inline-start:24px;margin:16px 0px;",""],N.c.t7),lm=C.ZP.div.withConfig({displayName:"styled__LearnMore",componentId:"sc-1jt9z93-4"})(["",""],N.c.t7),lh=(0,C.iv)(["flex-direction:column;align-items:flex-start;> div{&:last-child{> div{button{margin-left:0px;}}}}"]),lv=C.ZP.div.withConfig({displayName:"styled__PixelIdWrapper",componentId:"sc-1jt9z93-5"})(["display:flex;align-items:center;> div{&:first-child{"," > span{color:",";}}&:last-child{display:flex;> button{margin-left:16px;height:fit-content;","}> div{button{color:",";margin-left:16px;height:fit-content;","}}}}",""],N.c.t5,y.O9.s2,N.c.t7,y.O9.e2,N.c.t7,function(e){return e.theme.isMobile&&lh}),lb=(0,u.memo)(function(e){var t,n,i=e.currentGroup,o=e.onStackPop,s=e.dispatch,l=(0,d.useRouter)(),c=(0,eo.C1)(),p=(0,en.Z)(c,3),m=p[0],h=p[1],v=p[2],b=(0,u.useState)(null),g=b[0],x=b[1],w=(0,u.useState)(null),C=w[0],j=w[1],k=(null==i||null===(t=i.metadata)||void 0===t?void 0:t.pluginMetaConversionsEnabled)===1,O=(null==i||null===(n=i.metadata)||void 0===n?void 0:n.metaConversionsStatus)==="success",P=(0,u.useRef)(!1);(0,u.useEffect)(function(){P.current=!0},[]);var I=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getMetaPixelId({groupId:i.id});case 2:if(n=(t=e.sent).data,!t.error){e.next=8;break}return s(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 8:x(n);case 9:case"end":return e.stop()}},e)})),[i,s]);(0,u.useEffect)(function(){O&&I()},[O,I]);var Z=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.testMetaPixel({groupId:i.id});case 2:j(e.sent.error?"Failed":"Success"),setTimeout(function(){P.current&&j(null)},2e3);case 6:case"end":return e.stop()}},e)})),[i]),S=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=10;break}return e.next=3,f.Z.disableMetaPixel({groupId:i.id});case 3:if(!e.sent.error){e.next=8;break}return s(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 8:e.next=17;break;case 10:return e.next=12,f.Z.enableMetaPixel({groupId:i.id});case 12:if(!e.sent.error){e.next=17;break}return s(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 17:return e.next=19,(0,X.H5)(l);case 19:case"end":return e.stop()}},e)})),[k,i,l,s]),_=(0,u.useMemo)(function(){return(0,D.jsx)(s9.Z,{label:k?"On":"Off",onClick:S,active:k})},[k,S]),M=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.disconnectMetaPixel({groupId:i.id});case 2:if(!e.sent.error){e.next=7;break}return s(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 7:(0,X.H5)(l);case 8:case"end":return e.stop()}},e)})),[i,s,l]),N=(0,u.useMemo)(function(){if(!C)return(0,D.jsx)(E.z,{variant:"link",label:"Test",onClick:Z});var e="Success"===C?y.O9.s2:y.O9.e2;return(0,D.jsx)(te.Z,{variant:"t7",color:e,style:{marginLeft:16},children:C})},[C,Z]),A=(0,u.useMemo)(function(){return O?g?(0,D.jsxs)(lv,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{children:"Meta pixel ID: "}),(0,D.jsx)("span",{children:"".concat(g," (connected)")})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)(tP.s,{header:"Disconnect Meta pixel?",content:"Are you sure you want to disconnect your Meta pixel? You'll need the Pixel ID and Access token to connect it again. FB/IG tracking will end immediately.",onConfirm:M,confirmLabel:"Disconnect",children:(0,D.jsx)(E.z,{variant:"link",label:"Disconnect"})}),N]})]}):void 0:(0,D.jsx)(E.z,{label:"Connect Meta Pixel",onClick:h,disabled:!k})},[O,k,h,M,g,N]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(lu,{children:[(0,D.jsx)(sK,{onBack:o,title:"Meta pixel tracking",backLabel:"< Back to plugins",extraAction:_}),(0,D.jsx)(ld,{children:"Run FB/IG ads to your about page, retarget visitors, and track signups with precision."}),A,(0,D.jsx)(lp,{children:"We send these events server-side:"}),(0,D.jsxs)(lf,{children:[(0,D.jsxs)("li",{children:["Page view — when somebody visits your about page",(0,D.jsx)("br",{}),"Use this to build a custom audience for retargeting campaigns."]}),(0,D.jsxs)("li",{children:["Complete registration — when somebody requests access to your group",(0,D.jsx)("br",{}),"Use this as a conversion event to optimize for if your group is free."]}),(0,D.jsxs)("li",{children:["Purchase — when somebody joins your group as a paid member",(0,D.jsx)("br",{}),"Use this as a conversion event to optimize for if your group is paid."]})]}),(0,D.jsxs)(lm,{children:["Learn more about this feature in our ",(0,D.jsx)(Y.r,{newTab:!0,label:"help center",href:"https://help.skool.com/article/163-how-to-set-up-facebook-pixel-tracking"}),"."]})]}),(0,D.jsx)(lc,{open:m,onClose:v,onCancel:v})]})}),lg=n(66117),lx=C.ZP.div.withConfig({displayName:"styled__GroupPluginsAutoDmChangeUserWrapper",componentId:"sc-1cpjnvq-0"})(["> h4{margin:0px 0px 32px 0px;","}"],function(e){var t=e.theme;return N.c[t.isMobile?"t4":"t2"]}),ly=C.ZP.div.withConfig({displayName:"styled__UserWrapper",componentId:"sc-1cpjnvq-1"})(["display:flex;align-items:center;gap:12px;margin-left:8px;",""],N.c.t5),lw=(0,C.iv)(["flex-direction:column;gap:8px;"]),lC=C.ZP.div.withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-1cpjnvq-2"})(["display:flex;gap:16px;margin:32px 0px;",""],function(e){return e.theme.isMobile&&lw}),lj=(0,u.memo)(function(e){var t=e.onGetFullContentState,n=e.currentGroup,i=e.onStackPop,o=e.dispatch,s=t()||{},l=s.candidateUsers,c=void 0===l?[]:l,d=s.autoDmUser,p=void 0===d?{}:d,m=(0,u.useState)(!1),h=m[0],v=m[1],b=(0,u.useState)(null==p?void 0:p.id),g=b[0],x=b[1],y=(0,u.useMemo)(function(){return c.map(function(e){return{key:e.id,label:(0,D.jsxs)(ly,{children:[(0,D.jsx)(eC.Z,{user:e,size:40,disableLink:!0}),"".concat(e.firstName," ").concat(e.lastName)]})}},[])},[c]),w=(0,u.useCallback)(function(e){x(e)},[]),C=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,f.Z.updateAutoDmUser({groupId:n.id,userId:g});case 3:o(e9.bI,{message:"Admin updated"}),i(),v(!1);case 6:case"end":return e.stop()}},e)})),[n,o,i,g]);return(0,D.jsxs)(lx,{children:[(0,D.jsx)("h4",{children:"Message will send from"}),(0,D.jsx)(lg.M,{gap:16,value:g,alignItems:"center",options:y,onChange:w}),(0,D.jsxs)(lC,{children:[(0,D.jsx)(E.z,{loading:h,label:"Change",onClick:C,disabled:p.id===g}),(0,D.jsx)(E.z,{label:"Cancel",variant:"secondary",onClick:i})]})]})}),lk=(0,u.memo)(function(e){var t,n=e.onStackPop,i=(0,P.bI)("currentGroup").currentGroup,o=(0,d.useRouter)(),s=(null==i||null===(t=i.metadata)||void 0===t?void 0:t.minPostLevel)>0,l=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=5;break}return e.next=3,f.Z.disableGroupMinPostLevel({groupId:null==i?void 0:i.id});case 3:e.next=7;break;case 5:return e.next=7,f.Z.enableGroupMinPostLevel({groupId:null==i?void 0:i.id});case 7:return e.next=9,(0,X.H5)(o);case 9:case"end":return e.stop()}},e)})),[null==i?void 0:i.id,s,o]),c=(0,u.useMemo)(function(){return(0,D.jsx)(s9.Z,{label:s?"On":"Off",onClick:l,active:s})},[s,l]);return(0,D.jsxs)(ew.s,{children:[(0,D.jsx)(sK,{onBack:n,title:"Unlock posting at Level 2",backLabel:"< Back to plugins",extraAction:c}),(0,D.jsxs)(ew.s,{gap:16,marginTop:16,children:[(0,D.jsx)(te.Z,{variant:"t7",children:"When groups get big, sometimes people post low quality content. Unlocking posting at Level 2 requires members to earn the right to post by first contributing to the community with comments."}),(0,D.jsx)(te.Z,{variant:"t7",children:"We don’t recommend turning this on for small groups where low quality posts isn’t an issue. It might restrict communication and decrease engagement."})]}),(0,D.jsx)(eW.x,{marginTop:32,children:(0,D.jsx)(E.z,{label:"Done",variant:"secondary",onClick:n})})]})}),lO=C.ZP.div.withConfig({displayName:"styled__GroupZapierWrapper",componentId:"sc-g6u5um-0"})(["display:flex;flex-direction:column;"]),lP=C.ZP.div.withConfig({displayName:"styled__GroupZapierUseCases",componentId:"sc-g6u5um-1"})(["display:flex;flex-direction:column;margin:32px 0px;"," a{color:",";}"],N.c.t7,y.O9.sd1),lI=C.ZP.button.withConfig({displayName:"styled__NewApiKeyButton",componentId:"sc-g6u5um-2"})(["border:none;padding:0px;background:none;width:fit-content;cursor:pointer;margin-top:8px;color:",";",";"],y.O9.sd1,N.c.t11),lD=C.ZP.div.withConfig({displayName:"styled__StepsHeader",componentId:"sc-g6u5um-3"})(["margin-bottom:16px;",""],N.c.t5),lZ=[{info:"Trigger: Send paid members name and email to your CRM",link:"https://help.skool.com/article/162-zapier-new-paid-member-info-to-crm"},{info:"Trigger: Send membership questions/answers to your CRM",link:"https://help.skool.com/article/59-zapier-for-membership-questions"},{info:"Action: Invite a member to your group",link:"https://help.skool.com/article/60-zapier-invite-with-custom-course-access"},{info:"Action: Unlock a course for a member in your group",link:"https://help.skool.com/article/61-zapier-unlock-a-course-for-a-member-in-your-group"}],lS=(0,u.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,i=e.onStackPush,o=(0,P.bI)("isMobile","self"),s=o.dispatch,l=o.isMobile,c=o.self,p=(0,d.useRouter)(),m=(0,u.useMemo)(function(){var e,t;return null!=n&&null!==(e=n.metadata)&&void 0!==e&&!!e.apiKeys&&JSON.parse(null==n||null===(t=n.metadata)||void 0===t?void 0:t.apiKeys)[0].token},[n]);(0,u.useEffect)(function(){(0,r.Z)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&null!==(t=n.metadata)&&void 0!==t&&t.apiKeys){e.next=17;break}return e.next=3,f.Z.rotateApiKey({groupID:n.id});case 3:return r=e.sent.data.token,e.prev=6,e.next=9,(0,iE.Cx)({token:r,userID:null==c?void 0:c.id});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),s(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),e.abrupt("return");case 15:return e.next=17,(0,X.H5)(p);case 17:case"end":return e.stop()}},e,null,[[6,11]])}))()},[n,p,s,c]);var h=(0,u.useMemo)(function(){var e;return(null==n||null===(e=n.metadata)||void 0===e?void 0:e.pluginZapierEnabled)===1},[n]),v=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=5;break}return e.next=3,f.Z.disableZapier({groupID:n.id});case 3:e.next=7;break;case 5:return e.next=7,f.Z.enableZapier({groupID:n.id});case 7:return e.next=9,(0,X.H5)(p);case 9:case"end":return e.stop()}},e)})),[h,n,p]),b=(0,u.useMemo)(function(){return(0,D.jsx)(s9.Z,{label:h?"On":"Off",onClick:v,active:h})},[h,v]),g=(0,u.useCallback)(function(){i("adminZapierRotate",l)},[i,l]);return(0,D.jsxs)(lO,{children:[(0,D.jsx)(sK,{onBack:t,title:"Zapier integration",backLabel:"< Back to plugins",extraAction:b,style:{marginBottom:32}}),(0,D.jsx)(op.v,{label:"API Key",value:m||"Generating API Key, please wait...",isHiddenValue:!0}),(0,D.jsx)(lI,{type:"button",onClick:g,children:"Generate new API key"}),(0,D.jsxs)(lP,{children:[(0,D.jsx)(lD,{children:"Four use cases:"}),lZ.map(function(e,t){var n=e.info,r=e.link;return(0,D.jsxs)("span",{children:["".concat(t+1,". ").concat(n)," ",r&&(0,D.jsx)(Y.r,{href:r,newTab:!0,children:"(instructions here)"})]},t)})]}),(0,D.jsx)(E.z,{label:"Done",onClick:t,variant:"secondary",style:{marginBottom:32}})]})}),l_=(0,u.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,i=(0,P.bI)("self"),o=i.self,s=i.dispatch,l=(0,d.useRouter)(),c=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.rotateApiKey({groupID:n.id});case 2:return i=e.sent.data.token,e.prev=5,e.next=8,(0,iE.Cx)({token:i,userID:null==o?void 0:o.id});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),s(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),e.abrupt("return");case 14:return e.abrupt("return",{message:"New API key generated",onSuccess:function(){var e=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({bypassCheck:!0}),e.next=3,(0,X.H5)(l);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 15:case"end":return e.stop()}},e,null,[[5,10]])})),[n,s,l,t,o]);return(0,D.jsx)(iO,{isAsync:!0,onCancel:t,title:"Generate new API key?",confirmLabel:"Generate",onConfirm:c,description:"Are you sure you want to generate a new API key? Integrations with the existing key will no longer work."})}),lM=C.ZP.div.withConfig({displayName:"styled__GroupMembershipQuestionsWrapper",componentId:"sc-1q8e50x-0"})(["display:flex;flex-direction:column;"]);function lN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lN(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lA={text:"Text box",email:"Email address",options:"Multiple choice"},lL=(0,u.memo)(function(e){var t,n,i=e.isMobile,o=e.onSetState,s=e.onStackPop,l=e.onStackPush,c=e.currentGroup,d=e.groupMembershipQuestions,p=e.setGroupMembershipQuestions,m=d.enabled,h=d.questions,v=(0,u.useMemo)(function(){var e;return!!(null!=c&&null!==(e=c.metadata)&&void 0!==e&&e.currentMBp)},[c]),b=(0,u.useCallback)(function(){o({reloadOnClose:!0},"root")},[o]),g=(0,u.useCallback)(function(){o({question:"",type:"text",options:["",""]},"adminMembershipQuestionsAdd"),l("adminMembershipQuestionsAdd",i)},[l,i,o]),x=(0,u.useCallback)(function(e){o(lE(lE({},h[e]),{},{idx:e}),"adminMembershipQuestionsEdit"),l("adminMembershipQuestionsEdit",i)},[o,l,h,i]),y=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.moveSurveyQuestion({groupID:c.id,from:t,to:t-1});case 2:p(function(e){var n=(0,rP.Z)(e.questions),r=n[t];return n[t]=n[t-1],n[t-1]=r,lE(lE({},e),{},{questions:n})}),b();case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[c,b,p]),w=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.moveSurveyQuestion({groupID:c.id,from:t,to:t+1});case 2:p(function(e){var n=(0,rP.Z)(e.questions),r=n[t];return n[t]=n[t+1],n[t+1]=r,lE(lE({},e),{},{questions:n})}),b();case 4:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[c,b,p]),C=(0,u.useCallback)(function(e){o(lE({idx:e},h[e]),"adminMembershipQuestionsDelete"),l("adminMembershipQuestionsDelete",i)},[h,l,o,i]),j=(0,u.useMemo)(function(){return h.map(function(e,t){return(0,u.createElement)(sz.L,lE(lE({},e),{},{key:e.question,title:e.question,description:lA[e.type],onEdit:function(){return x(t)},menuItems:[{disabled:0===t,label:"Move up",onClick:function(){y(t)},testid:"manage-question-dropdown-move-up"},{disabled:t===h.length-1,label:"Move down",onClick:function(){w(t)},testid:"manage-question-dropdown-move-down"},{label:"Delete",onClick:function(){C(t)},testid:"manage-question-dropdown-delete"}]}))})},[h,C,w,y,x]),k=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=6;break}return e.next=3,f.Z.disableSurvey({groupID:c.id});case 3:p(function(e){return lE(lE({},e),{},{enabled:!1})}),e.next=9;break;case 6:return e.next=8,f.Z.enableSurvey({groupID:c.id});case 8:p(function(e){return lE(lE({},e),{},{enabled:!0})});case 9:b();case 10:case"end":return e.stop()}},e)})),[b,c,p,m]),O=(0,u.useMemo)(function(){return v?(0,D.jsx)(ei.u,{content:"Only applies to free groups",children:(0,D.jsx)(s9.Z,{label:"Off",disabled:!0,active:!1})}):(0,D.jsx)(s9.Z,{label:m?"On":"Off",onClick:k,active:m})},[m,k,v]);return(0,D.jsxs)(lM,{children:[(0,D.jsx)(sK,{onBack:s,title:"Membership questions",backLabel:"< Back to plugins",ctaLabel:"Add question",onCta:g,ctaDisabled:3===h.length,extraAction:O}),(0,D.jsx)(sR.D,{customNodes:!0,resources:j,noResourceView:"Ask members up to three questions when they request to join your group. Only admins and moderators will see the answers. You can send new members questions/answers to your CRM using Zapier. Only applies to free groups."})]})}),lT=C.ZP.form.withConfig({displayName:"styled__GeneratedFormWrapper",componentId:"sc-6h5g90-0"})(["display:flex;flex-direction:column;"]),lF=C.ZP.div.withConfig({displayName:"styled__GeneratedFormFields",componentId:"sc-6h5g90-1"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:","px;> *{&:not(:last-child){margin-bottom:16px !important;}}"],function(e){return e.$bottomMargin}),lB=(0,C.iv)(["flex-direction:column;"]),lR=C.ZP.div.withConfig({displayName:"styled__GeneratedFormButtons",componentId:"sc-6h5g90-2"})(["display:flex;",""],function(e){return e.theme.isMobile&&lB}),lz=C.ZP.div.withConfig({displayName:"styled__GeneratedFormRow",componentId:"sc-6h5g90-3"})(["display:flex;align-items:flex-end;> *{&:not(:last-child){margin-right:16px;}}"]),lG=C.ZP.div.withConfig({displayName:"styled__GeneratedFormHeader",componentId:"sc-6h5g90-4"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:","px;"],function(e){return e.theme.isMobile?16:24}),lU=C.ZP.div.withConfig({displayName:"styled__GeneratedFormTitle",componentId:"sc-6h5g90-5"})(["",""],function(e){return e.theme.isMobile?N.c.t1:N.c.t2}),l$=C.ZP.div.withConfig({displayName:"styled__GeneratedFormNoteWrapper",componentId:"sc-6h5g90-6"})(["display:flex;flex-direction:column;> span{margin:8px 0px 0px 14px;color:",";","}"],y.O9.n5,N.c.t11),lW=(0,C.ZP)(er.h_).withConfig({displayName:"styled__GeneratedFormDropdownMenu",componentId:"sc-6h5g90-7"})(["width:100%;> button{width:100%;}"]),lq=C.ZP.div.withConfig({displayName:"styled__OptionsInputWrapper",componentId:"sc-10hx1fk-0"})(["display:flex;flex-direction:column;"]),lH=C.ZP.div.withConfig({displayName:"styled__OptionItemsWrapper",componentId:"sc-10hx1fk-1"})(["display:flex;flex-direction:column;margin-bottom:16px;gap:8px;"]),lV=C.ZP.div.withConfig({displayName:"styled__OptionItem",componentId:"sc-10hx1fk-2"})(["display:flex;align-items:center;gap:8px;> div{&:first-child{width:100%;}}> button{flex-shrink:0;}"]),lY=C.ZP.div.withConfig({displayName:"styled__RemovePlaceholder",componentId:"sc-10hx1fk-3"})(["height:40px;width:40px;"]),lJ=["value","maxOptions","onChange"];function lX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lX(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lQ={optionsInput:(0,u.memo)(function(e){var t=e.value,n=void 0===t?["","",""]:t,r=e.maxOptions,i=void 0===r?10:r,o=e.onChange,a=(0,w.Z)(e,lJ),s=(0,u.useCallback)(function(e){var t=e.e,r=e.idx;o((0,H.DM)({arr:n,idx:r,value:t.target.value}))},[o,n]),l=(0,u.useCallback)(function(e){var t=e.idx;o((0,H.Rw)({arr:n,idx:t}))},[o,n]),c=(0,u.useCallback)(function(e,t){var r=2===n.length;return(0,D.jsxs)(lV,{children:[(0,D.jsx)(of.I,{value:e,staticLabel:!0,onChange:function(e){return s({e:e,idx:t})},placeholder:"Option ".concat(t+1)}),r?(0,D.jsx)(lY,{}):(0,D.jsx)(E.z,{onClick:function(){return l({idx:t})},variant:"icon-borderless",icon:"Close",iconSize:16})]},t)},[s,l,n]),d=(0,u.useMemo)(function(){return n.length===i},[n,i]),p=(0,u.useCallback)(function(){o([].concat((0,rP.Z)(n),[""]))},[o,n]);return(0,D.jsxs)(lq,lK(lK({},a),{},{children:[(0,D.jsx)(lH,{children:n.map(c)}),(0,D.jsx)(E.z,{label:"Add Option",variant:"secondary",onClick:p,disabled:d})]}))}),dropdownMenu:lW,input:of.I};function l0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l0(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l2=(0,u.memo)(function(e){var t,n=e.title,o=e.fields,s=e.onSubmit,l=e.onCancel,c=e.formState,d=e.submitLabel,p=void 0===d?"Submit":d,f=e.buttonMargin,m=e.bottomMargin,h=e.onFormChange,v=e.headerFields,b=e.submitDisabled,g=(0,u.useState)(!1),x=g[0],y=g[1],w=(0,u.useState)({}),C=w[0],j=w[1],k=(0,P.bI)("isMobile"),O=k.isMobile,I=k.dispatch,Z=(0,u.useCallback)(function(e,t){var n=e.key,r=e.note,o=e.component,a=e.props,s=e.rows;if("row"===o)return(0,D.jsx)(lz,{children:s.map(Z)},t);var l=lQ[o],u={key:n,value:c[n],error:C[n],helperText:C[n]},d={};switch(o){case"input":d.height=a.height,u.onChange=function(e){return h((0,i.Z)({},n,e.target.value))};break;case"dropdownMenu":u.fitButton=!0,u.variant="input-floating-label",u.options=a.menuItems.map(function(e){return e.value===c[n]&&(u.label=e.label),l1(l1({},e),{},{active:e.value===c[n],onClick:function(){return h((0,i.Z)({},n,e.value))}})});break;case"optionsInput":u.onChange=function(e){return h((0,i.Z)({},n,e))};break;default:u.onChange=function(e){return h((0,i.Z)({},n,e.target.value))}}var p=(0,D.jsx)(l,l1(l1({style:d},u),a));return r?(0,D.jsxs)(l$,{children:[p,(0,D.jsx)("span",{children:r})]}):p},[C,c,h]),S=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){var n,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),y(!0),e.next=4,s();case 4:r=(n=e.sent).errors,i=n.message,o=n.onSuccess,i&&I(e9.bI,{message:i}),r?j(r):o(),y(!1);case 11:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[s,I]),_=(0,u.useMemo)(function(){if(n)return(0,D.jsxs)(lG,{children:[(0,D.jsx)(lU,{children:n}),(0,D.jsx)("div",{children:v&&v.map(Z)})]})},[n,Z,v]),M=(0,u.useMemo)(function(){return(0,D.jsxs)(lR,{children:[(0,D.jsx)(eW.x,{margin:f||(O?"16px 0px 8px":"0px"),children:(0,D.jsx)(E.z,{type:"submit",label:p,loading:x,disabled:b})}),(0,D.jsx)(eW.x,{marginLeft:O?0:16,children:(0,D.jsx)(E.z,{label:"Cancel",onClick:l,variant:"secondary"})})]})},[O,b,x,p,l,f]);return(0,D.jsxs)(lT,{onSubmit:S,children:[_,(0,D.jsx)(lF,{$bottomMargin:void 0===m?32:m,children:o.map(Z)}),M]})}),l9=function(e){var t=e.optionsSelected,n=[{key:"question",component:"input",props:{label:"Question",maxCharacters:150,"data-testid":"group-member-questions-question"}},{key:"type",component:"dropdownMenu",note:t?"Members can only select 1 answer for multiple choice questions!":"",props:{inputLabel:"Response type",menuItems:[{label:"Text box",value:"text"},{label:"Multiple choice",value:"options"},{label:"Email address",value:"email",disabled:e.emailDisabled}],"data-testid":"group-member-questions-type"}}];return t&&n.push({key:"options",component:"optionsInput",props:{maxOptions:4,"data-testid":"group-member-questions-options"}}),n};function l3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l3(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l4=(0,u.memo)(function(e){var t,n=e.isMobile,i=e.onStackPop,o=e.onSetState,s=e.currentGroup,l=e.onMutateState,c=e.onGetFullContentState,d=e.groupMembershipQuestions,p=e.setGroupMembershipQuestions,m=c(),h=l9({optionsSelected:"options"===m.type,emailDisabled:null==d||null===(t=d.questions)||void 0===t?void 0:t.some(function(e){return"email"===e.type})}),v=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,l,u,d,m;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=c()).question,r=t.type,l=t.options,e.next=3,f.Z.addSurveyQuestion({groupID:s.id,question:n,type:r,options:"options"===r?l:void 0});case 3:if(!(u=e.sent.error)||!(422===u.status&&null!=u&&null!==(d=u.data)&&void 0!==d&&null!==(d=d.fields)&&void 0!==d&&d.length)){e.next=10;break}return m={},u.data.fields.forEach(function(e){switch(e.name){case"question":m.question=e.error;break;case"type":m.type=e.error;break;case"options":m.options=e.error;break;default:m.title=e.error}}),e.abrupt("return",{errors:m});case 10:return e.abrupt("return",{message:"Question added",onSuccess:function(){p(function(e){return l5(l5({},e),{},{questions:[].concat((0,rP.Z)(e.questions),[{question:n,type:r,options:l}])})}),o({reloadOnClose:!0},"root"),i({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[o,i,s,c,p]),b=(0,u.useMemo)(function(){var e=m.question;return!e||e.length>150||"options"===m.type&&m.options&&m.options.some(function(e){return!e})},[m]);return(0,D.jsx)(l2,{bottomMargin:n?8:32,title:"Add question",fields:h,submitLabel:"Add",onSubmit:v,formState:m,onCancel:i,onFormChange:l,submitDisabled:b})});function l6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l6(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l7=(0,u.memo)(function(e){var t=e.onSetState,n=e.onStackPop,i=e.currentGroup,o=e.onGetFullContentState,s=e.setGroupMembershipQuestions,l=o(),c=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.idx,e.next=3,f.Z.deleteSurveyQuestion({groupID:i.id,idx:r});case 3:return e.abrupt("return",{message:"Question deleted",onSuccess:function(){t({reloadOnClose:!0},"root"),n({bypassCheck:!0}),s(function(e){return l8(l8({},e),{},{questions:[].concat((0,rP.Z)(e.questions.slice(0,r)),(0,rP.Z)(e.questions.slice(r+1)))})})}});case 4:case"end":return e.stop()}},e)})),[i,l,n,t,s]);return(0,D.jsx)(iO,{isAsync:!0,onCancel:n,title:"Delete question?",confirmLabel:"Delete",onConfirm:c,description:"Are you sure you want to delete the question “".concat(l.question,"”? You can’t undo this.")})});function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cn=(0,u.memo)(function(e){var t,n=e.onStackPop,i=e.onSetState,o=e.currentGroup,s=e.onMutateState,l=e.onGetFullContentState,c=e.groupMembershipQuestions,d=e.setGroupMembershipQuestions,p=l(),m=l9({optionsSelected:"options"===p.type,emailDisabled:null==c||null===(t=c.questions)||void 0===t?void 0:t.some(function(e){return"email"===e.type})}),h=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r,s,c,u,p,m,h;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=l()).idx,s=t.question,c=t.type,u=t.options,e.next=3,f.Z.editSurveyQuestion({idx:r,type:c,question:s,groupID:o.id,options:"options"===c?u:void 0});case 3:if(!(p=e.sent.error)||!(422===p.status&&null!=p&&null!==(m=p.data)&&void 0!==m&&null!==(m=m.fields)&&void 0!==m&&m.length)){e.next=10;break}return h={},p.data.fields.forEach(function(e){switch(e.name){case"question":h.question=e.error;break;case"type":h.type=e.error;break;case"options":h.options=e.error;break;default:h.title=e.error}}),e.abrupt("return",{errors:h});case 10:return e.abrupt("return",{message:"Question edited",onSuccess:function(){d(function(e){return ct(ct({},e),{},{questions:[].concat((0,rP.Z)(e.questions.slice(0,r)),[{question:s,type:c,options:u}],(0,rP.Z)(e.questions.slice(r+1)))})}),i({reloadOnClose:!0},"root"),n({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[i,n,o,l,d]),v=(0,u.useMemo)(function(){var e=p.question;return!e||e.length>150||"options"===p.type&&p.options&&p.options.some(function(e){return!e})},[p]);return(0,D.jsx)(l2,{bottomMargin:32,title:"Edit question",fields:m,submitLabel:"Save",onSubmit:h,formState:p,onCancel:n,onFormChange:s,submitDisabled:v})}),cr=C.ZP.div.withConfig({displayName:"styled__GroupGamificationLevelsUnlockLink",componentId:"sc-3fmp1a-0"})([""," margin:32px auto 16px;"],N.c.t6),ci=C.ZP.div.withConfig({displayName:"styled__GroupGamificationLevelsUnlockInfo",componentId:"sc-3fmp1a-1"})(["",""],N.c.t7),co=C.ZP.span.withConfig({displayName:"styled__GroupGamificationCourseLink",componentId:"sc-3fmp1a-2"})([""," > a{color:",";}"],N.c.t6,y.O9.sd1),ca=C.ZP.div.withConfig({displayName:"styled__GamificationLoadingOverlay",componentId:"sc-3fmp1a-3"})(["display:flex;height:100%;width:100%;align-items:center;justify-content:center;position:absolute;top:-32px;left:-32px;"]),cs=C.ZP.span.withConfig({displayName:"styled__InputAdornment",componentId:"sc-3fmp1a-4"})(["",""],N.c.t7),cl=(0,u.memo)(function(e){var t=e.isMobile,n=e.onSetState,i=e.onGetState,o=e.onStackPush,s=e.currentGroup,l=(0,u.useState)(!0),c=l[0],d=l[1],p=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,f.Z.getGroupLevels({groupId:s.id});case 3:n({levels:(null==(t=e.sent.data)?void 0:t.levels)||[]}),d(!1);case 7:case"end":return e.stop()}},e)})),[s,n]);(0,u.useEffect)(function(){p()},[p]);var m=i("levels"),h=(0,u.useCallback)(function(e,t,n){return(0,D.jsxs)(co,{children:[(0,D.jsx)(Y.r,{href:e.href,as:e.as,underline:"hover",newTab:!0,children:'"'.concat(e.title,'"')}),t+1===n.length?null:(0,D.jsx)("span",{children:", "})]},"course-link-".concat(e.title,"-").concat(t))},[]),v=(0,u.useCallback)(function(e){n({reloadOnClose:!0},"root"),n({number:null==e?void 0:e.number,title:null==e?void 0:e.levelTitle,levelName:"Level ".concat(null==e?void 0:e.number),onEdit:t&&p,generatedFormExtraContent:null==e?void 0:e.generatedFormExtraContent},"adminGamificationEdit"),o("adminGamificationEdit",t)},[n,o,t,p]),b=(0,u.useMemo)(function(){return m?m.map(function(e){var t=e.title,n=e.percentOfMembers,r=e.courses,i=e.number,o=null==r?void 0:r.map(function(e){var t=(0,q.rE)({group:{name:s.name},course:{name:e.id}});return{href:t.href,as:t.as,title:(null==e?void 0:e.title)||"this course"}}),a="Level ".concat(i," ").concat(t?" - "+t:""),l={number:i,title:a,levelTitle:t,key:a,description:(0,D.jsxs)("div",{children:["".concat(n,"% of members - "),o?(0,D.jsxs)(D.Fragment,{children:[o.map(h)," ","unlocks"]}):"No courses unlock"]}),onEdit:function(){return v(l)},generatedFormExtraContent:(0,D.jsxs)("div",{children:[(0,D.jsx)(cr,{children:o?(0,D.jsxs)(D.Fragment,{children:[o.map(h)," ","unlocks at this level."]}):"No courses unlock at this level."}),(0,D.jsx)(ci,{children:"You can unlock courses for members at different levels from the course settings menu."})]})};return l}):[]},[m,h,v,s]);return c?(0,D.jsx)(ca,{children:(0,D.jsx)(rz.D,{})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(sK,{title:"Gamification",description:"Make your group fun! Personalize your group by naming your levels. Incentivize engagement by unlocking courses when members reach a higher level."}),(0,D.jsx)(sR.D,{resources:b})]})}),cc=function(e){var t=e.levelName;return[{key:"title",component:"input",props:{label:"Name",staticLabel:!0,maxCharacters:20,"data-testid":"group-levels-title",prefix:(0,D.jsx)(cs,{style:{color:y.O9.n6},children:"".concat(t," -  ")})}}]},cu=(0,u.memo)(function(e){var t=e.hasChanges,n=e.onStackPop,i=e.currentGroup,o=e.onMutateState,s=e.onGetFullContentState,l=s(),c=cc({levelName:l.levelName}),d=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r,o,c,u,d;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=s()).title,o=t.onEdit,e.next=3,f.Z.updateGroupLevel({groupId:i.id,number:l.number,title:r.trim()});case 3:if(!(c=e.sent.error)||!(422===c.status&&null!=c&&null!==(u=c.data)&&void 0!==u&&null!==(u=u.fields)&&void 0!==u&&u.length)){e.next=10;break}return d={},c.data.fields.forEach(function(e){e.name,d.title=e.error}),e.abrupt("return",{errors:d});case 10:return e.abrupt("return",{message:"Level name updated",onSuccess:function(){o&&o(),n({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[s,i,n,l]),p=(0,u.useMemo)(function(){var e,n=l.title;return!t||(null===(e=(0,rP.Z)(n))||void 0===e?void 0:e.length)>20},[l,t]);return(0,D.jsxs)("div",{children:[(0,D.jsx)(l2,{bottomMargin:4,title:"Edit level",fields:c,submitLabel:"Save",formState:l,onCancel:n,onSubmit:d,onFormChange:o,submitDisabled:p}),(null==l?void 0:l.generatedFormExtraContent)||null]})}),cd=n(83909),cp=C.ZP.div.withConfig({displayName:"styled__GroupCategoriesWrapper",componentId:"sc-1ln9roz-0"})(["display:flex;flex-direction:column;"]),cf=C.ZP.div.withConfig({displayName:"styled__CategoriesLoadingOverlay",componentId:"sc-1ln9roz-1"})(["display:flex;height:100%;width:100%;align-items:center;justify-content:center;position:absolute;top:-32px;left:-32px;"]);function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cv=(0,u.memo)(function(e){var t,n,i,o=e.isMobile,s=e.currentGroup,l=e.onSetState,c=e.onGetState,d=e.onStackPush,p=e.setCommunityMeta,m=(0,u.useState)(!0),h=m[0],v=m[1],b=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,f.Z.getGroupLabels({groupId:s.id});case 3:l({categories:r=null!==(t=null==(n=e.sent.data)?void 0:n.labels)&&void 0!==t?t:[]}),p(function(e){return ch(ch({},e),{},{totalCategories:r.length})}),v(!1);case 9:case"end":return e.stop()}},e)})),[s,l,p]);(0,u.useEffect)(function(){b()},[b]);var g=c("categories"),x=(0,u.useMemo)(function(){return g?g.map(function(e){var t=e.metadata,n=t.description,r=t.displayName,i=t.postWriteRole,o=t.posts,a=void 0===o?0:o;return{id:e.id,posts:a,displayName:r,postWriteRole:i,title:"".concat(r," (").concat(a,")"),description:n}}):[]},[g]),y=(0,u.useCallback)(function(){l({displayName:"",description:"",postWriteRole:4,onAdd:o&&b},"adminCategoriesAdd"),d("adminCategoriesAdd",o)},[d,o,b,l]),w=(0,u.useCallback)(function(e){l({onEdit:o&&b,labelID:x[e].id,displayName:x[e].displayName,description:x[e].description||"",postWriteRole:x[e].postWriteRole?+"".concat(x[e].postWriteRole):+cd.Nw},"adminCategoriesEdit"),d("adminCategoriesEdit",o)},[l,d,x,o,b]),C=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroupLabelOrder({groupName:s.id,oldOrdinal:t+1,newOrdinal:t});case 2:b();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[s,b]),j=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroupLabelOrder({groupName:s.id,oldOrdinal:t+1,newOrdinal:t+2});case 2:b();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[s,b]),k=(0,u.useCallback)((i=(0,r.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!x[t].posts){e.next=8;break}return e.next=3,f.Z.readGroupLabel({groupName:s.id,labelID:x[t].id});case 3:return n=e.sent.data,l({categories:x.filter(function(e,n){return n!==t}).map(function(e){return{text:e.displayName,value:e.id}}),labelToDelete:n,onDelete:o&&b},"adminCategoriesMigrate"),d("adminCategoriesMigrate",o),e.abrupt("return");case 8:l(ch({idx:t,onDelete:o&&b},x[t]),"adminCategoriesDelete"),d("adminCategoriesDelete",o);case 10:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),[x,d,l,o,b,s]),O=(0,u.useMemo)(function(){return x.map(function(e,t){var n=[{disabled:0===t,label:"Move up",onClick:function(){C(t)},testid:"manage-rule-category-move-up"},{disabled:t===x.length-1,label:"Move down",onClick:function(){j(t)},testid:"manage-rule-category-move-down"},{label:"Delete",disabled:1===x.length,onClick:function(){k(t)},testid:"manage-rule-category-delete"}];return(0,D.jsx)(sz.L,ch({onEdit:function(){return w(t)},menuItems:n},e),t)})},[x,w,k,j,C]);return(0,D.jsxs)(cp,{children:[h&&(0,D.jsx)(cf,{children:(0,D.jsx)(rz.D,{})}),!h&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(sK,{title:"Categories",ctaLabel:"Add category",onCta:y,ctaDisabled:10===x.length}),(0,D.jsx)(sR.D,{resources:O,customNodes:!0})]})]})}),cb=[{key:"displayName",component:"input",props:{label:"Name",maxCharacters:30,"data-testid":"add-category-name-input"}},{key:"description",component:"input",props:{label:"Description",multiline:!0,height:90,maxCharacters:150,"data-testid":"add-category-description-input"}},{key:"postWriteRole",component:"dropdownMenu",props:{inputLabel:"Permissions",menuItems:[{value:cd.Nw,label:"Anyone can post, anyone can view"},{value:cd.xC,label:"Only admins/mods can post, anyone can view"}],"data-testid":"add-category-permissions-select"}}],cg=(0,u.memo)(function(e){var t=e.onStackPop,n=e.onSetState,i=e.currentGroup,o=e.onMutateState,s=e.onGetFullContentState;(0,u.useEffect)(function(){n({displayName:"",description:"",postWriteRole:+cd.Nw})},[n]);var l=s(),c=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n,r,o,l,c,u,d,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=s()).displayName,o=n.description,l=n.postWriteRole,c=n.onAdd,e.next=3,f.Z.createLabel({groupID:i.id,displayName:r,description:o,postWriteRole:l});case 3:if(!(u=e.sent.error)||!(422===u.status&&null!=u&&null!==(d=u.data)&&void 0!==d&&null!==(d=d.fields)&&void 0!==d&&d.length)){e.next=10;break}return p={},u.data.fields.forEach(function(e){switch(e.name){case"metadata.display_name":default:p.displayName=e.error;break;case"metadata.description":p.description=e.error}}),e.abrupt("return",{errors:p});case 10:return e.abrupt("return",{message:"Category added",onSuccess:function(){c&&c(),t({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[s,i,t]),d=(0,u.useMemo)(function(){var e=l.displayName,t=l.description;return!e||!e.trim().length||e.length>30||t.length>150},[l]);return(0,D.jsx)(l2,{title:"Add category",fields:cb,submitLabel:"Add",onSubmit:c,formState:l,onCancel:t,onFormChange:o,submitDisabled:d})}),cx=(0,u.memo)(function(e){var t=e.hasChanges,n=e.onStackPop,i=e.onMutateState,o=(0,e.onGetFullContentState)(),s=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r,i,s,l,c,u,d;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.labelID,r=o.displayName,i=o.description,s=o.postWriteRole,l=o.onEdit,e.next=3,f.Z.updateLabel({labelID:t,displayName:r,description:i,postWriteRole:s});case 3:if(!(c=e.sent.error)||!(422===c.status&&null!=c&&null!==(u=c.data)&&void 0!==u&&null!==(u=u.fields)&&void 0!==u&&u.length)){e.next=10;break}return d={},c.data.fields.forEach(function(e){switch(e.name){case"metadata.display_name":default:d.displayName=e.error;break;case"metadata.description":d.description=e.error}}),e.abrupt("return",{errors:d});case 10:return e.abrupt("return",{message:"Category edited",onSuccess:function(){l&&l(),n({bypassCheck:!0})}});case 11:case"end":return e.stop()}},e)})),[n,o]),l=(0,u.useMemo)(function(){var e=o.displayName,n=o.description;return!t||!e||!e.trim().length||e.length>30||n.length>150},[t,o]);return(0,D.jsx)(l2,{title:"Edit category",fields:cb,submitLabel:"Save",formState:o,onCancel:n,onSubmit:s,onFormChange:i,submitDisabled:l})}),cy=(0,u.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,i=(0,e.onGetFullContentState)(),o=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.id,o=i.onDelete,e.next=3,f.Z.readGroupLabel({groupName:n.id,labelID:r});case 3:if(s=e.sent.data){e.next=7;break}return e.abrupt("return",{});case 7:return e.next=9,f.Z.deleteLabel({labelID:s.id});case 9:return e.abrupt("return",{message:"Category deleted",onSuccess:function(){o&&o(),t({bypassCheck:!0})}});case 10:case"end":return e.stop()}},e)})),[n,i,t]);return(0,D.jsx)(iO,{isAsync:!0,onCancel:t,confirmLabel:"Delete",onConfirm:o,title:"Delete category?",description:'Are you sure you want to delete the category "'.concat(i.displayName,"\"? You can't undo this.")})}),cw=C.ZP.div.withConfig({displayName:"styled__Placeholder",componentId:"sc-ywl5d2-0"})(["color:",";"],y.O9.n5),cC=C.ZP.div.withConfig({displayName:"styled__DropdownMenuWrapper",componentId:"sc-ywl5d2-1"})(["margin-top:20px;width:100%;> div > div:first-child{width:100%;button{width:100%;}}&:hover ","{color:",";}"],cw,y.O9.n7),cj=C.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-ywl5d2-2"})(["position:",";top:0;left:0;width:100%;height:100%;background:",";z-index:1;padding:","px;"],function(e){return e.theme.isMobile?"relative":"absolute"},y.O9.n1,function(e){return e.theme.isMobile?0:32});function ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ck(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cP=(0,u.memo)(function(e){var t=e.isMobile,n=e.dispatch,i=e.onStackPop,o=e.onGetFullContentState,s=(0,u.useState)(!1),l=s[0],c=s[1],d=(0,u.useState)(!1),p=d[0],m=d[1],h=o(),v=h.labelToDelete,b=h.categories,g=h.onDelete,x=(0,u.useState)(""),w=x[0],C=x[1],j=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,f.Z.deleteLabel({labelID:v.id,migrateLabelID:w});case 3:n(e9.bI,{message:"Migration completed"}),g&&g(),i({bypassCheck:!0}),c(!1);case 7:case"end":return e.stop()}},e)})),[n,v,w,g,i]),k=(0,u.useCallback)(function(){m(!p)},[p]),O=(0,u.useMemo)(function(){return b.map(function(e){return cO(cO({},e),{},{active:e.value===w,label:e.text,onClick:function(){return C(e.value)}})})},[b,w]),P=(0,u.useMemo)(function(){return w?O.find(function(e){return e.value===w}).label:(0,D.jsx)(cw,{children:"Select category"})},[O,w]);return(0,D.jsxs)(cj,{children:[(0,D.jsx)(te.Z,{variant:"t2",children:"Recategorize ".concat(n5()("post",v.metadata.posts,!0))}),(0,D.jsx)(te.Z,{variant:"t7",style:{margin:"8px 0px 16px 0px"},children:'The category "'.concat(v.metadata.displayName,'" contains ').concat(v.metadata.posts," posts. You must recategorize all posts before deleting a category. You can recategorize the posts manually, or, you can bulk migrate them to another category.")}),(0,D.jsx)(te.Z,{variant:"t5",style:{margin:"16px 0"},color:"".concat(y.O9.e2),children:"Bulk migrate ".concat(v.metadata.posts,' posts from "').concat(v.metadata.displayName,'" to:')}),(0,D.jsx)(cC,{children:(0,D.jsx)(er.h_,{style:{margin:"8px 0 16px"},id:"migrate-label-id",variant:w?"input-floating-label":"input",label:P,inputLabel:w?"Select category":void 0,options:O,fitButton:!0})}),(0,D.jsxs)(e8.X,{style:{margin:t?"8px 0":"16px 0 32px"},children:[(0,D.jsx)(on.Y,{variant:"square",active:p,size:18,onClick:k,style:{height:"100%",marginTop:4}}),(0,D.jsx)(te.Z,{inline:!0,variant:"t7",style:{marginLeft:12},children:"I confirm that I want to bulk migrate ".concat(v.metadata.posts," posts from “").concat(v.metadata.displayName,"” to the above category, and then delete “").concat(v.metadata.displayName,"”. I understand this action is permanent.")})]}),(0,D.jsxs)("div",{style:{display:"flex",flexDirection:t?"column":"row"},children:[(0,D.jsx)(E.z,{style:{margin:t?"8px 0":"0px"},label:"Proceed",onClick:j,loading:l,disabled:!p||!w}),(0,D.jsx)(E.z,{style:{marginLeft:t?"0px":"16px"},label:"Cancel",variant:"secondary",onClick:i})]})]})}),cI=C.ZP.div.withConfig({displayName:"styled__LinksLoadingOverlay",componentId:"sc-xitlc1-0"})(["display:flex;height:100%;width:100%;align-items:center;justify-content:center;position:absolute;top:-32px;left:-32px;"]);function cD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cD(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cS=(0,u.memo)(function(e){var t,n,i=e.isMobile,o=e.currentGroup,s=e.onSetState,l=e.onGetState,c=e.onStackPush,d=e.setCommunityMeta,p=(0,u.useState)(!0),m=p[0],h=p[1],v=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,f.Z.getGroupLinks({groupId:o.id});case 3:s({links:n=(null==(t=e.sent.data)?void 0:t.links)||[]}),d(function(e){return cZ(cZ({},e),{},{totalLinks:n.length})}),h(!1);case 9:case"end":return e.stop()}},e)})),[o,s,d]);(0,u.useEffect)(function(){v()},[v]);var b=l("links"),g=(0,u.useMemo)(function(){return b?b.map(function(e,t){var n=e.url,r=e.label,i=e.public;return{idx:t,label:r,key:r,title:"".concat(r," (").concat(i?"Public":"Private",")"),description:n,public:i}}):[]},[b]),x=(0,u.useCallback)(function(){s({url:"",label:"",public:!1,onAdd:i&&v},"adminLinksAdd"),c("adminLinksAdd",i)},[c,s,i,v]),y=(0,u.useCallback)(function(e){s({ordinal:e+1,url:g[e].description,label:g[e].label,public:g[e].public,onEdit:i&&v},"adminLinksEdit"),c("adminLinksEdit",i)},[i,s,c,g,v]),w=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroupLinkOrder({groupName:o.id,oldOrdinal:t+1,newOrdinal:t});case 2:v();case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[o,v]),C=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroupLinkOrder({groupName:o.id,oldOrdinal:t+1,newOrdinal:t+2});case 2:v();case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[o,v]),j=(0,u.useCallback)(function(e){s(cZ(cZ({idx:e},g[e]),{},{onDelete:i&&v}),"adminLinksDelete"),c("adminLinksDelete",i)},[g,c,s,i,v]),k=(0,u.useMemo)(function(){return g.map(function(e,t){var n=[{disabled:0===t,label:"Move up",onClick:function(){w(t)},testid:"manage-link-dropdown-move-up"},{disabled:t===g.length-1,label:"Move down",onClick:function(){C(t)},testid:"manage-link-dropdown-move-down"},{label:"Delete",onClick:function(){j(t)},testid:"manage-link-dropdown-delete"}];return cZ(cZ({},e),{},{menuItems:n,onEdit:function(){return y(t)}})})},[g,j,C,w,y]);return m?(0,D.jsx)(cI,{children:(0,D.jsx)(rz.D,{})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(sK,{title:"Links",ctaLabel:"Add link",onCta:x,ctaDisabled:3===g.length}),(0,D.jsx)(sR.D,{noResourceView:"Share important resources with your members by adding links.",resources:k})]})}),c_=[{key:"label",component:"input",props:{label:"Label",maxCharacters:34,"data-testid":"add-link-label-input"}},{key:"url",component:"input",props:{label:"URL","data-testid":"add-link-url-input"}},{key:"public",component:"dropdownMenu",props:{inputLabel:"Privacy",menuItems:[{value:!1,label:"Private (only members can see)"},{value:!0,label:"Public (everybody can see)"}],"data-testid":"add-link-permission-select"}}],cM=(0,u.memo)(function(e){var t=e.onSetState,n=e.onStackPop,i=e.currentGroup,o=e.onMutateState,s=e.onGetFullContentState,l=s(),c=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,o,l,c,u,d,p,m;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=s()).url,l=r.label,c=r.public,u=r.onAdd,(0,H.K2)(o)){e.next=3;break}return e.abrupt("return",{errors:{url:"Please input a valid link."}});case 3:return e.next=5,f.Z.addGroupLink({groupName:i.id,link:{url:(0,q.X2)(o),label:l,public:c}});case 5:if(!(d=e.sent.error)||!(422===d.status&&null!=d&&null!==(p=d.data)&&void 0!==p&&null!==(p=p.fields)&&void 0!==p&&p.length)){e.next=12;break}return m={},d.data.fields.forEach(function(e){switch(e.name){case"url":default:m.url=e.error;break;case"label":m.label=e.error}}),e.abrupt("return",{errors:m});case 12:return e.abrupt("return",{message:"Link added",onSuccess:function(){u&&u(),t({reloadOnClose:!0},"root"),n({bypassCheck:!0})}});case 13:case"end":return e.stop()}},e)})),[s,i,n,t]),d=(0,u.useMemo)(function(){var e=l.label;return!e||e.length>34},[l]);return(0,D.jsx)(l2,{title:"Add link",fields:c_,submitLabel:"Add",onSubmit:c,formState:l,onCancel:n,onFormChange:o,submitDisabled:d})}),cN=(0,u.memo)(function(e){var t=e.onStackPop,n=e.onSetState,i=e.currentGroup,o=e.onMutateState,s=e.onGetFullContentState,l=s(),c=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,o,l,c,u,d,p,m,h;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=s()).label,l=r.url,c=r.public,u=r.ordinal,d=r.onEdit,(0,H.K2)(l)){e.next=3;break}return e.abrupt("return",{errors:{url:"Please input a valid link."}});case 3:return e.next=5,f.Z.updateGroupLink({groupName:i.id,ordinal:u,link:{url:(0,q.X2)(l),label:o,public:c}});case 5:if(!(p=e.sent.error)||!(422===p.status&&null!=p&&null!==(m=p.data)&&void 0!==m&&null!==(m=m.fields)&&void 0!==m&&m.length)){e.next=12;break}return h={},p.data.fields.forEach(function(e){switch(e.name){case"url":default:h.url=e.error;break;case"label":h.label=e.error}}),e.abrupt("return",{errors:h});case 12:return e.abrupt("return",{message:"Link edited",onSuccess:function(){d&&d(),n({reloadOnClose:!0},"root"),t({bypassCheck:!0})}});case 13:case"end":return e.stop()}},e)})),[s,i,t,n]),d=(0,u.useMemo)(function(){var e=l.label;return!e||e.length>34},[l]);return(0,D.jsx)(l2,{title:"Edit link",fields:c_,submitLabel:"Save",onSubmit:c,formState:l,onCancel:t,onFormChange:o,submitDisabled:d})}),cE=(0,u.memo)(function(e){var t=e.onStackPop,n=e.onSetState,i=e.currentGroup,o=(0,e.onGetFullContentState)(),s=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.idx,s=o.onDelete,e.next=3,f.Z.deleteGroupLink({groupName:i.id,ordinal:r+1});case 3:return e.abrupt("return",{message:"Link deleted",onSuccess:function(){s&&s(),n({reloadOnClose:!0},"root"),t({bypassCheck:!0})}});case 4:case"end":return e.stop()}},e)})),[i,o,t,n]);return(0,D.jsx)(iO,{isAsync:!0,onCancel:t,title:"Delete link?",confirmLabel:"Delete",onConfirm:s,description:'Are you sure you want to delete the link "'.concat(o.title,"\"? You can't undo this.")})}),cA=C.ZP.div.withConfig({displayName:"styled__GroupChatUnlockWrapper",componentId:"sc-1y8cj70-0"})(["display:flex;flex-direction:column;"]),cL=C.ZP.div.withConfig({displayName:"styled__GroupChatUnlockDescription",componentId:"sc-1y8cj70-1"})(["margin-bottom:16px;> p{","}"],N.c.t7),cT=(0,u.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,i=(0,d.useRouter)(),o=(0,u.useMemo)(function(){var e;return(null==n||null===(e=n.metadata)||void 0===e?void 0:e.pluginMinChatLevelEnabled)===1},[n]),s=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,f.Z.disableChatUnlock({groupID:n.id});case 3:e.next=7;break;case 5:return e.next=7,f.Z.enableChatUnlock({groupID:n.id});case 7:return e.next=9,(0,X.H5)(i);case 9:case"end":return e.stop()}},e)})),[n,o,i]),l=(0,u.useMemo)(function(){return(0,D.jsx)(s9.Z,{label:o?"On":"Off",onClick:s,active:o})},[o,s]);return(0,D.jsxs)(cA,{children:[(0,D.jsx)(sK,{onBack:t,title:"Unlock chat at Level 2",backLabel:"< Back to plugins",extraAction:l}),(0,D.jsxs)(cL,{children:[(0,D.jsx)("p",{children:"When groups get big, some people DM spam/pitch members. Unlocking chat at Level 2 makes it harder for DM spammers/pitchers because they need to contribute to the community to DM other members."}),(0,D.jsx)("p",{children:"We don't recommend turning this on for small groups where DM pitching/spam isn't an issue. It might block natural conversations between honest members from happening."})]}),(0,D.jsx)(E.z,{label:"done",variant:"secondary",onClick:t})]})}),cF=C.ZP.div.withConfig({displayName:"styled__PluginWrapper",componentId:"sc-ysl8a4-0"})(["display:flex;flex-direction:column;"]),cB=C.ZP.div.withConfig({displayName:"styled__PluginDescription",componentId:"sc-ysl8a4-1"})(["margin-bottom:16px;> p{","}"],N.c.t7),cR=function(e){var t;return(null==e||null===(t=e.metadata)||void 0===t?void 0:t.membership)===0},cz=(0,u.memo)(function(e){var t=e.onStackPop,n=e.currentGroup,i=(0,d.useRouter)(),o=(0,u.useMemo)(function(){var e;return!!(null!=n&&null!==(e=n.metadata)&&void 0!==e&&e.currentMBp)},[n]),s=(0,u.useMemo)(function(){return!o&&cR(n)},[n,o]),l=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateGroup({groupName:n.name,membership:s?1:0});case 2:return e.next=4,(0,X.H5)(i);case 4:case"end":return e.stop()}},e)})),[n,s,i]),c=(0,u.useMemo)(function(){return o?(0,D.jsx)(ei.u,{content:"Only applies to free groups",children:(0,D.jsx)(s9.Z,{label:"Off",disabled:!0,active:!1})}):(0,D.jsx)(s9.Z,{label:s?"On":"Off",onClick:l,active:s})},[s,o,l]);return(0,D.jsxs)(cF,{children:[(0,D.jsx)(sK,{onBack:t,title:"Instant membership approval",backLabel:"< Back to plugins",extraAction:c}),(0,D.jsx)(cB,{children:(0,D.jsx)("p",{children:"Auto-approve membership requests so members get instant access. Only applies to free groups."})}),(0,D.jsx)(E.z,{label:"done",variant:"secondary",onClick:t})]})}),cG=n(96166),cU=(0,C.iv)(["> h2{","}"],N.c.t4),c$=C.ZP.div.withConfig({displayName:"styled__GroupSubscriptionsWrapper",componentId:"sc-e2pjk3-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;","}",""],N.c.t2,N.c.t7,function(e){return e.theme.isMobile&&cU}),cW=C.ZP.div.withConfig({displayName:"styled__PricesWrapper",componentId:"sc-e2pjk3-1"})(["display:flex;flex-direction:column;margin-bottom:32px;gap:16px;"]),cq=(0,C.iv)(["top:-8px;"]),cH=(0,C.ZP)(E.z).withConfig({displayName:"styled__DashboardButton",componentId:"sc-e2pjk3-2"})(["border-radius:4px;position:absolute;right:0px;top:0px;",""],function(e){return e.theme.isMobile&&cq});N.c.t4,y.O9.p1,y.O9.fgPrimary,N.c.t2,N.c.t7;var cV=(0,C.iv)(["> div{> h3{","}}"],N.c.t4),cY=C.ZP.div.withConfig({displayName:"styled__SupportEmailBanner",componentId:"sc-e2pjk3-4"})(["margin-top:32px;background:","33;border-radius:10px;padding:16px;> div{display:flex;justify-content:space-between;> h3{margin:0px 0px 8px 0px;","}> button{margin-top:-5px;margin-right:-8px;}}> p{margin:0px;"," > span{color:",";cursor:pointer;&:hover{text-decoration:underline;}}}",""],y.O9.p3,N.c.t2,N.c.t7,y.O9.sd1,function(e){return e.theme.isMobile&&cV}),cJ=n(31545),cX=C.ZP.div.withConfig({displayName:"styled__DashboardModalWrapper",componentId:"sc-j4hnhp-0"})(["display:flex;flex-direction:column;margin-top:24px;> div:first-child{margin-bottom:32px;}> p{margin:0px 0px 16px 0px;","}"],N.c.t11),cK=C.ZP.div.withConfig({displayName:"styled__StripeDashboardText",componentId:"sc-j4hnhp-1"})(["a{color:",";}"],y.O9.sd1),cQ=C.ZP.div.withConfig({displayName:"styled__SubscriptionToggles",componentId:"sc-j4hnhp-2"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:32px;> div{justify-content:space-between;> span{color:",";","}}"],y.O9.n7,N.c.t7),c0=C.ZP.div.withConfig({displayName:"styled__RetentionVideoSettings",componentId:"sc-j4hnhp-3"})([""," margin-top:40px;"],N.c.t7),c1=(0,C.ZP)(of.I).withConfig({displayName:"styled__RetentionVideoInput",componentId:"sc-j4hnhp-4"})(["margin-top:16px;"]);function c2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var c9=(0,u.memo)(function(e){var t,n=e.onClose,o=(0,u.useState)(!1),s=o[0],l=o[1],c=(0,u.useState)({}),p=c[0],m=c[1],h=(0,u.useState)(""),v=h[0],b=h[1],g=(0,u.useState)(!0),x=g[0],y=g[1],w=(0,P.bI)("currentGroup","isMobile","self"),C=w.self,j=w.currentGroup,k=w.isMobile,O=w.dispatch,I=(0,u.useState)(!(null!=C&&null!==(t=C.member)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.mbncno)),Z=I[0],S=I[1],_=(0,u.useState)(j.metadata.gbSupportEmail),M=_[0],N=_[1],E=(0,u.useRef)(j.metadata.gbSupportEmail),A=(0,u.useMemo)(function(){return JSON.parse(j.metadata.retentionVideo||"{}")},[j.metadata.retentionVideo]),L=(0,u.useState)(A.video_url||""),T=L[0],F=L[1],B=(0,u.useState)(""),R=B[0],z=B[1],G=(0,u.useRef)(A.video_url||""),U=(0,d.useRouter)().reload,$=(0,u.useCallback)(function(){S(function(e){return!e})},[]),W=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getConnectAccount({groupId:j.id});case 2:n=(t=e.sent).data,t.error?O(e9.bI,{message:"Failed to fetch account data. Try it again later.",severity:"error"}):m(n),y(!1);case 7:case"end":return e.stop()}},e)})),[j,O]);(0,u.useEffect)(function(){W()},[W]);var V=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r,o,s,c,u,d,p,m,h,v,g,x,y,w;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,(0,H.vV)(M)||(b("Please enter a valid email"),r=!0),!r){e.next=4;break}return e.abrupt("return");case 4:if(l(!0),!(!(null!=C&&null!==(t=C.member)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.mbncno)!==Z)){e.next=22;break}if(!Z){e.next=12;break}return e.next=9,f.Z.enableNewCustomerNotification({memberId:C.member.id});case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,f.Z.disableNewCustomerNotification({memberId:C.member.id});case 14:e.t0=e.sent;case 15:if(!e.t0.error){e.next=21;break}return O(e9.bI,{message:"Failed to update notification. Try it again later.",severity:"error"}),l(!1),e.abrupt("return");case 21:o=!0;case 22:if(!(M!==E.current)){e.next=32;break}return e.next=25,f.Z.updateConnectAccount({groupId:j.id,supportEmail:M});case 25:if(!e.sent.error){e.next=31;break}return O(e9.bI,{message:"Failed to update email. Try it again later.",severity:"error"}),l(!1),e.abrupt("return");case 31:O(e9.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c2(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.gbSupportEmail=M,t});case 32:if(!(T!==G.current)){e.next=61;break}if(T){e.next=37;break}p="",e.next=49;break;case 37:return p=(0,q.X2)(T),m=(0,cJ.ak)(p),e.next=41,f.Z.getVideoMeta({url:T,width:1400});case 41:if(v=(h=e.sent).data,g=h.error,!(!v||g)){e.next=48;break}return(null==m?void 0:m.provider)===cJ.a.Vimeo?z("Invalid video link. If this was a recent upload to Vimeo, or you recently changed your privacy settings, please wait 5 minutes and try again."):z("Invalid video link"),l(!1),e.abrupt("return");case 48:d=v;case 49:return x=null===(s=d)||void 0===s?void 0:s.lenMs,y=null===(c=d)||void 0===c?void 0:c.stream,w=null===(u=d)||void 0===u?void 0:u.thumbnail,e.next=54,f.Z.updateGroupRetentionVideo({groupID:j.id,videoLinkUrl:p,lenMs:x,thumbnail:w,streamUrl:y});case 54:if(!e.sent.error){e.next=60;break}return O(e9.bI,{message:"Failed to update video",severity:"error"}),l(!1),e.abrupt("return");case 60:o=!0;case 61:if(!o){e.next=65;break}return(0,Q.Lx)({message:"Subscription settings updated"}),U(),e.abrupt("return");case 65:l(!1),O(e9.bI,{message:"Subscription settings updated"}),n();case 68:case"end":return e.stop()}},e)})),[M,T,j,O,Z,n,C,U]),J=(0,u.useCallback)(function(e){b(""),N(e.target.value)},[]),X=(0,u.useCallback)(function(e){F(e.target.value)},[]),K=(0,u.useMemo)(function(){var e;return x?(0,D.jsx)(rz.D,{fitWidth:!0}):(0,D.jsxs)(cX,{children:[(0,D.jsx)(of.I,{error:v,value:M,label:"Support email",onChange:J}),(0,D.jsx)(cQ,{children:(0,D.jsx)(s9.Z,{label:"New customer notification/sound",active:Z,onClick:$})}),(0,D.jsxs)(cK,{children:["You can change the bank account payouts go to from your ",(0,D.jsx)(Y.r,{href:null!==(e=null==p?void 0:p.dashboardUrl)&&void 0!==e?e:"",newTab:!0,children:"Stripe dashboard here"}),"."]}),(0,D.jsxs)(c0,{children:[(0,D.jsx)("strong",{children:"Retention video: "}),"Show a video to members on the cancel page to decrease churn",(0,D.jsx)(c1,{staticLabel:!0,placeholder:"YouTube, Vimeo, Loom, or Wistia link",value:T,onChange:X,error:R,inputProps:{"data-testid":"add-video-input"}})]})]})},[x,v,M,J,Z,$,null==p?void 0:p.dashboardUrl,T,X,R]),ee=(0,u.useMemo)(function(){var e;return x||!M||M===E.current&&!(null!=C&&null!==(e=C.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mbncno)===Z&&T===G.current},[x,Z,M,T,C]);return(0,D.jsx)(n2.T,{open:!0,onClose:n,onCancel:n,confirmLabel:"Save",disabled:ee,loading:s,header:"Subscription settings",onConfirm:V,cancelButtonVariant:k?"secondary":"borderless",children:K})}),c3=C.ZP.div.withConfig({displayName:"styled__AddPriceModalWrapper",componentId:"sc-1w5znzb-0"})(["display:flex;flex-direction:column;gap:16px;> p{margin:0px;color:",";","}"],y.O9.n5,N.c.t9);function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var c4=(0,u.memo)(function(e){var t=e.onClose,n=e.fetchProducts,o=e.products,s=(0,u.useState)(""),l=s[0],c=s[1],d=(0,u.useState)(""),p=d[0],m=d[1],h=(0,u.useState)(!1),v=h[0],b=h[1],g=(0,P.bI)("currentGroup","isMobile"),x=g.currentGroup,y=g.isMobile,w=g.dispatch,C=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,s,c,u,d,p,h,v,g;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m(""),s=(r=id.jY.USD).multiplier,c=r.max,u=r.min,d=l*s,!o.find(function(e){return e.amount===d&&"usd"===e.currency})){e.next=6;break}return m("Price already exists"),e.abrupt("return");case 6:if(!(d>c||d<u)){e.next=11;break}return p=(0,id.O5)({currency:"USD",amount:u}),h=(0,id.O5)({currency:"USD",amount:c}),m("Please set an amount between ".concat(p," and ").concat(h)),e.abrupt("return");case 11:return b(!0),e.next=14,f.Z.addSubscriptionPrice({groupId:x.id,amount:d,currency:"usd"});case 14:if(g=(v=e.sent).data,!v.error){e.next=21;break}return w(e9.bI,{message:"Failed to add price. Try it again later.",severity:"error"}),b(!1),e.abrupt("return");case 21:return e.next=23,f.Z.setCurrentSubscriptionPrice({groupId:x.id,priceId:g.id});case 23:return w(e9.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.currentMBpId=g.id,t}),w(e9.bI,{message:"Price added."}),e.next=27,n();case 27:b(!1),t();case 29:case"end":return e.stop()}},e)})),[n,x,w,o,t,l]),j=(0,u.useCallback)(function(e){/^[0-9]*$/.test(e.target.value)&&c(e.target.value)},[]);return(0,D.jsx)(n2.T,{open:!0,loading:v,onClose:t,onCancel:t,confirmLabel:"Add",header:"Add price",onConfirm:C,cancelButtonVariant:y?"secondary":"borderless",children:(0,D.jsxs)(c3,{children:[(0,D.jsx)(of.I,{prefix:id.jY.USD.symbol,onChange:j,suffix:"/month",value:l,error:p,inputProps:{"data-testid":"subscription-price-input"}}),(0,D.jsx)("p",{children:"Prices are in USD, but payouts will be in your local currency."})]})})}),c6=(0,C.iv)(["flex-direction:column;height:fit-content;padding:8px 13px 16px 13px;"]),c8=C.ZP.div.withConfig({displayName:"styled__PriceItemWrapper",componentId:"sc-1o5codt-0"})(["display:flex;height:56px;padding:0px 16px;border-radius:10px;align-items:center;background:",";",""],y.O9.n2,function(e){return e.theme.isMobile&&c6}),c7=(0,C.iv)(["width:100%;flex:0;"]),ue=C.ZP.div.withConfig({displayName:"styled__PriceItemTop",componentId:"sc-1o5codt-1"})(["flex:1;display:flex;align-items:center;justify-content:space-between;> div:first-child{display:flex;gap:40px;}",""],function(e){return e.theme.isMobile&&c7}),ut=(0,C.iv)(["align-items:center;justify-content:flex-start;width:100%;gap:24px;"]),un=C.ZP.div.withConfig({displayName:"styled__PriceMeta",componentId:"sc-1o5codt-2"})(["display:flex;align-items:center;gap:48px;> a > button{height:fit-content;}",""],function(e){return e.theme.isMobile&&ut}),ur=C.ZP.div.withConfig({displayName:"styled__PriceName",componentId:"sc-1o5codt-3"})(["align-items:center;display:flex;gap:8px;",";> div{height:24px;width:24px;}"],N.c.t5),ui=n(51236),uo=(0,u.memo)(function(e){var t,n=e.id,i=e.amount,o=e.metadata,s=e.currency,l=e.fetchProducts,c=(0,P.bI)("isMobile","currentGroup"),p=c.isMobile,m=c.currentGroup,h=c.dispatch,v=(0,d.useRouter)(),b=null==m||null===(t=m.metadata)||void 0===t?void 0:t.currentMBpId,g=b===n||0===i&&!b,x=0===i,y=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.setCurrentSubscriptionPrice({groupId:m.id,priceId:n});case 2:if(!e.sent.error){e.next=7;break}return h(e9.bI,{message:"Failed to set current price. Try it again later.",severity:"error"}),e.abrupt("return");case 7:return e.next=9,(0,X.H5)(v);case 9:h(e9.bI,{message:"Price set"});case 10:case"end":return e.stop()}},e)})),[h,m,n,v]),w=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.deleteSubscriptionPrice({groupId:m.id,priceId:n});case 2:if(!e.sent.error){e.next=7;break}return h(e9.bI,{message:"Failed to delete price. Try it again later.",severity:"error"}),e.abrupt("return");case 7:h(e9.bI,{message:"Price deleted"}),l();case 9:case"end":return e.stop()}},e)})),[h,l,m,n]),C=(0,u.useMemo)(function(){return(0,D.jsxs)(un,{children:[(0,D.jsx)(E.z,{newTab:!0,variant:"link",typography:"t7",label:n5()("member",(null==o?void 0:o.membershipCount)||0,!0),href:"/".concat(m.name,"/-/members?price=").concat(x?"memberfreebillingproduct00000000":n)}),g&&(0,D.jsx)(ui.C,{label:"Current price"})]})},[n,m,g,x,o]),j=(0,u.useMemo)(function(){return[{label:"Make current",disabled:g,onClick:y},{label:"Delete price",disabled:g||0===i||!!(null!=o&&o.membershipCount),onClick:w}]},[g,y,i,w,o]),k=(0,u.useMemo)(function(){var e=x?"Free":"".concat((0,id.O5)({amount:i,currency:s})," /month");return(0,D.jsxs)(ue,{children:[(0,D.jsxs)("div",{children:[(0,D.jsxs)(ur,{children:[(0,D.jsx)(ez.J,{name:"Tag"}),(0,D.jsx)("span",{children:e})]}),!p&&C]}),(0,D.jsx)(er.h_,{icon:"HorizontalDots",options:j,variant:"icon-borderless"})]})},[i,C,p,j,s,x]),O=(0,u.useMemo)(function(){if(p)return C},[p,C]);return(0,D.jsxs)(c8,{children:[k,O]})}),ua=["id"];function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uc=(0,u.memo)(function(e){var t,n=e.setContentLoading,i=e.onClose,o=(0,u.useState)([]),s=o[0],l=o[1],c=(0,P.bI)("currentGroup","self"),p=c.currentGroup,m=c.self,h=c.dispatch,v=null==p||null===(t=p.metadata)||void 0===t?void 0:t.gbSetupStatus,b=(0,u.useState)(!v),g=b[0],x=b[1],y="rdy"===v,C=(0,d.useRouter)(),j=C.push,k=C.query,O=(0,eo.C1)(),I=(0,en.Z)(O,3),Z=I[0],S=I[1],_=I[2],M=(0,eo.C1)(),N=(0,en.Z)(M,3),A=N[0],L=N[1],T=N[2],F=(0,u.useState)(0),B=F[0],R=F[1];(0,u.useEffect)(function(){k.ap&&(S(),(0,X.hj)(C,"ap"))},[C,k,S]);var z=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getBillingProducts({groupId:p.id});case 2:l((null==(t=e.sent.data)?void 0:t.billingProducts)||[]),R((null==t?void 0:t.freeMembers)||0),n(!1);case 7:case"end":return e.stop()}},e)})),[p,n]);(0,u.useEffect)(function(){n(!0),z()},[z,n]);var G=(0,u.useCallback)(function(e,t){var n=e.id,r=(0,w.Z)(e,ua);return(0,D.jsx)(uo,ul({fetchProducts:z,id:n},r),t)},[z]),U=(0,u.useMemo)(function(){var e=[{amount:0,metadata:{membershipCount:B}}];return null!=s&&s.length&&(e=[].concat((0,rP.Z)(s),(0,rP.Z)(e))),(0,D.jsx)(cW,{children:e.map(G)})},[s,B,G]),$=(0,u.useCallback)(function(){i(),j("/".concat(p.name,"/--/billing/connect?sm=adminSubscriptions"))},[j,i,p]),W=(0,u.useMemo)(function(){return y||g?null:(0,D.jsx)(cG.Z,{onClick:$})},[y,g,$]),q=(0,u.useCallback)(function(){g?x(!1):S()},[g,S]),H=(0,u.useMemo)(function(){return y?(0,D.jsx)(cH,{iconSize:17,variant:"icon",icon:"GearOutlined",onClick:L}):null},[y,L]),V=(0,u.useMemo)(function(){if(Z)return(0,D.jsx)(c4,{products:s,onClose:_,fetchProducts:z})},[Z,_,z,s]),J=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.hideSupportEmailBanner({memberId:null==m||null===(t=m.member)||void 0===t?void 0:t.id});case 2:h(e9._$,function(e){var t=ul({},e);return t.member.metadata.hideSeb=!0,t});case 3:case"end":return e.stop()}},e)})),[m,h]),K=(0,u.useMemo)(function(){var e;return!y||null!=m&&null!==(e=m.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.hideSeb?null:(0,D.jsxs)(cY,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{children:"Support email"}),(0,D.jsx)(E.z,{iconSize:14,icon:"Close",onClick:J,variant:"icon-borderless"})]}),(0,D.jsxs)("p",{children:["We're showing ",(0,D.jsx)("span",{onClick:L,children:p.metadata.gbSupportEmail})," as the support email on your receipts. You can change it by clicking the settings icon at the top right of this page."]})]})},[p,y,J,L,m]),Q=(0,u.useMemo)(function(){if(A)return(0,D.jsx)(c9,{onClose:T})},[A,T]);return(0,D.jsxs)(c$,{children:[H,(0,D.jsx)("h2",{children:"Subscriptions"}),(0,D.jsxs)("p",{children:["Make money by charging a monthly subscription for access to your community. ",(0,D.jsx)(Y.r,{newTab:!0,label:"Learn more",href:"https://help.skool.com/article/86-subscriptions-faq"}),"."]}),U,(0,D.jsx)(E.z,{label:"Add Price",disabled:!y&&!g||(null==s?void 0:s.length)===20,onClick:q}),K,W,V,Q]})}),uu=(0,C.iv)(["> h2{","}"],N.c.t4),ud=C.ZP.div.withConfig({displayName:"styled__GroupDashboardWrapper",componentId:"sc-118pr9v-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0px 0px 24px 0px;","}",""],N.c.t2,function(e){return e.theme.isMobile&&uu}),up=C.ZP.div.withConfig({displayName:"styled__MetricItems",componentId:"sc-118pr9v-1"})(["display:flex;gap:16px;"]),uf=C.ZP.div.withConfig({displayName:"styled__MetricItem",componentId:"sc-118pr9v-2"})(["width:235px;height:87px;background:",";border:1px solid ",";border-radius:10px;display:flex;justify-content:center;align-items:center;flex-direction:column;> div{&:first-child{","}&:last-child{color:",";",";}}"],y.O9.n2,y.O9.n3,N.c.t1,y.O9.n5,N.c.t10),um=(0,u.memo)(function(e){var t,n=e.setContentLoading,i=(0,P.bI)("currentGroup","self"),o=i.currentGroup,s=i.self,l=(0,u.useState)(null),c=l[0],d=l[1],p=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),e.next=3,f.Z.getBillingDashboard({groupId:o.id});case 3:d(e.sent.data),n(!1);case 7:case"end":return e.stop()}},e)})),[o,n]);(0,u.useEffect)(function(){p()},[p]);var m=null!==(t=null==c?void 0:c.totalPaidMembers)&&void 0!==t?t:0,h=(null==c?void 0:c.allTimeCourseSales)&&(null==c?void 0:c.allTimeCourseSales)-(null==c?void 0:c.allTimeCourseSales)%100,v=(0,u.useMemo)(function(){return h?(0,id.O5)({amount:h,currency:"USD"}):"$0"},[h]),b=(0,u.useMemo)(function(){return null!=c&&c.mrr?(0,id.O5)({amount:null==c?void 0:c.mrr,currency:"USD"}):"$0"},[c]);return(0,D.jsxs)(ud,{children:[(0,D.jsx)("h2",{children:"\uD83C\uDF89 Happy ".concat(e2()().format("dddd"),", ").concat(s.firstName)}),(0,D.jsxs)(up,{children:[(0,D.jsxs)(uf,{children:[(0,D.jsx)("div",{children:m}),(0,D.jsx)("div",{children:"Paid members"})]}),(0,D.jsxs)(uf,{children:[(0,D.jsx)("div",{children:b}),(0,D.jsx)("div",{children:"MRR"})]}),(0,D.jsxs)(uf,{children:[(0,D.jsx)("div",{children:v}),(0,D.jsx)("div",{children:"Course sales"})]})]})]})}),uh=(0,C.iv)(["> h2{","}"],N.c.t4),uv=C.ZP.div.withConfig({displayName:"styled__GroupDashboardWrapper",componentId:"sc-b8oaun-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0px 0px 24px 0px;","}",""],N.c.t2,function(e){return e.theme.isMobile&&uh}),ub=(0,C.iv)(["margin:0px 0px 16px 0px;"]),ug=C.ZP.h3.withConfig({displayName:"styled__GroupPayoutsLabel",componentId:"sc-b8oaun-1"})(["margin:0px 0px 8px 0px;"," ",""],N.c.t10,function(e){return e.theme.isMobile&&ub}),ux=C.ZP.div.withConfig({displayName:"styled__MetricItem",componentId:"sc-b8oaun-2"})(["width:235px;height:87px;background:",";border:1px solid ",";border-radius:10px;display:flex;justify-content:center;align-items:center;flex-direction:column;> div{&:first-child{","}&:last-child{color:",";",";}}"],y.O9.n2,y.O9.n3,N.c.t1,y.O9.n5,N.c.t10),uy=(0,C.iv)(["flex-direction:column;align-items:flex-start;gap:16px;margin-bottom:32px;"]),uw=C.ZP.div.withConfig({displayName:"styled__PayoutsTop",componentId:"sc-b8oaun-3"})(["display:flex;margin-bottom:24px;align-items:center;gap:40px;",""],function(e){return e.theme.isMobile&&uy}),uC=C.ZP.div.withConfig({displayName:"styled__NextPayout",componentId:"sc-b8oaun-4"})(["",""],N.c.t10),uj=C.ZP.div.withConfig({displayName:"styled__PendingPayout",componentId:"sc-b8oaun-5"})([""," display:flex;align-items:center;"],N.c.t11),uk=(0,C.ZP)(ez.J).withConfig({displayName:"styled__PendingIcon",componentId:"sc-b8oaun-6"})(["cursor:pointer;margin-left:4px;height:18px;width:18px;color:",";"],y.O9.n5),uO=C.ZP.div.withConfig({displayName:"styled__PayoutHistory",componentId:"sc-b8oaun-7"})(["display:flex;flex-direction:column;border-top:1px solid ",";"],y.O9.n3),uP=(0,C.iv)(["> div{text-align:left;&:first-child{width:140px;}&:nth-child(2){width:280px;}&:nth-child(3){width:220px;}&:last-child{flex:1;text-align:right;}}"]),uI=(0,C.iv)(["justify-content:space-between;> div:last-child{text-align:right;display:flex;flex-direction:column-reverse;}"]),uD=(0,C.ZP)(Y.r).withConfig({displayName:"styled__PayoutItem",componentId:"sc-b8oaun-8"})(["cursor:pointer;display:flex;align-items:center;padding:16px 0px;border-bottom:1px solid ",";"," ",""],y.O9.n3,N.c.t9,function(e){return e.theme.isMobile?uI:uP}),uZ=C.ZP.div.withConfig({displayName:"styled__NoHistory",componentId:"sc-b8oaun-9"})(["margin-top:16px;",""],N.c.t7),uS=C.ZP.div.withConfig({displayName:"styled__PayoutPendingModalWrapper",componentId:"sc-b8oaun-10"})(["> h1{margin:0 0 16px;","}> p{margin:0;","}> p > a{color:",";}"],N.c.t1,N.c.t7,y.O9.sd1),u_=(0,u.memo)(function(e){var t=e.setContentLoading,n=e.onClose,i=(0,P.bI)("currentGroup","isMobile"),o=i.currentGroup,s=i.isMobile,l=(0,u.useState)(null),c=l[0],d=l[1],p=(0,u.useState)(null),m=p[0],h=p[1],v=(0,u.useState)(!0),b=v[0],g=v[1],x=(0,eo.C1)(),y=(0,en.Z)(x,3),w=y[0],C=y[1],j=y[2],k=(0,u.useCallback)(function(e,t){var n=e.currency,r=e.amount,i=e.createdAt,a=e.externalAccount,l=e.transactionId,c=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ei.u,{content:e2()(i).format("MMMM D, YYYY, HH:mm:ss"),children:(0,D.jsx)("div",{children:e2()(i).format("MMMM D, YYYY")})}),(0,D.jsx)("div",{children:"Payout to ".concat(a)})]}),u=(0,D.jsx)("div",{children:(0,id.O5)({amount:-1*r,currency:n,showZeroes:!0})});return(0,D.jsxs)(uD,{href:"/".concat(o.name,"/--/payout/").concat(l),newTab:!0,children:[s?(0,D.jsx)("div",{children:c}):c,s?(0,D.jsx)("div",{children:u}):u]},t)},[o,s]),O=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n,r,i,s,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,f.Z.getBillingPayouts({groupId:o.id});case 3:d({balance:(null==(l=e.sent.data)||null===(n=l.balances)||void 0===n||null===(n=n.usd)||void 0===n?void 0:n.balance)||0,nextTransfer:(null==l||null===(r=l.balances)||void 0===r||null===(r=r.usd)||void 0===r?void 0:r.nextTransfer)||0,pending:(null==l||null===(i=l.balances)||void 0===i||null===(i=i.usd)||void 0===i?void 0:i.pending)||0,currency:"USD",transfers:(null==l||null===(s=l.transfers)||void 0===s||null===(s=s.usd)||void 0===s?void 0:s.transfers)||[]}),t(!1);case 7:case"end":return e.stop()}},e)})),[o,t]);(0,u.useEffect)(function(){O()},[O]);var I=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==o||null===(t=o.metadata)||void 0===t?void 0:t.gbSetupStatus)!=="rdy"){e.next=8;break}return e.next=3,f.Z.getConnectAccount({groupId:o.id});case 3:h({href:e.sent.data.dashboardUrl,newTab:!0}),e.next=9;break;case 8:h({href:"/".concat(o.name,"/--/billing/connect?sm=adminPayouts"),onClick:n});case 9:g(!1);case 10:case"end":return e.stop()}},e)})),[o,n]);(0,u.useEffect)(function(){!m&&w&&I()},[I,m,w]);var Z=(0,u.useMemo)(function(){var e=e2().tz("America/Los_Angeles").startOf("day"),t=e.clone();return(t.day()>=3||0===t.day())&&t.add(1,"weeks"),t.isoWeekday(3).diff(e,"days")},[]),S=(0,u.useMemo)(function(){var e;return null!=c&&null!==(e=c.transfers)&&void 0!==e&&e.length?c.transfers.map(k):(0,D.jsx)(uZ,{children:"No payout history."})},[c,k]);if(!c)return null;var _=c.nextTransfer,M=c.balance,N=c.pending,E=c.currency;return(0,D.jsxs)(uv,{children:[(0,D.jsx)("h2",{children:"Payouts"}),(0,D.jsxs)(uw,{children:[(0,D.jsxs)(ux,{children:[(0,D.jsx)("div",{children:(0,id.O5)({amount:M,currency:E,showZeroes:!0})}),(0,D.jsx)("div",{children:"Balance"})]}),(0,D.jsxs)(ew.s,{gap:8,children:[(0,D.jsx)(uC,{children:"Next payout will be ".concat((0,id.O5)({amount:_,currency:E})," in ").concat(n5()("day",Z,!0))}),(0,D.jsxs)(uj,{children:["".concat((0,id.O5)({amount:N,currency:E})," is pending"),(0,D.jsx)(uk,{onClick:C,name:"InfoOutline"})]})]})]}),(0,D.jsx)(ug,{children:"Payout history"}),(0,D.jsx)(uO,{children:S}),w&&(0,D.jsx)(ri.u_,{open:!0,onClose:j,size:"small",children:(0,D.jsxs)(uS,{children:[(0,D.jsx)("h1",{children:"Payouts"}),b?(0,D.jsx)(rz.D,{fitWidth:!0}):(0,D.jsxs)("p",{children:["We pay out your available balance every Wednesday.",(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),(0,D.jsx)("strong",{children:"Pending"})," is your balance that hasn’t yet settled. Transactions take 7-14 days to settle.",(0,D.jsx)("br",{}),(0,D.jsx)("br",{}),"Payouts are direct to your bank account. You can change your connected bank account ",(0,D.jsx)(Y.r,{href:null==m?void 0:m.href,newTab:null==m?void 0:m.newTab,onClick:null==m?void 0:m.onClick,children:"here"}),"."]})]})})]})}),uM=(0,C.iv)(["> h2{","}"],N.c.t4),uN=C.ZP.div.withConfig({displayName:"styled__GroupDiscoveryWrapper",componentId:"sc-16m8szr-0"})(["display:flex;flex-direction:column;position:relative;> h2{margin:0 0 8px;","}> p{"," margin:0;}",""],N.c.t2,N.c.t7,function(e){return e.theme.isMobile&&uM}),uE=(0,C.iv)(["flex-direction:column;gap:8px;"]),uA=(0,C.iv)(["flex-direction:row;gap:32px;"]),uL=C.ZP.div.withConfig({displayName:"styled__GroupDiscoveryStatusWrapper",componentId:"sc-16m8szr-1"})(["display:flex;margin:32px 0 40px;"," > p{"," color:",";margin:0;> strong{color:",";}}"],function(e){return e.theme.isMobile?uE:uA},N.c.t5,function(e){return e.$isActive?y.O9.success:y.O9.error},y.O9.n7),uT=C.ZP.div.withConfig({displayName:"styled__GroupDiscoveryMoreInfo",componentId:"sc-16m8szr-2"})(["display:flex;flex-direction:column;gap:16px;> p{"," margin:0;> strong{color:",";}}"],N.c.t7,y.O9.n7),uF=(0,u.memo)(function(e){var t=e.setContentLoading,n=(0,P.bI)("currentGroup").currentGroup,i=(0,u.useState)(null),o=i[0],s=i[1],l=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,f.Z.getGroupDiscoveryData({groupId:n.id});case 3:s(e.sent.data),t(!1);case 7:case"end":return e.stop()}},e)})),[n,t]);return(0,u.useEffect)(function(){l()},[l]),(0,D.jsxs)(uN,{children:[(0,D.jsx)("h2",{children:"Discovery"}),(0,D.jsx)("p",{children:"Get discovered by millions of active users."}),o&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(uL,{$isActive:o.isShowing,children:[(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Showing in discovery: "}),o.isShowing?"Yes":"No"]}),(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Rank: "}),o.isShowing?"#".concat(o.rank):"None"]}),(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Category: "}),o.isShowing?o.category.name:"None"]})]}),(0,D.jsxs)(uT,{children:[(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Showing in discovery — "}),"Your group needs to meet a minimum threshold of members, posts, and activity to show in discovery. You also need a good group description, about page description, group cover image, and some photos/videos on your about page."]}),(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Discovery rank — "}),"Groups are ranked by engagement using an algorithm that looks at member growth, member activity, posts, comments, and likes. The more engaged your group is, the higher your rank."]}),(0,D.jsxs)("p",{children:["If your category is wrong, please ",(0,D.jsx)(Y.r,{href:"/support",label:"contact support",newTab:!0}),"."]})]})]})]})}),uB=(0,C.iv)(["> h2{","}"],N.c.t4),uR=C.ZP.div.withConfig({displayName:"styled__GroupTabVisibilityWrapper",componentId:"sc-agkc35-0"})(["> h2{margin:0 0 8px;","}> p{"," margin:0 0 32px;}",""],N.c.t2,N.c.t7,function(e){return e.theme.isMobile&&uB}),uz=(0,C.iv)(["> h2{","}"],N.c.t4),uG=C.ZP.div.withConfig({displayName:"styled__GroupTabWrapper",componentId:"sc-1wel26g-0"})(["border-radius:10px;background-color:",";margin-bottom:16px;padding:16px ","px;> div > h3{margin:0 0 8px;","}> p{"," margin:0;white-space:pre-line;}",""],y.O9.n2,function(e){return e.theme.isMobile?13:16},N.c.t5,N.c.t9,function(e){return e.theme.isMobile&&uz}),uU=(0,u.memo)(function(e){var t=e.title,n=e.description,r=e.enabled,i=e.onToggleClick;return(0,D.jsxs)(uG,{children:[(0,D.jsxs)(e8.X,{justifyContent:"space-between",children:[(0,D.jsx)("h3",{children:t}),(0,D.jsx)(s9.Z,{label:r?"On":"Off",onClick:i,active:r})]}),(0,D.jsx)("p",{children:n})]})}),u$=(0,u.memo)(function(){var e,t,n,i=(0,P.bI)("currentGroup"),o=i.currentGroup,s=i.dispatch,l=(0,d.useRouter)(),c=(0,u.useMemo)(function(){var e,t;return JSON.parse(null!==(e=null===(t=o.metadata)||void 0===t?void 0:t.tabs)&&void 0!==e?e:"{}")},[o]),p=(0,u.useCallback)((e=(0,r.Z)(a().mark(function e(t){var n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=c&&null!==(n=c[t])&&void 0!==n&&n.visible)){e.next=7;break}return e.next=4,f.Z.setGroupTabHidden({groupId:o.id,tabId:t});case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,f.Z.setGroupTabVisible({groupId:o.id,tabId:t});case 9:e.t0=e.sent;case 10:if(!e.t0.error){e.next=15;break}return s(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 15:(0,X.H5)(l);case 16:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[c,o,l,s]),m=(0,u.useCallback)(function(){p("classroom")},[p]),h=(0,u.useCallback)(function(){p("calendar")},[p]);return(0,D.jsxs)(uR,{children:[(0,D.jsx)("h2",{children:"Tabs"}),(0,D.jsx)("p",{children:"Show/hide tabs in your community."}),(0,D.jsx)(uU,{title:"Classroom",description:"Organize useful information to help your community do whatever they want to do.\n          Some people use this space for guides, instructions, courses, recipes, workout plans, resources, templates, etc.",enabled:null==c||null===(t=c.classroom)||void 0===t?void 0:t.visible,onToggleClick:m}),(0,D.jsx)(uU,{title:"Calendar",description:"One of fastest ways to build community is to get members together to hangout live on Zoom, Google Meet, or in-person. Some people use this for coffee hours, Q&As, co-working, happy hour, etc.",enabled:null==c||null===(n=c.calendar)||void 0===n?void 0:n.visible,onToggleClick:h})]})}),uW=n(63210),uq=(0,C.iv)(["> h2{","}"],N.c.t4),uH=C.ZP.div.withConfig({displayName:"styled__GroupCustomUrlWrapper",componentId:"sc-1lekeko-0"})(["> h2{margin:0 0 8px;","}> p{"," margin:0 0 32px;}> button{margin-top:32px;}> div:last-child{gap:16px;}",""],N.c.t2,N.c.t7,function(e){return e.theme.isMobile&&uq}),uV=C.ZP.div.withConfig({displayName:"styled__HandleInputWrapper",componentId:"sc-1lekeko-1"})(["position:relative;"]),uY=C.ZP.div.withConfig({displayName:"styled__HandleWrapperStatus",componentId:"sc-1lekeko-2"})(["position:absolute;right:18px;top:16px;> div{height:20px;width:20px;color:",";}"],function(e){return e.$color}),uJ=(0,C.iv)(["pointer-events:none;> input{color:",";}"],y.O9.n5),uX=(0,C.ZP)(of.I).withConfig({displayName:"styled__HandleInput",componentId:"sc-1lekeko-3"})(["> input{padding-left:0px;","}",")}"],N.c.t5,function(e){return e.$groupNameChanged&&uJ}),uK=C.ZP.span.withConfig({displayName:"styled__HandleInfoLabel",componentId:"sc-1lekeko-4"})(["font-style:normal !important;color:"," !important;margin-left:14px;",""],function(e){return e.$color},N.c.t11),uQ=n(86664),u0=(0,u.memo)(function(e){var t=e.group,n=e.onCancel,i=e.onSuccess,o=e.onTimeout,s=e.onClose,l=(0,u.useState)(!1),c=l[0],d=l[1],p=(0,P.bI)("self"),m=p.self,h=p.dispatch,v=(0,uQ.useStripe)(),b=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n,r,l,c,u,p;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,f.Z.endTrial({groupID:t.id});case 3:if(r=(n=e.sent).data,!(l=n.error)){e.next=21;break}if(!l.data.token){e.next=16;break}return c=l.data.token,e.prev=9,e.next=12,(0,iE.Cx)({token:c,userID:null==m?void 0:m.id,timeoutMS:6e4});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return d(!1),s(),h(e9.ZV,{showPaymentDialog:!0}),h(e9.dO,{paymentDialogType:"update"}),e.abrupt("return");case 21:if(u=r.token,!(p=r.clientSecret)){e.next=32;break}return e.next=25,v.handleNextAction({clientSecret:p});case 25:if(!e.sent.error){e.next=32;break}return d(!1),s(),h(e9.ZV,{showPaymentDialog:!0}),h(e9.dO,{paymentDialogType:"update"}),e.abrupt("return");case 32:return e.prev=32,e.next=35,(0,iE.Cx)({token:u,userID:null==m?void 0:m.id,timeoutMS:6e4});case 35:i(),e.next=41;break;case 38:e.prev=38,e.t1=e.catch(32),e.t1===iE.k9?o():h(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"});case 41:case"end":return e.stop()}},e,null,[[9,14],[32,38]])})),[t,i,o,h,m,s,v]);return(0,D.jsx)(n2.T,{open:!0,loading:c,header:"Upgrade to claim custom URL",onConfirm:b,onCancel:n,confirmLabel:"UPGRADE NOW",children:"You can only claim a custom URL with a paid account. You're currently in a free trial. Upgrade for $99/month to claim your URL immediately."})});function u1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var u2={fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}]},u9={userInvite:ov,userNotifications:r0,userMembership:iv,userMembershipLeave:iP,userMembershipCancelJoin:iS,userMembershipSupport:iZ,userMembershipCancelSubscription:iq,userMembershipUpdatePayment:iR,userMembershipReactivate:iM,userMembershipLeaveGroup:iL,userChat:r7,adminInvite:ov,adminInviteCsv:oD,adminGeneral:aF,adminUrlChange:aH,adminBilling:sL,adminBillingReferralChange:sT,adminBillingInvoiceHistory:sB,adminMembershipCsv:o_,adminGamification:cl,adminGamificationEdit:cu,adminPlugins:s2,adminZapier:lS,adminZapierRotate:l_,adminWebhook:s4,adminAutoDm:ln,adminAutoDmChangeUser:lj,adminMembershipQuestions:lL,adminMembershipQuestionsAdd:l4,adminMembershipQuestionsDelete:l7,adminMembershipQuestionsEdit:cn,adminCategories:cv,adminCategoriesAdd:cg,adminCategoriesEdit:cx,adminCategoriesDelete:cy,adminCategoriesMigrate:cP,adminLinks:cS,adminLinksAdd:cM,adminLinksEdit:cN,adminLinksDelete:cE,adminMetrics:o7,adminChatUnlock:cT,adminAutoApprove:cz,adminSubscriptions:uc,adminDashboard:um,adminPayouts:u_,adminDiscovery:uF,adminMetaPixel:lb,adminTabVisibility:u$,adminPostUnlock:lk,adminCustomUrl:(0,u.memo)(function(e){var t,n,o,s=e.onStackPop,l=e.onClose,c=(0,P.bI)("currentGroup","stripePromise"),p=c.currentGroup,m=c.dispatch,h=c.stripePromise,v=(0,u.useState)(null==p?void 0:p.name),b=v[0],g=v[1],x=(0,u.useState)(null),w=x[0],C=x[1],j=(0,u.useState)(!1),k=j[0],O=j[1],I=(0,u.useState)(null),Z=I[0],S=I[1],_=(0,u.useState)((null==p||null===(n=p.metadata)||void 0===n?void 0:n.paymentStatus)==="trial"),M=_[0],N=_[1],A=(0,u.useState)(!1),L=A[0],T=A[1],F=(0,u.useState)(!1),B=F[0],R=F[1],z=(0,u.useState)(!1),G=z[0],U=z[1],$=(0,uW.Z)(b,500),W=(0,d.useRouter)(),q=(null==p||null===(o=p.metadata)||void 0===o?void 0:o.nameChanges)===-1,H=(0,u.useCallback)(function(){m(e9.bI,{message:"Account upgraded"}),O(!1),N(!1),m(e9.k9,function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u1(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return t.metadata.paymentStatus="active",t})},[m]),V=(0,u.useCallback)(function(){m(e9.bI,{message:"Account upgraded"}),O(!1),N(!1)},[m]),Y=(0,u.useCallback)(function(){O(!1)},[]),J=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,f.Z.renameGroup({groupId:p.id,newName:b});case 3:if(!(t=e.sent.error)){e.next=9;break}return 422===t.status?S(t.data.fields[0].error):400===t.status?S("URL cannot be used, please try again."):S("Failed to update group url"),U(!1),e.abrupt("return");case 9:m(e9.bI,{message:"Group URL Updated"}),(0,X.H5)(W),s(),U(!1);case 13:case"end":return e.stop()}},e)})),[p,m,s,W,b]),K=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,f.Z.checkGroupHandle({alias:t.toLowerCase(),groupId:null==p?void 0:p.id});case 3:r=(n=e.sent).data,n.error&&m(e9.bI,{message:"Something went wrong, please try again later",severity:"error"}),R(!1),C(!!(null!=r&&r.available));case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[p,m]);(0,u.useEffect)(function(){$&&$!==p.name&&$.length<31&&$.length>2?K($):C(null)},[$,p,K]);var Q=(0,u.useCallback)(function(e){C(null),R(!1),g(e.target.value)},[]),ee=(0,u.useMemo)(function(){return!w},[w]),et=(0,u.useMemo)(function(){return B?(0,D.jsx)(rz.D,{}):null===w?null:(0,D.jsx)(ez.J,{name:w?"CheckCircle":"CloseCircle",$color:w?y.O9.s2:y.O9.e2})},[w,B]),en=(0,u.useMemo)(function(){return q?(0,D.jsx)(uK,{children:"You can only change your URL once."}):null===w?null:(0,D.jsx)(uK,{$color:w?y.O9.s2:y.O9.e2,children:w?"This URL is available. Claim it while you can!":"This URL isn't available."})},[w,q]),er=(0,u.useCallback)(function(){M?O(!0):T(!0)},[M]),ei=(0,u.useCallback)(function(){T(!1)},[]);return L?(0,D.jsxs)(uH,{children:[(0,D.jsx)("h2",{children:"Change URL?"}),(0,D.jsxs)("p",{children:["Are you sure you want to change your URL from ",(0,D.jsx)("strong",{children:"skool.com/".concat(p.name)})," to ",(0,D.jsx)("strong",{children:"skool.com/".concat(b)}),"? You can only change your URL once, so be careful. Old links will redirect to the new URL."]}),(0,D.jsx)(iA.e,{cancelVariant:"outlined",loading:G,confirmLabel:"Change Url",onCancel:ei,onConfirm:J})]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(uH,{children:[(0,D.jsx)("h2",{children:"Custom URL"}),(0,D.jsx)("p",{children:"Make your group stand out and be more shareable with a custom URL."}),(0,D.jsxs)(uV,{children:[(0,D.jsx)(uX,{$groupNameChanged:q,value:b,onChange:Q,maxCharacters:30,prefix:"skool.com/",infoLabel:en,error:Z}),(0,D.jsx)(uY,{children:et})]}),(0,D.jsx)(E.z,{label:"Claim Url",disabled:ee,onClick:er})]}),k&&(0,D.jsx)(uQ.Elements,{stripe:h,options:u2,children:(0,D.jsx)(u0,{group:p,onCancel:Y,onSuccess:H,onTimeout:V,onClose:l})})]})})},u3=[{label:"Membership",key:"userMembership",dataTestId:"user-membership-tab"},{label:"Notifications",key:"userNotifications",dataTestId:"user-notifications-tab"},{label:"Chat",key:"userChat",dataTestId:"user-chat-tab"},{label:"Invite",key:"userInvite",dataTestId:"user-invite-tab"}],u5=[{label:"Dashboard",dataTestId:"admin-dashboard-tab",key:"adminDashboard",billingMgrOnly:!0},{label:"Payouts",dataTestId:"admin-payouts-tab",key:"adminPayouts",billingMgrOnly:!0},{label:"Invite",dataTestId:"admin-invite-tab",key:"adminInvite"},{label:"General",dataTestId:"admin-general-tab",key:"adminGeneral"},{label:"Custom URL",dataTestId:"admin-custom-url-tab",key:"adminCustomUrl",ownerOnly:!0},{label:"Subscriptions",dataTestId:"admin-subscriptions-tab",key:"adminSubscriptions",billingMgrOnly:!0},{label:"Categories",dataTestId:"admin-categories-tab",key:"adminCategories"},{label:"Tabs",dataTestId:"admin-tab-visibility-tab",key:"adminTabVisibility"},{label:"Plugins",dataTestId:"admin-plugins-tab",key:"adminPlugins"},{label:"Metrics",dataTestId:"admin-metrics-tab",key:"adminMetrics"},{label:"Gamification",dataTestId:"admin-gamification-tab",key:"adminGamification"},{label:"Discovery",dataTestId:"admin-discovery-tab",key:"adminDiscovery"},{label:"Links",dataTestId:"admin-links-tab",key:"adminLinks"}],u4=C.ZP.div.withConfig({displayName:"styled__SettingsModalMobileHeaderWrapper",componentId:"sc-1tetzlf-0"})(["display:flex;flex-direction:column;position:sticky;top:0px;z-index:2;background:",";"],y.O9.n1),u6=C.ZP.div.withConfig({displayName:"styled__MobileHeaderWrapper",componentId:"sc-1tetzlf-1"})(["height:52px;border-bottom:1px solid ",";"],y.O9.n3),u8=(0,u.memo)(function(e){var t=e.canAccessGroup;return(0,D.jsx)(u4,{children:(0,D.jsx)(u6,{children:(0,D.jsx)(ny.Z,{canAccessGroup:t,settings:{mainMenuName:"group-settings-modal"}})})})}),u7=C.ZP.div.withConfig({displayName:"styled__SettingsModalHeaderDesktop",componentId:"sc-1bu00ne-0"})(["display:flex;justify-content:space-between;align-items:center;height:100%;padding:0px 24px 0px 32px;"]),de=C.ZP.div.withConfig({displayName:"styled__UserSettingsLeft",componentId:"sc-1bu00ne-1"})(["display:flex;align-items:center;gap:16px;> div{display:flex;flex-direction:column;> p{color:",";margin:0px;","}}"],y.O9.n5,N.c.t9),dt=n(65856),dn=(0,u.memo)(function(e){var t=e.isAdminSettings,n=e.onClose,r=(0,P.bI)("currentGroup").currentGroup,i=(0,u.useMemo)(function(){return(0,D.jsxs)(de,{children:[(0,D.jsx)(t$.F,{group:r,disableLink:!0}),(0,D.jsxs)("div",{children:[(0,D.jsx)(dt.D,{desktopTypography:"t5",group:r,disableLink:!0}),(0,D.jsx)("p",{children:t?"Group settings":"Membership settings"})]})]})},[r,t]);return(0,D.jsxs)(u7,{children:[i,(0,D.jsx)(E.z,{iconSize:14,icon:"Close",onClick:n,variant:"icon-borderless"})]})}),dr=n(42108);function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ds="You have unsaved changes. Do you want to leave without saving?",dl=function(e){var t,n,o,s,l,c=e.initialView,p=void 0===c?"userNotifications":c,f=e.canAccessGroup,m=(0,u.useState)({}),h=m[0],b=m[1],g=(0,u.useState)({}),x=g[0],y=g[1],w=(0,u.useState)([p]),C=w[0],j=w[1],k=(0,u.useState)(!1),O=k[0],I=k[1],Z=(0,u.useState)(null),S=Z[0],_=Z[1],M=(0,P.bI)("self","eventId","isMobile","viewDate","currentGroup","currentCourseId","currentModuleId","occurrenceId"),N=M.dispatch,E=M.self,A=M.currentGroup,L=M.isMobile,T=M.currentCourseId,F=M.currentModuleId,B=M.viewDate,R=M.eventId,z=M.occurrenceId,G=(0,u.useState)({totalCategories:(null==A||null===(t=A.labels)||void 0===t?void 0:t.length)||0,totalRules:(null==A||null===(n=A.metadata)||void 0===n?void 0:n.totalRules)||0,totalLinks:A.metadata.links&&JSON.parse(A.metadata.links).links.length||0}),U=G[0],$=G[1],W=(0,u.useState)(null==A?void 0:A.metadata),H=W[0],V=W[1],Y=(0,u.useState)({enabled:!!(null!=A&&null!==(o=A.metadata)&&void 0!==o&&o.surveyEnabled),questions:null!=A&&null!==(s=A.metadata)&&void 0!==s&&s.survey?JSON.parse(null==A||null===(l=A.metadata)||void 0===l?void 0:l.survey).survey:[]}),J=Y[0],K=Y[1],Q=(0,d.useRouter)();(0,u.useEffect)(function(){V(null==A?void 0:A.metadata)},[A]);var ee=(0,u.useMemo)(function(){return p.includes("admin")},[p]),et=(0,u.useMemo)(function(){return(0,v.CP)({user:E,member:null==E?void 0:E.member,group:A})},[E,A]),en=(0,u.useMemo)(function(){return C.slice(-1)[0]},[C]);(0,u.useEffect)(function(){if(!en){N("setSettingsModalState",function(e){return da(da({},e),{},{settingsModal:null})});return}en.startsWith("admin")&&!et&&j(["userNotifications"])},[en,et,N]);var er=(0,u.useMemo)(function(){return C[0]},[C]),ei=(0,u.useMemo)(function(){var e=S||en;return!(0,rG.isEqual)(x[e],h[e])},[en,S,x,h]),eo=(0,u.useCallback)(function(){var e;(!ei||confirm(ds))&&(null!=h&&null!==(e=h.root)&&void 0!==e&&e.reloadOnClose&&(0,X.H5)(Q),N("setSettingsModalState",function(e){return da(da({},e),{},{settingsModal:null})}))},[ei,N,h,Q]),ea=(0,u.useCallback)(function(e){return(h[en]||{})[e]},[en,h]),es=(0,u.useCallback)(function(e){return(h[S]||{})[e]},[S,h]),el=(0,u.useCallback)(function(e){return(x[en]||{})[e]},[en,x]),ec=(0,u.useCallback)(function(){return x[en]||{}},[en,x]),eu=(0,u.useCallback)(function(){return h[en]||{}},[en,h]),ed=(0,u.useCallback)(function(){return h[S]||{}},[S,h]),ep=(0,u.useCallback)(function(e,t){var n=t||en;b(function(t){return da(da({},t),{},(0,i.Z)({},n,da(da({},t[n]),e)))})},[en]),ef=(0,u.useCallback)(function(e,t){var n=t||S;b(function(t){return da(da({},t),{},(0,i.Z)({},n,da(da({},t[n]),e)))})},[S]),em=(0,u.useCallback)(function(e,t){var n=t||en;b(function(t){return da(da({},t),{},(0,i.Z)({},n,da(da({},t[n]),e)))}),y(function(t){return da(da({},t),{},(0,i.Z)({},n,da(da({},t[n]),e)))})},[en]),eh=(0,u.useCallback)(function(e,t){var n=t||S;b(function(t){return da(da({},t),{},(0,i.Z)({},n,da(da({},t[n]),e)))}),y(function(t){return da(da({},t),{},(0,i.Z)({},n,da(da({},t[n]),e)))})},[S]),ev=(0,u.useCallback)(function(e){b(function(t){return da(da({},t),{},(0,i.Z)({},e,null))}),y(function(t){return da(da({},t),{},(0,i.Z)({},e,null))})},[]),eb=(0,u.useCallback)(function(){b(function(e){return da(da({},e),{},(0,i.Z)({},en,x[en]))})},[x,en]),eg=(0,u.useCallback)(function(){b(function(e){return da(da({},e),{},(0,i.Z)({},S,x[S]))})},[x,S]),ex=(0,u.useCallback)(function(e,t){(t||e!==en)&&(t||!ei||confirm(ds))&&(_(null),j([e]),y({}),b(function(e){return{root:e.root}}))},[ei,en]),ey=(0,u.useCallback)(function(e,t){if(t)return _(e);j(function(t){return[].concat((0,rP.Z)(t),[e])})},[]),ew=(0,u.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e.bypassCheck||!ei||confirm(ds))&&(eb(),j(function(e){return e.slice(0,-1)}))},[ei,eb]),eC=(0,u.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e.bypassCheck||!ei||confirm(ds))&&(eg(),_(null))},[ei,eg]),ej=(0,u.useMemo)(function(){return(0,D.jsx)(dn,{isAdminSettings:ee,onClose:eo})},[ee,eo]),ek=(0,u.useCallback)(function(e){_(e)},[]),eO=(0,u.useMemo)(function(){if(!u9[en])return null;var e=u9[en];return(0,D.jsx)(e,{self:E,eventId:R,viewDate:B,dispatch:N,isMobile:L,onClose:eo,hasChanges:ei,occurrenceId:z,currentGroup:A,onGetState:ea,onSetState:em,onStackPop:ew,communityMeta:U,onTabChange:ex,onStackPush:ey,contentLoading:O,onResetState:eb,onClearState:ev,onMutateState:ep,currentModuleId:F,currentCourseId:T,setCommunityMeta:$,setContentLoading:I,onStackPopModal:eC,onSetContentModal:ek,onGetInitialState:el,groupMembershipQuestions:J,setGroupMembershipQuestions:K,onGetFullInitialState:ec,onGetFullContentState:eu})},[E,R,B,N,L,ei,en,eo,A,U,z,O,ew,ey,ex,T,ea,em,F,ev,eb,ep,eC,ek,el,J,ec,eu]),eP=(0,u.useMemo)(function(){return(0,D.jsx)(u8,{self:E,currentGroup:A,canAccessGroup:f,isGroupAdmin:et,onNavigate:ex,currentRootTab:er,paymentStatus:null==H?void 0:H.paymentStatus})},[A,ex,er,H,et,f,E]),eI=(0,u.useMemo)(function(){if(!L||!S)return null;var e=u9[S],t=(0,D.jsx)(e,{self:E,eventId:R,viewDate:B,dispatch:N,isMobile:L,onClose:eo,hasChanges:ei,occurrenceId:z,currentGroup:A,onGetState:es,onSetState:eh,onStackPop:eC,onTabChange:ex,onStackPush:ey,contentLoading:O,onResetState:eg,onClearState:ev,onMutateState:ef,setContentLoading:I,onGetInitialState:el,onGetFullInitialState:ec,onGetFullContentState:ed,groupMembershipQuestions:J,setGroupMembershipQuestions:K});return(0,D.jsx)(ri.u_,{open:!0,onClose:eC,size:"medium",children:t})},[E,R,B,N,L,ei,eo,S,z,A,O,eC,ey,ex,es,eh,ev,eg,ef,J,el,ec,ed]),eD=(0,u.useMemo)(function(){return L?{title:(0,D.jsxs)(e8.X,{gap:8,alignItems:"center",onClick:(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,X.VF)(Q,(0,q.AZ)({groupName:A.name}));case 2:N(e9.fi,function(e){return da(da({},e),{},{settingsModal:null})});case 3:case"end":return e.stop()}},e)})),children:[(0,D.jsx)(eR.Z,{disableLink:!0,group:A,variant:"t8",iconSize:24,iconOnly:!0}),(0,D.jsx)(te.Z,{variant:"t8",children:"Settings"})]}),disableGroupLogo:!0}:null},[A,N,L,Q]);(0,dr.l)(dr.C.SETTINGS_MODAL,eD);var eZ=(0,u.useMemo)(function(){return L?eP:ej},[eP,ej,L]),eS=(0,u.useMemo)(function(){if(O)return(0,D.jsx)(rz.D,{fitWidth:!0})},[O]),e_=(0,u.useMemo)(function(){return L?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(rq,{$contentLoading:O,children:[eO,eS]}),eI]}):(0,D.jsxs)(rW,{$contentLoading:O,children:[eO,eS]})},[eO,L,eI,eS,O]),eM=(0,u.useMemo)(function(){var e,t=(0,rP.Z)(u5),n=(null==E||null===(e=E.member)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.billingMgr)===1,r=(0,v.Td)({user:E,member:null==E?void 0:E.member,group:A});return(n&&t.push({label:"Billing & affiliates",key:"adminBilling",dataTestId:"admin-billing-tab"}),n||(t=t.filter(function(e){return!e.billingMgrOnly})),r||(t=t.filter(function(e){return!e.ownerOnly})),A.archived)?t.map(function(e){return da(da({},e),{},{disabled:"adminBilling"!==e.key})}):t},[A,E]);return(0,D.jsx)(rR,{open:!0,header:eZ,content:e_,onClose:eo,activeTab:er,onTabChange:ex,width:ee?1074:800,height:ee?772:576,navWidth:ee?272:204,tabs:ee?eM:u3})},dc=function(e){var t=e.canAccessGroup,n=(0,P.bI)("settingsModal","currentGroup"),r=n.settingsModal,i=n.currentGroup,o=n.dispatch,a=(0,d.useRouter)();return((0,u.useEffect)(function(){a.query.sm&&(o(e9.fi,function(e){return da(da({},e),{},{settingsModal:a.query.sm})}),(0,X.hj)(a,"sm"))},[a,o]),(0,u.useEffect)(function(){i||o(e9.fi,function(e){return da(da({},e),{},{settingsModal:null})})},[i,o]),r&&i)?(0,D.jsx)(dl,{initialView:r,canAccessGroup:t}):null},du=(0,C.iv)(["flex-direction:column;padding:",";"],function(e){var t=e.theme,n=e.$bottom;return t.isApp&&0===n?"16px 16px 48px 16px":"16px"}),dd=C.ZP.div.withConfig({displayName:"styled__GroupBanner",componentId:"sc-1ya57th-0"})(["position:fixed;bottom:","px;width:100%;height:auto;background-color:",";z-index:1298;display:flex;align-items:center;justify-content:center;padding:8px;",";"],function(e){var t=e.$bottom;return void 0===t?0:t},function(e){return e.$bgColor},function(e){return e.theme.isMobile&&du}),dp=(0,C.ZP)(E.z).withConfig({displayName:"styled__GroupBannerButton",componentId:"sc-1ya57th-1"})(["width:auto;height:","px;margin:",";padding:7px 24px;",""],function(e){return e.theme.isMobile?40:48},function(e){return e.theme.isMobile?"8px 0 0 0":"0 32px"},function(e){return e.theme.isDarkTheme?"color: ".concat(y.O9.n7,";"):void 0}),df=(0,u.memo)(function(){var e,t,n,r,i,o,a=(0,P.bI)("currentGroup","isMobile","self","mobileBottomOffset"),s=a.currentGroup,l=a.isMobile,c=a.self,d=a.mobileBottomOffset,p=a.dispatch,f=(null==c||null===(e=c.member)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.billingMgr)===1,m=!!(null!=s&&null!==(t=s.metadata)&&void 0!==t&&t.archived),h=(null==s||null===(n=s.metadata)||void 0===n?void 0:n.paymentStatus)||null,v=(0,u.useCallback)(function(e){p(e9.ZV,{showPaymentDialog:!0}),p(e9.dO,{paymentDialogType:e})},[p]),b=(0,u.useCallback)(function(){v("update")},[v]),g=(0,u.useCallback)(function(){v("activate")},[v]),x=(0,u.useCallback)(function(){v("unarchive")},[v]);return f&&"failing"===h?(0,D.jsxs)(dd,{$bgColor:y.O9.e2,$bottom:null==d||null===(r=d[I.V.SAFE])||void 0===r?void 0:r.offset,children:[(0,D.jsx)(te.Z,{variant:l?"t5":"t4",color:y.O9.fgError,children:"Your payment has been declined"}),(0,D.jsx)(dp,{variant:"secondary",label:"Fix Billing Issue",onClick:b})]}):f&&"legacy"===h?(0,D.jsxs)(dd,{$bgColor:y.O9.s2,$bottom:null==d||null===(i=d[I.V.SAFE])||void 0===i?void 0:i.offset,children:[(0,D.jsx)(te.Z,{variant:l?"t5":"t4",color:y.O9.fgSuccess,children:"Skool is $99/month"}),(0,D.jsx)(dp,{variant:"secondary",label:"Enter Payment Info",onClick:g})]}):f&&("archived"===h||m)?(0,D.jsxs)(dd,{$bgColor:y.O9.e2,$bottom:null==d||null===(o=d[I.V.SAFE])||void 0===o?void 0:o.offset,children:[(0,D.jsx)(te.Z,{variant:l?"t5":"t4",color:y.O9.fgError,children:"This group has been archived"}),f&&(0,D.jsx)(dp,{variant:"secondary",label:"Reactivate Group",onClick:x})]}):null}),dm=C.ZP.div.withConfig({displayName:"styled__PaymentDialogTitle",componentId:"sc-bd7xa7-0"})([""," text-align:center;margin-bottom:8px;"],N.c.t1),dh=C.ZP.div.withConfig({displayName:"styled__PaymentDialogBody",componentId:"sc-bd7xa7-1"})([""," text-align:center;margin-bottom:32px;"],N.c.t7);N.c.t11;var dv=(0,C.ZP)(E.z).withConfig({displayName:"styled__PaymentDialogSubmit",componentId:"sc-bd7xa7-3"})(["width:100%;height:","px;margin-top:24px;"],function(e){return e.theme.isMobile?40:48}),db=["update","unarchive","activate"],dg={update:{button:"Update",title:"Payment Failed",body:"Update payment method to keep your group active."},activate:{button:"Activate Now",title:"Upgrade your account",body:"Skool is $99/month. To continue using Skool, please enter your payment information below."},unarchive:{button:"Reactivate Group",title:"This group has been archived",body:"Skool is $99/month. To reactivate and continue using Skool, please enter your payment information below."}},dx=(0,u.memo)(function(){var e,t,n,i,o,s,l=(0,P.bI)("currentGroup","showPaymentDialog","paymentDialogType","self","specifiedGroup"),c=l.currentGroup,p=l.showPaymentDialog,m=l.paymentDialogType,h=l.self,v=l.dispatch,b=l.specifiedGroup,g=(0,d.useRouter)(),x=(0,q.Im)(g.query),y=(0,u.useRef)(),w=(0,u.useState)(null),C=w[0],j=w[1],k=(0,u.useState)(""),O=k[0],I=k[1],Z=(0,u.useState)(null),S=Z[0],_=Z[1],M=(0,u.useState)(!1),N=M[0],E=M[1],A=(0,u.useState)(!1),L=A[0],T=A[1],F=(null==h||null===(t=h.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.billingMgr)===1,B=b||c,R=(null==B||null===(n=B.metadata)||void 0===n?void 0:n.paymentStatus)||null,z=(0,u.useCallback)(function(e){v(e9.ZV,{showPaymentDialog:!0}),v(e9.dO,{paymentDialogType:e})},[v]);(0,u.useEffect)(function(){if(F&&"true"===x){if("failing"===R)z("update");else if("archived"===R)z("unarchive");else if("legacy"===R)z("activate");else{var e=(0,q.AZ)({groupName:B.name}),t=e.href,n=e.as;g.push(t,n,{shallow:!0})}}},[x,z,F,R,B,g]);var G=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,o,s,l,c,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=m,e.next="update"===e.t0?3:"activate"===e.t0?9:"unarchive"===e.t0?15:21;break;case 3:return e.next=5,f.Z.updatePaymentMethod({groupID:null==B?void 0:B.id});case 5:return i=(s=e.sent).data,o=s.error,e.abrupt("break",21);case 9:return e.next=11,f.Z.activatePayment({groupID:null==B?void 0:B.id});case 11:return i=(l=e.sent).data,o=l.error,e.abrupt("break",21);case 15:return e.next=17,f.Z.activatePayment({groupID:null==B?void 0:B.id});case 17:return i=(c=e.sent).data,o=c.error,e.abrupt("break",21);case 21:if(!o){e.next=26;break}return v(e9.bI,{message:(null===(u=o.data)||void 0===u||null===(u=u.fields)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.error)||"There was an issue with your request, please try again",severity:"error"}),v(e9.ZV,{showPaymentDialog:!1}),v(e9.dO,{paymentDialogType:""}),e.abrupt("return");case 26:null!==(t=i)&&void 0!==t&&t.clientSecret&&j(i.clientSecret),null!==(n=i)&&void 0!==n&&n.immediate?I("paymentIntent"):I("setupIntent"),null!==(r=i)&&void 0!==r&&r.waitToken?_(i.waitToken):v(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"});case 29:case"end":return e.stop()}},e)})),[v,B,m]);(0,u.useEffect)(function(){m&&p&&db.includes(m)&&G()},[m,p,G]);var U=(0,u.useCallback)(function(){if(j(null),I(""),E(!1),T(!1),v(e9.ZV,{showPaymentDialog:!1}),v(e9.dO,{paymentDialogType:""}),x){var e=(0,q.AZ)({groupName:B.name}),t=e.href,n=e.as;g.push(t,n,{shallow:!0})}},[B,v,x,g]),$=(0,u.useCallback)((e=(0,r.Z)(a().mark(function e(t){var n,r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),T(!0),e.prev=2,e.next=5,y.current.handleIntentConfirmation(O);case 5:e.next=14;break;case 7:if(e.prev=7,e.t0=e.catch(2),"payment_intent_unexpected_state"!==e.t0.message){e.next=12;break}return e.next=12,G();case 12:return T(!1),e.abrupt("return");case 14:if(n=({update:"Payment info updated",activate:"Subscription is now active",unarchive:"Group is unarchived"})[m],!S){e.next=27;break}return e.prev=17,e.next=20,(0,iE.Cx)({token:S,userID:null==h?void 0:h.id,timeoutMS:6e4});case 20:e.next=27;break;case 22:return e.prev=22,e.t1=e.catch(17),v(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),T(!1),e.abrupt("return");case 27:if(U(),"/games/onboarding"!==g.asPath){e.next=31;break}return g.reload(),e.abrupt("return");case 31:(0,Q.Lx)({message:n}),i=(r=(0,q.AZ)({groupName:B.name})).href,o=r.as,g.push(i,o,{shallow:!1});case 34:case"end":return e.stop()}},e,null,[[2,7],[17,22]])})),function(t){return e.apply(this,arguments)}),[B,v,O,U,m,g,h,S,G]),W=(0,D.jsxs)("div",{children:[(0,D.jsx)(dm,{children:null===(i=dg[m])||void 0===i?void 0:i.title}),(0,D.jsx)(dh,{children:null===(o=dg[m])||void 0===o?void 0:o.body}),(0,D.jsx)(sb.Z,{ref:y,intentClientSecret:C,paymentElementOnChange:E,isLoading:L}),(0,D.jsx)(dv,{type:"submit",onClick:$,disabled:!N,loading:L,label:null===(s=dg[m])||void 0===s?void 0:s.button})]});return!db.includes(m)&&p?(console.error("Invalid paymentDialogType set: dialog not rendered"),null):(0,D.jsx)(ri.u_,{size:"small",open:p,onClose:L?void 0:U,children:W})}),dy=n(20452),dw=(0,dy.$o)(),dC=(0,C.vJ)(["@keyframes bg-fade-out-comment{0%{background-color:",";}40%{background-color:",";}100%{background-color:",";}}@keyframes bg-fade-out{0%{background-color:",";}40%{background-color:",';}100%{background-color:inherit;}}.skool-editor{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:16px;line-height:24px;color:',";}.skool-editor:focus{outline:none;}.skool-editor p{margin:0;}.skool-editor ul,.skool-editor ol{margin:0;margin-block-start:0;margin-block-end:0;padding-left:0;list-style-position:inside;}",' .skool-editor ul p,.skool-editor ol p{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:16px;line-height:24px;color:',';display:inline;}.skool-editor ul li p br:first-child,.skool-editor ol li p br:first-child{font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:16px;line-height:21px;}.skool-editor .user-mention{color:',";background-color:",";}.skool-editor .user-mention.ProseMirror-selectednode{color:",";background-color:#c6e3ec;}.skool-editor .course-reference{color:",";background-color:",";}.skool-editor .course-reference.ProseMirror-selectednode{color:",";background-color:#c6e3ec;}.skool-editor a.link{color:",";text-decoration:none;}.skool-editor a.link:hover{color:",";text-decoration:underline;}.skool-editor-suggestion-list{padding:16px 0;z-index:2;transition:all 0.25s cubic-bezier(0.3,1.2,0.2,1) 0s;position:relative;border-radius:10px;border:1px solid ",";background:",";overflow:hidden;display:flex;flex-direction:column;","}.skool-editor p.is-editor-empty:first-child::before{content:attr(data-placeholder);float:left;color:",";pointer-events:none;height:0;}.skool-editor2{"," color:",";overflow-x:hidden;overflow-y:hidden;padding:0;width:100%;}.skool-editor2:focus{outline:none;}.skool-editor2 p{"," margin-block-start:1em;margin-block-end:1em;}.skool-editor2 h1{","}.skool-editor2 h1:first-child{margin-top:0;}.skool-editor2 h2{","}.skool-editor2 h2:first-child{margin-top:0;}.skool-editor2 h3{","}.skool-editor2 h3:first-child{margin-top:0;}.skool-editor2 h4{","}.skool-editor2 h4:first-child{margin-top:0;}.skool-editor2 a.link{color:",";text-decoration:none;}.skool-editor2 a.link:hover{color:",";text-decoration:underline;}.skool-editor2 p.is-editor-empty:first-child::before{content:attr(data-placeholder);float:left;color:",";pointer-events:none;height:0;}.skool-editor2 img{max-width:100%;border-radius:4px;}.skool-editor2[contenteditable=true]:focus-within div.ProseMirror-selectednode img{outline:3px solid ",";padding:0;}.skool-editor2 blockquote{background-color:",";margin:16px 8px;}.skool-editor2 blockquote p{border-left:3px solid ",";padding:0.5em 16px;margin-block:0;}.skool-editor2 blockquote p:last-child{padding-top:0.5em;padding-bottom:1.0em;}.skool-editor2 blockquote p:first-child{padding-top:1.0em;padding-bottom:0.5em;}.skool-editor2 hr{margin:8px;}.skool-editor2 pre{background-color:",";display:block;padding:16px;border-radius:5px;overflow:auto;}.skool-editor2 pre code{color:inherit;background:none;display:inline;font-size:85%;padding:0;}.skool-editor2 code{color:inherit;display:inline;background-color:",';border-radius:3px;padding:0.2em 0.4em;font-family:SFMono-Regular,Menlo,Consolas,"PT Mono","Liberation Mono",Courier,monospace;font-size:85%;}.ProseMirror pre{white-space:pre !important;}.skool-editor2 ul,.skool-editor2 ol{padding-inline-start:2em;}.EmojiPickerReact:not(.epr-dark-theme){--epr-highlight-color:var(--epr-search-input-bg-color);}:root{color-scheme:',";}"],dw?"".concat(y.O9.p2,"26"):y.O9.p1,dw?"".concat(y.O9.p2,"26"):y.O9.p1,y.O9.n2,dw?"".concat(y.O9.p2,"26"):y.O9.p1,dw?"".concat(y.O9.p2,"26"):y.O9.p1,y.O9.n7,(0,H.G6)()&&".skool-editor ul { padding-inline-start: 18px; list-style-position: outside; } .skool-editor ol { padding-inline-start: 22px; list-style-position: outside; }",y.O9.n7,y.O9.sd1,dw?y.O9.n3:"#e5f3f7",y.O9.sd1,y.O9.sd1,dw?y.O9.n3:"#e5f3f7",y.O9.sd1,y.O9.sd1,y.O9.sd1,y.O9.n3,y.O9.n1,K.Wn,y.O9.n5,N.c.t7,y.O9.n7,N.c.t7,N.c.t1,N.c.t2,N.c.t3,N.c.t4,y.O9.sd1,y.O9.sd1,y.O9.n5,y.O9.sd1,y.O9.n2,y.O9.n7,y.O9.n2,y.O9.n2,dw?"dark":"normal"),dj=n(54465),dk=n(80199),dO=C.ZP.div.withConfig({displayName:"styled__DesktopHeader",componentId:"sc-7fpsl8-0"})(["height:100%;padding:14px 32px;display:flex;gap:16px;> div{display:flex;flex-direction:column;> span{color:",";","}}"],y.O9.n5,N.c.t9),dP=C.ZP.div.withConfig({displayName:"styled__MobileHeader",componentId:"sc-7fpsl8-1"})(["display:flex;align-items:center;gap:8px;padding-left:4px;height:52px;border-bottom:1px solid ",";"],y.O9.n3),dI=C.ZP.div.withConfig({displayName:"styled__CoursesTabWrapper",componentId:"sc-401lps-0"})(["padding-bottom:64px;position:relative;"]),dD=C.ZP.div.withConfig({displayName:"styled__CourseTabLabel",componentId:"sc-401lps-1"})(["margin-bottom:8px;",""],N.c.t5),dZ=C.ZP.div.withConfig({displayName:"styled__CourseItem",componentId:"sc-401lps-2"})(["> div:first-child{display:flex;gap:8px;}"]),dS=C.ZP.div.withConfig({displayName:"styled__CourseItemWrapper",componentId:"sc-401lps-3"})(["display:flex;flex-direction:column;margin:16px 0px 24px 0px;gap:16px;"]),d_=C.ZP.div.withConfig({displayName:"styled__CourseTitle",componentId:"sc-401lps-4"})([""," ",""],N.c.ellipsis,N.c.t5),dM=C.ZP.div.withConfig({displayName:"styled__CourseProgress",componentId:"sc-401lps-5"})(["flex-shrink:0;color:",";",""],y.O9.s2,N.c.t7),dN=C.ZP.div.withConfig({displayName:"styled__AccessLine",componentId:"sc-401lps-6"})(["color:",";"," display:flex;gap:4px;"],y.O9.n6,N.c.t11),dE=C.ZP.div.withConfig({displayName:"styled__CourseOption",componentId:"sc-401lps-7"})(["display:flex;flex-direction:column;> label{cursor:pointer;"," ","}> span{color:",";","}"],N.c.t5,N.c.ellipsis,y.O9.n6,N.c.t9),dA=(0,C.iv)(["width:100% !important;"]),dL=(0,C.ZP)(er.h_).withConfig({displayName:"styled__AccessDropdown",componentId:"sc-401lps-8"})(["width:390px !important;> button{width:100%;}",""],function(e){return e.theme.isMobile&&dA}),dT=C.ZP.span.withConfig({displayName:"styled__ActionText",componentId:"sc-401lps-9"})(["color:",";cursor:pointer;margin-left:4px;&:hover{text-decoration:underline;}"],y.O9.sd1),dF=C.ZP.div.withConfig({displayName:"styled__Refunded",componentId:"sc-401lps-10"})(["color:",";"],y.O9.e2),dB=C.ZP.div.withConfig({displayName:"styled__AdminGranted",componentId:"sc-401lps-11"})(["color:",";"],y.O9.n5),dR=C.ZP.div.withConfig({displayName:"styled__DripLine",componentId:"sc-401lps-12"})(["display:flex;color:",";",""],y.O9.n5,N.c.t11),dz=C.ZP.span.withConfig({displayName:"styled__DropdownLabel",componentId:"sc-401lps-13"})(["color:",";"],y.O9.n5),dG=n(51577),dU=C.ZP.div.withConfig({displayName:"styled__PaymentDetailsModalWrapper",componentId:"sc-1ia4o5i-0"})(["> h2{"," margin:0px 0px 16px 0px;}"],N.c.t1),d$=C.ZP.div.withConfig({displayName:"styled__InfoBlock",componentId:"sc-1ia4o5i-1"})(["display:flex;flex-direction:column;"]),dW=C.ZP.div.withConfig({displayName:"styled__InfoItem",componentId:"sc-1ia4o5i-2"})(["display:flex;flex-wrap:wrap;"," > div{","}"],N.c.t7,N.c.t5),dq=(0,C.iv)(["justify-content:start;display:inherit;"]),dH=C.ZP.div.withConfig({displayName:"styled__SpreadInfoItem",componentId:"sc-1ia4o5i-3"})(["display:flex;justify-content:space-between;"," > span:last-child{color:",";}",""],N.c.t7,y.O9.n5,function(e){return e.theme.isMobile&&dq}),dV=(0,C.ZP)(Y.r).withConfig({displayName:"styled__InvoiceId",componentId:"sc-1ia4o5i-4"})(["cursor:pointer;color:",";&:hover{text-decoration:underline;}"],y.O9.sd1),dY=C.ZP.div.withConfig({displayName:"styled__TotalPaid",componentId:"sc-1ia4o5i-5"})(["> span{color:",";}"],y.O9.e2);function dJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dJ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dK=function(e){var t=e.invoice,n=e.onClose,i=e.markRefunded,o=(0,P.bI)("self","membershipSettingsUser","currentGroup"),s=o.self,l=o.dispatch,c=o.membershipSettingsUser,d=o.currentGroup,p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,u.useState)(!1),b=v[0],g=v[1],x=(0,u.useState)(null),y=x[0],w=x[1],C=t.invoiceId,j=t.invoiceNumber,k=t.chargeCreatedAt,O=t.currency,I=void 0===O?"usd":O,Z=t.amount,S=t.chargeId,_=t.userPaymentMethod,M=void 0===_?{}:_,N=t.refunded,E=t.fees,A=void 0===E?[]:E,L=t.status,T=t.refundable,F=M.brand,B=M.last4,R=M.country,z=c.firstName,G=c.lastName,U="".concat(z," ").concat(G),$="open"===L,W=(0,u.useMemo)(function(){return(null==A?void 0:A.reduce(function(e,t){return t.amount+e},0))||0},[A]),q=(0,u.useCallback)(function(e,t){var n=e.label,r=e.content;return(0,D.jsxs)(dW,{children:[(0,D.jsxs)("span",{children:["".concat(n,":"),"\xa0"]}),(0,D.jsx)("div",{children:r})]},t)},[]),H=(0,u.useCallback)(function(e,t){var n=e.label,r=e.content;return(0,D.jsxs)(dH,{children:[(0,D.jsxs)("span",{children:["".concat(n,":"),"\xa0"]}),(0,D.jsx)("span",{children:r})]},t)},[]),V=(0,u.useMemo)(function(){var e=[{label:"Invoice",content:(0,D.jsx)(dV,{href:"/".concat(d.name,"/--/inv/").concat(C),newTab:!0,children:j})},{label:"Date paid",content:e2().unix(k).format("MMM D, YYYY")},{label:"Customer",content:U},{label:"Payment method",content:"".concat(null==F?void 0:F.toUpperCase()," - ").concat(B)}];return(0,D.jsx)(d$,{style:{marginBottom:24},children:e.map(q)})},[q,C,j,k,U,F,B,d]),Y=(0,u.useMemo)(function(){var e=(0,id.O5)({currency:I,amount:$?0:Z,showZeroes:!0}),t=[{label:"Total paid",content:(0,D.jsxs)(dY,{children:[e,N&&(0,D.jsx)("span",{children:" (".concat(e," refunded)")})]})},{label:"Fees",content:(0,id.O5)({currency:I,amount:W,showZeroes:!0})},{label:"Amount received after fees",content:(0,id.O5)({currency:I,amount:$?0:Z-W,showZeroes:!0})}];return(0,D.jsx)(d$,{style:{marginBottom:24},children:t.map(q)})},[q,Z,I,N,W,$]),J=(0,u.useMemo)(function(){var e=[{label:"Fee breakdown"},{label:"Country",content:R}],t=null;return null==A||A.forEach(function(e){var n=e.type,r=e.amount,i=(0,id.O5)({currency:I,amount:r,showZeroes:!0}),o={label:dG.zD[n],content:i};n===dG.$K&&(t=o)}),t&&e.push(t),(0,D.jsx)(d$,{style:{marginBottom:32},children:e.map(H)})},[H,A,I,R]),X=(0,u.useCallback)(function(){w(null)},[]),K=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,f.Z.refundPayment({memberId:c.member.id,chargeId:S});case 5:if(n=(t=e.sent).data,!(r=t.error)){e.next=11;break}return g(!1),e.abrupt("return",l(e9.bI,{message:(null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error)||"There was an issue with your request, please try again",severity:"error"}));case 11:return e.prev=11,e.next=14,(0,iE.Cx)({token:n.token,userID:null==s?void 0:s.id});case 14:h(!0),g(!1),i(),X(),l(e9.bI,{message:"Payment refunded"}),e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(11),g(!1),e.abrupt("return",l(e9.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 25:case"end":return e.stop()}},e,null,[[11,21]])})),[c,S,i,l,X,T,s]),Q=(0,u.useMemo)(function(){return{header:"Refund payment",content:(0,D.jsxs)("span",{children:["Are you sure you want to refund ",(0,D.jsx)("b",{children:(0,id.O5)({currency:I,amount:Z,showZeroes:!0})})," to ".concat(U,"?")]}),confirmLabel:"Refund payment",confirmButtonVariant:"error",waitForComplete:!0,completed:m,onConfirm:K,onClose:X}},[Z,X,I,K,m,U]),ee=(0,u.useMemo)(function(){return{header:"Insufficient balance",content:"This refund is greater than your account balance. Try refunding this transaction when you have more money in your account, or you can refund the customer manually using another method like PayPal.",hideCancel:!0,confirmLabel:"Cancel",confirmButtonVariant:"borderless",onConfirm:X,onClose:X}},[X]),et=(0,u.useCallback)(function(){n(m)},[n,m]);return y?(0,D.jsx)(tP.s,dX({open:!0,loading:b},y)):(0,D.jsx)(n2.T,{open:!0,size:"small",onClose:et,onCancel:et,confirmButtonVariant:"error",confirmLabel:"Refund Payment",disabled:N||"open"===L,onConfirm:function(){return w(T?Q:ee)},children:(0,D.jsxs)(dU,{children:[(0,D.jsx)("h2",{children:"Payment details"}),V,Y,J]})})},dQ=(0,u.memo)(function(e){var t=e.markRefunded,n=e.invoiceId,i=e.onClose,o=(0,P.bI)("currentGroup"),s=o.dispatch,l=o.currentGroup,c=(0,u.useState)(null),d=c[0],p=c[1],m=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getSubscriptionInvoiceAdmin({invoice:n,groupId:l.id});case 2:if(r=(t=e.sent).data,!t.error){e.next=7;break}return e.abrupt("return",s(e9.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 7:p(r);case 8:case"end":return e.stop()}},e)})),[l,n,s]);return((0,u.useEffect)(function(){m()},[n,m]),d)?(0,D.jsx)(dK,{invoice:d,onClose:i,markRefunded:function(){t(d.chargeId),p(function(e){return dX(dX({},e),{},{refunded:!0})})}}):(0,D.jsx)(ri.u_,{open:!0,size:"small",children:(0,D.jsx)(rz.D,{fitWidth:!0})})});function d0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d0(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d0(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d2=(0,u.memo)(function(){var e,t,n,i=(0,P.bI)("membershipSettingsUser","currentGroup"),o=i.dispatch,s=i.membershipSettingsUser,l=i.currentGroup,c=(0,u.useState)([]),d=c[0],p=c[1],m=(0,u.useState)(!0),h=m[0],v=m[1],b=(0,u.useState)(!0),g=b[0],x=b[1],y=(0,u.useState)(null),w=y[0],C=y[1],j=(0,u.useState)(!0),k=j[0],O=j[1],I=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getMemberCoursePermissions({groupID:l.id,memberID:s.member.id,progression:!0});case 2:if(n=(t=e.sent).data,!(r=t.error)){e.next=9;break}return o(e9.bI,{message:(null==r||null===(i=r.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue fetching this user's courses, please try again.",severity:"error"}),v(!1),e.abrupt("return");case 9:p((null==n?void 0:n.courses)||[]),v(!1);case 11:case"end":return e.stop()}},e)})),[l,s,o]),Z=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,l;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getMemberPaymentHistory({memberId:s.member.id,productType:"course"});case 2:if(n=(t=e.sent).data,!(r=t.error)){e.next=9;break}return o(e9.bI,{message:(null==r||null===(i=r.data)||void 0===i||null===(i=i.fields)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.error)||"There was an issue fetching this user's invoices, please try again.",severity:"error"}),O(!1),e.abrupt("return");case 9:n&&(x((null!=(l=n.invoices)?l:[]).reduce(function(e,t){var n=t.referenceProductId;return e[n]?(e[n].push(t),e[n].sort(function(e,t){return t.chargeCreatedAt-e.chargeCreatedAt})):e[n]=[t],e},{})),O(!1));case 10:case"end":return e.stop()}},e)})),[s,o]),S=(0,u.useMemo)(function(){return d.filter(function(e){return e.metadata.userHasAccess})},[d]),_=(0,u.useCallback)((e=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateMemberCoursePermission({groupID:l.id,memberID:s.member.id,grants:[t]});case 2:return e.sent.error&&o(e9.bI,{message:"Failed to grant access. Try it again later.",severity:"error"}),e.next=7,I();case 7:o(e9.bI,{message:"Access granted"});case 8:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),[s,o,I,l]),M=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateMemberCoursePermission({groupID:l.id,memberID:s.member.id,revokes:[t]});case 2:return e.sent.error&&o(e9.bI,{message:"Failed to remove access. Try it again later.",severity:"error"}),e.next=7,I();case 7:o(e9.bI,{message:"Access removed"});case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[s,o,I,l]),N=(0,u.useCallback)(function(e){C(e)},[]),E=(0,u.useCallback)(function(){C(null)},[]),A=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.unlockCourse({courseId:t,memberId:s.member.id});case 2:return e.next=4,I();case 4:o(e9.bI,{message:"Content released"});case 5:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[o,I,s]),L=(0,u.useCallback)(function(e){var t,n;return!(null!=e&&null!==(t=e.metadata)&&void 0!==t&&t.hasDripModules)||null!=e&&e.metadata.unlocked?null:(0,D.jsxs)(dR,{children:[(0,D.jsx)("div",{children:"Currently in drip"}),(0,D.jsx)(tP.s,{confirmLabel:"Release",header:"Release all content?",onConfirm:function(){return A(e.id)},content:"Are you sure you want to release all ".concat(null==e||null===(n=e.metadata)||void 0===n?void 0:n.title," content for ").concat(null==s?void 0:s.firstName," ").concat(null==s?void 0:s.lastName,"? You can't undo this."),children:(0,D.jsx)(dT,{children:"(release all content)"})})]})},[A,s]),T=(0,u.useCallback)(function(e){var t=e.metadata,n=e.id,r=t.title,i=t.userCompleted,o=t.numModules,a=void 0===o?0:o,s=t.privacy,l=t.minAccessLevel,c=t.isRevocable,u="Open: ",d="All members have access",p=s===oc.pf,f=JSON.parse(t.dripConfig||"{}"),m=g[n],h=p&&(null==m?void 0:m.length)>0?m[0]:null,v=null!=h&&h.currency&&null!=h&&h.amount?(0,id.O5)({currency:null==h?void 0:h.currency,amount:null==h?void 0:h.amount,showZeroes:!1}):null!=e&&e.currency&&null!=e&&e.amount?(0,id.O5)({currency:null==e?void 0:e.currency,amount:null==e?void 0:e.amount,showZeroes:!1}):"";switch(s){case oc.xO:u="Private: ",d="Specific members have access";break;case oc.Fs:u="Level unlock: ",d="Level ".concat(l," members have access");break;case oc.pf:u="Buy now: ",d="Members pay ".concat(v," for access");break;case oc.LC:u="Time unlock: ",d="Members get access at Day ".concat(null==f?void 0:f.days)}return(0,D.jsxs)(dZ,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(d_,{children:r}),(0,D.jsx)(dM,{children:"(".concat(0===a?100:Math.floor((void 0===i?0:i)/a*100),"% progress)")})]}),(0,D.jsxs)(dN,{children:[(0,D.jsx)("strong",{children:u}),d,p&&h&&(0,D.jsx)(dT,{onClick:function(){return N(h.invoiceId)},children:"(view transaction)"}),p&&(null==h?void 0:h.refunded)&&(0,D.jsx)(dF,{children:"(refunded)"})]}),s!==oc.IX&&c&&(0,D.jsx)(dN,{children:(0,D.jsxs)(dB,{children:["Admin granted access",(0,D.jsx)(dT,{onClick:function(){return M(n)},children:"(remove access)"})]})}),L(e)]},n)},[M,L,N,g]),F=(0,u.useMemo)(function(){return d.map(function(e){var t=e.currency,n=e.amount,r=e.metadata,i=r.title,o=r.privacy,a=r.minAccessLevel,s="Open: ",l="All members have access",c=JSON.parse(e.metadata.dripConfig||"{}"),u=t&&n?(0,id.O5)({currency:t,amount:n,showZeroes:!1}):"";switch(o){case oc.xO:s="Private: ",l="Specific members have access";break;case oc.Fs:s="Level unlock: ",l="Level ".concat(a," members have access");break;case oc.pf:s="Buy now: ",l="Members pay ".concat(u," for access");break;case oc.LC:s="Time unlock: ",l="Members get access at Day ".concat(null==c?void 0:c.days)}return d1(d1({},e),{},{label:(0,D.jsxs)(dE,{children:[(0,D.jsx)("label",{children:i}),(0,D.jsxs)(dN,{children:[(0,D.jsx)("strong",{children:s}),l]})]}),disabled:!!e.metadata.userHasAccess||e.metadata.privacy===oc.IX,onClick:function(){return _(e.id)}})})},[d,_]),B=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:C(null);case 3:case"end":return e.stop()}},e)})),[Z]);return((0,u.useEffect)(function(){I(),Z()},[I,Z]),h||k)?(0,D.jsx)(rz.D,{fitWidth:!0}):(0,D.jsxs)(dI,{children:[(0,D.jsx)(dD,{children:"Has access to:"}),(0,D.jsx)(dS,{children:S.map(T)}),(0,D.jsx)(dD,{children:"Give access to:"}),(0,D.jsx)(dL,{fitButton:!0,maxDropdownHeight:400,variant:"input",label:(0,D.jsx)(dz,{children:"Select course"}),options:F}),w&&(0,D.jsx)(dQ,{invoiceId:w,onClose:E,markRefunded:B})]})}),d9=C.ZP.div.withConfig({displayName:"styled__InputWrapper",componentId:"sc-14t0lk1-0"})(["margin-top:32px;"]),d3=(0,C.iv)(["flex-direction:column-reverse;gap:8px;button:last-of-type{flex:auto;}"]),d5=C.ZP.div.withConfig({displayName:"styled__ButtonWrapper",componentId:"sc-14t0lk1-1"})(["display:flex;button:last-of-type{flex:1;}",""],function(e){return e.theme.isMobile&&d3}),d4=(0,u.memo)(function(e){var t,n,i=e.user,o=e.onConfirm,s=e.onClose,l=(0,u.useState)(!1),c=l[0],d=l[1],p=(0,u.useState)(""),f=p[0],m=p[1],h=(0,P.bI)("currentGroup","isMobile"),v=h.currentGroup,b=h.isMobile,g=(0,u.useCallback)(function(e){m(e.target.value)},[]),x=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!0),e.next=4,o({groupId:null==v?void 0:v.id,newOwnerId:null==i?void 0:i.id,password:f});case 4:d(!1);case 5:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[null==v?void 0:v.id,o,f,i]);return(0,D.jsx)(ri.u_,{size:"small",open:!0,children:(0,D.jsxs)("form",{onSubmit:x,children:[(0,D.jsx)(ri.xB,{children:"Transfer ownership?"}),(0,D.jsxs)(ri.fe,{children:[(0,D.jsxs)(ew.s,{gap:16,children:[(0,D.jsxs)(te.Z,{variant:"t7",children:["Are you sure you want to transfer ownership of"," ",(0,D.jsx)("strong",{children:null==v||null===(n=v.metadata)||void 0===n?void 0:n.displayName})," ","to ",(0,D.jsx)("strong",{children:"".concat(null==i?void 0:i.firstName," ").concat(null==i?void 0:i.lastName,"?")})]}),(0,D.jsxs)(te.Z,{variant:"t7",children:["Your role will change to Admin and you will lose all Owner privileges."," ",(0,D.jsx)(te.Z,{as:"span",color:y.O9.e2,children:"This is a serious action. Be careful."})]})]}),(0,D.jsx)(d9,{children:(0,D.jsx)(of.I,{type:"password",label:"Password",value:f,onChange:g})})]}),(0,D.jsx)(ri.mz,{children:(0,D.jsxs)(d5,{children:[(0,D.jsx)(E.z,{variant:b?"secondary":"borderless",label:"Cancel",onClick:s}),(0,D.jsx)(E.z,{variant:"error",label:"Transfer Ownership",onClick:x,disabled:!f||c,loading:c})]})})]})})}),d6=C.ZP.div.withConfig({displayName:"styled__MembershipTabWrapper",componentId:"sc-gmyn28-0"})([""]),d8=C.ZP.div.withConfig({displayName:"styled__MembershipInfo",componentId:"sc-gmyn28-1"})(["display:flex;flex-wrap:wrap;> label{margin-right:8px;","}> span{","}> div{margin-left:4px;height:24px;}"],N.c.t5,N.c.t7),d7=C.ZP.div.withConfig({displayName:"styled__MembershipInfoBlock",componentId:"sc-gmyn28-2"})(["flex-direction:column;display:flex;gap:16px;margin-bottom:32px;"]),pe=C.ZP.div.withConfig({displayName:"styled__MemberActionWithConfirm",componentId:"sc-gmyn28-3"})(["color:",";cursor:pointer;width:fit-content;"," &:hover{text-decoration:underline;}"],y.O9.n5,N.c.t7),pt=C.ZP.div.withConfig({displayName:"styled__ChangeRole",componentId:"sc-gmyn28-4"})(["display:flex;align-items:center;color:",";"," &:hover{text-decoration:underline;}"],y.O9.sd1,N.c.t7),pn=C.ZP.div.withConfig({displayName:"styled__ConfirmModalWrapper",componentId:"sc-gmyn28-5"})(["strong{","}"],N.c.t5),pr=C.ZP.div.withConfig({displayName:"styled__SubscriptionInfoItems",componentId:"sc-gmyn28-6"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:32px;"]),pi=C.ZP.div.withConfig({displayName:"styled__SubscriptionInfoItem",componentId:"sc-gmyn28-7"})(["display:flex;gap:16px;align-items:center;color:",";> span{","}"],function(e){return e.$color},N.c.t7),po=(0,C.ZP)(ez.J).withConfig({displayName:"styled__StyledIcon",componentId:"sc-gmyn28-8"})(["height:","px;width:24px;"],function(e){return e.$height}),pa=C.ZP.div.withConfig({displayName:"styled__Actions",componentId:"sc-gmyn28-9"})(["display:flex;flex-direction:column;gap:16px;margin-bottom:32px;"]),ps=["label","content"];function pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pu={member:"Member","group-admin":"Admin","group-moderator":"Moderator"},pd=(0,u.memo)(function(e){var t,n,i,o,s,l,c=e.memberInGroup,p=e.memberIsAdminModerator,m=e.reloadOnClose,h=e.memberIsOwner,g=(0,P.bI)("self","membershipSettingsUser","currentGroup"),x=g.self,C=g.dispatch,j=g.membershipSettingsUser,k=g.currentGroup,O=(0,u.useState)(!1),I=O[0],Z=O[1],S=(0,u.useState)(!1),_=S[0],M=S[1],N=(0,d.useRouter)().reload,E=(0,eo.C1)(),A=(0,en.Z)(E,3),L=A[0],T=A[1],F=A[2],B=(null==j||null===(o=j.member)||void 0===o||null===(o=o.metadata)||void 0===o?void 0:o.billingMgr)===1,R=!!(null!=j&&null!==(s=j.member)&&void 0!==s&&null!==(s=s.metadata)&&void 0!==s&&s.msbs),z=j.member.role,G=(0,u.useMemo)(function(){return(0,v.CP)({group:k,user:x,member:null==x?void 0:x.member})},[x,k]),U=(0,u.useMemo)(function(){return(0,v.Td)({user:x,member:null==x?void 0:x.member,group:k})},[k,x]),$=(0,u.useMemo)(function(){var e=(null==j||null===(t=j.member)||void 0===t?void 0:t.inviteEmail)||(null==j||null===(n=j.member)||void 0===n||null===(n=n.metadata)||void 0===n?void 0:n.mbme);if(!e){var t,n,r,i=(null==j||null===(r=j.member)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.survey)&&JSON.parse(j.member.metadata.survey);if(null!=i&&i.survey){var o=i.survey.find(function(e){return"email"===e.type});e=o?o.answer:""}}if(e)return(0,D.jsxs)(d8,{children:[(0,D.jsx)("label",{children:"Email:"}),(0,D.jsx)("span",{children:e})]})},[j]),W=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t,n){var r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.updateMemberRole({memberID:j.member.id,newRole:t});case 2:if(!(r=e.sent.error)){e.next=8;break}return o=422===r.status&&null!=r&&null!==(i=r.data)&&void 0!==i&&null!==(i=i.fields)&&void 0!==i&&i.length?r.data.fields[0].error:"Failed to update member role",C(e9.bI,{message:o,severity:"error"}),e.abrupt("return");case 8:n&&(0,Q.Lx)({message:n,expireInMSec:3e3}),N();case 10:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[j,C,N]),H=(0,u.useCallback)((n=(0,r.Z)(a().mark(function e(t){var n,r,i,o,s,l,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.newRole,r=t.message,M(!0),e.next=4,f.Z.updateMemberRole({memberID:j.member.id,newRole:n});case 4:if(o=(i=e.sent).data,!(s=i.error)){e.next=12;break}return c=422===s.status&&null!=s&&null!==(l=s.data)&&void 0!==l&&null!==(l=l.fields)&&void 0!==l&&l.length?s.data.fields[0].error:"Failed to ".concat(n===b.th?"ban":"remove"," member"),C(e9.bI,{message:c,severity:"error"}),M(!1),e.abrupt("return");case 12:return r&&(0,Q.Lx)({message:r,expireInMSec:3e3}),e.prev=13,e.next=16,(0,iE.Cx)({token:o.token,userID:null==x?void 0:x.id,timeoutMS:6e4});case 16:Z(!0),M(!1),N(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),C(e9.bI,{message:"Something went wrong, please try again later",severity:"error"}),M(!1);case 25:case"end":return e.stop()}},e,null,[[13,21]])})),function(e){return n.apply(this,arguments)}),[C,j,N,x]),V=(0,u.useCallback)(function(){R?H({message:"Member removed",newRole:b.Wo}):W(b.Wo,"Member removed")},[W,H,R]),J=(0,u.useCallback)(function(){R?H({message:"Member banned",newRole:b.th}):W(b.th,"Member banned")},[W,H,R]),X=(0,u.useCallback)(function(){W(b.Wo,"Member unbanned")},[W]),K=(0,u.useCallback)(function(e){var t=e.label,n=e.content,r=(0,w.Z)(e,ps);return(0,D.jsx)(tP.s,pc(pc({},r),{},{content:(0,D.jsx)(pn,{children:n}),loading:_,waitForComplete:R,completed:I,confirmButtonVariant:"error",children:(0,D.jsx)(pe,{children:t})}))},[I,_,R]),ee=(0,u.useMemo)(function(){if(!c||!G||h)return null;var e=[{label:"Member",active:z===b.bD,onClick:function(){return W(b.bD,"Role updated")}},{label:"Admin",active:z===b.oN,onClick:function(){return W(b.oN,"Role updated")}},{label:"Moderator",active:z===b.xC,onClick:function(){return W(b.xC,"Role updated")},disabled:p&&z!==b.xC}];return U&&e.push({label:"Owner",disabled:z!==b.oN,onClick:function(){return T()}}),(0,D.jsx)(er.h_,{options:e,placement:"bottom-end",children:(0,D.jsx)(pt,{children:"(change)"})})},[c,G,h,U,z,p,W,T]),et=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.addBillingManager({groupId:k.id,userId:j.id});case 2:(0,Q.Lx)({message:"Billing access granted",expireInMSec:3e3}),N();case 4:case"end":return e.stop()}},e)})),[k,j,N]),ei=(0,u.useCallback)((0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.removeBillingManager({groupId:k.id,userId:j.id});case 2:(0,Q.Lx)({message:"Billing access removed",expireInMSec:3e3}),N();case 4:case"end":return e.stop()}},e)})),[k,j,N]),ea=(0,u.useCallback)((i=(0,r.Z)(a().mark(function e(t){var n,r,i,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.groupId,r=t.newOwnerId,i=t.password,e.prev=1,e.next=4,f.Z.changeGroupOwner({groupId:n,newOwnerId:r,password:i});case 4:if(!(o=e.sent.error)){e.next=11;break}return s="Failed to change group owner",(null==o?void 0:o.status)===400&&(null==o?void 0:o.data)==="wrong password"&&(s="Incorrect password"),C(e9.bI,{message:s,severity:"error"}),e.abrupt("return");case 11:(0,Q.Lx)({message:"Ownership transferred",expireInMSec:3e3}),N(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),C(e9.bI,{message:"Something went wrong, please try again later",severity:"error"});case 18:case"end":return e.stop()}},e,null,[[1,15]])})),function(e){return i.apply(this,arguments)}),[C,N]),es=(0,u.useMemo)(function(){if(!((0,v.Td)({user:x,member:x.member,group:k})&&z===b.oN))return null;var e=[{label:"Yes",active:B,onClick:et},{label:"No",active:!B,onClick:ei}];return(0,D.jsxs)(d8,{children:[(0,D.jsx)("label",{children:"Billing access:"}),(0,D.jsx)("span",{children:B?"Yes":"No"}),(0,D.jsx)(er.h_,{options:e,placement:"bottom-end",children:(0,D.jsx)(pt,{children:"(change)"})})]})},[x,z,k,B,et,ei]),el=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.cancelMemberSubscription({groupId:k.id,memberId:j.member.id});case 2:if(!(t=e.sent.error)){e.next=6;break}return e.abrupt("return",C(e9.bI,{message:(null===(n=t.data)||void 0===n||null===(n=n.fields)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.error)||"There was an issue with your request, please try again",severity:"error"}));case 6:return pc({},j).member.billingCanceled=!0,C(e9.wj,pc({},j)),m(),e.abrupt("return",C(e9.bI,{message:"Subscription cancelled"}));case 11:case"end":return e.stop()}},e)})),[C,j,k,m]),ec=(0,u.useMemo)(function(){var e=j.member,t=e.billingCanceled;return!e.billingProductId||t?null:(0,D.jsx)(tP.s,{onConfirm:el,confirmLabel:"Yes",header:"Cancel membership?",content:"Are you sure you want to cancel this membership? The member will be removed from the group at the end of their current billing cycle.",confirmButtonVariant:"error",children:(0,D.jsx)(pe,{children:"Cancel subscription"})})},[j,el]),eu=(0,u.useMemo)(function(){if(p)return null;var e,t=null!=k&&null!==(e=k.metadata)&&void 0!==e&&e.displayName?(0,D.jsxs)(D.Fragment,{children:[" from ",(0,D.jsx)("strong",{children:k.metadata.displayName})]}):"";if(z===b.th)return K({confirmLabel:"Unban",label:"Unban from group",header:"Unban from group?",onConfirm:X,content:(0,D.jsxs)(D.Fragment,{children:["Are you sure you want to unban ",(0,D.jsxs)("strong",{children:[j.firstName," ",j.lastName]}),t,"?"]})});var n=(0,D.jsxs)(D.Fragment,{children:["Are you sure you want to remove ",(0,D.jsxs)("strong",{children:[j.firstName," ",j.lastName]}),t,"? You can't undo this."]}),r=(0,D.jsxs)(D.Fragment,{children:["You're banning ",(0,D.jsxs)("strong",{children:[j.firstName," ",j.lastName]}),t,"."]});R&&(r=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("strong",{children:"".concat(j.firstName," ").concat(j.lastName,"'s")})," subscription will be cancelled and their billing cycle will end immediately. If they want to join again, they can start a new subscription."]}));var i=(0,q.sB)({userName:j.name,group:k}),o=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:r}),(0,D.jsx)("p",{children:"Delete recent activity?"}),(0,D.jsxs)("p",{children:["Delete ",(0,D.jsx)("strong",{children:"".concat(j.firstName,"'s")})," recent posts and comments ",(0,D.jsx)(Y.r,{href:i.as,label:"from their profile here",newTab:!0})," before banning them. It's easier this way."]})]});return(0,D.jsxs)(D.Fragment,{children:[c&&K({confirmLabel:"Remove",label:"Remove from group",header:"Remove from group?",onConfirm:V,content:n}),c&&K({confirmLabel:"Ban",label:"Ban from group",testid:"ban-from-group",header:"Ban from group?",onConfirm:J,content:o})]})},[K,V,X,J,c,p,k,R,z,j]),ed=j.member,ep=ed.billingCanceled,ef=ed.billingDeclined,em=ed.metadata,eh=ed.approvedAt,ev=em.mmbp,eb=em.mbscpe,eg=em.mbsfprt,ex=em.mbsltv,ey=n5()("day",e2().unix(ef?eg:eb).diff(e2()(),"days"),!0),ew=(0,u.useMemo)(function(){return(0,id.O5)({amount:ex||0,currency:"USD"})},[ex]),eC=(0,u.useMemo)(function(){return ev?"".concat((0,id.O5)(JSON.parse(ev))," /month"):"Free"},[ev]);l=ep?(0,D.jsxs)(pi,{$color:y.O9.e2,children:[(0,D.jsx)(po,{name:"Warning",color:y.O9.e2,$height:16}),(0,D.jsx)("span",{children:"Cancelled (churns in ".concat(ey,")")})]}):ef?(0,D.jsxs)(pi,{$color:y.O9.e2,children:[(0,D.jsx)(po,{name:"Warning",color:y.O9.e2,$height:16}),(0,D.jsx)("span",{children:"Declined (churns in ".concat(ey,")")})]}):(0,D.jsxs)(pi,{children:[(0,D.jsx)(po,{name:"Renew",color:y.O9.n5,$height:16}),(0,D.jsx)("span",{children:ev?"Renews in ".concat(ey):"Lifetime access"})]});var ej=(0,u.useMemo)(function(){return h?"Owner":pu[z]||"Nonmember"},[h,z]);return(0,D.jsxs)(d6,{children:[(0,D.jsxs)(d7,{children:[$,(0,D.jsxs)(d8,{children:[(0,D.jsx)("label",{children:"Role:"}),(0,D.jsx)("span",{children:ej}),ee]}),es]}),G&&(0,D.jsxs)(pr,{children:[(0,D.jsxs)(pi,{children:[(0,D.jsx)(po,{name:"NewCalendar",color:y.O9.n5,$height:16}),(0,D.jsx)("span",{children:eh?"Joined ".concat(e2()(eh).format("MMM D, YYYY")):""})]}),c&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(pi,{children:[(0,D.jsx)(po,{name:"Tag",color:y.O9.n5,$height:16}),(0,D.jsx)("span",{children:eC})]}),l]}),(0,D.jsxs)(pi,{children:[(0,D.jsx)(po,{name:"LTV",color:y.O9.n5,$height:22}),(0,D.jsx)("span",{children:"".concat(ew," lifetime value")})]})]}),(0,D.jsxs)(pa,{children:[eu,G&&ec]}),L&&(0,D.jsx)(d4,{user:j,onConfirm:ea,onClose:F})]})}),pp=C.ZP.div.withConfig({displayName:"styled__PaymentHistoryWrapper",componentId:"sc-7ergmu-0"})(["> h2{margin:0px;","}"],N.c.t5);y.O9.sd1,N.c.t11;var pf=(0,C.iv)(["flex-direction:column;align-items:flex-start;"]),pm=C.ZP.div.withConfig({displayName:"styled__PaymentItem",componentId:"sc-7ergmu-2"})(["display:flex;align-items:center;"," > div{display:flex;align-items:center;}",""],N.c.t7,function(e){return e.theme.isMobile&&pf}),ph=C.ZP.div.withConfig({displayName:"styled__PaymentItems",componentId:"sc-7ergmu-3"})(["display:flex;flex-direction:column;margin:24px 0;gap:16px;"]),pv=C.ZP.div.withConfig({displayName:"styled__PaymentItemDate",componentId:"sc-7ergmu-4"})(["color:",";cursor:pointer;&:hover{text-decoration:underline;}"],y.O9.sd1),pb=C.ZP.span.withConfig({displayName:"styled__PaymentItemPrice",componentId:"sc-7ergmu-5"})(["",""],N.c.t5),pg=C.ZP.div.withConfig({displayName:"styled__NoPaymentHistory",componentId:"sc-7ergmu-6"})(["",""],N.c.t7),px=n(88724),py=C.ZP.h2.withConfig({displayName:"styled__Header",componentId:"sc-lafoik-0"})([""," margin:0;"],N.c.t1),pw=C.ZP.ul.withConfig({displayName:"styled__UnstyledList",componentId:"sc-lafoik-1"})(["padding:0;list-style:none;margin-bottom:24px;"]),pC=C.ZP.p.withConfig({displayName:"styled__PaddedParagraph",componentId:"sc-lafoik-2"})(["margin:24px 0;"]),pj=(0,u.memo)(function(e){var t=e.invoiceId,n=e.onClose,i=e.memberInGroup,o=(0,P.bI)("currentGroup","membershipSettingsUser"),s=o.membershipSettingsUser,l=o.dispatch,c=o.currentGroup,d=(0,u.useState)(null),p=d[0],m=d[1],h=(0,u.useState)(!1),v=h[0],b=h[1],g=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getSubscriptionInvoiceAdmin({invoice:t,groupId:c.id});case 2:if(i=(r=e.sent).data,!r.error){e.next=9;break}return l(e9.bI,{message:"Something went wrong, please try again later.",severity:"error"}),n(),e.abrupt("return");case 9:m(i);case 10:case"end":return e.stop()}},e)})),[c,t,l,n]);(0,u.useEffect)(function(){g()},[t,g]);var x=p||{},w=x.currency,C=x.amount,j=x.userPaymentMethod,k=x.chargeCreatedAt,O=x.declineCode,I=x.automaticAttemptCount,Z=x.manualAttemptCount,S=j||{},_=S.brand,M=S.last4,N=(0,u.useMemo)(function(){return C&&w?(0,id.O5)({amount:C,currency:w}):""},[C,w]),E=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var r,i,o;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.member.id,b(!0),e.next=4,f.Z.retryInvoicePayment({memberId:r,invoiceId:t});case 4:i=e.sent.error,b(!1),i?(o=!1,i.data.fields.forEach(function(e){"attempt count"===e.name&&(o=!0,l(e9.bI,{message:e.error,severity:"error"}))}),o||l(e9.bI,{message:"Payment declined",severity:"error"})):l(e9.bI,{message:"Payment successful",severity:"success"}),n(!0);case 9:case"end":return e.stop()}},e)})),[t,s,l,n]),A=(0,u.useCallback)(function(){n(!1)},[n]);if(!p)return(0,D.jsx)(n2.T,{open:!0,size:"small",children:(0,D.jsx)(rz.D,{fitWidth:!0})});var L=(0,px.b)(O,!1),T=null!=Z?Z:0;return(0,D.jsxs)(n2.T,{open:!0,size:"small",confirmButtonVariant:"error",confirmLabel:"Retry Charge",disabled:T>=3||!i,loading:v,onClose:A,onCancel:A,onConfirm:E,children:[(0,D.jsx)(py,{children:"Decline details"}),(0,D.jsxs)(pw,{children:[(0,D.jsxs)("li",{children:["Amount: ",(0,D.jsx)("strong",{children:N})]}),(0,D.jsxs)("li",{children:["Payment Due: ",(0,D.jsx)("strong",{children:e2().unix(k).format("MMM D, YYYY")})]}),(0,D.jsxs)("li",{children:["Payment method: ",(0,D.jsx)("strong",{children:"".concat(null==_?void 0:_.toUpperCase()," - ").concat(M)})]})]}),(0,D.jsx)(te.Z,{color:y.O9.e2,variant:"t7",children:(0,D.jsxs)(pC,{children:[(0,D.jsx)("strong",{children:"Declined. "}),"Reason: ",L]})}),(0,D.jsxs)(pC,{children:[(0,D.jsxs)("strong",{children:["Payment attempts: ","".concat(I,"/4")]}),(0,D.jsx)("br",{}),"Payment will be tried 4 times over 14-days and we’ll notify the ","customer multiple times via email. If they’re still declining ","after 14-days their subscription will be cancelled and they’ll ","be removed from the group."]}),(0,D.jsx)(pC,{children:(0,D.jsx)("strong",{children:"Manual retries: ".concat(T,"/").concat(3)})})]})}),pk=C.ZP.h2.withConfig({displayName:"styled__Header",componentId:"sc-ee3tbc-0"})([""," margin:0;"],N.c.t1),pO=C.ZP.ul.withConfig({displayName:"styled__UnstyledList",componentId:"sc-ee3tbc-1"})(["padding:0;list-style:none;margin-bottom:32px;"]),pP=C.ZP.p.withConfig({displayName:"styled__DisputeDescription",componentId:"sc-ee3tbc-2"})(["margin-top:8px;"]),pI=(0,u.memo)(function(e){var t=e.invoiceId,n=e.onClose,i=(0,P.bI)("currentGroup"),o=i.dispatch,s=i.currentGroup,l=(0,u.useState)(null),c=l[0],d=l[1],p=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var n,r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getSubscriptionInvoiceAdmin({invoice:t,groupId:s.id});case 2:if(r=(n=e.sent).data,!n.error){e.next=7;break}return e.abrupt("return",o(e9.bI,{message:"Something went wrong, please try again later.",severity:"error"}));case 7:d(r);case 8:case"end":return e.stop()}},e)})),[s,t,o]);(0,u.useEffect)(function(){p()},[t,p]);var m=c||{},h=m.currency,v=m.amount,b=m.userPaymentMethod,g=m.chargeCreatedAt,x=m.disputedAt,w=b||{},C=w.brand,j=w.last4,k=(0,u.useMemo)(function(){return v&&h?(0,id.O5)({amount:v,currency:h}):""},[v,h]),O=(0,u.useCallback)(function(){n()},[n]);return c?(0,D.jsxs)(n2.T,{open:!0,size:"small",onClose:O,onCancel:O,cancelLabel:"Close",children:[(0,D.jsx)(pk,{children:"Dispute details"}),(0,D.jsxs)(pO,{children:[(0,D.jsxs)("li",{children:["Amount: ",(0,D.jsx)(te.Z,{color:y.O9.e2,variant:"t7",inline:!0,children:(0,D.jsx)("strong",{children:"-".concat(k)})})]}),(0,D.jsxs)("li",{children:["Date paid: ",(0,D.jsx)("strong",{children:e2().unix(g).format("MMM D, YYYY")})]}),(0,D.jsxs)("li",{children:["Date disputed: ",(0,D.jsx)("strong",{children:e2().unix(x).format("MMM D, YYYY")})]}),(0,D.jsxs)("li",{children:["Payment method: ",(0,D.jsx)("strong",{children:"".concat(null==C?void 0:C.toUpperCase()," - ").concat(j)})]})]}),(0,D.jsx)(te.Z,{color:y.O9.e2,variant:"t7",children:(0,D.jsx)("strong",{children:"This payment was disputed"})}),(0,D.jsxs)(pP,{children:["The customer disputed this payment with their bank. ","Their access has been removed."]})]}):(0,D.jsx)(n2.T,{open:!0,size:"small",children:(0,D.jsx)(rz.D,{fitWidth:!0})})}),pD=(0,u.memo)(function(e){var t,n=e.memberInGroup,i=(0,P.bI)("membershipSettingsUser"),o=i.dispatch,s=i.membershipSettingsUser,l=(0,u.useState)([]),c=l[0],d=l[1],p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,u.useState)(null),b=v[0],g=v[1],x=(0,u.useState)(null),w=x[0],C=x[1],j=(0,u.useState)(!0),k=j[0],O=j[1],I=(0,u.useRef)(!1),Z=(0,eo.c8)(),S=(0,en.Z)(Z,4),_=S[0],M=S[1],N=S[2],A=S[3],L=(0,u.useCallback)(function(e){d(function(t){var n=t.findIndex(function(t){return t.chargeId===e});return t[n].refunded=!0,t})},[]),T=(0,u.useCallback)(function(e,t){C(e),M(t)},[M]),F=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,i,l,c;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.getMemberPaymentHistory({memberId:s.member.id,offset:b||void 0,limit:10});case 2:if(n=(t=e.sent).data,!t.error){e.next=9;break}return O(!1),o(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 9:i=void 0===(r=n.invoices)?[]:r,l=n.hasMore,c=n.nextPage,null!=i&&i.length&&(d(function(e){return[].concat((0,rP.Z)(e),(0,rP.Z)(i))}),h(l),g(c)),O(!1);case 12:case"end":return e.stop()}},e)})),[o,b,s]);(0,u.useEffect)(function(){I.current||(I.current=!0,F())},[c,F]);var B=(0,u.useCallback)(function(e){var t=e.currency,n=e.amount,r=e.invoiceId,i=e.userPaymentMethod,o=e.refunded,a=e.status,s=e.disputed,l=e.referenceProductType,c="open"===a;if("course"===l&&c)return null;var u=i.brand,d=i.last4,p="(successful)",f=y.O9.s2,m="paymentDetails";return o&&(p="(refunded)",f=y.O9.e2),c&&(p="(declined)",f=y.O9.e2,m="declineDetails"),s&&(p="(disputed)",f=y.O9.e2,m="disputeDetails"),(0,D.jsxs)(pm,{children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(pv,{onClick:function(){return T(r,m)},children:e2().unix(e.chargeCreatedAt).format("MMMM Do, YYYY")}),(0,D.jsxs)("span",{children:["\xa0","—","\xa0"]}),(0,D.jsx)(pb,{children:(0,id.O5)({currency:t,amount:n})}),(0,D.jsxs)("span",{style:{color:f},children:["\xa0",p]})]}),(0,D.jsxs)("span",{children:["\xa0","— ".concat(u.toUpperCase()," •••• ").concat(d)]})]},r)},[T]),R=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C(null),N(),!t){e.next=7;break}return d([]),O(!0),e.next=7,F();case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[N,F]),z=(0,u.useMemo)(function(){if(w&&_&&"paymentDetails"===A)return(0,D.jsx)(dQ,{invoiceId:w,markRefunded:L,onClose:R})},[w,L,R,_,A]),G=(0,u.useMemo)(function(){if(w&&_&&"declineDetails"===A)return(0,D.jsx)(pj,{invoiceId:w,memberInGroup:n,onClose:R})},[w,R,A,_,n]),U=(0,u.useMemo)(function(){if(w&&_&&"disputeDetails"===A)return(0,D.jsx)(pI,{invoiceId:w,onClose:R})},[w,R,A,_]),$=(0,u.useMemo)(function(){if(m)return(0,D.jsx)(E.z,{label:"Load more",variant:"secondary",loading:k,onClick:F})},[m,k,F]),W=(0,u.useMemo)(function(){if(!k&&!c.length)return(0,D.jsx)(pg,{children:"User has no payment history."})},[k,c]);return(0,D.jsxs)(pp,{children:[(0,D.jsx)("h2",{children:"Payment history"}),(0,D.jsxs)(ph,{children:[c.map(B),W,k&&(0,D.jsx)(rz.D,{fitWidth:!0}),$]}),z,G,U]})}),pZ=C.ZP.div.withConfig({displayName:"styled__QuestionsTabWrapper",componentId:"sc-uc4hot-0"})([""]),pS=C.ZP.div.withConfig({displayName:"styled__QuestionsTabHeader",componentId:"sc-uc4hot-1"})(["margin-bottom:16px;",""],N.c.t5),p_=C.ZP.div.withConfig({displayName:"styled__QuestionsItemsWrapper",componentId:"sc-uc4hot-2"})(["display:flex;flex-direction:column;gap:16px;"]),pM=C.ZP.div.withConfig({displayName:"styled__QuestionItem",componentId:"sc-uc4hot-3"})(["display:flex;flex-direction:column;> label{","}> span{color:",";","}"],N.c.t5,y.O9.n5,N.c.t7),pN={courses:d2,membership:pd,payments:pD,questions:(0,u.memo)(function(){var e=(0,P.bI)("membershipSettingsUser").membershipSettingsUser,t=(0,u.useMemo)(function(){var t,n=(null==e||null===(t=e.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.survey)&&JSON.parse(e.member.metadata.survey);return(null==n?void 0:n.survey)||[{answer:"Member has not answered questions"}]},[e]),n=(0,u.useCallback)(function(e,t){var n=e.question,r=e.answer;return(0,D.jsxs)(pM,{children:[(0,D.jsx)("label",{children:n}),(0,D.jsx)("span",{children:r})]},t)},[]);return(0,D.jsxs)(pZ,{children:[(0,D.jsx)(pS,{children:"Membership questions:"}),(0,D.jsx)(p_,{children:t.map(n)})]})})},pE=function(){var e=(0,P.bI)("self","membershipSettingsUser","currentGroup","isMobile"),t=e.self,n=e.dispatch,r=e.isMobile,i=e.currentGroup,o=e.membershipSettingsUser,a=(0,u.useState)("membership"),s=a[0],l=a[1],c=(0,u.useRef)(!1),p=(0,d.useRouter)().reload,f=(0,u.useMemo)(function(){return(0,v.cD)({member:null==o?void 0:o.member,group:i})},[o,i]),m=(0,u.useMemo)(function(){return(0,v.q2)({group:i,user:o,member:null==o?void 0:o.member})},[i,o]),h=(0,u.useMemo)(function(){return(0,v.CP)({group:i,user:t,member:null==t?void 0:t.member})},[t,i]),b=(0,u.useMemo)(function(){return(0,v.Td)({user:o,member:null==o?void 0:o.member,group:i})},[i,o]),g=(0,u.useCallback)(function(){n(e9.wj,null),c.current&&p()},[n,p]),x=(0,u.useCallback)(function(){c.current=!0},[]),y=(0,u.useMemo)(function(){var e,t,n=null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.surveyEnabled&&f?[{key:"questions",label:"Questions",dataTestId:"questions-tab"}]:[];return[{key:"membership",label:"Membership",dataTestId:"membership-tab"}].concat(h&&f&&!m&&null!==(t=i.metadata)&&void 0!==t&&t.numCourses?[{key:"courses",label:"Courses",dataTestId:"courses-tab"}]:[],h?[{key:"payments",label:"Payments",dataTestId:"payments-tab"}]:[],n)},[i,m,f,h]),w=(0,u.useMemo)(function(){var e=pN[s];return(0,D.jsx)(e,{memberInGroup:f,reloadOnClose:x,memberIsAdminModerator:m,memberIsOwner:b})},[s,f,m,b,x]),C=(0,u.useMemo)(function(){return r?(0,D.jsxs)(dP,{children:[(0,D.jsx)(E.z,{iconSize:15,icon:"Close",onClick:g,variant:"icon-borderless",style:{flexShrink:0}}),(0,D.jsx)(eC.Z,{user:o}),(0,D.jsx)(dk.v,{user:o,typography:"t8"})]}):(0,D.jsxs)(dO,{children:[(0,D.jsx)(eC.Z,{user:o,size:48}),(0,D.jsxs)("div",{children:[(0,D.jsx)(dk.v,{user:o,typography:"t5"}),(0,D.jsx)("span",{children:"Membership settings"})]})]})},[g,r,o]);return(0,D.jsx)(rR,{open:!0,tabs:y,header:C,content:w,activeTab:s,onClose:g,onTabChange:l})},pA=(0,u.memo)(function(){return(0,P.bI)("membershipSettingsUser").membershipSettingsUser?(0,D.jsx)(pE,{}):null}),pL=C.ZP.div.withConfig({displayName:"styled__QuestionFormWrapper",componentId:"sc-14t4fqh-0"})(["display:flex;flex-direction:column;"]),pT=(0,C.iv)(["padding:32px 24px;"]),pF=C.ZP.div.withConfig({displayName:"styled__QuestionFormContent",componentId:"sc-14t4fqh-1"})(["display:flex;flex-direction:column;gap:24px;padding:32px;> button{margin-top:8px;}",""],function(e){return e.theme.isMobile&&pT}),pB=C.ZP.div.withConfig({displayName:"styled__QuestionItem",componentId:"sc-14t4fqh-2"})(["display:flex;flex-direction:column;gap:8px;> label{","}"],N.c.t5),pR=(0,C.iv)(["padding:64px 0px 32px 0px;"]),pz=C.ZP.div.withConfig({displayName:"styled__QuestionFormHeader",componentId:"sc-14t4fqh-3"})(["display:flex;flex-direction:column;align-items:center;width:100%;padding:32px 0px;background:",";border-bottom:1px solid ",";> div:first-child{margin-bottom:8px;}> p{text-align:center;margin:8px 0px 0px 0px;","}",""],y.O9.n2,y.O9.n3,N.c.t7,function(e){return e.theme.isMobile&&pR}),pG=["group","subheader","value","onChange","questions","errors","onSubmit","loading"];function pU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pU(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pW=(0,u.memo)(function(e){var t=e.group,n=e.subheader,r=e.value,i=void 0===r?[]:r,o=e.onChange,a=e.questions,s=e.errors,l=e.onSubmit,c=e.loading,d=(0,w.Z)(e,pG),p=(0,u.useState)({}),f=p[0],m=p[1],h=(0,u.useMemo)(function(){var e=i.includes(void 0),t=i.includes("");return e||t},[i]);(0,u.useEffect)(function(){m(s||{})},[s]);var v=(0,u.useCallback)(function(e){var t=e.idx,n=e.newValue;o((0,H.DM)({arr:i,idx:t,value:n}))},[i,o]),b=(0,u.useCallback)(function(e,t){var n=e.question,r=e.type,o=e.options,a=e.maxCharacters,s=i[t]||"";return(0,D.jsxs)(pB,{children:[(0,D.jsx)("label",{children:n}),function(){if("options"===r){var e=o.map(function(e){return{key:e,label:e}});return(0,D.jsx)(lg.M,{value:s,options:e,onChange:function(e){return v({idx:t,newValue:e})},gap:16,style:{marginTop:8}})}return(0,D.jsx)(of.I,{onChange:function(e){return v({idx:t,newValue:e.target.value})},value:s,placeholder:"email"===r?"Email address":"Your answer",maxCharacters:a,error:f[t],staticLabel:!0})}()]},t)},[i,f,v]),g=(0,u.useCallback)(function(){var e={};a.forEach(function(t,n){var r,o=t.type,a=t.maxCharacters;"email"!==o||(0,H.vV)((i[n]||"").trim())||(e[n]="Invalid email"),a&&(null===(r=i[n])||void 0===r?void 0:r.length)>a&&(e[n]="Too many characters")}),m(e),Object.keys(e).length||l()},[l,a,i]);return(0,D.jsxs)(pL,p$(p$({},d),{},{children:[(0,D.jsxs)(pz,{children:[(0,D.jsx)(t$.F,{group:t,disableLink:!0,size:56}),(0,D.jsx)(dt.D,{disableLink:!0,group:t,desktopTypography:"t1",mobileTypography:"t1"}),!!n&&(0,D.jsx)("p",{children:n})]}),(0,D.jsxs)(pF,{children:[a.map(b),(0,D.jsx)(E.z,{label:"Join group",style:{width:"100%"},disabled:h||c,onClick:g})]})]}))}),pq=n(11276);function pH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var pV=(0,u.memo)(function(){var e,t=(0,P.bI)("showSurvey","currentGroup","self","isMobile"),n=t.currentGroup,o=t.showSurvey,s=t.self,l=t.isMobile,c=t.dispatch,p=null==n||null===(e=n.metadata)||void 0===e?void 0:e.surveyEnabled,m=(0,d.useRouter)();(0,u.useEffect)(function(){o&&(0,ip.P3)({eventName:ip.qI.surveyStart,userID:null==s?void 0:s.id,metadata:(0,ip.Ju)({currentGroup:n})})},[o]);var h=(0,u.useCallback)(function(e){c(e9.nx,e)},[c]),v=(0,u.useMemo)(function(){var e,t,r=null!=n&&null!==(e=n.metadata)&&void 0!==e&&e.survey?JSON.parse(null==n||null===(t=n.metadata)||void 0===t?void 0:t.survey).survey:[];return(r.filter(function(e){return"text"===e.type})||[]).forEach(function(e){return e.maxCharacters=200}),r},[n]),b=(0,u.useState)(Array(null==v?void 0:v.length)),g=b[0],x=b[1],y=(0,u.useState)(!1),w=y[0],C=y[1];(0,u.useEffect)(function(){(0,q.zu)(m.query)&&(h(!0),(0,X.hj)(m,"mq"))},[m,h]);var j=(0,u.useMemo)(function(){var e,t;return p&&(null==v?void 0:v.length)&&!(null!=s&&null!==(e=s.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.survey)&&(null==s||null===(t=s.member)||void 0===t?void 0:t.role)==="pending"},[s,v,p]);(0,u.useEffect)(function(){c(e9.SP,j)},[c,j]),(0,u.useEffect)(function(){j&&h(!0)},[j,h]);var k=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,r,o,l,u;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=(0,rP.Z)(v)).forEach(function(e,t){e.answer=g[t]}),e.prev=2,C(!0),r=(0,pq.K)(),e.next=7,f.Z.submitSurvey(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pH(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({groupID:n.id,answers:t},r));case 7:if(l=(o=e.sent).data,u=o.error,C(!1),!u){e.next=14;break}return c(e9.bI,{severity:"error",message:"There was an issue submitting your answers."}),e.abrupt("return");case 14:if((0,ip.P3)({eventName:ip.qI.surveyEnd,userID:null==s?void 0:s.id,metadata:(0,ip.Ju)({currentGroup:n})}),!cR(n)){e.next=23;break}return e.next=18,f.Z.joinGroup({groupName:n.name});case 18:if(!e.sent.error){e.next=23;break}return c(e9.bI,{message:"Something went wrong, please try again",severity:"error"}),e.abrupt("return");case 23:return l.eventId&&(0,pq.i)({eventName:"CompleteRegistration",eventID:l.eventId}),(0,ip.uR)(ip.qI.joinSuccess),e.next=27,(0,X.gx)(m,(0,q.AZ)({groupName:n.name,pending:!0}));case 27:h(!1),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(2),c(e9.bI,{severity:"error",message:"There was an issue submitting your answers."});case 33:case"end":return e.stop()}},e,null,[[2,30]])})),[v,g,c,h,n,m,null==s?void 0:s.id]),O=(0,u.useCallback)(function(){h(!1),x(Array(null==v?void 0:v.length))},[v,h]);return(0,D.jsx)(ri.u_,{size:"small",open:o,scrollable:!0,onClose:O,shouldFullscreenOnMobile:!0,wrapperStyle:{padding:0,overflow:l?"auto":"hidden"},children:(0,D.jsx)(pW,{questions:v,group:n,subheader:"Answer questions to join group",value:g,onChange:x,onSubmit:k,loading:w})})}),pY=(0,C.iv)(["padding-top:24px;"]),pJ=C.ZP.div.withConfig({displayName:"styled__OnboardingModalWrapper",componentId:"sc-1efgh2t-0"})(["display:flex;flex-direction:column;align-items:center;> h2{margin:0px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;text-align:center;","}> div:nth-child(4){width:100%;margin-bottom:16px;}> button{width:100%;}",""],N.c.t1,N.c.t7,function(e){return e.theme.isMobile&&pY}),pX=C.ZP.div.withConfig({displayName:"styled__UploadError",componentId:"sc-1efgh2t-1"})(["color:",";",""],y.O9.error,N.c.t7),pK=n(92777),pQ=n(82262),p0=n(10748),p1=n(45959),p2=n(63553),p9=n(37247);function p3(e,t){return decodeURIComponent(e.replace(RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}var p5=function(e){(0,p1.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,p9.Z)(r);if(t){var i=(0,p9.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,p2.Z)(this,e)});function r(){var e;(0,pK.Z)(this,r);for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=n.call.apply(n,[this].concat(o)),(0,i.Z)((0,p0.Z)(e),"state",{isSdkLoaded:!1,isProcessing:!1}),(0,i.Z)((0,p0.Z)(e),"responseApi",function(t){window.FB.api("/me",{locale:e.props.language,fields:e.props.fields},function(n){Object.assign(n,t),e.props.callback(n)})}),(0,i.Z)((0,p0.Z)(e),"checkLoginState",function(t){e.setStateIfMounted({isProcessing:!1}),t.authResponse?e.responseApi(t.authResponse):e.props.onFailure?e.props.onFailure({status:t.status}):e.props.callback({status:t.status})}),(0,i.Z)((0,p0.Z)(e),"checkLoginAfterRefresh",function(t){"connected"===t.status?e.checkLoginState(t):window.FB.login(function(t){return e.checkLoginState(t)},!0)}),(0,i.Z)((0,p0.Z)(e),"click",function(t){if(e.state.isSdkLoaded&&!e.state.isProcessing&&!e.props.isDisabled){e.setState({isProcessing:!0});var n=e.props,r=n.scope,i=n.appId,o=n.onClick,a=n.returnScopes,s=n.responseType,l=n.redirectUri,c=n.disableMobileRedirect,u=n.authType,d=n.state;if("function"==typeof o&&(o(t),t.defaultPrevented)){e.setState({isProcessing:!1});return}var p={client_id:i,redirect_uri:l,state:d,return_scopes:a,scope:r,response_type:s,auth_type:u};if(e.props.isMobile&&!c)window.location.href="https://www.facebook.com/dialog/oauth".concat("?"+Object.keys(p).map(function(e){return"".concat(e,"=").concat(encodeURIComponent(p[e]))}).join("&"));else{if(!window.FB){e.props.onFailure&&e.props.onFailure({status:"facebookNotLoaded"});return}window.FB.getLoginStatus(function(t){"connected"===t.status?e.checkLoginState(t):window.FB.login(e.checkLoginState,{scope:r,return_scopes:a,auth_type:p.auth_type})})}}}),e}return(0,pQ.Z)(r,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk")){this.sdkLoaded();return}this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}},{key:"componentDidUpdate",value:function(e){this.state.isSdkLoaded&&this.state.autoLoad&&!e.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(e){this._isMounted&&this.setState(e)}},{key:"setFbAsyncInit",value:function(){var e=this,t=this.props,n=t.appId,r=t.xfbml,i=t.cookie,o=t.version,a=t.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v".concat(o),appId:n,xfbml:r,cookie:i,status:!0}),e.setStateIfMounted({isSdkLoaded:!0}),(a||e.isRedirectedFromFb())&&window.FB.getLoginStatus(e.checkLoginAfterRefresh)}}},{key:"isRedirectedFromFb",value:function(){var e=window.location.search;return"facebookdirect"===p3(e,"state")&&(p3(e,"code")||p3(e,"granted_scopes"))}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var e,t,n,r,i,o=this.props.language;e=document,t="script",n="facebook-jssdk",i=r=e.getElementsByTagName(t)[0],e.getElementById(n)||((i=e.createElement(t)).id=n,i.src="https://connect.facebook.net/".concat(o,"/sdk.js"),r.parentNode.insertBefore(i,r))}},{key:"render",value:function(){if(!this.props.render)throw Error("ReactFacebookLogin requires a render prop to render");var e={onClick:this.click,isDisabled:!!this.props.isDisabled,isProcessing:this.state.isProcessing,isSdkLoaded:this.state.isSdkLoaded};return this.props.render(e)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.isSdkLoaded&&e.autoLoad&&!t.autoLoad?{signedIn:e.signedIn,autoLoad:e.autoLoad}:null}}]),r}(u.Component);function p4(e){var t,n=e.updateProfilePicture,i=e.render,o=e.onSuccess,s=e.onError,l=e.self,c=(0,u.useRef)(!1),d=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){var r,i,u,d,p,m,h,v,b,g,x,y;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.id,i=t.name,u=t.email,r){e.next=4;break}return s&&s(),e.abrupt("return");case 4:if(!c.current){e.next=6;break}return e.abrupt("return");case 6:return c.current=!0,e.next=9,f.Z.updateUserMeta({userID:l.id,key:"facebook_asid",value:r});case 9:return e.next=11,f.Z.updateUserMeta({userID:l.id,key:"facebook_name",value:i});case 11:return e.next=13,f.Z.updateUserMeta({userID:l.id,key:"facebook_email",value:u});case 13:if(!n){e.next=51;break}return e.next=16,f.Z.downloadFacebookProfilePicture({asid:r,width:200,height:200});case 16:if(m=(p=(d=e.sent).data).content,h=p.contentType,!d.error){e.next=24;break}return s&&s(),e.abrupt("return");case 24:if(!(m.size>ae.Rj.attachmentImageFileMaxSize)){e.next=27;break}return s&&s(),e.abrupt("return");case 27:return e.next=29,f.Z.createFile({fileName:"facebook_picture",contentType:h,contentLength:m.size,ownerID:l.id});case 29:if(b=(v=e.sent).data,!v.error){e.next=35;break}return s&&s(),e.abrupt("return");case 35:return e.prev=35,e.next=38,(0,od.cT)({fileID:b.file.id,writeUrl:b.writeUrl,acl:b.acl,contentType:b.contentType,data:m,timeout:6e4});case 38:if(!(g=e.sent)){e.next=46;break}return x=g.metadata.readUrl,y=g.metadata.readUrl,e.next=44,f.Z.updateUserMeta({userID:l.id,key:"picture_profile",value:x});case 44:return e.next=46,f.Z.updateUserMeta({userID:l.id,key:"picture_bubble",value:y});case 46:e.next=51;break;case 48:e.prev=48,e.t0=e.catch(35),s();case 51:o&&o();case 52:case"end":return e.stop()}},e,null,[[35,48]])})),function(e){return t.apply(this,arguments)}),[s,o,l,n]);return(0,D.jsx)(p5,{appId:"2759137094103591",fields:"name,email,picture",callback:d,isMobile:!1,render:i})}(0,i.Z)(p5,"defaultProps",{redirectUri:window.location.href,scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,authType:"",fields:"name",version:"3.1",language:"en_US",disableMobileRedirect:!1,isMobile:function(){var e=!1;try{e=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch(e){}return e}(),onFailure:null,state:"facebookdirect",responseType:"code"}),p4.defaultProps={updateProfilePicture:!1};var p6=(0,u.memo)(p4),p8=C.ZP.div.withConfig({displayName:"styled__ProfilePictureUploadWrapper",componentId:"sc-9kkdj9-0"})(["margin-bottom:32px;&:focus{outline:none;}"]),p7=C.ZP.div.withConfig({displayName:"styled__CameraIcon",componentId:"sc-9kkdj9-1"})(["height:100%;width:100%;position:absolute;top:0px;left:0px;display:flex;align-items:center;justify-content:center;> div{height:48px;width:48px;border-radius:50%;background:",";color:",";display:flex;align-items:center;justify-content:center;> div{height:24px;width:24px;}}"],y.O9.n1,y.O9.n5),fe=C.ZP.div.withConfig({displayName:"styled__DropzoneWrapper",componentId:"sc-9kkdj9-2"})(["position:absolute;height:100%;width:100%;top:0px;left:0px;z-index:1000;padding:8px;background:",";"],y.O9.n1),ft=C.ZP.div.withConfig({displayName:"styled__DropzoneInnerWrapper",componentId:"sc-9kkdj9-3"})(["height:100%;width:100%;border:2px solid dashed ",";border-radius:10px;display:flex;justify-content:center;align-items:center;color:",";",";"],y.O9.n5,y.O9.n5,N.c.t1),fn=C.ZP.div.withConfig({displayName:"styled__FacebookUpload",componentId:"sc-9kkdj9-4"})(["text-align:center;",""],N.c.t7),fr=C.ZP.a.withConfig({displayName:"styled__FacebookLink",componentId:"sc-9kkdj9-5"})(["color:",";cursor:pointer;",""],y.O9.sd1,N.c.t7),fi=C.ZP.div.withConfig({displayName:"styled__ProfilePictureUploadTop",componentId:"sc-9kkdj9-6"})(["display:flex;justify-content:center;align-items:center;margin-bottom:16px;"]),fo=C.ZP.div.withConfig({displayName:"styled__ProfilePictureAvatarWrapper",componentId:"sc-9kkdj9-7"})(["user-select:none;cursor:pointer;position:relative;"]);function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fl=function(e){var t,n,i=e.setLoading,o=e.onTimeout,s=(0,P.bI)("self"),l=s.self,c=s.dispatch,p=(0,d.useRouter)(),m=(0,u.useCallback)(function(e){(0,r.Z)(a().mark(function t(){var n,r;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.metadata.imageMdUrl||e.metadata.readUrl||e.metadata.srcReadUrl,r=e.metadata.imageSmUrl||n,t.next=4,f.Z.updateUserMeta({userID:l.id,key:"picture_profile",value:n});case 4:return t.next=6,f.Z.updateUserMeta({userID:l.id,key:"picture_bubble",value:r});case 6:i(!1),(0,X.H5)(p);case 8:case"end":return t.stop()}},t)}))()},[p,i,l]),h=(0,u.useCallback)((t=(0,r.Z)(a().mark(function e(t){var n,r,s,u,d,p,h,v,b,g,x,y,w;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.target)&&void 0!==n&&null!==(n=n.files)&&void 0!==n&&n.length){e.next=2;break}return e.abrupt("return");case 2:if(r=t.target.files[0],!(0,od.ZP)(r.type)){e.next=5;break}return e.abrupt("return");case 5:if(!(r.size>ae.Rj.attachmentImageFileMaxSize)){e.next=8;break}return c(e9.bI,{message:"File too large, ".concat(ae.Rj.attachmentImageFileMaxSizeMB,"mb max"),severity:"error"}),e.abrupt("return");case 8:return i(!0),e.prev=9,e.next=12,(0,ae.GN)(r);case 12:return s=e.sent,u=(0,ae.YY)(s.width,s.height,ae.Rj.profilePictureMinHeight,ae.Rj.profilePictureMinWidth),d=s.width>ae.Rj.profilePictureMinWidth||s.height>ae.Rj.profilePictureMinHeight,e.next=17,(0,ae.s4)({file:r,minWidth:d?u.width:s.width,minHeight:d?u.height:s.height,maxWidth:1024,maxHeight:1024});case 17:if(p=e.sent,v=(h=(0,en.Z)(p,3))[0],!h[2]){e.next=25;break}return c(e9.bI,{message:"Failed to load image file",severity:"error"}),t.target&&(t.target.value=null),e.abrupt("return");case 25:return e.next=27,(0,ae._c)({canvas:v,contentType:"image/jpeg",quality:.95});case 27:return b=e.sent,e.next=30,f.Z.createFile({fileName:r.name,contentType:"image/jpeg",contentLength:b.size,ownerID:l.id});case 30:if(x=(g=e.sent).data,!g.error){e.next=38;break}return(0,Q.Lx)({message:"Failed to upload a file",severity:"error"}),t.target&&(t.target.value=null),i(!1),e.abrupt("return");case 38:return e.next=40,(0,od.cT)({fileID:x.file.id,writeUrl:x.writeUrl,acl:x.acl,contentType:x.contentType,data:b,timeout:6e4,waitToken:x.waitToken,userID:null==l?void 0:l.id});case 40:(y=e.sent)&&m(y),t.target&&(t.target.value=null),e.next=51;break;case 45:e.prev=45,e.t0=e.catch(9),w=e.t0.error,i(!1),c(e9.bI,{message:"Failed to upload a file",severity:"error"}),w===iE.k9&&o();case 51:case"end":return e.stop()}},e,null,[[9,45]])})),function(e){return t.apply(this,arguments)}),[i,c,l.id,m,o]),v=(0,u.useCallback)(function(e){h({target:{files:e}})},[h]),b=(0,aS.V)((0,u.useRef)({}).current),g=(0,en.Z)(b,1)[0],x=(0,au.u)({onDrop:v,accept:"image/*"}),y=x.getRootProps,w=x.getInputProps,C=x.isDragActive,j=y(),k=w({onClick:function(e){return e.preventDefault()}}),O=!!(null!=l&&null!==(n=l.metadata)&&void 0!==n&&n.pictureProfile),I=(0,u.useMemo)(function(){if(!O)return(0,D.jsx)(p7,{children:(0,D.jsx)("div",{children:(0,D.jsx)(ez.J,{name:"Camera"})})})},[O]),Z=(0,u.useMemo)(function(){if(g||C)return(0,D.jsx)(fe,{children:(0,D.jsx)(ft,{children:"Drop image here to upload"})})},[g,C]),S=(0,u.useCallback)(function(e){var t=e.onClick;return(0,D.jsx)(fr,{onClick:function(e){t(e)},style:{cursor:"pointer"},children:"use your Facebook profile pic"})},[]);return(0,D.jsxs)(p8,fs(fs({},j),{},{children:[(0,D.jsxs)(fi,{children:[(0,D.jsx)("input",fs({},k)),(0,D.jsx)("input",{type:"file",multiple:!1,accept:"image/*",id:"file-upload-input",style:{display:"none"},onChange:h}),Z,(0,D.jsx)("label",{htmlFor:"file-upload-input",children:(0,D.jsxs)(fo,{children:[(0,D.jsx)(eC.Z,{user:l,disableLink:!0,size:150}),I]})})]}),(0,D.jsxs)(fn,{children:["Upload a photo or","\xa0",(0,D.jsx)(p6,{self:l,render:S,updateProfilePicture:!0,onError:function(){(0,Q.Lx)({message:"Failed to connect Facebook",severity:"error"}),(0,X.H5)(p)},onSuccess:function(){(0,X.H5)(p)}}),"."]})]}))},fc=["local","stage"],fu=function(){var e=(0,d.useRouter)(),t=(0,u.useState)(!1),n=t[0],i=t[1],o=(0,P.bI)("self","isMobile","currentGroup","onboardingBio","onboardingJoinGroup"),s=o.self,l=o.dispatch,c=o.isMobile,p=o.currentGroup,m=o.onboardingBio,v=o.onboardingJoinGroup,b=(0,eo.c8)(),g=(0,en.Z)(b,2),x=g[0],y=g[1],w=(0,u.useMemo)(function(){return fc.includes("prod")},[]);(0,u.useEffect)(function(){(0,ip.P3)({eventName:ip.qI.onboardingStart,userID:null==s?void 0:s.id,metadata:(0,ip.Ju)({currentGroup:p})})},[]),(0,u.useEffect)(function(){w&&y()},[w,y]);var C=(0,u.useCallback)(function(e){l(e9.fr,e.target.value)},[l]),j=(0,u.useCallback)((0,r.Z)(a().mark(function t(){var n,r;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,f.Z.updateUserMeta({userID:s.id,key:"bio",value:m});case 3:(0,ip.P3)({eventName:ip.qI.onboardingEnd,userID:null==s?void 0:s.id,metadata:(0,ip.Ju)({currentGroup:p})}),v?(n=p.name,r=c?"/about":"",e.replace("/".concat(n).concat(r))):(0,X.Tr)({router:e,queries:{sc:!0}});case 5:case"end":return t.stop()}},t)})),[p,c,m,v,e,s]),k=(0,u.useCallback)(function(){(0,h.co)({key:h.H0.onboardingSkipped,value:!0,expireInMSec:864e5}),(0,ip.P3)({eventName:ip.qI.onboardingSkip,userID:null==s?void 0:s.id,metadata:(0,ip.Ju)({currentGroup:p})}),(0,X.H5)(e,!0)},[e,null==s?void 0:s.id,p]),O=(0,u.useMemo)(function(){return!m.trim()||!s.metadata.pictureProfile||m.length>150},[s,m]);return(0,D.jsx)(n2.T,{open:!0,disableEscape:!0,shouldFullscreenOnMobile:!0,children:(0,D.jsxs)(pJ,{children:[(0,D.jsx)("h2",{children:"Complete your profile"}),(0,D.jsx)("p",{children:"Communities feel weird without faces and names. Profiles build trust and spark connection with others."}),(0,D.jsx)(fl,{setLoading:i,onTimeout:y}),(0,D.jsx)(of.I,{multiline:!0,label:"Add your bio...",value:m,onChange:C,maxCharacters:150,minRows:4,maxRows:4,inputProps:{"data-testid":"onboarding-bio-input"}}),(0,D.jsx)(E.z,{loading:n,label:"Complete",onClick:j,disabled:O}),x&&(0,D.jsxs)(e8.X,{gap:4,marginTop:16,alignItems:"center",justifyContent:"flex-start",width:"100%",children:[(0,D.jsx)(pX,{children:"Upload error."}),(0,D.jsx)(E.z,{variant:"link",label:"Skip this step >",typography:"t7",disableRipple:!0,onClick:k})]})]})})},fd=(0,u.memo)(function(){var e,t,n=(0,u.useState)(!1),r=n[0],i=n[1],o=(0,P.bI)("self","showSurvey","showSubscribeModal","showPaymentSuccessModal","joinGroupModalOpen","joinGroupPending","isInviteProcessing"),a=o.self,s=o.showSubscribeModal,l=o.showSurvey,c=o.showPaymentSuccessModal,p=o.joinGroupModalOpen,f=o.joinGroupPending,m=o.isInviteProcessing,v=(0,d.useRouter)(),b=v.query,g=v.pathname,x=v.asPath,y=(0,u.useMemo)(function(){var e=(0,h.tv)({key:h.H0.onboardingSkipped}).value;return void 0!==e&&e},[]);return((0,u.useEffect)(function(){i(!0)},[]),!a||!r||p||(0,q.GG)(b)||f||(0,q.VO)(b)||l||s||c||(0,q.y3)(b)||(0,q.ZZ)({pathname:g})||"/games/onboarding"===x||null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.bio&&null!=a&&null!==(t=a.metadata)&&void 0!==t&&t.pictureProfile||y||m)?null:(0,D.jsx)(fu,{})}),fp=C.ZP.div.withConfig({displayName:"styled__SubscribeModalWrapper",componentId:"sc-1krbx5g-0"})(["display:flex;flex-direction:column;align-items:center;"]),ff=(0,C.iv)(["padding:64px 0px 32px 0px;"]),fm=C.ZP.div.withConfig({displayName:"styled__SubscribeModalTop",componentId:"sc-1krbx5g-1"})(["display:flex;flex-direction:column;align-items:center;width:100%;padding:32px 0px;background:",";border-bottom:1px solid ",";> div:first-child{margin-bottom:8px;}> p{text-align:center;margin:8px 0px 0px 0px;","}",""],y.O9.n2,y.O9.n3,N.c.t7,function(e){return e.theme.isMobile&&ff}),fh=(0,C.iv)(["padding:32px 24px;"]),fv=C.ZP.div.withConfig({displayName:"styled__SubscribeModalContent",componentId:"sc-1krbx5g-2"})(["padding:32px;background:",";> button{margin:32px 0px 16px 0px;width:100%;}",""],y.O9.n1,function(e){return e.theme.isMobile&&fh}),fb=C.ZP.div.withConfig({displayName:"styled__FieldLabel",componentId:"sc-1krbx5g-3"})(["margin-bottom:8px;",""],N.c.t11),fg=(0,C.ZP)(of.I).withConfig({displayName:"styled__SubscribeInput",componentId:"sc-1krbx5g-4"})(["margin-bottom:32px;"]),fx=C.ZP.div.withConfig({displayName:"styled__SubscribeTerms",componentId:"sc-1krbx5g-5"})(["text-align:center;color:",";"," > a{text-decoration:underline;}"],y.O9.n5,N.c.t11),fy=C.ZP.div.withConfig({displayName:"styled__PaymentSuccessfulWrapper",componentId:"sc-1krbx5g-6"})(["display:flex;flex-direction:column;align-items:center;text-align:center;> div{color:",";}> h2{margin:8px 0px;","}> p{margin:0px 0px 32px 0px;","}> button{width:100%;}"],y.O9.s2,N.c.t1,N.c.t7),fw=C.ZP.div.withConfig({displayName:"styled__DeclinedText",componentId:"sc-1krbx5g-7"})(["color:",";margin-bottom:32px;",""],y.O9.e2,N.c.t5),fC=C.ZP.div.withConfig({displayName:"styled__ErrorText",componentId:"sc-1krbx5g-8"})(["",";color:",";margin-top:8px;"],N.c.t11,y.O9.e2);function fj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fj(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var fO=function(){var e,t,n=(0,P.bI)("currentGroup","self","isMobile","subscriptionRedirectUrl"),i=n.currentGroup,o=n.self,s=n.isMobile,l=n.dispatch,c=n.subscriptionRedirectUrl,p=(0,u.useState)(!1),m=p[0],h=p[1],b=(0,u.useState)(null),g=b[0],x=b[1],y=(0,u.useState)(!0),w=y[0],C=y[1],j=(0,u.useState)(null!==(e=null==o?void 0:o.email)&&void 0!==e?e:""),k=j[0],O=j[1],I=(0,u.useRef)(),Z=null==i||null===(t=i.metadata)||void 0===t?void 0:t.displayName,S=(0,u.useRef)(!1),_=(0,d.useRouter)(),M=_.push,N=_.reload,A=(0,u.useState)(!1),L=A[0],T=A[1],F=(0,u.useState)(!1),B=F[0],R=F[1],z=(0,u.useState)(null),G=z[0],U=z[1],$=(0,u.useState)(!1),W=$[0],q=$[1],H=(0,u.useMemo)(function(){var e,t;if(null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.currentMBp)return JSON.parse(null==i||null===(t=i.metadata)||void 0===t?void 0:t.currentMBp)},[i]),V=(0,u.useCallback)(function(e){var t;(0,ip.P3)({eventName:ip.qI.groupPayStart,userID:null==o?void 0:o.id,metadata:fk(fk({},(0,ip.Ju)({currentGroup:i})),{},{has_existing_payment_method:e,purchase_type:"group",current_price:null!==(t=null==H?void 0:H.amount)&&void 0!==t?t:null})})},[i,null==o?void 0:o.id,H]),J=(0,u.useMemo)(function(){var e;return(null==o||null===(e=o.member)||void 0===e?void 0:e.billingDeclined)&&(0,v.cD)({member:null==o?void 0:o.member,group:i})},[o,i]),X=(0,uQ.useStripe)(),K=(0,u.useCallback)(function(){l(e9.RV,!1)},[l]),Q=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,ip.uR)(ip.qI.joinSuccess),t=c||"/".concat(i.name,"?sps=true"),e.next=4,M(t);case 4:h(!1),K();case 6:case"end":return e.stop()}},e)})),[i,K,M,c]),ee=(0,u.useCallback)(function(e){return h(!1),l(e9.bI,{message:e||"Something went wrong, please try again later.",severity:"error"})},[l]),et=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,o,s;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.initJoinGroupPaid({groupId:i.id});case 2:if(n=(t=e.sent).data,!(r=t.error)){e.next=14;break}if("group has a free membership"!==r.data){e.next=11;break}return N(),e.abrupt("return");case 11:return ee(null==r||null===(o=r.data)||void 0===o||null===(o=o.fields)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.error),K(),e.abrupt("return");case 14:x(void 0===(s=n.paymentMethods)?[]:s),C(!1);case 17:case"end":return e.stop()}},e)})),[i,ee,N,K]);(0,u.useEffect)(function(){S.current||(S.current=!0,J?C(!1):et())},[et,J]);var en=(0,u.useMemo)(function(){var e,t,n;return J?(0,id.O5)(JSON.parse(null==o||null===(t=o.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.mmbp)):null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.currentMBp?(0,id.O5)(JSON.parse(null==i||null===(n=i.metadata)||void 0===n?void 0:n.currentMBp)):void 0},[i,J,o]),er=(0,u.useCallback)(function(e){O(e.target.value)},[]),ei=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,s,c,u,d,p,m,v;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,I.current.getSelectedPayment();case 3:if(!(t=e.sent).stripeError){e.next=10;break}if("setup_intent_unexpected_state"!==t.stripeError){e.next=8;break}return e.next=8,I.current.refetchIntent();case 8:return h(!1),e.abrupt("return");case 10:return e.next=12,f.Z.updatePaymentMethodForGroup({groupId:i.id,newPaymentMethodId:t.id});case 12:if(r=(n=e.sent).data,!(s=n.error)){e.next=19;break}return l(e9.bI,{message:(null===(c=s.data)||void 0===c||null===(c=c.fields)||void 0===c||null===(c=c[0])||void 0===c?void 0:c.error)||"There was an issue with your request, please try again",severity:"error"}),h(!1),e.abrupt("return");case 19:if(u=r.clientSecret,d=r.token,!u){e.next=29;break}return e.next=23,X.confirmCardPayment(u,{payment_method:t.id});case 23:if(!(p=e.sent).error){e.next=29;break}return v=null!==(m=p.error.decline_code)&&void 0!==m?m:p.error.code,U((0,px.b)(v,!0)),h(!1),e.abrupt("return");case 29:if(!d){e.next=39;break}return e.prev=30,e.next=33,(0,iE.Cx)({token:d,userID:null==o?void 0:o.id,timeoutMS:6e4});case 33:Q(),e.next=39;break;case 36:e.prev=36,e.t0=e.catch(30),ee();case 39:case"end":return e.stop()}},e,null,[[30,36]])})),[i,l,Q,o,ee,X]),eo=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,s,c,u,d,p,m,v,b,x,y;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(U(null),!J){e.next=4;break}return ei(),e.abrupt("return");case 4:return h(!0),e.next=7,I.current.getSelectedPayment();case 7:if(!(t=e.sent).stripeError){e.next=17;break}if("setup_intent_authentication_failure"!==t.stripeError){e.next=15;break}return e.next=12,f.Z.cancelJoinGroupPaid({groupId:i.id});case 12:e.sent.error&&l(e9.bI,{message:"There was an issue with your request, please try again",severity:"error"});case 15:return h(!1),e.abrupt("return");case 17:if(e.prev=17,!L){e.next=24;break}return e.next=21,(0,iE.Cx)({token:L,userID:null==o?void 0:o.id,timeoutMS:6e4});case 21:Q(),e.next=57;break;case 24:return n=(0,pq.K)(),e.next=27,f.Z.joinGroupPaid(fk({email:k,groupName:i.name,paymentMethodId:t.id},n));case 27:if(s=(r=e.sent).data,!(c=r.error)){e.next=38;break}if(d=null===(u=c.data)||void 0===u||null===(u=u.fields)||void 0===u||null===(u=u[0])||void 0===u?void 0:u.error,U((0,px.b)(d,!0)),h(!1),!("Card declined"===d&&t.newCard)){e.next=37;break}return e.next=37,I.current.handleDeclinedCard(t.id);case 37:return e.abrupt("return");case 38:if(!s.clientSecret){e.next=51;break}return T(s.token),e.next=42,X.confirmCardPayment(s.clientSecret,{payment_method:t.id});case 42:if(!(p=e.sent.error)){e.next=51;break}return T(null),h(!1),v=null!==(m=p.decline_code)&&void 0!==m?m:p.code,U((0,px.b)(v,!0)),e.next=51,I.current.handleDeclinedCard(t.id);case 51:if(!s.token){e.next=57;break}return e.next=54,(0,iE.Cx)({token:s.token,userID:null==o?void 0:o.id,timeoutMS:6e4});case 54:s.eventId&&(y=JSON.parse(null==i||null===(x=i.metadata)||void 0===x?void 0:x.currentMBp),(0,pq.i)({eventName:"Purchase",eventID:s.eventId,params:{value:y.amount/100,currency:y.currency}})),(0,ip.P3)({eventName:ip.qI.groupPayEnd,userID:null==o?void 0:o.id,metadata:fk(fk({},(0,ip.Ju)({currentGroup:i})),{},{has_existing_payment_method:!!g&&g.length>0,purchase_type:"group",current_price:null!==(b=null==H?void 0:H.amount)&&void 0!==b?b:null})}),Q();case 57:e.next=62;break;case 59:e.prev=59,e.t0=e.catch(17),ee("failed"===e.t0?"Card declined":void 0);case 62:case"end":return e.stop()}},e,null,[[17,59]])})),[k,X,o,l,L,i,g,J,H,ee,Q,ei]),ea=(0,u.useMemo)(function(){if(!J)return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(fb,{children:"Email for membership"}),(0,D.jsx)(fg,{onChange:er,placeholder:"Email",staticLabel:!0,autoFocus:!0,value:k})]})},[k,er,J]),es=(0,u.useMemo)(function(){if(!J)return(0,D.jsxs)(fx,{children:["By joining, you accept ".concat(Z," and Skool's"),"\xa0",(0,D.jsx)(Y.r,{href:"/legal?t=terms",newTab:!0,children:"terms."}),(0,D.jsx)("br",{}),"You can cancel anytime."]})},[Z,J]),el=(0,u.useMemo)(function(){if(J)return(0,D.jsx)(fw,{children:"Payment declined. Please update your payment method to keep access to this community."})},[J]),ec=(0,u.useCallback)(function(e){U(null),q(e)},[]),eu=(0,u.useCallback)(function(e){U(null),q(null!==e)},[]);return(0,D.jsxs)(ri.u_,{open:!0,size:"small",onClose:m?void 0:K,shouldFullscreenOnMobile:!0,wrapperStyle:{padding:0,overflow:s?"auto":"hidden"},children:[(0,D.jsx)(fp,{children:(0,D.jsxs)(fm,{children:[(0,D.jsx)(t$.F,{group:i,disableLink:!0,size:56}),(0,D.jsx)(dt.D,{disableLink:!0,group:i,desktopTypography:"t1",mobileTypography:"t1"}),(0,D.jsx)("p",{children:"".concat(en," /month membership. Cancel anytime.")})]})}),(0,D.jsxs)(fv,{children:[el,ea,(0,D.jsx)(iB.t,{onReady:R,onInitialized:V,initLoading:w,fetchPayments:J,paymentMethods:g,label:"Payment information",ref:I,addPaymentMethod:!1,paymentElementOnChange:ec,onPaymentMethodChange:eu}),G&&(0,D.jsxs)(fC,{children:[(0,D.jsx)("strong",{children:"Declined. "}),"Reason: ",G]}),(0,D.jsx)(E.z,{disabled:!B||!W,style:{textTransform:"none"},loading:m,loadingLabel:"Processing...",onClick:eo,label:J?"UPDATE":"JOIN ".concat(en," /month")}),es]})]})},fP={fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}]},fI=(0,u.memo)(function(){var e=(0,P.bI)("showPaymentSuccessModal","showSubscribeModal","billingStripePromise","currentGroup","self"),t=e.dispatch,n=e.showSubscribeModal,r=e.billingStripePromise,i=e.showPaymentSuccessModal,o=e.self,a=e.currentGroup,s=(0,d.useRouter)(),l=(0,u.useMemo)(function(){var e,t;if(null!=a&&null!==(e=a.metadata)&&void 0!==e&&e.currentMBp)return(0,id.O5)(JSON.parse(null==a||null===(t=a.metadata)||void 0===t?void 0:t.currentMBp))},[a]),c=(0,u.useMemo)(function(){var e,t;if(null!=o&&null!==(e=o.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mmbp)return(0,id.O5)(JSON.parse(null==o||null===(t=o.member)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.mmbp))},[o]);(0,u.useEffect)(function(){(0,q.A$)(s.query)&&(t(e9.RV,!0),(0,X.hj)(s,"ssm"))},[t,s]);var p=(0,u.useCallback)(function(){t(e9.KH,!0)},[t]),f=(0,u.useCallback)(function(){t(e9.KH,!1)},[t]);(0,u.useEffect)(function(){(0,q.y3)(s.query)&&(p(),(0,X.hj)(s,"sps"))},[p,s]);var m=(0,u.useMemo)(function(){return!n||!(null!=a&&a.id)||(0,q.y3)(s.query)?null:(0,D.jsx)(fO,{openSuccessModal:p})},[n,s.query,null==a?void 0:a.id,p]),h=(0,u.useMemo)(function(){if(!a)return null;var e,t,n=c||l;return(0,D.jsx)(ri.u_,{size:"small",confettiOnClose:!!(null!=o&&null!==(e=o.metadata)&&void 0!==e&&e.bio)&&!!(null!=o&&null!==(t=o.metadata)&&void 0!==t&&t.pictureProfile),open:i,onClose:f,children:(0,D.jsxs)(fy,{children:[(0,D.jsx)(ez.J,{name:"CheckCircle"}),(0,D.jsx)("h2",{children:"Payment successful"}),(0,D.jsx)("p",{children:"".concat(a.metadata.displayName," charged your card ").concat(n," and sent a receipt to ").concat(null==o?void 0:o.email,". Your card will be charged monthly on the date you signed up.")}),(0,D.jsx)(E.z,{label:"Enter group",onClick:f})]})})},[o,f,i,a,l,c]);return(0,D.jsxs)(uQ.Elements,{stripe:r,options:fP,children:[m,h]})}),fD=C.ZP.div.withConfig({displayName:"styled__StatusBadgeModalWrapper",componentId:"sc-6gk9o3-0"})(["display:flex;flex-direction:column;align-items:center;> img{height:100px;}> h3{margin:12px 0px 8px 0px;","}> p{margin:0px 0px 32px 0px;text-align:center;","}> a,> button{width:100%;> button{width:100%;}}"],N.c.t1,N.c.t7),fZ=n(46158);function fS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var f_=function(e){var t=e.label,n=e.days,r=e.activities;return(0,D.jsx)("p",{children:"Users with a ".concat(n,"-day streak of ").concat(r,"+ activities per day get ").concat(t," status.")})},fM=function(e){var t=e.label,n=e.percentage,r="goat"===e.status;return(0,D.jsxs)("p",{children:[r?"There can only be one Goat.":"The top ".concat(n,"% of community builders get ").concat(t," status."),(0,D.jsx)("br",{}),r&&(0,D.jsxs)(D.Fragment,{children:["The ",(0,D.jsx)("strong",{children:"#1"})," community builder on Skool."]})]})},fN=function(){var e=(0,P.bI)("statusBadgeModal"),t=e.statusBadgeModal,n=e.dispatch,r=fZ.g[t],o=r.label,a=r.modalImg,s=r.type,l=(0,u.useCallback)(function(){n(e9._E,null)},[n]);return(0,D.jsx)(ri.u_,{open:!0,size:"small",onClose:l,wrapperStyle:{padding:"32px 24px"},children:(0,D.jsxs)(fD,{children:[(0,D.jsx)("img",{src:a}),(0,D.jsx)("h3",{children:o}),(0,D.jsx)("mrr"===s?fM:f_,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fS(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onClose:l,status:t},r)),(0,D.jsx)(E.z,{label:"Got it",onClick:l})]})})},fE=(0,u.memo)(function(){return(0,P.bI)("statusBadgeModal").statusBadgeModal?(0,D.jsx)(fN,{}):null}),fA=n(12577),fL=(0,u.memo)(function(){var e=(0,P.bI)("joinGroupPending","currentGroup"),t=e.joinGroupPending,n=e.currentGroup,r=e.dispatch,i=(0,u.useCallback)(function(){r(e9.Nb,!1)},[r]);return t?(0,D.jsx)(fA.p,{open:!0,title:"Membership pending",subtitle:"".concat(n.metadata.displayName," admins are reviewing your request. You'll get an email when you're approved."),okButtonText:"Got It",onConfirm:i,onCancel:i}):null}),fT=C.ZP.div.withConfig({displayName:"styled__AppAdoptionBanner",componentId:"sc-14apg61-0"})(["align-items:center;position:fixed;display:flex;bottom:","px;left:0px;width:100vw;background:",";padding:8px;border-top:1px solid ",";z-index:1298;padding-bottom:",";"," > a{height:34px;margin-right:4px;> button{padding:0px 12px;text-transform:none;height:100%;}}"],function(e){var t=e.$bottom;return void 0===t?0:t},y.O9.n1,y.O9.n3,function(e){return 0===e.$bottom&&"calc(env(safe-area-inset-bottom) + 8px)"},K.Wn),fF=C.ZP.div.withConfig({displayName:"styled__SkoolIcon",componentId:"sc-14apg61-1"})(['background:url("https://assets.skool.com/f/-/1d8b1123248347ddb42dfd1293b27c18df01da30aa414a678a2f1d312832a785/icon.jpg");height:40px;width:40px;border-radius:10px;background-size:cover;margin-right:8px;']),fB=C.ZP.div.withConfig({displayName:"styled__InfoText",componentId:"sc-14apg61-2"})(["flex:1;",";"],N.c.t10),fR=C.ZP.div.withConfig({displayName:"styled__AppAdoptionModalWrapper",componentId:"sc-14apg61-3"})(["display:flex;flex-direction:column;align-items:center;> h2{margin:8px 0px 16px 0px;","}> p{margin:0px 0px 32px 0px;text-align:center;","}> a{width:fit-content;}"],N.c.t1,N.c.t7),fz=(0,u.memo)(function(e){var t,n=e.userAgent,r=e.isApp,i=(0,u.useState)(!1),o=i[0],a=i[1],s=(0,P.bI)("self","mobileBottomOffset"),l=s.self,c=s.mobileBottomOffset,p=(0,d.useRouter)(),f=p.pathname,m=p.asPath,v=p.query;(0,u.useEffect)(function(){!((0,h.tv)({key:h.H0.hideAppBanner}).value||"/signup"===f||"/refer"===f||"/games/onboarding"===m||"/games/about"===m||!l||r||(0,q.DG)({query:v}))&&((0,H.Dt)(n)||(0,H.gn)(n)||(0,H.AY)(n))&&a(!0)},[n,r,f,m,l,v]);var b=(0,u.useCallback)(function(){a(!1);var e=(0,H.AY)(n)?3:1;(0,h.co)({key:h.H0.hideAppBanner,value:!0,expireInMSec:864e5*e})},[n]);return o?(0,H.AY)(n)?(0,D.jsxs)(ri.u_,{open:!0,size:"small",children:[(0,D.jsxs)(fR,{children:[(0,D.jsx)(fF,{}),(0,D.jsx)("h2",{children:"Get the official app"}),(0,D.jsx)("p",{children:"Download the official Skool app. This app is no longer supported."})]}),(0,D.jsx)(E.z,{style:{marginBottom:8},label:"Get App",href:"https://apps.apple.com/us/app/skool-communities/id6447270545"})]}):(0,D.jsxs)(fT,{$bottom:null==c||null===(t=c[I.V.SAFE])||void 0===t?void 0:t.offset,children:[(0,D.jsx)(fF,{}),(0,D.jsx)(fB,{children:"Get the full experience"}),(0,D.jsx)(E.z,{href:(0,H.Dt)(n)?"https://play.google.com/store/apps/details?id=com.skool.skoolcommunities":"https://apps.apple.com/us/app/skool-communities/id6447270545",label:"Get app",newTab:!0}),(0,D.jsx)(E.z,{onClick:b,variant:"icon-borderless",icon:"Close",iconSize:14,dataTestId:"close-get-app-banner"})]}):null}),fG=n(19869),fU=(0,u.memo)(function(){var e=(0,u.useState)(!1),t=e[0],n=e[1],r=(0,d.useRouter)();return((0,u.useEffect)(function(){(0,q.wC)(r.query)&&(n(!0),(0,X.hj)(r,"sc"))},[r]),t)?(0,D.jsx)(fG.D,{}):null}),f$=(0,C.iv)(["height:auto;flex-direction:column;gap:8px;padding:16px 0px;",";> button{width:fit-content;padding:0px 25px;}"],function(e){var t=e.$mobileBottomOffset;return t&&"bottom: ".concat(t,"px;")}),fW=C.ZP.div.withConfig({displayName:"styled__DeclinedMembershipBannerWrapper",componentId:"sc-1yhqigf-0"})(["display:flex;align-items:center;justify-content:center;position:fixed;bottom:0px;left:0px;width:100%;height:64px;background:",";color:",";gap:32px;z-index:1;"," ",""],y.O9.e2,y.O9.fgError,N.c.t5,function(e){return e.theme.isMobile&&f$}),fq=function(){var e,t=(0,P.bI)("mobileBottomOffset"),n=t.dispatch,r=t.mobileBottomOffset,i=(0,u.useCallback)(function(){n(e9.RV,!0)},[n]);return(0,D.jsxs)(fW,{$mobileBottomOffset:null==r||null===(e=r[I.V.SAFE])||void 0===e?void 0:e.offset,children:[(0,D.jsx)("span",{children:"Your payment has been declined"}),(0,D.jsx)(E.z,{label:"Fix payment issue",variant:"secondary",onClick:i})]})},fH=(0,u.memo)(function(){var e=(0,u.useState)(!1),t=e[0],n=e[1],r=(0,P.bI)("self","currentGroup"),i=r.self,o=r.currentGroup;return((0,u.useEffect)(function(){var e;n((null==i||null===(e=i.member)||void 0===e?void 0:e.billingDeclined)&&(0,v.cD)({member:null==i?void 0:i.member,group:o}))},[i,o]),t)?(0,D.jsx)(fq,{}):null}),fV=n(83527),fY=n(5212),fJ=["50 Cent","Warren Buffet","Dr. Dre","Bill Gates","Beyonce","Biggie","Pam Anderson"],fX=function(e){var t=e.fireNewSubscriberNotification,n=(0,u.useState)(0),r=n[0],i=n[1],o=(0,P.bI)("makeItRain").makeItRain,a=(0,u.useCallback)(function(){t({handle:"hormozi",price:"$99",name:fJ[r],groupName:"games"}),i(function(e){var t=e+1;return t>fJ.length-1?0:t})},[r,t]);return(0,u.useEffect)(function(){var e=function(e){var t=e.keyCode;e.ctrlKey&&52===t&&a()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[a]),(0,u.useEffect)(function(){if(o){var e=setInterval(a,500);return function(){clearInterval(e)}}},[a,o]),null};fX.propTypes={fireNewSubscriberNotification:(0,fY.EO)({required:!0})};var fK=(0,u.memo)(fX);function fQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fQ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fQ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f1=(0,u.memo)(function(){var e=(0,P.bI)("globalAlert"),t=e.globalAlert,n=e.dispatch,r=(0,u.useCallback)(function(){n(e9.bI,null)},[n]);return(0,u.useEffect)(function(){var e,r=null!==(e=null==t?void 0:t.autoHideDuration)&&void 0!==e?e:6e3;if(t&&!(r<=1e3)){var i=setTimeout(function(){n(e9.bI,f0(f0({},t),{},{autoHideDuration:r-1e3}))},1e3);return function(){clearTimeout(i)}}},[n,t,r]),(0,D.jsx)(W,f0({open:!!t,onClose:r},t))}),f2=n(55877),f9=n(80181),f3=C.ZP.span.withConfig({displayName:"styled__GroupTitle",componentId:"sc-1c30yoj-0"})([""," padding:0 16px;text-align:center;width:100%;overflow-wrap:break-word;"],N.c.t1),f5=C.ZP.span.withConfig({displayName:"styled__PrivacyStatus",componentId:"sc-1c30yoj-1"})(["font-size:18px;font-weight:500;"]),f4=C.ZP.div.withConfig({displayName:"styled__ModalBody",componentId:"sc-1c30yoj-2"})(["padding:",";overflow-wrap:break-word;",";"],function(e){return e.theme.isMobile?"32px 16px":"32px"},N.c.t7),f6=C.ZP.div.withConfig({displayName:"styled__ModalFooter",componentId:"sc-1c30yoj-3"})(["padding:",";padding-top:0;display:flex;justify-content:center;flex-direction:",";gap:",";"],function(e){return e.theme.isMobile?"32px 16px":"32px"},function(e){return e.$flexDirection},function(e){return e.$gap}),f8=(0,C.ZP)(Y.r).withConfig({displayName:"styled__CallToActionLink",componentId:"sc-1c30yoj-4"})(["width:100%;display:block;text-decoration:none;"]),f7=(0,C.ZP)(E.z).withConfig({displayName:"styled__CallToActionButton",componentId:"sc-1c30yoj-5"})(["width:100%;"]),me=(0,C.ZP)(f9.eI).withConfig({displayName:"styled__CoverPhoto",componentId:"sc-1c30yoj-6"})(["height:243px;border-radius:10px 10px 0 0;background-position:center;background-size:contain;",";",";"],function(e){var t=e.$backgroundColor;return t&&"background-color: ".concat(t)},function(e){var t=e.$backgroundImage;return t&&"background-image: url('".concat(t,"')")}),mt=(0,C.ZP)(f9.ni).withConfig({displayName:"styled__CoverPhotoContent",componentId:"sc-1c30yoj-7"})(["gap:8px;"]),mn=C.ZP.div.withConfig({displayName:"styled__PurchaseTerms",componentId:"sc-1c30yoj-8"})(["text-align:center;color:",";"," > a{text-decoration:underline;}"],y.O9.n5,N.c.t11),mr=C.ZP.div.withConfig({displayName:"styled__Purchase",componentId:"sc-1c30yoj-9"})(["display:flex;flex-direction:column;gap:16px;"]),mi=C.ZP.div.withConfig({displayName:"styled__PurchaseSuccessContainer",componentId:"sc-1c30yoj-10"})(["display:flex;flex-direction:column;gap:32px;padding:",";align-items:center;"],function(e){return e.theme.isMobile?"32px 16px":"32px"}),mo=C.ZP.div.withConfig({displayName:"styled__PurchaseSuccessBody",componentId:"sc-1c30yoj-11"})(["display:flex;flex-direction:column;align-items:center;gap:8px;"]),ma=C.ZP.h2.withConfig({displayName:"styled__PurchaseSuccessHeader",componentId:"sc-1c30yoj-12"})(["margin:0;",""],N.c.t1),ms=C.ZP.p.withConfig({displayName:"styled__PurchaseSuccessContent",componentId:"sc-1c30yoj-13"})([""," text-align:center;margin:0;"],N.c.t7),ml=C.ZP.div.withConfig({displayName:"styled__ErrorText",componentId:"sc-1c30yoj-14"})(["",";color:",";margin-top:8px;"],N.c.t11,y.O9.e2);function mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var md={border:0,padding:0},mp={fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}]},mf=function(e){var t,n=e.course,i=e.group,o=e.onSuccessfulPurchase,s=e.dispatch,l=e.self,c=e.onClose,d=(0,u.useRef)(),p=(0,u.useState)(!1),m=p[0],h=p[1],v=(0,u.useState)(!1),b=v[0],g=v[1],x=(0,u.useState)(!1),y=x[0],w=x[1],C=(0,uQ.useStripe)(),j=(0,u.useState)(null),k=j[0],O=j[1],P=n.metadata,I=n.billingProductId,Z=n.amount,S=n.currency,_=P.title,M=P.coverImage,N=P.desc,E=P.privacy,A=P.minAccessLevel,L=P.dripDays,T=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n,r,c,u,p,h,v,b,g,x;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),O(null),e.next=4,d.current.getSelectedPayment();case 4:if(!(t=e.sent).stripeError){e.next=11;break}if("setup_intent_unexpected_state"!==t.stripeError){e.next=9;break}return e.next=9,d.current.refetchIntent();case 9:return w(!1),e.abrupt("return");case 11:return n=(0,f2.v4)(),e.next=14,f.Z.purchase({billingProductId:I,paymentMethod:t,idemKey:n});case 14:if(c=(r=e.sent).data,!(u=r.error)){e.next=22;break}return h=null===(p=u.data)||void 0===p||null===(p=p.fields)||void 0===p||null===(p=p[0])||void 0===p?void 0:p.error,O((0,px.b)(h,!0)),w(!1),e.abrupt("return");case 22:if(b=(v=c||{}).clientSecret,g=v.token,!b){e.next=31;break}return e.next=26,C.confirmCardPayment(b,{payment_method:t.id});case 26:if(!(x=e.sent).error){e.next=31;break}return O((0,px.b)(x.error.decline_code,!0)),w(!1),e.abrupt("return");case 31:if(!g){e.next=42;break}return e.prev=32,e.next=35,(0,iE.Cx)({token:g,userID:null==l?void 0:l.id,timeoutMS:6e4});case 35:e.next=42;break;case 37:return e.prev=37,e.t0=e.catch(32),s(e9.bI,{message:"There was an issue with your request, please try again.",severity:"error"}),w(!1),e.abrupt("return");case 42:(0,ip.P3)({eventName:ip.qI.groupPayEnd,userID:null==l?void 0:l.id,metadata:mu(mu({},(0,ip.Ju)({currentGroup:i})),{},{has_existing_payment_method:!!m,purchase_type:"course",current_price:null!=Z?Z:null})}),o(!0);case 44:case"end":return e.stop()}},e,null,[[32,37]])})),[d,m,I,s,o,i,l,C,Z]),F=(0,u.useCallback)(function(e){O(null),g(e)},[]),B=(0,u.useCallback)(function(e){O(null),g(null!==e)},[]),R=E==oc.xO,z=E==oc.Fs,G=E==oc.pf,U=E==oc.LC,$=(0,D.jsx)(f8,{onClick:c,href:"/".concat(i.name,"/-/leaderboards"),children:(0,D.jsx)(f7,{label:"Check Level on Leaderboards",variant:"primary"})}),W=(0,u.useMemo)(function(){return G&&Z&&S?(0,id.O5)({amount:Z,currency:S,showZeroes:!1}):""},[G,Z,S]),q=i.metadata.displayName,H=(0,u.useMemo)(function(){return JSON.parse(n.metadata.dripConfig||"{}")},[n]),V=U&&L?L:null==H?void 0:H.days,J=(0,u.useCallback)(function(e){(0,ip.P3)({eventName:ip.qI.groupPayStart,userID:null==l?void 0:l.id,metadata:mu(mu({},(0,ip.Ju)({currentGroup:i})),{},{has_existing_payment_method:e,purchase_type:"course",current_price:null!=Z?Z:null})})},[i,null==l?void 0:l.id,Z]);return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(me,{$backgroundColor:null===(t=i.metadata)||void 0===t?void 0:t.color,$backgroundImage:M,children:(0,D.jsxs)(mt,{children:[!U&&(0,D.jsx)(ez.J,{name:"Private",size:32,padding:0}),U&&(0,D.jsx)(ez.J,{name:"Clock",size:32,padding:0}),(0,D.jsx)(f3,{children:_}),z&&(0,D.jsx)(f5,{children:"Unlock at Level ".concat(A)}),R&&(0,D.jsx)(f5,{children:"Private Course"}),G&&(0,D.jsx)(f5,{children:"Unlock for ".concat(W)}),U&&(0,D.jsx)(f5,{children:"Unlocks in ".concat(n5()("day",V,!0))})]})}),(0,D.jsx)(f4,{children:N}),z&&(0,D.jsx)(f6,{children:$}),G&&(0,D.jsxs)(f6,{$flexDirection:"column",$gap:"32px",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(iB.t,{onReady:h,onInitialized:J,label:"Payment information",ref:d,addPaymentMethod:!1,paymentElementOnChange:F,onPaymentMethodChange:B}),k&&(0,D.jsxs)(ml,{children:[(0,D.jsx)("strong",{children:"Declined. "}),"Reason: ",k]})]}),(0,D.jsxs)(mr,{children:[(0,D.jsx)(f7,{disabled:!m||!b,style:{textTransform:"none"},loading:y,loadingLabel:"Processing...",onClick:T,label:"BUY NOW ".concat(W)}),(0,D.jsxs)(mn,{children:["By purchasing, you accept ".concat(q," and Skool’s"),"\xa0",(0,D.jsx)(Y.r,{href:"/legal?t=terms",newTab:!0,children:"terms."})]})]})]})]})},mm=function(e){var t=e.course,n=e.group,r=e.self,i=e.onOpenCourse,o=t.amount,a=t.currency,s=n.metadata.displayName,l=(0,u.useMemo)(function(){return(0,id.O5)({amount:o,currency:a,showZeroes:!1})},[o,a]);return(0,D.jsxs)(mi,{children:[(0,D.jsxs)(mo,{children:[(0,D.jsx)(ez.J,{name:"CheckCircle",size:40,color:y.O9.s2}),(0,D.jsx)(ma,{children:"Payment successful"}),(0,D.jsx)(ms,{children:"".concat(s," charged your card USD ").concat(l," and sent a receipt to ").concat(r.email,".")})]}),(0,D.jsx)(f7,{label:"Open Course",variant:"primary",onClick:i})]})},mh=function(){var e=(0,P.bI)("self","isMobile","coursePreviewModal","billingStripePromise"),t=e.self,n=e.dispatch,i=e.isMobile,o=e.coursePreviewModal,s=e.billingStripePromise,l=o.course,c=o.group,p=o.isPurchaseSuccessful,f=(0,d.useRouter)().push,m=(0,u.useCallback)(function(){n(e9.T1)},[n]),h=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,q.rE)({group:c,course:l,courseModule:i?"menu":void 0}),n(e9.el),e.next=4,f(t.as);case 4:case"end":return e.stop()}},e)})),[c,l,i,f,n]),v=p?y.O9.n5:y.O9.n1,b=(0,D.jsx)(E.z,{onClick:m,variant:"icon-borderless",iconNode:(0,D.jsx)(ez.J,{size:14,name:"Close",color:v})});return(0,D.jsx)(ri.u_,{size:"small",open:o.show,wrapperStyle:md,onClose:m,dataTestId:"course-preview-modal",confettiOnClose:p,shouldFullscreenOnMobile:!0,closeIcon:b,children:(0,D.jsxs)(uQ.Elements,{stripe:s,options:mp,children:[!p&&c&&l&&(0,D.jsx)(mf,{group:c,dispatch:n,course:l,onClose:m,onSuccessfulPurchase:h,self:t}),p&&c&&l&&(0,D.jsx)(mm,{course:l,self:t,group:c,onOpenCourse:m})]})})};function mv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mv(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(81361);var mg=["mousemove","keypress","scroll","touchstart","mousedown"],mx=(0,dy.gh)(),my=l()(function(){return n.e(6592).then(n.bind(n,6592))},{loadableGenerated:{webpack:function(){return[6592]}}}),mw=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var i,o,s,l,p,x,w=n.currentGroup,C=n.self,j=n.settings,k=n.currentPage,O=n.referer,I=n.isApp,Z=n.userAgent,S=(0,d.useRouter)(),_=(0,u.useState)(!1),M=_[0],N=_[1],E=(0,u.useRef)(!1),A=(0,u.useRef)(null),L=(0,u.useState)(null),T=L[0],F=L[1],B=(0,P.bI)("lastNotification","unreadChat","pixelInitalized","isMobile"),R=B.dispatch,z=B.lastNotification,G=B.unreadChat,U=B.pixelInitalized,$=B.isMobile,Y=(0,c.Ds)().enqueueSnackbar,J=(0,u.useRef)(!1),K=(0,u.useRef)((0,H.IU)()),Q=(0,q.kG)(S.query),et=(0,u.useRef)(),en=!!(0,H.Q0)(Z);(0,u.useEffect)(function(){if(U){var e=function(e){e.startsWith("/".concat(null==w?void 0:w.name))||(window.location.href=S.basePath+e)};return S.events.on("routeChangeStart",e),function(){S.events.off("routeChangeStart",e)}}},[S,U,w]),(0,u.useEffect)(function(){(0,q.PS)(S)?R(e9.Xs,function(e){if(e.allUsersSelected)return{selectedUsers:[],allUsersSelected:!1}}):R(e9.Xs,function(){return{selectedUsers:[],allUsersSelected:!1}})},[R,S]),(0,u.useEffect)(function(){(0,ip.P3)({eventType:ip.tw.PAGE_VIEW,eventName:S.asPath,userID:null==C?void 0:C.id,referer:O})},[S,C,O]),(0,u.useEffect)(function(){(0,q.b9)(S)&&(0,v.De)({member:null==C?void 0:C.member})&&!(0,g.d)({group:w})&&(0,ip.P3)({eventName:ip.qI.groupNonmemberView,userID:null==C?void 0:C.id,referer:O,metadata:(0,ip.Ju)({currentGroup:w})})},[]),(0,u.useEffect)(function(){var e=(0,dj.J)("pk_live_51IMiS6KvLOXsN9xSfc0bsCmz4p06QORdboo8MvJtjVBv2pnTKbysGEMu331uhK1cw2RRGMiLgAGCPfjDVJs30aLn00ui4Q8VEn"),t=(0,dj.J)("pk_live_51Msq2SK2xk1aF7GmLfdnbGQwTp0k2kt23vSuMyDBouKfriqp9W52yocwbPK72oXs5LtVsFYqiJ0oMfXouhXZMFSu00T7SlnP47");R(e9.NO,{stripePromise:e,billingStripePromise:t})},[R]),(0,u.useEffect)(function(){if(C){var e=(0,h.tv)({key:h.H0.storedTelemetry}).value;Array.isArray(e)&&e.forEach(function(e){var t,n,r=e.eventName,i=e.metadata,o=r;r===ip.qI.joinSuccess&&(o=(null==C||null===(n=C.member)||void 0===n?void 0:n.role)===b.JR?ip.qI.userPending:ip.qI.joinGroupComplete),(0,ip.P3)({eventName:o,userID:null==C?void 0:C.id,metadata:mb(mb(mb({},(0,ip.Ju)({currentGroup:w})),o===ip.qI.joinGroupComplete&&{target_user_id:null==C?void 0:C.id,target_member_id:null==C||null===(t=C.member)||void 0===t?void 0:t.id}),i)})}),(0,h.pN)({key:h.H0.storedTelemetry})}},[C]),(0,u.useEffect)(function(){Q&&(0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.co)({key:h.H0.savedAffiliateCode,value:Q,expireInMSec:2592e6}),!C){e.next=20;break}return e.next=4,f.Z.getAffiliatesPayoutInfo();case 4:if(e.sent.data.code!==Q){e.next=12;break}return(0,X.hj)(S,"ref"),e.abrupt("return");case 12:return e.next=14,f.Z.setAffiliateCustomerData({affiliateCode:Q});case 14:(t=e.sent.error)&&console.error("Failed to set affiliate customer data",t),(0,X.hj)(S,"ref");case 18:e.next=22;break;case 20:(0,h.co)({key:h.H0.unsetAffiliateCode,value:Q,expireInMSec:2592e6}),(0,X.hj)(S,"ref");case 22:case"end":return e.stop()}},e)}))()},[Q,C,S]);var er=(0,u.useCallback)((0,r.Z)(a().mark(function e(){var t,n;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,h.tv)({key:h.H0.unsetAffiliateCode}).value,!(C&&t)){e.next=8;break}return e.next=4,f.Z.setAffiliateCustomerData({affiliateCode:t});case 4:(n=e.sent.error)&&console.error("Failed to set affiliate customer data",n),(0,h.pN)({key:h.H0.unsetAffiliateCode});case 8:case"end":return e.stop()}},e)})),[C]);(0,u.useEffect)(function(){er()},[er]),(0,u.useEffect)(function(){if(!C||null==C||null===(e=C.metadata)||void 0===e||!e.noChatSound){var e,t=function(e,t){F(function(n){return n===e?t:e})};if(z&&G){var n=z.name;t("(".concat(G,") Chat"),"".concat(n," messaged you")),A.current=setInterval(function(){t("(".concat(G,") Chat"),"".concat(n," messaged you"))},2e3)}else A.current&&clearInterval(A.current),F(null);return function(){A.current&&(clearInterval(A.current),F(null))}}},[G,z,C]),(0,u.useEffect)(function(){if((0,q.VO)(S.query)){var e;(0,X.hj)(S,"pd"),(null==C||null===(e=C.member)||void 0===e?void 0:e.role)===b.JR&&R(e9.Nb,!0)}},[R,S,null==C||null===(o=C.member)||void 0===o?void 0:o.role]),(0,u.useEffect)(function(){var e,t;if((null==C||null===(e=C.member)||void 0===e?void 0:e.role)!==void 0&&!(0,v.De)({member:{role:null==C||null===(t=C.member)||void 0===t?void 0:t.role}})){var n=[];(0,q.GG)(S.query)&&n.push("jg","aj"),(0,q.gf)(S.query)&&n.push("auth"),n.length&&(0,X.$Z)(S,n)}},[S,null==C||null===(s=C.member)||void 0===s?void 0:s.role]),(0,u.useEffect)(function(){I&&(0,m.M6)(S,!!C)},[I,S,C]);var ei=!t&&(0,v.Wr)({member:null==C?void 0:C.member,group:w})&&(null==j||null===(l=j.error)||void 0===l?void 0:l.status)!==423;(0,u.useEffect)(function(){C&&(0,r.Z)(a().mark(function e(){var n,r,i;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t&&!(null!==(n=C.metadata)&&void 0!==n&&n.timezone))||!(i=null===(r=Intl)||void 0===r||null===(r=r.DateTimeFormat())||void 0===r||null===(r=r.resolvedOptions())||void 0===r?void 0:r.timeZone)){e.next=5;break}return e.next=5,f.Z.updateUserMeta({userID:C.id,key:"timezone",value:i,valueType:"string"});case 5:case"end":return e.stop()}},e)}))()},[C]),(0,u.useEffect)(function(){var e=function(){E.current||(E.current=!0,(0,nq.Rq)())},t=setTimeout(e,6e5),n=function(){clearTimeout(t),E.current&&(E.current=!1,(0,nq.v4)()),t=setTimeout(e,6e5)};return mg.forEach(function(e){return window.addEventListener(e,n)}),function(){clearTimeout(t),mg.forEach(function(e){return window.removeEventListener(e,n)})}},[]),(0,u.useEffect)(function(){var e=function(){N(!0)},t=function(){N(!1)};return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}},[]),(0,u.useEffect)(function(){if(J.current=!0,C){var e,t=function(){var e,t,n=(e="heartbeat_session_id",t=window.sessionStorage.getItem(e)||(0,H.c9)(),window.sessionStorage.setItem(e,t),t);f.Z.sendHeartbeat({sessionID:n})};t(),e=setInterval(t,2500),f.Z.registerHeartbeatCallback(function(e){e&&J.current&&R(e9.Sb,e),I&&(0,m.TH)(e)})}return function(){J.current=!1,e&&(f.Z.registerHeartbeatCallback(null),clearInterval(e))}},[C,R,I]),(0,u.useEffect)(function(){var e;null!=C&&null!==(e=C.metadata)&&void 0!==e&&e.tracking&&(0,h.co)({key:h.H0.trackingSetting,value:C.metadata.tracking})},[C]),(0,u.useEffect)(function(){w&&(0,h.co)({key:h.H0.lastGroupAccessed,value:w.name})},[w]);var eo=null!==(p=dy.Q2[null==C||null===(x=C.metadata)||void 0===x?void 0:x.theme])&&void 0!==p?p:dy.Q2.light,ea=(0,u.useState)(eo!==dy.Q2.dark&&!t),es=ea[0],el=ea[1];(0,u.useEffect)(function(){if(t){el(!0),(0,m.h4)(mx===dy.Q2.dark);return}(0,m.h4)(eo===dy.Q2.dark),mx===eo?el(!0):((0,dy.Dc)(eo,!0),(0,X.H5)(S,!0))},[S,es,eo]),(0,u.useEffect)(function(){if(C)return(0,nq.Ld)([(0,nq.b5)(C.id),(0,nq.p2)(C.id)],function(e){if(e.groupId===(null==w?void 0:w.id)){if("usp"===e.topic.category){var t=(0,V.yF)(w,e.newLevel);Y(JSON.stringify({icon:"Up",iconColor:y.O9.p3,message:"You reached",messageBold:"Level ".concat(e.newLevel).concat(t?" - "+t:"")}),{anchorOrigin:{horizontal:"left",vertical:"top"},autoHideDuration:6e3})}"cun"===e.topic.category&&e.courseTitle.forEach(function(t,n){Y(JSON.stringify({href:e.linkAs[n],icon:"Unlock",iconColor:y.O9.p3,message:"Course unlocked",messageBold:'"'.concat(t,'"')}),{anchorOrigin:{horizontal:"left",vertical:"top"},autoHideDuration:6e3})})}})},[C,Y,w]);var ec=(0,u.useCallback)(function(e){var t=e.handle,n=e.groupName,r=e.price,i=e.name;et.current.playAudio("https://assets.skool.com/skool/1cd61626a37e4475b0c537c78a52d1bd.wav"),Y(JSON.stringify({href:"/@".concat(t,"?g=").concat(n),variant:"success",messageBold:r,message:"from ".concat(i),boldLeft:!0,width:320}),{anchorOrigin:{horizontal:"left",vertical:"bottom"},autoHideDuration:6e3})},[Y]);(0,u.useEffect)(function(){var e;if((0,v.r1)({member:null==C?void 0:C.member})&&!(null!=C&&null!==(e=C.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mbncno))return(0,nq.Ld)([(0,nq.WK)(w.id)],function(e){var t=e.price,n=e.groupName,r=e.userName,i=e.userFirstName,o=e.userLastName;ec({name:"".concat(i," ").concat(o),handle:r,groupName:n,price:t})})},[ec,Y,w,C]),(0,u.useEffect)(function(){var e;if((0,v.r1)({member:null==C?void 0:C.member})&&!(null!=C&&null!==(e=C.member)&&void 0!==e&&null!==(e=e.metadata)&&void 0!==e&&e.mbncno))return(0,nq.Ld)([(0,nq.IG)(w.id)],function(e){var t=e.price,n=e.userName,r=e.userFirstName,i=e.userLastName,o=e.groupName;ec({name:"".concat(r," ").concat(i),handle:n,groupName:o,price:t})})},[ec,Y,w,C]);var eu=(0,u.useState)(!1),ed=eu[0],ep=eu[1],ef=(0,u.useCallback)((i=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"`"===t.key&&ep(!ed);case 1:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),[ed]);if((0,u.useEffect)(function(){return H.iC&&document.addEventListener("keydown",ef),function(){H.iC&&document.removeEventListener("keydown",ef)}},[ef]),!es)return null;if(t)return(0,D.jsxs)(rj,{children:[(0,D.jsx)(e,mb({},n),k.pageKey),(0,D.jsx)(fd,{}),(0,D.jsx)(fz,{userAgent:Z,isApp:I}),(0,D.jsx)(fU,{}),(0,D.jsx)(ee,{}),(0,D.jsx)(f1,{}),(0,H.S_)()&&!K.current&&(0,D.jsx)(rh,{})]});var em=(0,D.jsx)(nl,mb({content:e,canAccessGroup:ei},n),k.pageKey),eh=(0,D.jsx)(nS,mb({content:e,canAccessGroup:ei},n),k.pageKey);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(rj,{children:[H.iC&&ed&&(0,D.jsx)(my,{}),$?eh:em,(0,D.jsx)(fz,{userAgent:Z,isApp:I}),(0,D.jsx)(fU,{}),(0,D.jsx)(pA,{}),(0,D.jsx)(W,{open:M,autoHideDuration:null,message:"It looks like you're offline",noClose:!0}),(0,D.jsx)(f1,{}),(0,D.jsx)(n1,{}),(0,D.jsx)(n9,{}),(0,D.jsx)(ra,{}),(0,D.jsx)(rm,{}),(0,D.jsx)(nW,{isBot:en}),(0,D.jsx)(fI,{}),(0,D.jsx)(fE,{}),(0,D.jsx)(pV,{}),(0,D.jsx)(fH,{}),(0,H.S_)()&&!K.current&&(0,D.jsx)(rh,{}),(0,D.jsx)(dc,{canAccessGroup:ei}),T?(0,D.jsxs)(rO(),{children:[(0,D.jsx)("title",{children:T}),(0,D.jsx)("link",{rel:"icon",type:"image/x-icon",href:"https://assets.skool.com/skool/b3c5a15dd2924afdb3e1491c11f237a1.ico"})]}):(0,D.jsx)(rO(),{children:(0,D.jsx)("link",{rel:"icon",type:"image/x-icon",href:"https://assets.skool.com/skool/ed24268642ae417a9b8e3b9827cdd1fd.ico"})}),(0,D.jsx)(df,{}),(0,D.jsx)(dx,{}),(0,D.jsx)(fV.z,{ref:et}),(0,D.jsx)(fK,{fireNewSubscriberNotification:ec}),(0,D.jsx)(fd,{}),(0,D.jsx)(dC,{}),(0,D.jsx)(mh,{}),(0,D.jsx)(fL,{})]})})}}},55847:function(e,t,n){n.d(t,{$5:function(){return $},F9:function(){return B},MP:function(){return Z},OB:function(){return A},Q8:function(){return R},S4:function(){return x},Sf:function(){return w},TH:function(){return C},TX:function(){return p},Tc:function(){return E},V3:function(){return q},XO:function(){return O},Yl:function(){return d},Zd:function(){return j},aS:function(){return U},bM:function(){return m},by:function(){return k},eP:function(){return M},fL:function(){return f},k3:function(){return W},lR:function(){return S},mb:function(){return g},mu:function(){return h},pI:function(){return _},pQ:function(){return z},q$:function(){return D},qm:function(){return T},rM:function(){return y},rY:function(){return b},sg:function(){return I},wJ:function(){return G},xI:function(){return P},zR:function(){return L}});var r=n(50378),i=n(20668),o=n(14251),a=n(59607),s=n(47108),l=n(65009),c=n(14760),u=(0,r.iv)(["height:auto;padding:32px 16px;flex-direction:column;"]),d=(0,r.ZP)(s.Z).withConfig({displayName:"styled__GamificationProgressCard",componentId:"sc-hb97og-0"})(["position:relative;display:flex;align-items:center;width:100%;min-height:408px;flex-direction:row;",""],function(e){return e.theme.isMobile&&u}),p=r.ZP.div.withConfig({displayName:"styled__ProgressCardLeftCol",componentId:"sc-hb97og-1"})(["width:",";"],function(e){return e.theme.isMobile?"100%":"33.5%"}),f=(0,r.ZP)(a.z).withConfig({displayName:"styled__GearIconButton",componentId:"sc-hb97og-2"})(["position:absolute;top:16px;width:48px;height:48px;z-index:1;",""],function(e){return e.theme.isMobile?"right: 16px":"left: 16px"}),m=r.ZP.div.withConfig({displayName:"styled__UserInfoWrapper",componentId:"sc-hb97og-3"})(["position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;"]),h=r.ZP.div.withConfig({displayName:"styled__UserInfoTitle",componentId:"sc-hb97og-4"})(["margin-bottom:2px;"]),v=(0,r.iv)(["width:100%;padding-top:16px;"]),b=r.ZP.div.withConfig({displayName:"styled__ProgressCardRightCol",componentId:"sc-hb97og-7"})(["width:66.5%;",""],function(e){return e.theme.isMobile&&v}),g=r.ZP.div.withConfig({displayName:"styled__LevelBlocksWrapper",componentId:"sc-hb97og-8"})(["display:flex;justify-content:space-between;gap:",";"],function(e){return e.theme.isMobile?"0px":"32px"}),x=r.ZP.div.withConfig({displayName:"styled__LevelBlockWrapper",componentId:"sc-hb97og-9"})(['display:flex;align-items:"flex-start";margin-bottom:16px;&:last-child{margin:0;}']),y=r.ZP.div.withConfig({displayName:"styled__LevelBlockCol",componentId:"sc-hb97og-10"})(["width:calc(50% - 16px);"]),w=r.ZP.div.withConfig({displayName:"styled__LevelBlockLeftCol",componentId:"sc-hb97og-11"})(["margin-right:8px;"]),C=r.ZP.div.withConfig({displayName:"styled__LevelBlockRightCol",componentId:"sc-hb97og-12"})(["> a{&:hover{text-decoration:underline;}}"]),j=r.ZP.div.withConfig({displayName:"styled__LevelBlockTitle",componentId:"sc-hb97og-13"})(["",""],i.c.t6),k=r.ZP.span.withConfig({displayName:"styled__LevelBlockCourseUnlocks",componentId:"sc-hb97og-14"})([""," color:",";"],i.c.t11,o.O9.n5),O=r.ZP.div.withConfig({displayName:"styled__UnlockCircle",componentId:"sc-hb97og-15"})(["display:flex;justify-content:center;align-items:center;width:40px;height:40px;border-radius:50%;background-color:",";"," color:",";"],function(e){return e.$unlocked?o.O9.p2:o.O9.n3},i.c.t4,o.O9.fgPrimary),P=r.ZP.div.withConfig({displayName:"styled__LeaderboardsWrapper",componentId:"sc-hb97og-16"})(["display:flex;flex-direction:",";gap:8px;align-items:flex-start;justify-content:space-between;padding-bottom:32px;"],function(e){return e.theme.isMobile?"column":"row"}),I=r.ZP.div.withConfig({displayName:"styled__Column",componentId:"sc-hb97og-17"})(["display:flex;flex-direction:column;"]),D=r.ZP.div.withConfig({displayName:"styled__InfoRow",componentId:"sc-hb97og-18"})(["display:flex;flex-direction:",";align-items:baseline;justify-content:space-between;margin:",";"],function(e){return e.theme.isMobile?"column":"row"},function(e){return e.theme.isMobile?"24px 16px 16px":"24px 0 16px"}),Z=r.ZP.span.withConfig({displayName:"styled__MemberPercentage",componentId:"sc-hb97og-19"})([""," color:",";"],i.c.t11,o.O9.n5),S=r.ZP.div.withConfig({displayName:"styled__LeaderboardsLastUpdated",componentId:"sc-hb97og-20"})([""," color:",";font-style:italic;"],i.c.t11,o.O9.n5),_=r.ZP.span.withConfig({displayName:"styled__GamificationLink",componentId:"sc-hb97og-22"})(["> a{"," color:",";}"],i.c.t10,o.O9.sd1),M=r.ZP.span.withConfig({displayName:"styled__GamificationLinkDelimiter",componentId:"sc-hb97og-23"})([""," color:",";"],i.c.t10,o.O9.n5),N=(0,r.iv)(["&:hover{text-decoration:underline;}"]),E=r.ZP.button.withConfig({displayName:"styled__LevelUnlockButton",componentId:"sc-hb97og-24"})(["padding:0;background:none;border:none;cursor:pointer;"," color:",";",""],i.c.t10,o.O9.sd1,function(e){return!e.theme.isMobile&&N}),A=r.ZP.div.withConfig({displayName:"styled__LeaderboardsContainer",componentId:"sc-hb97og-25"})(["display:flex;flex-direction:column;gap:24px;width:100%;"]),L=(0,r.ZP)(l.X).withConfig({displayName:"styled__UserItemWrapper",componentId:"sc-hb97og-26"})(["position:relative;align-items:center;justify-content:flex-start;"]),T=r.ZP.div.withConfig({displayName:"styled__TopRankWrapper",componentId:"sc-hb97og-27"})(["position:absolute;top:26px;left:8px;z-index:0;"]),F={1:o.O9.p3,2:o.O9.n5,3:"#A77B53"},B=r.ZP.div.withConfig({displayName:"styled__UserRankWrapper",componentId:"sc-hb97og-28"})(["flex-shrink:0;width:",";margin-right:",";height:27px;border-radius:50%;background-color:",";margin-bottom:3px;z-index:1;display:flex;justify-content:center;align-items:center;"],function(e){return e.$outsideTopRanks?"37px":"27px"},function(e){var t=e.$outsideTopRanks;return e.$marginRight||(t?"13px":"16px")},function(e){return F[e.$rank]||"inherit"}),R=(0,r.ZP)(c.Z).withConfig({displayName:"styled__RankText",componentId:"sc-hb97og-29"})(["margin-left:1px;"]),z=r.ZP.div.withConfig({displayName:"styled__UserAvatarWrapper",componentId:"sc-hb97og-30"})(["margin-right:9px;"]),G=r.ZP.div.withConfig({displayName:"styled__PointsWrapper",componentId:"sc-hb97og-31"})(["flex-shrink:0;"]),U=r.ZP.div.withConfig({displayName:"styled__YourRankWrapper",componentId:"sc-hb97og-32"})(["border-bottom:1px solid ",";padding:16px 0;"],o.O9.n3),$=r.ZP.div.withConfig({displayName:"styled__SelfItemWrapper",componentId:"sc-hb97og-33"})(["padding-top:16px;margin-left:-8px;"]),W=(0,r.ZP)(s.Z).withConfig({displayName:"styled__LeaderboardCard",componentId:"sc-hb97og-34"})(["width:",";padding:",";flex-shrink:0;"],function(e){return e.theme.isMobile?"100%":"350px"},function(e){return e.theme.isMobile?"16px":void 0}),q=r.ZP.div.withConfig({displayName:"styled__LeaderboardCardHeader",componentId:"sc-hb97og-35"})(["border-bottom:1px solid ",";padding-bottom:16px;"],o.O9.n3)},91575:function(e,t,n){var r=n(59499),i=n(4730),o=n(50029),a=n(64687),s=n.n(a),l=n(67294),c=n(95419),u=n(12967),d=n(31545),p=n(29027),f=n(85893),m=["videoId"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}t.Z=(0,l.memo)(function(e){var t=e.post,n=e.file,a=e.videoLink,v=e.open,b=e.onClose,g=(0,l.useState)([]),x=g[0],y=g[1],w=(0,l.useState)(),C=w[0],j=w[1],k=(0,l.useMemo)(function(){var e;return(0,d.sw)(null==t||null===(e=t.metadata)||void 0===e?void 0:e.videoLinksData)},[t]);return(0,l.useEffect)(function(){(0,o.Z)(s().mark(function e(){var n,o,a,l,p,f,v;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],(0,u.vc)((null==t||null===(n=t.metadata)||void 0===n?void 0:n.videoLinks)||"").forEach(function(e){var t=(0,d.ak)(e),n=k.find(function(e){return e.provider===t.provider&&e.videoId===t.videoID})||null,o=n.videoId,s=(0,i.Z)(n,m);if(s&&s.provider===d.a.Bunny&&s.thumbnail){var l=new URL(s.thumbnail);l.searchParams.has("width")&&(l.searchParams.set("width",String(1024)),s.thumbnail=l.toString())}a.push({id:o,upload:null,videoLink:!0,metadata:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},s)})}),l=(0,u.JZ)((null==t||null===(o=t.metadata)||void 0===o?void 0:o.attachments)||""),p=[],!l.length){e.next=10;break}return e.next=7,c.Z.readFiles({fileIDs:l});case 7:p=null!=(v=e.sent.data)&&null!==(f=v.files)&&void 0!==f&&f.length?l.map(function(e){return v.files.find(function(t){return e===t.id})}):[];case 10:p.forEach(function(e){a.push(e)}),y(a);case 12:case"end":return e.stop()}},e)}))()},[t,k]),(0,l.useEffect)(function(){j(x.findIndex(function(e){return n?(null==e?void 0:e.id)===n.id:(null==e?void 0:e.metadata.provider)===a.provider&&(null==e?void 0:e.id)===a.videoID}))},[x,n,a]),C>=0&&v?(0,f.jsx)(p.Z,{initialIdx:C,onClose:b,previewAttachments:x}):null})},11462:function(e,t,n){n.d(t,{Z:function(){return nx}});var r=n(50029),i=n(59499),o=n(17674),a=n(64687),s=n.n(a),l=n(67294),c=n(95419),u=n(14251),d=n(53531),p=n(23450),f=n.n(p),m=n(73793),h=n(50378),v=n(59607),b=n(4730),g=n(15554),x=n(65009),y=n(14760),w=n(85893),C=["color","typographyVariant"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=(0,l.memo)(function(e){var t=e.color,n=e.typographyVariant,r=(0,b.Z)(e,C),i=(0,l.useState)(""),o=i[0],a=i[1],s=(0,m.bI)("isMobile","commentingUsers"),c=s.isMobile,d=s.commentingUsers,p=c?10:25,f=(0,l.useCallback)(function(e){return c&&(e=e.split(" ")[0]),e.length>p?"".concat(e.slice(0,p)):e},[p,c]);return((0,l.useEffect)(function(){switch(null==d?void 0:d.length){case 1:a("".concat(f(d[0].userName)," is typing a comment"));break;case 2:a("".concat(f(d[0].userName)," and ").concat(f(d[1].userName)," are typing comments"));break;default:a("Several people are typing comments")}},[d,f]),null!=d&&d.length)?(0,w.jsxs)(x.X,k(k({gap:8,alignItems:"center"},r),{},{children:[(0,w.jsx)(g.Z,{color:t}),(0,w.jsx)(y.Z,{maxLines:1,color:t||u.O9.n5,variant:n||"t7",children:o})]})):null}),P=n(59313),I=h.ZP.div.withConfig({displayName:"PostDetailBadge__BadgeWrapperDiv",componentId:"sc-1j9dowk-0"})(["position:sticky;bottom:",";width:100%;z-index:1;display:flex;justify-content:center;pointer-events:none;min-height:42px;margin-top:-42px;"],function(e){var t=e.$bottom,n=e.theme;return n.isMobile?0===t?n.isApp?"32px":"calc(env(safe-area-inset-bottom) + ".concat(t+6,"px)"):"".concat(t+6,"px"):"16px"}),D=(0,l.memo)(function(e){var t,n,r=e.count,i=e.onClick,o=(0,m.bI)("commentingUsers","mobileBottomOffset"),a=o.commentingUsers,s=o.mobileBottomOffset,l=r>0;return null!=a&&a.length?(0,w.jsx)(I,{$bottom:null==s||null===(n=s[P.V.SAFE])||void 0===n?void 0:n.offset,children:(0,w.jsx)(v.z,{icon:"ArrowDownTail",label:(0,w.jsx)(O,{color:u.O9.n7,typographyVariant:"t8"}),variant:"badge",onClick:i,style:{backgroundColor:u.O9.n1,width:"auto",minWidth:280,pointerEvents:"all",textTransform:"unset"}})}):(0,w.jsx)(I,{$bottom:null==s||null===(t=s[P.V.SAFE])||void 0===t?void 0:t.offset,children:(0,w.jsx)(v.z,{icon:"ArrowDownTail",iconLeft:!0,variant:"badge",label:l?"See ".concat(f()("new comment",r,!0)):"Jump to latest comment",onClick:i,typography:"t8",style:{backgroundColor:l?u.O9.primary:u.O9.n1,color:l?u.O9.fgPrimary:void 0,width:230,pointerEvents:"all",textTransform:"unset"}})})}),Z=n(50591),S=n(91194),_=n(29610),M=n(75331),N=n(5095),E=n(12967),A=n(91575),L=n(69861),T=n(73674),F=n(500),B=(0,h.ZP)(x.X).withConfig({displayName:"styled__Wrapper",componentId:"sc-4weezf-0"})(["border-radius:15px;border:1px solid ",";cursor:pointer;padding:8px 12px;"],u.O9.n5),R=(0,l.memo)(function(e){var t=e.onClick,n=e.placeholder,r=(0,l.useCallback)(function(e){t&&t(e)},[t]);return(0,w.jsx)(B,{onClick:r,children:(0,w.jsx)(y.Z,{variant:"t7",color:u.O9.n5,children:n})})}),z=n(97221),G=n(79698),U={2:58,3:48},$=h.ZP.div.withConfig({displayName:"styled__ContentWrapper",componentId:"sc-15s0o36-0"})(["display:flex;padding-top:",";padding-left:","px;gap:8px;"],function(e){return e.theme.isMobile?"0":"8px"},function(e){var t=e.$level;return e.theme.isMobile?0:U[t]||0}),W=h.ZP.div.withConfig({displayName:"styled__PostInputFormWrapper",componentId:"sc-15s0o36-1"})(["margin-bottom:",";flex-grow:1;min-width:0;"],function(e){var t=e.$level,n=e.$isModal;return t>1||!n?"0":"32px"}),q=n(57305),H=(0,l.forwardRef)(function(e,t){var n,r,i=e.group,a=e.parentTree,s=e.rootPostID,u=e.replyToTree,p=e.autoFocus,f=e.onSuccess,h=e.onCancel,v=e.level,b=e.followingPost,g=e.allUsers,x=e.isModal,y=e.commentUser,C=e.commentId,j=e.onFocus,k=e.onBlur,O=(0,m.bI)("self","isMobile"),P=O.self,I=O.isMobile,D=(0,l.useState)(p||I),Z=D[0],S=D[1],_=(0,l.useState)(""),M=_[0],N=_[1],A=(0,l.useRef)(),B=(null==P||null===(n=P.member)||void 0===n?void 0:n.role)||"",U=B!==G.oN&&B!==G.xC&&B!==G.bD,H=!!(null!=i&&null!==(r=i.metadata)&&void 0!==r&&r.archived),V=(0,F.V)((0,l.useRef)({}).current);(0,o.Z)(V,1)[0]&&!Z&&(0,z.M)(P)&&S(!0);var Y=(0,l.useMemo)(function(){return(0,E.wN)(function(){c.Z.setTyping({rootPostID:s})},2e3)},[s]);(0,l.useEffect)(function(){M&&Y()},[M,Y]),(0,l.useEffect)(function(){S(p||I)},[p,I]);var J=(0,l.useCallback)(function(){var e;null===(e=A.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.focus(),null==f||f()},[f]),X=(0,l.useCallback)(function(){S(I),h&&h()},[I,h]),K=(0,l.useMemo)(function(){if(v>1&&null!=a&&a.post.user&&a.post.user.id!==(null==P?void 0:P.id)){var e=null==a?void 0:a.post.user;return"[@".concat(e.firstName," ").concat(e.lastName,"](obj://user/").concat(e.id,") ")}if(v>1&&null!=a&&a.post.userId&&a.post.userId!==(null==P?void 0:P.id))return"[@".concat(y.firstName," ").concat(y.lastName,"](obj://user/").concat(y.id,") ")},[y,v,a,null==P?void 0:P.id]);return(0,l.useImperativeHandle)(t,function(){return{getPostInputForm:function(){return A.current},reset:function(){var e;return null===(e=A.current)||void 0===e||null===(e=e.getEditor())||void 0===e?void 0:e.set({type:"doc",content:(0,q.P)(K)})}}}),(0,w.jsxs)($,{$level:v,children:[!I&&(0,w.jsx)(T.Z,{showLevel:!0,size:v>=2&&!I?32:40,user:P,group:i,disableLink:!0}),(0,w.jsx)(W,{$level:v,$isModal:x,children:!Z||!P||U||H?(0,w.jsx)(z.Z,{reason:d.lT.AddPost,showSignUp:!0,onSuccess:function(){return S(!0)},children:function(e){var t=e.onClick;return(0,w.jsx)(R,{onClick:t,placeholder:"Your comment"})}}):(0,w.jsx)(L.Z,{ref:A,isModal:x,postType:"comment",level:v,confirmButtonLabel:v>=2?"Reply":"Comment",showMeta:!1,group:i,rootPostID:s,parentPost:u.post,contentPrefix:K,contentPlaceholder:v>=2?"Your reply":"Your comment",onCancel:X,hideLabel:!0,onPostCreated:J,onContentChange:N,followingPost:b,allUsers:g,commentId:C,onEditorFocus:j,onEditorBlur:k})})]})});H.defaultProps={autoFocus:!1,allUsers:[]};var V=(0,l.memo)(H),Y=n(90116),J=n(96486),X=n(30697),K=n(13053),Q=n(12476),ee=(0,h.iv)(["height:30px;width:30px;> button{height:100%;width:100%;padding:6px;}"]),et=(0,h.ZP)(Q.h_).withConfig({displayName:"styled__PostActionMenuDropdown",componentId:"sc-119wxbl-0"})(["> button{height:40px;width:40px;padding:10px;}",""],function(e){return e.$isComment&&ee});function en(e){var t,n,r,i=e.post,o=e.level,a=e.group,s=e.self,c=e.onEdit,u=e.onDelete,p=e.onPin,f=e.onUnpin,m=e.onPinToModule,h=e.onUnpinFromModule,v=e.onChangeCategory,b=e.onReport,g=e.onDisableComments,x=e.onEnableComments,y=e.onLinkCopy,w=e.isAdminOnly,C=e.isPinned,j=0===o?"post":o>1?"reply":"comment",k=!!(null!=i&&null!==(t=i.metadata)&&void 0!==t&&t.deleted),O=!!(null!=i&&null!==(n=i.metadata)&&void 0!==n&&n.commentsDisabled),P=!!(null!=a&&null!==(r=a.metadata)&&void 0!==r&&r.archived);return(0,l.useMemo)(function(){var e,t,n=[],r=(0,d.q2)({group:a,user:s,member:null==s?void 0:s.member}),l=(0,d.CP)({group:a,user:s,member:null==s?void 0:s.member});return!P&&!k&&(0,d.Db)({user:s,post:i,group:a,member:null==s?void 0:s.member})&&!w&&n.push({label:"Edit",onClick:function(){return c({post:i})},testid:"post-actions-menu-post-edit"}),!P&&!k&&(0,d.q2)({user:s,post:i,group:a,member:null==s?void 0:s.member})&&!w&&0===o&&n.push({label:"Change category",onClick:v,testid:"post-actions-menu-post-change-category"}),!P&&!k&&(0,d.MA)({user:s,post:i,group:a,member:null==s?void 0:s.member})&&!(w&&!r)&&u&&n.push({label:"Delete",onClick:function(){return u({post:i})},confirmAction:{header:"Delete ".concat(j,"?"),content:"Are you sure you want to delete? You can't undo this.",confirmLabel:"Delete"},testid:"post-actions-menu-post-delete"}),y&&n.push({label:"Copy link",onClick:function(){return y({post:i})}}),!(!P&&!k&&!(null!=i&&i.parentId)&&!C&&(0,d.lF)({user:s,post:i,group:a,member:null==s?void 0:s.member}))||w||n.push({label:"Pin to feed",onClick:function(){return p({post:i})},testid:"post-actions-menu-post-pin"}),!P&&!k&&!(null!=i&&i.parentId)&&C&&(0,d.H7)({user:s,post:i,group:a,member:null==s?void 0:s.member})&&n.push({label:"Unpin from feed",onClick:function(){return f({post:i})},testid:"post-actions-menu-post-unpin"}),P||k||null!=i&&i.parentId||null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.pinnedModule||!l||n.push({label:"Pin to course page",onClick:m,testid:"post-actions-menu-post-pin-to-module"}),P||k||null!=i&&i.parentId||null==i||null===(t=i.metadata)||void 0===t||!t.pinnedModule||!l||n.push({label:"Unpin from course page",onClick:h,testid:"post-actions-menu-post-unpin-from-module"}),!s||k||w||P||n.push({testid:"post-actions-menu-post-report",label:"Report to admins",onClick:function(){return b({post:i})},confirmAction:{header:"Report to group admins",content:"Are you sure you want to report this to group admins?",confirmLabel:"Yes"}}),P||k||null!=i&&i.parentId||w||!r||(O?n.push({label:"Turn on comments",onClick:function(){return x({post:i})},testid:"post-actions-menu-post-enable-comments"}):n.push({label:"Turn off comments",onClick:function(){return g({post:i})},testid:"post-actions-menu-post-disable-comments"})),n},[O,k,a,w,P,C,o,v,u,g,c,x,y,p,m,b,f,h,i,j,s])}var er=(0,l.memo)(function(e){var t=e.options,n=e.isComment,r=e.onShow,i=e.onHide;return(0,w.jsx)(et,{className:"post-actions-menu",icon:"HorizontalDots",$isComment:n,options:t,variant:"icon-borderless",onShow:r,onHide:i})}),ei=n(36195),eo=n(89557),ea=n(86031),es=n(81849),el=n(20668),ec=h.ZP.div.withConfig({displayName:"styled__VotesLabelWrapper",componentId:"sc-1e3d9on-0"})(["cursor:pointer;"]),eu=h.ZP.div.withConfig({displayName:"styled__VotesLabel",componentId:"sc-1e3d9on-1"})(["color:",";text-align:center;",";"],u.O9.n5,el.c.t8),ed=(0,h.iv)(["color:",";&:hover svg{color:",";}"],u.O9.fgPrimary,u.O9.fgPrimary),ep=(0,h.ZP)(v.z).withConfig({displayName:"styled__VoteButton",componentId:"sc-1e3d9on-2"})([""," svg{margin-bottom:1px;}"],function(e){return e.$voted&&ed});function ef(e){var t,n,i=e.post,o=e.group,a=e.onVoteChange,u=e.height,p=e.itemSpacing,f=e.extra,h=e.extraSpacing,v=e.newVotes,b=(0,l.useState)((null==i||null===(t=i.metadata)||void 0===t?void 0:t.myVote)||""),g=b[0],y=b[1],C=(0,l.useState)((null==i||null===(n=i.metadata)||void 0===n?void 0:n.upvotes)||0),j=C[0],k=C[1],O=(0,m.bI)("isMobile"),P=O.isMobile,I=O.dispatch;(0,l.useEffect)(function(){var e,t;y((null==i||null===(e=i.metadata)||void 0===e?void 0:e.myVote)||""),k((null==i||null===(t=i.metadata)||void 0===t?void 0:t.upvotes)||0)},[i]);var D=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="up"===g?"":"up",e.next=3,c.Z.updatePostVote({postID:i.id,oldVote:g,newVote:t});case 3:if(!(n=e.sent.error)){e.next=8;break}return 429===n.status&&I(X.bI,{message:"Liking too fast! Try again later",severity:"error"}),e.abrupt("return");case 8:null==a||a(g,t);case 9:case"end":return e.stop()}},e)})),[g,a,i.id,I]),Z=(0,l.useCallback)(function(){I(X.Qg,function(){return{postLikeModalProps:{post:i,group:o}}})},[I,i,o]),S=(0,l.useMemo)(function(){var e=(null==v?void 0:v.up)||0,t=String(j+e);return(0,w.jsxs)(x.X,{alignItems:"center",children:[(0,w.jsx)(ea.x,{flexGrow:1,children:(0,w.jsx)(z.Z,{reason:d.lT.Upvote,onSuccess:D,showSignUp:!0,children:function(e){var t=e.onClick;return(0,w.jsx)(ep,{variant:P?"icon-borderless-no-hover":"icon-borderless",icon:"up"===g?"ThumbsUpFilled":"ThumbsUp",onClick:t,iconSize:16.66,$voted:"up"===g})}})}),(0,w.jsx)(ea.x,{margin:"0px 4px",children:(0,w.jsx)(es.I,{postID:i.id,upvotes:j,newUpvotes:e,children:(0,w.jsx)(ec,{onClick:Z,children:(0,w.jsx)(eu,{children:t})})})})]})},[null==v?void 0:v.up,j,D,i.id,Z,P,g]);return(0,w.jsxs)(x.X,{gap:8*p,height:u,width:"100%",children:[S,!!f&&(0,w.jsx)(ea.x,{marginLeft:8*(h-p),children:f})]})}ef.defaultProps={height:16,itemSpacing:3,extraSpacing:0,newVotes:{}};var em=(0,l.memo)(ef),eh=n(73475),ev=h.ZP.div.withConfig({displayName:"styled__CommentsListWrapper",componentId:"sc-1lql1qn-0"})(["display:flex;flex-direction:column;padding:",";"],function(e){return e.theme.isMobile?"8px 8px 0":"8px 32px 0px"}),eb=h.ZP.div.withConfig({displayName:"styled__CommentItemContainer",componentId:"sc-1lql1qn-1"})(["display:flex;flex-direction:row;margin:8px 0 0 0;margin:",";transform:",";"],function(e){var t=e.theme,n=e.$level;return!t.isMobile&&n>1?"4px 0 0 0":"8px 0 0 0"},function(e){return e.$editing?"none":"translate3d(0, 0, 0)"}),eg=h.ZP.div.withConfig({displayName:"styled__CommentItemContent",componentId:"sc-1lql1qn-2"})(["flex:1;min-width:0;"]),ex=(0,h.iv)([".post-actions-menu{opacity:1;}"]),ey=h.ZP.div.withConfig({displayName:"styled__CommentItemBubble",componentId:"sc-1lql1qn-3"})(["position:relative;background:",";padding:8px 13px;border-radius:15px;border:1px solid ",";display:flex;flex-grow:1;flex-direction:column;animation:",";.post-actions-menu{opacity:0;}&:focus-within,&:hover{.post-actions-menu{opacity:1;}}",""],function(e){var t=e.theme;return e.$highlighted?t.isDarkTheme?"".concat(u.O9.p2,"26"):u.O9.p1:u.O9.n2},u.O9.n3,function(e){return e.$bgAnimation?"bg-fade-out-comment ease-in 4s":void 0},function(e){return e.theme.isMobile&&ex}),ew=h.ZP.div.withConfig({displayName:"styled__CommentItemAvatar",componentId:"sc-1lql1qn-4"})(["margin-right:8px;"]),eC=h.ZP.div.withConfig({displayName:"styled__CommentItemReactions",componentId:"sc-1lql1qn-5"})(["display:flex;margin-top:0;"]),ej=(0,h.ZP)(v.z).withConfig({displayName:"styled__CommentItemReplyButton",componentId:"sc-1lql1qn-6"})(["width:57px;height:40px;",";text-transform:none;"],function(e){return e.theme.isMobile&&"padding: 0;"}),ek=h.ZP.div.withConfig({displayName:"styled__ReplyListWrapper",componentId:"sc-1lql1qn-7"})(["display:flex;flex-direction:column;padding:0px 0px 0px 58px;"]),eO=h.ZP.div.withConfig({displayName:"styled__ExpandRepliesWrapper",componentId:"sc-1lql1qn-8"})(["display:flex;align-items:center;cursor:pointer;padding:8px 0px 8px 58px;color:",";"],function(e){return e.$color}),eP=h.ZP.div.withConfig({displayName:"styled__ExpandRepliesLabel",componentId:"sc-1lql1qn-9"})(["margin-left:12px;",""],el.c.t8),eI=h.ZP.div.withConfig({displayName:"styled__LoadMoreComments",componentId:"sc-1lql1qn-10"})(["display:flex;align-items:center;gap:8px;margin:8px 0 16px;width:fit-content;height:40px;cursor:pointer;color:",";"," &:hover{text-decoration:underline;}"],u.O9.sd1,el.c.t8),eD=h.ZP.div.withConfig({displayName:"styled__CommentsLoaderWrapper",componentId:"sc-1lql1qn-11"})(["display:flex;justify-content:center;padding-top:16px;"]),eZ=h.ZP.div.withConfig({displayName:"styled__DeletedComment",componentId:"sc-1lql1qn-12"})(["margin-bottom:8px;",""],el.c.t6),eS=(0,l.forwardRef)(function(e,t){var n,i=e.group,o=e.self,a=e.isMobile,d=e.replyItems,p=e.onPostDelete,m=e.onCommentLinkCopy,h=e.isAdminOnly,v=e.level,b=e.onFilePreviewItemClick,g=e.newVotes,x=e.isGroupAdmin,y=e.isModal,C=e.rootPost,j=e.replyToTree,k=e.followingPost,O=e.allUsers,P=e.selectedPostID,I=e.parentTree,D=e.setCommentReplyShowing,Z=e.isBot,S=(0,l.useState)(d.slice(0,2)),_=S[0],M=S[1],N=(0,l.useState)(d.slice(2)),E=N[0],A=N[1],L=(0,l.useState)(!1),T=L[0],F=L[1],B=(0,l.useRef)(!1);(0,l.useImperativeHandle)(t,function(){return{expandReplies:function(){F(!0)}}}),(0,l.useEffect)(function(){if(B.current){var e,t=!(0,J.isEqual)([].concat((0,Y.Z)(_),(0,Y.Z)(E)),d),n=[].concat((0,Y.Z)(_),(0,Y.Z)(E)).length!==d.length,r=null==I||null===(e=I.post)||void 0===e?void 0:e.metadata.hasNewComments;if(n&&!r){M(d),A([]),F(!0);return}if(t&&T){M(d);return}if(t&&!T){M(d.slice(0,2)),A(d.slice(2));return}}else B.current=!0},[d,_,E,T,I]),(0,l.useEffect)(function(){!T&&E.map(function(e){return e.post.id.substring(0,8)}).includes(P)&&(M(d),A([]),F(!0))},[P,T,E,d]);var R=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n,r,i,o,a,l;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((void 0===(r=(n=null==I||null===(t=I.post)||void 0===t?void 0:t.metadata).lastComment)?0:r)>(void 0===(i=n.lastCommentView)?-1:i))){e.next=5;break}return l=null==I?void 0:I.children[I.children.length-1],e.next=5,c.Z.readComments({postID:null==I||null===(o=I.post)||void 0===o?void 0:o.id,last:null==l||null===(a=l.post)||void 0===a?void 0:a.id});case 5:T||(F(!0),M([].concat((0,Y.Z)(_),(0,Y.Z)(E))),A([]));case 6:case"end":return e.stop()}},e)})),[I,T,_,E]),z=null!=I&&null!==(n=I.post)&&void 0!==n&&n.metadata.hasNewComments?u.O9.sd1:u.O9.n5;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ek,{children:_.map(function(e,t){return(0,w.jsx)(eE,{isModal:y,self:o,isMobile:a,group:i,selectedPostID:P,commentItem:e.post,replyItems:void 0,onPostDelete:p,onCommentLinkCopy:m,isAdminOnly:h,level:v,onFilePreviewItemClick:b,newVotes:g,isGroupAdmin:x,rootPost:C,postTree:e,replyToTree:j,followingPost:k,allUsers:O,setCommentReplyShowing:D,onSuccess:R,isBot:Z},"reply-item-".concat(t))})}),!!E.length&&!T&&(0,w.jsxs)(eO,{onClick:R,$color:z,children:[(0,w.jsx)(eh.J,{name:"ArrowBentRight",size:13}),(0,w.jsx)(eP,{children:"View ".concat(E.length," more ").concat(f()("reply",E.length))})]})]})}),e_=(0,l.memo)(eS);function eM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eE=(0,l.memo)(function(e){var t,n,i=e.group,o=e.self,a=e.isMobile,u=e.selectedPostID,p=e.commentItem,f=e.onPostDelete,h=e.onCommentLinkCopy,v=e.isAdminOnly,b=e.replyItems,g=e.level,x=e.onFilePreviewItemClick,y=e.newVotes,C=e.isGroupAdmin,j=e.rootPost,k=e.postTree,O=e.replyToTree,P=e.isModal,I=e.followingPost,D=e.allUsers,Z=e.lastComment,S=e.setCommentReplyShowing,M=e.onFocusCommentInput,N=e.isBot,A=e.onSuccess,F=e.preview,B=e.highlighted,R=(0,m.bI)("mobileCommentEditContext"),G=R.mobileCommentEditContext,U=R.dispatch,$=(0,l.useRef)(),W=(0,l.useRef)(),q=(0,l.useRef)(p),H=(0,l.useState)(p),Q=H[0],ee=H[1],et=(0,l.useState)(null),ea=et[0],es=et[1],el=(0,l.useState)(!1),ec=el[0],eu=el[1],ed=(0,l.useState)(!1),ep=ed[0],ef=ed[1],eh=(0,l.useState)(null),ev=eh[0],ex=eh[1],ek=(0,l.useMemo)(function(){return u&&p.id.startsWith(u)},[p,u]),eO=null==j?void 0:j.metadata.commentsDisabled,eP=!!(null!=Q&&null!==(t=Q.metadata)&&void 0!==t&&t.deleted),eI=eP?null:null==Q?void 0:Q.user;(0,l.useEffect)(function(){(0,J.isEqual)(q.current,p)||(ee(p),q.current=p)},[q,p]),(0,l.useEffect)(function(){(0,J.isEqual)(ea,b)||es(b)},[ea,b]),(0,l.useEffect)(function(){a&&!F&&(ep?null==S||S(!0):null==S||S(!1))},[a,S,ep,F]);var eD=(0,l.useCallback)(function(e){null!==e&&(ek&&setTimeout(function(){e.scrollIntoView({behavior:"auto",block:"center",inline:"center"})},100),Z&&M())},[ek,Z,M]),eS=(0,l.useCallback)(function(e){var t=e.post;t&&(0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.reportPost({postID:t.id});case 2:U(X.bI,{message:"Reported to group admins"});case 3:case"end":return e.stop()}},e)}))()},[U]),eM=(0,l.useCallback)(function(){eu(!1)},[]),eE=(0,l.useCallback)(function(e){var t=e.post;eu(!1),ee(function(e){return eN(eN({},e),t)}),P&&U(X.Ek,function(){return{disableEscape:!1}})},[P,U]),eA=(0,l.useCallback)(function(){if(a){var e,t={post:Q,level:g,onPostUpdated:eE,replyToUser:(null==j?void 0:j.id)===(null==Q?void 0:Q.parentId)?null:null==O||null===(e=O.post)||void 0===e?void 0:e.user,ready:!1};ex(t),null!=G&&G.ready||U(X.oX,t)}},[a,Q,g,eE,null==j?void 0:j.id,null==O||null===(n=O.post)||void 0===n?void 0:n.user,null==G?void 0:G.ready,U]),eL=(0,l.useCallback)(function(){a&&ex(null)},[a]),eT=(0,l.useCallback)(function(){a?(U(X.oX,eN(eN({},ev),{},{ready:!0})),U(X.fv,null)):eu(!0)},[a,U,ev]),eF=(0,l.useCallback)(function(){var e,t;ef(!1),null==W||null===(e=W.current)||void 0===e||null===(t=e.expandReplies)||void 0===t||t.call(e),null==A||A(),P&&U(X.Ek,function(){return{disableEscape:!1}})},[P,U,A]),eB=(0,l.useCallback)(function(){ef(!1)},[]),eR=(0,l.useCallback)(function(e,t){ee((0,E.Rr)({post:Q,oldVote:e,newVote:t}))},[Q]),ez=(0,l.useCallback)(function(){if(a){U(X.fv,{user:eI,post:p,parentTree:k,replyToTree:O}),U(X.oX,null);return}ef(!0)},[a,U,eI,p,k,O]),eG=(0,l.useMemo)(function(){var e=[];if(Q&&e.push(Q.user),ea&&ea.forEach(function(t){t.post.user&&e.push(t.post.user)}),e.length)return(0,J.uniqBy)(e,"id")},[Q,ea]),eU=(0,l.useMemo)(function(){return eO?null:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(z.Z,{reason:d.lT.AddPost,onSuccess:ez,children:function(e){var t=e.onClick;return(0,w.jsx)(ej,{variant:a?"borderless":"borderless-hover",label:"Reply",typography:"t8",onClick:t})}})})},[ez,eO,a]),e$=en({buttonSize:20,buttonIconSize:14,post:Q,level:g,group:i,self:o,onReport:eS,onEdit:eT,onDelete:f,onLinkCopy:h,isAdminOnly:v}),eW=(0,l.useMemo)(function(){if(!Q)return null;var e,t,n=!!(null!=i&&null!==(e=i.metadata)&&void 0!==e&&e.codeBlocks),r=(0,_.uq)({content:(null==Q||null===(t=Q.metadata)||void 0===t?void 0:t.content)||"",allowCode:n});return(0,w.jsxs)(eb,{ref:eD,$level:g,$editing:ec,children:[(0,w.jsx)(ew,{children:(0,w.jsx)(T.Z,{showLevel:!0,userPreview:!0,size:g>=2?32:40,user:eI,group:i})}),(0,w.jsx)(eg,{ref:$,children:ec?(0,w.jsx)(L.Z,{post:Q,level:g,confirmButtonLabel:"Save",onPostUpdated:eE,onCancel:eM,group:i,hideLabel:!0,showMeta:!1,contentPlaceholder:g>=2?"Your reply":"Your comment"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(ey,{$bgAnimation:ek&&!B,$highlighted:B,children:[(0,w.jsx)(eo.Z,{post:eN(eN({},Q),{},{user:Q.user}),group:i,menu:F?void 0:(0,w.jsx)(er,{options:e$,isComment:!0,onShow:eA,onHide:eL}),hideAvatar:!0}),eP?(0,w.jsx)(eZ,{children:"Comment is deleted"}):(0,w.jsx)(K.ZP,{textVariant:"t7",showMoreLimit:ek||N?void 0:F?125:500,showMoreHidden:F,marginBottom:8,value:r.blocks}),!eP&&(0,w.jsx)(ei.Z,{post:Q,onItemClick:x,level:g,style:{marginBottom:5}})]}),!F&&(0,w.jsx)(eC,{children:(0,w.jsx)(em,{post:Q,group:i,itemSpacing:a?0:1,onVoteChange:eR,extraSpacing:a?0:1,newVotes:y&&y[Q.id],height:"auto",extra:eU})})]})})]})},[Q,i,eD,g,ec,eI,eE,eM,ek,e$,eP,N,x,a,eR,y,eU,F,B,eA,eL]),eq=(0,l.useMemo)(function(){return!ea||F?null:(0,w.jsx)(e_,{ref:W,isModal:P,self:o,isMobile:a,group:i,selectedPostID:u,replyItems:ea,onPostDelete:f,onCommentLinkCopy:h,isAdminOnly:v,level:g+1,onFilePreviewItemClick:x,newVotes:y,isGroupAdmin:C,rootPost:j,parentTree:k,replyToTree:O,followingPost:I,allUsers:D,setCommentReplyShowing:S,isBot:N})},[ea,D,I,i,v,C,a,P,g,y,h,x,f,k,O,j,u,o,S,N,F]),eH=(0,l.useMemo)(function(){return!ep||F?null:(0,w.jsx)(V,{commentId:p.id,commentUser:eI,level:g+1,autoFocus:!0,rootPostID:null==j?void 0:j.id,parentTree:k,replyToTree:O,onSuccess:eF,onCancel:eB,group:i,followingPost:I,isModal:P,allUsers:[].concat((0,Y.Z)(eG),(0,Y.Z)(D))})},[p,ep,D,eI,eG,I,i,eB,eF,P,g,k,O,null==j?void 0:j.id,F]);return(0,w.jsxs)(w.Fragment,{children:[eW,eH,eq]})}),eA=n(85064),eL=n(11163);function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ez(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eG(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(e,t)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eU={rendered:"rendered",unrendered:"unrendered"},e$={top:"top",bottom:"bottom"},eW=(0,l.forwardRef)(function(e,t){var n,i,o,a,u,p,f,h,v,b,g=e.group,x=e.isMobile,y=e.postTree,C=e.onPostDelete,j=e.onCommentLinkCopy,k=e.isAdminOnly,O=e.onFilePreviewItemClick,P=e.newVotes,I=e.isGroupAdmin,D=e.rootPost,_=e.followingPost,M=e.isModal,A=e.allUsers,L=e.selectedPostID,T=e.setCommentReplyShowing,F=e.onListEndLoaded,B=e.onFocusCommentInput,R=e.isBot,z=e.onInitialRender,G=e.setNumComments,U=(0,m.bI)("self","deletedSelfComment","currentGroup","postData"),$=U.self,W=U.deletedSelfComment,q=U.currentGroup,H=U.postData,V=U.dispatch,J=(0,eL.useRouter)(),K=(0,l.useState)(null),Q=K[0],ee=K[1],et=(0,l.useState)(!1),en=et[0],er=et[1],ei=(0,l.useState)(!1),eo=ei[0],ea=ei[1],es=(0,l.useState)([]),el=es[0],ec=es[1],eu=(0,l.useRef)({}),ed=(0,l.useCallback)(function(){return V(X.bI,{message:"Failed to load comments",severity:"error"})},[V]),ep=(0,l.useCallback)((n=(0,r.Z)(s().mark(function e(t){var n,r,i,o,a,l,u,d,p,f,m,h,v,b,x,w,C;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.createdAfter,l=t.createdBefore,u=t.tail,d=t.commentPrefixID,e.next=3,d?c.Z.getLinkedPostComments({groupID:g.id,postID:null==y||null===(n=y.post)||void 0===n?void 0:n.id,limit:25,commentPrefixID:d}):c.Z.getPostComments({groupID:g.id,postID:null==y||null===(r=y.post)||void 0===r?void 0:r.id,createdAfter:a,createdBefore:l,limit:25,tail:u});case 3:if(f=(p=e.sent).data,!(m=p.error)){e.next=8;break}return e.abrupt("return",{error:m});case 8:h=null!==(i=null===(o=(0,E.$T)(f.postTree))||void 0===o?void 0:o.children)&&void 0!==i?i:[],v=[],b=ez(h);try{for(b.s();!(x=b.n()).done;)w=x.value,eu.current[w.post.id]||(eu.current[w.post.id]=!0,v.push(w))}catch(e){b.e(e)}finally{b.f()}return C={comments:v},f.first&&(C.first=String(f.first)),f.last&&(C.last=String(f.last)),e.abrupt("return",{data:C});case 16:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[null==g?void 0:g.id,null==y||null===(h=y.post)||void 0===h?void 0:h.id]),ef=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n,r,i,o,a,l,c,u,d;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!en){e.next=2;break}return e.abrupt("return");case 2:if(er(!0),!(null!=y&&null!==(t=y.children)&&void 0!==t&&t.length)){e.next=8;break}return r=(0,E.$T)(y),ee([{type:eU.rendered,items:null==r?void 0:r.children}]),ea(!0),e.abrupt("return");case 8:return i=L&&!(null!=y&&null!==(n=y.post)&&void 0!==n&&n.id.startsWith(L))?L:void 0,e.next=11,ep({commentPrefixID:i});case 11:if(a=(o=e.sent).data,!(l=o.error)){e.next=26;break}if(!(!i||400!==l.status)){e.next=18;break}return ed(),e.abrupt("return");case 18:return e.next=20,ep({});case 20:if(!(c=e.sent).error){e.next=24;break}return ed(),e.abrupt("return");case 24:a=c.data,i=void 0;case 26:a.comments.length||a.first||a.last?i?(u=[{type:eU.rendered,items:a.comments}],a.first&&u.unshift({type:eU.unrendered,end:a.first}),a.last&&u.push({type:eU.unrendered,start:a.last}),ee(u)):(d=[{type:eU.rendered,items:a.comments}],a.last&&d.push({type:eU.unrendered,start:a.last}),ee(d)):ee([{type:eU.rendered,items:[]}]),i&&!function(e,t){if(!(null!=e&&e.length))return!1;var n,r=ez(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.post.id.startsWith(t))return!(null!==(a=i.post)&&void 0!==a&&null!==(a=a.metadata)&&void 0!==a&&a.deleted);var o,a,s,l=ez(null!==(o=i.children)&&void 0!==o?o:[]);try{for(l.s();!(s=l.n()).done;){var c,u=s.value;if(u.post.id.startsWith(t))return!(null!==(c=u.post)&&void 0!==c&&null!==(c=c.metadata)&&void 0!==c&&c.deleted)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){r.e(e)}finally{r.f()}return!1}(a.comments,i)&&V(X.bI,{message:"This comment has been deleted",severity:"error"}),ea(!0);case 29:case"end":return e.stop()}},e)})),[y,en,ep,L,V,ed]),em=(0,l.useCallback)(function(e){ec(el.filter(function(t){return t!==e}))},[el]),eb=(0,l.useCallback)((i=(0,r.Z)(s().mark(function e(t,n){var r,i,o,a,l,c,u;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(-1===(r=Q.indexOf(t))||t.type===eU.rendered||el.includes(t))){e.next=3;break}return e.abrupt("return");case 3:if(ec(el.concat(t)),i=(0,Y.Z)(Q),n!==e$.top){e.next=20;break}return e.next=8,ep({createdAfter:t.start});case 8:if(a=(o=e.sent).data,!o.error){e.next=15;break}return ed(),em(t),e.abrupt("return");case 15:return i[r-1]=eR(eR({},i[r-1]),{},{items:i[r-1].items.concat(a.comments)}),a.last&&(!t.end||a.last<t.end)?i[r].start=a.last:i[r]={type:eU.rendered,items:[]},ee(i),em(t),e.abrupt("return");case 20:return l=r===Q.length-1,e.next=23,l?ep({tail:!0}):ep({createdBefore:t.end});case 23:if(u=(c=e.sent).data,!c.error){e.next=30;break}return ed(),em(t),e.abrupt("return");case 30:l?i.push({type:eU.rendered,items:u.comments}):i[r+1]=eR(eR({},i[r+1]),{},{items:u.comments.concat(i[r+1].items)}),u.last&&(!t.start||u.last>t.start)?i[r].end=u.last:i[r]={type:eU.rendered,items:[]},ee(i),em(t);case 34:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)}),[Q,ep,el,em,ed]),eg=(0,l.useCallback)(function(e,t){if(e){var n=e?eF(eF({},e),{},{id:e.postId,metadata:{content:null==e?void 0:e.content,attachments:null==e?void 0:e.attachments,attachmentsData:null==e?void 0:e.attachmentsData,videoLinks:null==e?void 0:e.videoLinks,videoLinksData:null==e?void 0:e.videoLinksData},user:eF(eF({},null!==(a=null==e?void 0:e.user)&&void 0!==a?a:{}),{},{metadata:eF(eF({},null!==(s=null==e?void 0:e.user)&&void 0!==s?s:{}),{},{spData:null==e||null===(l=e.user)||void 0===l?void 0:l.spData,pictureProfile:null==e||null===(c=e.user)||void 0===c?void 0:c.profileImage})})}):{},r={post:n},i=(0,Y.Z)(Q);if(e.parentId===(null==y||null===(u=y.post)||void 0===u?void 0:u.id)){var o=null==Q?void 0:Q[Q.length-1];(null==o?void 0:o.type)===eU.unrendered?i.push({type:eU.rendered,items:[r]}):(null==o?void 0:o.type)===eU.rendered&&o.items.push(r)}else{var a,s,l,c,u,d,p=!1,f=ez(i);try{for(f.s();!(d=f.n()).done;){var m=d.value;if(m.type!==eU.unrendered){var h,v=ez(m.items);try{for(v.s();!(h=v.n()).done;){var b=h.value;if(e.parentId===b.post.id){b.children=b.children?b.children.concat(r):[r],b.post.metadata.hasNewComments=1,p=!0;break}}}catch(e){v.e(e)}finally{v.f()}if(p)break}}}catch(e){f.e(e)}finally{f.f()}if(!p)return}t&&(M?V(X.aK,eR(eR({},H),{},{selectedPostID:n.id})):(0,S.cq)(J,(0,N.P_)({groupName:q.name,postName:y.post.name,selectedPostID:n.id}))),ee(i)}},[Q,q.name,V,M,H,null===(v=y.post)||void 0===v?void 0:v.id,y.post.name,J]),ex=(0,l.useCallback)((o=(0,r.Z)(s().mark(function e(t){var n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:eo&&null!=t&&t.newComment&&(r=(null===(n=t.newComment)||void 0===n?void 0:n.userId)===(null==$?void 0:$.id),eg(t.newComment,r));case 1:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),[eg,eo,null==$?void 0:$.id]);(0,l.useEffect)(function(){(!M||null!=y&&y.initialFetchDone)&&ef()},[M,null==y?void 0:y.initialFetchDone,ef]),a=null==y||null===(b=y.post)||void 0===b?void 0:b.id,p=(u=(0,m.bI)("self","currentGroup")).self,f=u.currentGroup,(0,l.useEffect)(function(){if((0,d.Rj)({member:null==p?void 0:p.member}))return(0,Z.Ld)([(0,Z.lF)(null==f?void 0:f.id,a)],ex)},[ex,null==f?void 0:f.id,a,null==p?void 0:p.member]),(0,l.useEffect)(function(){if(eo){var e=null==Q?void 0:Q[Q.length-1];(null==e?void 0:e.type)===eU.unrendered?eb(e,e$.bottom):(null==e?void 0:e.type)===eU.rendered&&(null==F||F())}},[eo,eb,Q,F]),(0,l.useEffect)(function(){if(eo&&W){var e,t=(0,Y.Z)(Q),n=!1,r=ez(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.type!==eU.unrendered){for(var o=0;o<i.items.length;o++){var a=i.items[o];if(W.post.id===a.post.id){if(null!==(c=a.children)&&void 0!==c&&c.length){var s=(0,Y.Z)(i.items);i.items[o].post=eR(eR({},a.post),{},{metadata:eR(eR({},a.post.metadata),{},{deleted:1})}),i.items=s}else i.items=i.items.filter(function(e){return e.post.id!==W.post.id});n=!0;break}var l,c,u,d=ez(null!==(l=a.children)&&void 0!==l?l:[]);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(W.post.id===p.post.id){a.children=a.children.filter(function(e){return e.post.id!==W.post.id}),n=!0;break}}}catch(e){d.e(e)}finally{d.f()}if(n)break}if(n)break}}}catch(e){r.e(e)}finally{r.f()}n&&(V(X.z$,null),ee(t),V(X.bI,{message:"Comment deleted"}),G(function(e){return e-1}),L&&W.post.id.startsWith(L)&&(M?V(X.aK,eR(eR({},H),{},{selectedPostID:null})):(0,S.cq)(J,(0,N.P_)({groupName:q.name,postName:y.post.name,selectedPostID:void 0}))))}},[eo,Q,V,M,J,q,y,H,W,L,G]),(0,l.useEffect)(function(){eo&&(null==z||z())},[eo,z]),(0,l.useImperativeHandle)(t,function(){return{loadLastChunk:function(){var e=null==Q?void 0:Q[Q.length-1];(null==e?void 0:e.type)===eU.unrendered&&eb(e,e$.bottom)}}});var ey=(0,l.useCallback)(function(e){var t,n=null==Q?void 0:Q[Q.length-1],r=(null==n?void 0:n.type)===eU.rendered&&(null===(t=n.items[n.items.length-1])||void 0===t?void 0:t.post.id)===e.id;return(0,w.jsx)(eE,{isModal:M,self:$,isMobile:x,group:g,selectedPostID:L,commentItem:e.post,replyItems:e.children,onPostDelete:C,onCommentLinkCopy:j,isAdminOnly:k,level:1,onFilePreviewItemClick:O,newVotes:P,isGroupAdmin:I,rootPost:D,postTree:e,replyToTree:e,followingPost:_,allUsers:A,lastComment:r,setCommentReplyShowing:T,onFocusCommentInput:B,isBot:R},"comment-item-".concat(e.post.id))},[A,Q,_,g,k,R,I,x,M,P,j,O,B,C,D,L,$,T]),ew=(0,l.useCallback)(function(e,t,n){if(e.type===eU.rendered)return(0,w.jsx)("div",{children:e.items.map(ey)},t);if(el.includes(e))return(0,w.jsx)(eI,{children:(0,w.jsx)(eA.D,{})},"loading-comments-".concat(t));var r,i=(null===(r=n[t-1])||void 0===r?void 0:r.type)===eU.rendered?e$.top:e$.bottom;return(0,w.jsxs)(eI,{onClick:function(){return eb(e,i)},children:["Show more comments",(0,w.jsx)(eh.J,{name:i===e$.top?"ArrowDown":"ArrowUp",style:{width:12}})]},"load-comments-".concat(t))},[ey,el,eb]);return eo?null!=Q&&Q.length?(0,w.jsx)(ev,{children:Q.map(ew)}):null:(0,w.jsx)(eD,{children:(0,w.jsx)(eA.D,{})})}),eq=(0,l.memo)(eW);function eH(e){var t=e.width,n=e.height,r=e.fill,i=e.style;return(0,w.jsx)("svg",{width:t,height:n,viewBox:"0 0 26 26",fill:r,style:i,xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9648 9.68903C15.8223 10.1817 15.488 10.6744 14.7489 11.1671C15.5435 11.1671 16.2399 11.186 16.8411 11.2477C19.3606 11.5061 20.2104 12.5163 19.6229 16.0412C19.0357 19.5644 17.8967 19.4458 14.6503 19.1075C14.4421 19.0858 14.2249 19.0632 13.999 19.0406C11.641 18.8048 10.2498 18.6657 10.2498 15.6663C10.2498 14.434 10.3127 13.4317 10.5377 12.6669C10.6122 12.4135 10.7045 12.1862 10.8183 11.9852C11.0394 11.5941 11.3415 11.3026 11.751 11.1126L11.1197 9.75222C10.5579 10.0129 10.1278 10.3796 9.80037 10.81C9.62325 10.4833 9.3554 10.1696 8.94831 9.94989C8.43271 9.67164 7.89109 9.66744 7.62527 9.66744C7.35944 9.66744 6.8179 9.67164 6.3023 9.94989C5.68217 10.2846 5.38531 10.8371 5.23984 11.322C5.13216 11.6997 5.06182 12.2411 5.03333 12.8079C5.00731 13.3503 5.00086 14.0506 5.00078 14.9164C5.00086 15.7822 5.00731 16.4826 5.03333 17.0249C5.06182 17.5918 5.13216 18.1331 5.23984 18.5108C5.38531 18.9958 5.68217 19.5483 6.3023 19.8829C6.8179 20.1612 7.35944 20.1654 7.62527 20.1654C7.89109 20.1654 8.43271 20.1612 8.94831 19.8829C9.33178 19.676 9.59168 19.3856 9.76857 19.0795C9.94794 19.2814 10.1553 19.4649 10.3939 19.6279C11.3624 20.2899 12.6548 20.4161 13.6612 20.5143C13.7252 20.5205 13.7882 20.5267 13.8498 20.5329C14.0621 20.554 14.2691 20.5756 14.4706 20.5965L14.4715 20.5966C15.1453 20.6666 15.7581 20.7303 16.3045 20.7555C17.0123 20.7872 17.7923 20.7654 18.5176 20.4885C20.2115 19.8418 20.7851 18.1904 21.1022 16.2878C21.4643 14.1152 21.4592 12.0805 19.9749 10.8227C19.2817 10.2354 18.4261 9.97089 17.5952 9.83476C17.5501 9.82754 17.5045 9.82062 17.4583 9.81396C17.5284 9.48069 17.5593 9.16458 17.5608 8.91759C17.5608 7.16833 16.538 6.1176 15.6334 5.45694C15.2284 5.16111 14.6927 4.94619 14.0832 5.01187C13.474 5.07752 13.0122 5.39991 12.7132 5.75257C12.1566 6.4093 12.0138 7.30553 12.1477 8.05625C12.2112 8.41206 12.2206 8.6623 12.1436 8.87717C12.0882 9.03169 11.9123 9.38437 11.1197 9.75222L11.751 11.1126C13.9186 10.1066 13.7705 8.61339 13.6241 7.79281C13.4777 6.97223 14.0172 6.13366 14.7489 6.66803C15.4806 7.2024 16.0611 7.86126 16.0611 8.91759C16.0611 9.17474 16.0391 9.43188 15.9648 9.68903ZM6.50049 14.9164C6.50049 18.3532 6.59422 18.6657 7.62527 18.6657C8.65631 18.6657 8.75005 18.3532 8.75005 14.9164C8.75005 11.4796 8.65631 11.1671 7.62527 11.1671C6.59422 11.1671 6.50049 11.4796 6.50049 14.9164Z"})})}function eV(e){var t=e.width,n=e.height,r=e.fill,i=e.style;return(0,w.jsxs)("svg",{width:t,height:n,viewBox:"0 0 26 26",fill:r,style:i,xmlns:"http://www.w3.org/2000/svg",children:[(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1201 9.75315C10.5582 10.0139 10.128 10.3807 9.80052 10.8112C9.62337 10.4843 9.35548 10.1706 8.9483 9.95086C8.4326 9.67256 7.89087 9.66836 7.625 9.66836C7.35913 9.66836 6.81748 9.67256 6.30177 9.95086C5.68153 10.2856 5.3846 10.8382 5.2391 11.3233C5.1314 11.701 5.06105 12.2425 5.03255 12.8094C5.00652 13.3519 5.00007 14.0523 5 14.9184C5.00007 15.7843 5.00652 16.4848 5.03255 17.0273C5.06105 17.5942 5.1314 18.1357 5.2391 18.5134C5.3846 18.9985 5.68153 19.5511 6.30177 19.8858C6.81748 20.1642 7.35913 20.1684 7.625 20.1684C7.89087 20.1684 8.4326 20.1642 8.9483 19.8858C9.33185 19.6788 9.5918 19.3884 9.76872 19.0823C9.94812 19.2842 10.1555 19.4677 10.3941 19.6308C10.4525 19.6707 10.5121 19.7087 10.5727 19.7448V19.7585H10.596C11.5373 20.3099 12.724 20.4258 13.6621 20.5173C13.7262 20.5236 13.7892 20.5297 13.8508 20.5359C14.0555 20.5563 14.2553 20.5771 14.45 20.5973L14.4512 20.5974L14.4781 20.6002C15.1496 20.6699 15.7612 20.7334 16.306 20.7586C17.0138 20.7903 17.7941 20.7685 18.5194 20.4915C20.2137 19.8447 20.7874 18.193 21.1046 16.29C21.4668 14.117 21.4617 12.0819 19.977 10.8238C19.2838 10.2364 18.428 9.97187 17.5968 9.83571C17.5518 9.82849 17.5061 9.82157 17.4599 9.81491C17.5301 9.48157 17.561 9.1654 17.5625 8.91836C17.5625 7.16876 16.5395 6.11782 15.6347 5.45703C15.2296 5.16114 14.6938 4.94618 14.0842 5.01188C13.4749 5.07753 13.013 5.39999 12.714 5.75271C12.1572 6.40958 12.0144 7.30599 12.1483 8.05685C12.2119 8.41273 12.2212 8.66301 12.1442 8.87793C12.0888 9.03248 11.9128 9.38523 11.1201 9.75315ZM8.57273 11.7585V11.7494L8.57549 11.7585H8.57273Z",fill:u.O9.p3}),(0,w.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.9648 9.68903C15.8223 10.1817 15.488 10.6744 14.7489 11.1671C15.5435 11.1671 16.2399 11.186 16.8411 11.2477C19.3606 11.5061 20.2104 12.5163 19.6229 16.0412C19.0357 19.5644 17.8967 19.4458 14.6503 19.1075C14.4421 19.0858 14.2249 19.0632 13.999 19.0406C11.641 18.8048 10.2498 18.6657 10.2498 15.6663C10.2498 14.434 10.3127 13.4317 10.5377 12.6669C10.6122 12.4135 10.7045 12.1862 10.8183 11.9852C11.0394 11.5941 11.3415 11.3026 11.751 11.1126L11.1197 9.75222C10.5579 10.0129 10.1278 10.3796 9.80037 10.81C9.62325 10.4833 9.3554 10.1696 8.94831 9.94989C8.43271 9.67164 7.89109 9.66744 7.62527 9.66744C7.35944 9.66744 6.8179 9.67164 6.3023 9.94989C5.68217 10.2846 5.38531 10.8371 5.23984 11.322C5.13216 11.6997 5.06182 12.2411 5.03333 12.8079C5.00731 13.3503 5.00086 14.0506 5.00078 14.9164C5.00086 15.7822 5.00731 16.4826 5.03333 17.0249C5.06182 17.5918 5.13216 18.1331 5.23984 18.5108C5.38531 18.9958 5.68217 19.5483 6.3023 19.8829C6.8179 20.1612 7.35944 20.1654 7.62527 20.1654C7.89109 20.1654 8.43271 20.1612 8.94831 19.8829C9.33178 19.676 9.59168 19.3856 9.76857 19.0795C9.94794 19.2814 10.1553 19.4649 10.3939 19.6279C11.3624 20.2899 12.6548 20.4161 13.6612 20.5143C13.7252 20.5205 13.7882 20.5267 13.8498 20.5329C14.0621 20.554 14.2691 20.5756 14.4706 20.5965L14.4715 20.5966C15.1453 20.6666 15.7581 20.7303 16.3045 20.7555C17.0123 20.7872 17.7923 20.7654 18.5176 20.4885C20.2115 19.8418 20.7851 18.1904 21.1022 16.2878C21.4643 14.1152 21.4592 12.0805 19.9749 10.8227C19.2817 10.2354 18.4261 9.97089 17.5952 9.83476C17.5501 9.82754 17.5045 9.82062 17.4583 9.81396C17.5284 9.48069 17.5593 9.16458 17.5608 8.91759C17.5608 7.16833 16.538 6.1176 15.6334 5.45694C15.2284 5.16111 14.6927 4.94619 14.0832 5.01187C13.474 5.07752 13.0122 5.39991 12.7132 5.75257C12.1566 6.4093 12.0138 7.30553 12.1477 8.05625C12.2112 8.41206 12.2206 8.6623 12.1436 8.87717C12.0882 9.03169 11.9123 9.38437 11.1197 9.75222L11.751 11.1126C13.9186 10.1066 13.7705 8.61339 13.6241 7.79281C13.4777 6.97223 14.0172 6.13366 14.7489 6.66803C15.4806 7.2024 16.0611 7.86126 16.0611 8.91759C16.0611 9.17474 16.0391 9.43188 15.9648 9.68903ZM6.50049 14.9164C6.50049 18.3532 6.59422 18.6657 7.62527 18.6657C8.65631 18.6657 8.75005 18.3532 8.75005 14.9164C8.75005 11.4796 8.65631 11.1671 7.62527 11.1671C6.59422 11.1671 6.50049 11.4796 6.50049 14.9164Z",fill:u.O9.fgPrimary})]})}eH.defaultProps={width:26,height:26,fill:u.O9.n5},eV.defaultProps={width:26,height:26,fill:u.O9.n5};var eY=(0,h.ZP)(ea.x).withConfig({displayName:"styled__ReactionWrapper",componentId:"sc-ne2b7k-0"})(["height:40px;border:1px solid "," !important;border-radius:6px;background:",";align-items:center;"],u.O9.n3,u.O9.n1),eJ=(0,h.iv)(["&:hover{color:",";}&:hover svg{fill:",";}"],u.O9.n7,u.O9.n7),eX=h.ZP.button.withConfig({displayName:"styled__LikeButton",componentId:"sc-ne2b7k-1"})(["background:none;display:flex;justify-content:center;align-items:center;height:30px;width:80px;border:none;color:",";cursor:pointer;&:focus{outline:none;}& svg{fill:",";}",""],u.O9.n5,u.O9.n5,function(e){return!e.theme.isMobile&&eJ}),eK=h.ZP.div.withConfig({displayName:"styled__LikeCount",componentId:"sc-ne2b7k-2"})(["border-width:0px 0px 0px 1px;border-color:",";border-style:solid;height:40px;padding:0px 11px;display:flex;align-items:center;cursor:pointer;color:",";&:hover{text-decoration:underline;color:"," !important;}",""],u.O9.n3,u.O9.n5,u.O9.n7,el.c.t8),eQ=h.ZP.div.withConfig({displayName:"styled__LikeLabel",componentId:"sc-ne2b7k-3"})(["color:",";margin-left:4px;padding-top:1px;",""],function(e){return e.$upvoted?u.O9.n7:"inherit"},el.c.t8),e0=(0,l.memo)(function(e){var t,n=e.group,i=e.post,o=e.onVoteChange,a=e.newUpvotes,u=void 0===a?0:a,p=(0,m.bI)().dispatch,f=parseInt(i.metadata.upvotes)||0,h=(null==i||null===(t=i.metadata)||void 0===t?void 0:t.myVote)||"",v=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="up"===h?"":"up",e.next=3,c.Z.updatePostVote({postID:i.id,oldVote:h,newVote:t});case 3:if(!(n=e.sent.error)){e.next=8;break}return 429===n.status&&p(X.bI,{message:"Liking too fast! Try again later",severity:"error"}),e.abrupt("return");case 8:o&&o(h,t);case 9:case"end":return e.stop()}},e)})),[h,o,i.id,p]),b=(0,l.useCallback)(function(){p(X.Qg,function(){return{postLikeModalProps:{post:i,group:n}}})},[p,i,n]);return(0,w.jsxs)(eY,{children:[(0,w.jsx)(z.Z,{reason:d.lT.Upvote,onSuccess:v,showSignUp:!0,children:function(e){var t=e.onClick;return(0,w.jsxs)(eX,{type:"button",onClick:t,children:[(0,w.jsx)("div",{style:{height:24,width:24},children:"up"===h?(0,w.jsx)(eV,{fill:"inherit",height:24,width:24}):(0,w.jsx)(eH,{fill:"inherit",height:24,width:24})}),(0,w.jsx)(eQ,{$upvoted:"up"===h,children:"up"===h?"Liked":"Like"})]})}}),(0,w.jsx)(es.I,{postID:i.id,upvotes:f,newUpvotes:u,children:(0,w.jsx)(eK,{onClick:b,style:{cursor:"pointer"},children:(0,E.TN)(f+u)})})]})}),e1=n(63136),e2=n(70299),e9=h.ZP.span.withConfig({displayName:"styled__TitleText",componentId:"sc-w05228-0"})(["& em{","}"],e2.LA);function e3(e){var t,n=e.post,r=e.titleHl,i=e.underline,o=e.disableLink,a=(0,m.bI)("currentGroup").currentGroup,s=e.group||a,l=r?(0,w.jsx)(e9,{dangerouslySetInnerHTML:{__html:r}}):(0,w.jsx)(e9,{children:(null==n||null===(t=n.metadata)||void 0===t?void 0:t.title)||""});return n?o||!s?l:(0,w.jsx)(e1.Z,{postName:n.name,groupName:s.name,underline:i,children:l}):null}e3.defaultProps={disableLink:!1,underline:"none"};var e5=(0,l.memo)(e3),e4=n(67256),e6=n(76958),e8=n(88325),e7=n(60678),te=n(70131),tt=n(89747),tn=n(8662),tr=n(20338),ti=n(16531),to=h.ZP.div.withConfig({displayName:"styled__Wrapper",componentId:"sc-l2urkw-0"})(["max-height:500px;max-width:100%;display:flex;flex-direction:column;overflow:hidden;border-radius:10px;"]),ta=h.ZP.div.withConfig({displayName:"styled__Header",componentId:"sc-l2urkw-1"})(["padding:0px 8px 0px 16px;height:56px;box-shadow:rgb(0 0 0 / 10%) 0px 3px 2px -2px;border-bottom:1px solid ",";display:flex;justify-content:space-between;align-items:center;flex-shrink:0;"],function(e){return e.theme.isDarkTheme?u.O9.n3:"rgb(228, 228, 228)"}),ts=h.ZP.div.withConfig({displayName:"styled__Users",componentId:"sc-l2urkw-2"})(["overflow:auto;height:calc(100vh - 82px);"]),tl=h.ZP.div.withConfig({displayName:"styled__UserWrapper",componentId:"sc-l2urkw-3"})(["padding:13px 16px;display:flex;align-items:center;> div{&:last-child{margin-left:9px;flex:1;min-width:0px;}}"]),tc=h.ZP.div.withConfig({displayName:"styled__ButtonContainer",componentId:"sc-l2urkw-4"})(["width:100%;display:flex;align-items:center;padding:16px 13px;"]),tu=h.ZP.div.withConfig({displayName:"styled__Bio",componentId:"sc-l2urkw-5"})([""," ",""],el.c.t9,el.c.ellipsis),td=h.ZP.div.withConfig({displayName:"styled__TotalVotes",componentId:"sc-l2urkw-6"})(["",""],el.c.t6),tp=(0,l.memo)(function(e){var t=e.onClose,n=e.pollId,i=e.optionIdx,o=e.totalVotes,a=e.group,u=(0,l.useState)([]),d=u[0],p=u[1],h=(0,l.useState)(0),b=h[0],g=h[1],x=(0,m.bI)("isMobile").isMobile,y=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getPollVotes({pollId:n,optionIdx:i,offset:b,limit:30});case 2:(t=e.sent.data).hasMore?g(b+30):g(0),p(function(e){return[].concat((0,Y.Z)(e),(0,Y.Z)(t.users))});case 6:case"end":return e.stop()}},e)})),[n,i,b]);(0,l.useEffect)(function(){(0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.getPollVotes({pollId:n,optionIdx:i,offset:0,limit:30});case 2:(t=e.sent.data).hasMore&&g(30),p((null==t?void 0:t.users)||[]);case 6:case"end":return e.stop()}},e)}))()},[i,n]);var C=(0,l.useCallback)(function(e,t){var n;return(0,w.jsxs)(tl,{children:[(0,w.jsx)(T.Z,{user:e,size:40,group:a,userPreview:!0}),(0,w.jsxs)("div",{children:[(0,w.jsx)(e6.Z,{user:e,typographyVariant:"t5",group:a,userPreview:!0}),(0,w.jsx)(tu,{children:null==e||null===(n=e.metadata)||void 0===n?void 0:n.bio})]})]},t)},[a]),j=(0,l.useMemo)(function(){return(0,w.jsxs)(to,{children:[(0,w.jsxs)(ta,{children:[(0,w.jsx)(td,{children:f()("vote",o,!0)}),(0,w.jsx)(v.z,{variant:"icon-borderless",icon:"Close",onClick:t,iconSize:16.66})]}),(0,w.jsxs)(ts,{children:[d.map(C),!!b&&(0,w.jsx)(tc,{children:(0,w.jsx)(v.z,{onClick:y,variant:"secondary",label:"Load More",style:{width:x?"100%":"auto"}})})]})]})},[t,d,o,y,b,x,C]);return(0,w.jsx)(ti.u_,{onClose:t,open:!0,wrapperStyle:{padding:0},size:"small",children:j})}),tf=h.ZP.div.withConfig({displayName:"styled__LoadingOverlay",componentId:"sc-84imhz-0"})(["position:absolute;top:0px;left:0px;height:100%;width:100%;z-index:2;opacity:0.2;background-color:",";"],u.O9.n1),tm=h.ZP.div.withConfig({displayName:"styled__PollWrapper",componentId:"sc-84imhz-1"})(["display:flex;flex-direction:column;position:relative;margin-top:24px;"]),th=h.ZP.div.withConfig({displayName:"styled__ConfirmModalWrapper",componentId:"sc-84imhz-2"})(["& > div:first-child{width:100%;}"]),tv=h.ZP.div.withConfig({displayName:"styled__PollFooter",componentId:"sc-84imhz-3"})(["display:flex;align-items:center;margin-top:8px;white-space:pre;color:",";",""],u.O9.n5,el.c.t10),tb=h.ZP.div.withConfig({displayName:"styled__PollOption",componentId:"sc-84imhz-4"})(["display:flex;align-items:center;margin-bottom:8px;cursor:pointer;user-select:none;"]),tg=h.ZP.div.withConfig({displayName:"styled__PollVoteCount",componentId:"sc-84imhz-5"})(["color:",";",""],u.O9.n5,el.c.t10),tx=(0,h.iv)(["position:absolute;left:",";"],function(e){var t=e.$mobileLeft;return t&&"".concat(t,"px")}),ty=h.ZP.div.withConfig({displayName:"styled__PollOptionVoteCount",componentId:"sc-84imhz-6"})(["line-height:1 !important;"," ",""],el.c.t10,function(e){return e.theme.isMobile&&tx}),tw=h.ZP.div.withConfig({displayName:"styled__PollOptionContent",componentId:"sc-84imhz-7"})(["display:flex;width:100%;justify-content:space-between;min-height:50px;overflow:hidden;align-items:center;padding:14px;border:1px solid ",";border-radius:4px;flex:1;position:relative;",""],u.O9.n3,el.c.t7),tC=(0,h.iv)(["display:flex;align-items:center;justify-content:center;border:2px solid ",";> div{height:12px;width:12px;background-color:",";border-radius:50%;}"],u.O9.sd1,u.O9.sd1),tj=h.ZP.div.withConfig({displayName:"styled__PollCircle",componentId:"sc-84imhz-8"})(["height:24px;width:24px;border-radius:50%;border:2px solid ",";flex-shrink:0;margin-right:","px;",""],u.O9.n5,function(e){return e.theme.isMobile?16:24},function(e){return e.$voted&&tC}),tk=(0,h.iv)(["flex-direction:column;align-items:flex-start;"]),tO=h.ZP.div.withConfig({displayName:"styled__VotedPollOptionContent",componentId:"sc-84imhz-9"})(["display:flex;align-items:center;justify-content:space-between;width:100%;padding-right:100px;> *{z-index:1;}",""],function(e){return e.theme.isMobile&&tk}),tP=h.ZP.div.withConfig({displayName:"styled__VotedPollOptionLabel",componentId:"sc-84imhz-10"})(["",""],el.c.t7),tI=h.ZP.div.withConfig({displayName:"styled__ViewPollResults",componentId:"sc-84imhz-11"})(["height:20px;color:",";"," &:hover{text-decoration:underline;cursor:pointer;}"],u.O9.n5,el.c.t10),tD=h.ZP.div.withConfig({displayName:"styled__VotePercentageBg",componentId:"sc-84imhz-12"})(["height:100%;width:100%;background-color:",";transform-origin:0px 0px;transform:scaleX(",");position:absolute;top:0px;left:0px;z-index:0;transition:background-color 1000ms ease,transform 400ms ease;animation-delay:2ms;"],function(e){var t=e.$selected,n=e.theme;return t?n.isDarkTheme?"".concat(u.O9.p2,"26"):u.O9.p2:n.isDarkTheme?u.O9.n3:u.O9.n2},function(e){return e.$percentage}),tZ=(0,h.iv)(["flex-direction:row;align-items:center;margin-top:8px;> p{flex:1;text-align:right;}"]),tS=(0,h.iv)(["position:absolute;right:13px;top:0px;height:100%;align-items:flex-end;justify-content:center;"]),t_=h.ZP.div.withConfig({displayName:"styled__VoteCount",componentId:"sc-84imhz-13"})(["display:flex;flex-direction:column;align-items:flex-end;flex-shrink:0;> p{line-height:1 !important;}",""],function(e){return e.theme.isMobile?tZ:tS}),tM=(0,h.iv)(["right:0px;"]),tN=(0,h.iv)(["left:0px;"]),tE=h.ZP.div.withConfig({displayName:"styled__VotedUser",componentId:"sc-84imhz-14"})(["position:absolute;top:0px;transition:transform 200ms ease;",""],function(e){return e.theme.isMobile?tN:tM}),tA=h.ZP.div.withConfig({displayName:"styled__VotedUsers",componentId:"sc-84imhz-15"})(["display:flex;position:relative;margin-bottom:4px;height:25px;> div{> div{> div{> span{border:1px solid ",";}}}}"],u.O9.n1),tL=function(e){var t=e.shift,n=e.isMobile;return{entering:{transform:n?"translateX(-60px)":"translateX(60px)"},entered:{transform:n?"translateX(".concat(t,"px)"):"translateX(-".concat(t,"px)")},exiting:{transform:n?"translateX(-60px)":"translateX(60px)"},exited:{transform:n?"translateX(-60px)":"translateX(60px)"}}},tT=(0,l.memo)(function(e){var t,n,i,o=e.pollData,a=e.group,u=e.post,p=o.entries,h=void 0===p?[]:p,v=o.id,b=o.totalVotes,g=o.userId,x=o.optionIndex,y=(0,l.useState)(!1),C=y[0],j=y[1],k=(0,l.useState)(-1),O=k[0],P=k[1],I=(0,m.bI)("isMobile","self","currentGroup"),D=I.isMobile,Z=I.self,_=I.currentGroup,M=(0,l.useState)(!1),A=M[0],L=M[1],F=(0,l.useState)(function(){return g===(null==Z?void 0:Z.id)?x:-1}),B=F[0],R=F[1],G=-1!==B,U=(0,l.useState)(!G),$=U[0],W=U[1],q=(0,eL.useRouter)(),H=(0,l.useRef)(!1),V=(0,d.TR)({user:Z,member:null==Z?void 0:Z.member,post:u,group:a});(0,l.useEffect)(function(){var e=o.userId,t=o.optionIndex;e===(null==Z?void 0:Z.id)&&R(t)},[o,null==Z?void 0:Z.id]),(0,l.useEffect)(function(){(G||C)&&setTimeout(function(){W(!1)},0)},[G,C]),(0,l.useEffect)(function(){return H.current=!0,function(){H.current=!1}},[]),(0,l.useEffect)(function(){G&&j(!0)},[G]);var Y=(0,l.useCallback)(function(e){var t,n,r;if(e)return 404===e.status?null!=e&&null!==(n=e.data)&&void 0!==n&&n.includes("poll not found")?t="Poll no longer exists":null!=e&&null!==(r=e.data)&&void 0!==r&&r.includes("post not found")&&(t="Post no longer exists"):t="Something went wrong, please try again later",(0,e4.Lx)({message:t,severity:"error"}),(0,S.VF)(q,(0,N.AZ)({groupName:null==_?void 0:_.name}))},[null==_?void 0:_.name,q]),J=(0,l.useCallback)((t=(0,r.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,c.Z.voteOnPoll({pollId:v,optionIdx:t});case 3:Y(e.sent.error),L(!1);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[v,Y]),X=(0,l.useCallback)(function(e,t){var n,i=e.text,o=(n=(0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t);case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,w.jsx)(z.Z,{reason:d.lT.VotePoll,onSuccess:o,children:function(e){var n=e.onClick;return(0,w.jsxs)(tb,{onClick:n,children:[(0,w.jsx)(tj,{}),(0,w.jsx)(tw,{children:i})]},t)}},t)},[J]),K=(0,l.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,c.Z.cancelPollVote({pollId:v});case 3:Y(e.sent.error),L(!1);case 7:case"end":return e.stop()}},e)})),[Y,v]),Q=(0,l.useCallback)((n=(0,r.Z)(s().mark(function e(t){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,c.Z.changePollVote({pollId:v,newIndex:t});case 3:Y(e.sent.error),L(!1);case 7:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[Y,v]),ee=(0,l.useCallback)(function(e,t){var n,i=e.text,o=e.count,a=e.users,l=$||0===b?0:o/b,c=o?(0,E.W4)(JSON.parse(a)):[],u=B===t,d=(n=(0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),p=function(){return G?u?K():d():J(t)};return(0,w.jsx)(th,{children:(0,w.jsx)(tr.s,{header:"".concat(u?"Remove":"Change"," vote?"),content:"Are you sure you want to ".concat(u?"remove":"change"," your vote?"),onConfirm:p,disabled:!G,children:(0,w.jsxs)(tb,{onClick:G?void 0:p,children:[(0,w.jsx)(tj,{$voted:u,children:(0,w.jsx)("div",{})}),(0,w.jsxs)(tw,{children:[(0,w.jsx)(tD,{$selected:u,$percentage:l},t),(0,w.jsxs)(tO,{children:[(0,w.jsx)(tP,{children:i}),o?(0,w.jsxs)(t_,{onClick:function(e){e.stopPropagation(),null!=c&&c.length&&P(t)},children:[(0,w.jsx)(tA,{children:(0,w.jsx)(tt.Z,{children:c.map(function(e,t){var n=(c.length-t-1)*16;return(0,w.jsx)(tn.ZP,{timeout:300,children:function(t){var r=tL({shift:n,isMobile:D});return(0,w.jsx)(tE,{style:r[t],children:(0,w.jsx)(T.Z,{user:e,size:25,disableLink:!0})})}},t)})})}),(0,w.jsx)(ty,{$mobileLeft:43+16*(c.length-1),children:f()("vote",o,!0)})]}):(0,w.jsx)("div",{})]})]})]})})},t)},[Q,K,J,$,D,B,b,G]),et=(0,l.useCallback)(function(){return C||G?h.map(ee):h.map(X)},[C,G,h,X,ee]),en=(0,l.useCallback)(function(){P(-1)},[]),er=(0,l.useCallback)(function(){j(!0)},[]);return(0,w.jsxs)(tm,{children:[et(),(0,w.jsxs)(tv,{children:[(0,w.jsx)(tg,{children:f()("vote",b,!0)}),V&&!G&&!C&&!!b&&(0,w.jsxs)(w.Fragment,{children:[" • ",(0,w.jsx)(tI,{onClick:er,children:"View results"})]})]}),-1!==O&&(0,w.jsx)(tp,{totalVotes:null===(i=h[O])||void 0===i?void 0:i.count,pollId:v,optionIdx:O,onClose:en,group:a}),A&&(0,w.jsx)(tf,{})]})}),tF=n(15474),tB=n(54361),tR=n(64597),tz=n(99682),tG=h.ZP.div.withConfig({displayName:"styled__DropdownOption",componentId:"sc-bwvhxj-0"})(["display:flex;align-items:center;"]),tU=h.ZP.div.withConfig({displayName:"styled__DropdownOptionColumn",componentId:"sc-bwvhxj-1"})(["display:flex;flex-direction:column;margin-left:12px;min-width:0;"]),t$=h.ZP.div.withConfig({displayName:"styled__DropdownOptionAsset",componentId:"sc-bwvhxj-2"})(["height:40px;width:40px;border-radius:4px;background-size:cover;flex-shrink:0;"]),tW=h.ZP.div.withConfig({displayName:"styled__DropdownOptionModuleTitle",componentId:"sc-bwvhxj-3"})([""," ",""],el.c.ellipsis,el.c.t5),tq=h.ZP.div.withConfig({displayName:"styled__DropdownOptionCourseTitle",componentId:"sc-bwvhxj-4"})([""," ",""],el.c.ellipsis,el.c.t11);function tH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tV=c.Z.debounce(c.Z.searchCourseModules,300),tY=function(e){var t=e.courseTitle,n=e.displayTitle,r=e.videoThumbnail;return(0,w.jsxs)(tG,{children:[(0,w.jsx)(t$,{style:{backgroundImage:r?"url(".concat(r,")"):void 0,visibility:r?"visible":"hidden"}}),(0,w.jsxs)(tU,{children:[(0,w.jsx)(tW,{children:n}),(0,w.jsx)(tq,{children:t})]})]})},tJ=(0,l.memo)(function(e){var t,n=e.open,o=e.onClose,a=e.postID,u=(0,l.useState)(""),d=u[0],p=u[1],f=(0,l.useState)([]),h=f[0],v=f[1],b=(0,l.useState)(!1),g=b[0],x=b[1],y=(0,m.bI)("isMobile","currentGroup"),C=y.isMobile,j=y.currentGroup,k=y.dispatch,O=(0,eL.useRouter)(),P=(0,l.useCallback)((t=(0,r.Z)(s().mark(function e(t){var n,r,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,c.Z.pinPostToModule({postID:a,module:t.id});case 3:if(!(n=e.sent.error)){e.next=11;break}return i="Something went wrong, please try again",(null==n?void 0:n.status)===422&&null!=n&&null!==(r=n.data)&&void 0!==r&&null!==(r=r.fields)&&void 0!==r&&r.length&&(i=n.data.fields[0].error),k(X.bI,{message:i,severity:"error"}),x(!1),e.abrupt("return");case 11:return e.next=13,(0,S.VF)(O,(0,N.rE)({group:{name:j.name},course:{name:t.metadata.courseName},courseModule:t.id}));case 13:k(X.bI,{message:"Post pinned to page"});case 14:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[null==j?void 0:j.name,k,O,a]);return(0,l.useEffect)(function(){(0,r.Z)(s().mark(function e(){var t,n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tV({query:d||"#",limit:7,groupID:null==j?void 0:j.id});case 2:v((null!==(t=null==(n=e.sent.data)?void 0:n.courses)&&void 0!==t?t:[]).map(function(e){return{label:(0,w.jsx)(tY,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.metadata)),onClick:function(){return P(e)}}}));case 7:case"end":return e.stop()}},e)}))()},[d,null==j?void 0:j.id,P]),(0,w.jsx)(tR.T,{open:n,disabled:!0,loading:g,header:"Pin to page",confirmLabel:"Pin",cancelButtonVariant:C?"secondary":"borderless",onConfirm:function(){},onCancel:o,onClose:o,children:(0,w.jsx)(tz.F,{options:h,value:d,onChange:p,staticLabel:!0,placeholder:"Search for page",autoFocus:!0})})}),tX=n(36581),tK=(0,h.F4)(["20%{transform:rotate3d(0,0,1,15deg);}40%{transform:rotate3d(0,0,1,-10deg);}60%{transform:rotate3d(0,0,1,5deg);}80%{transform:rotate3d(0,0,1,-5deg);}to{transform:rotate3d(0,0,1,0deg);}"]),tQ=(0,h.iv)(["padding:16px 10px 24px 10px;"]),t0=h.ZP.div.withConfig({displayName:"styled__DisabledCommentsText",componentId:"sc-g7syap-0"})(["padding:16px 32px 24px 32px;color:",";"," ",""],u.O9.n5,el.c.t5,function(e){return e.theme.isMobile&&tQ}),t1=h.ZP.span.withConfig({displayName:"styled__LabelLink",componentId:"sc-g7syap-1"})(["color:",";&:hover{text-decoration:underline;}",""],u.O9.n5,el.c.t10),t2=h.ZP.div.withConfig({displayName:"styled__HeaderPostTitleWrapper",componentId:"sc-g7syap-2"})(["margin-bottom:0;"," ",""],el.c.ellipsis,function(e){return e.theme.isMobile?el.c.t6:el.c.t4}),t9=h.ZP.div.withConfig({displayName:"styled__PostTitleWrapper",componentId:"sc-g7syap-3"})(["overflow-wrap:break-word;",""],function(e){return e.theme.isMobile?el.c.t5:el.c.t1}),t3=h.ZP.div.withConfig({displayName:"styled__CommentsCount",componentId:"sc-g7syap-4"})(["color:",";",""],u.O9.n5,el.c.t8),t5=h.ZP.div.withConfig({displayName:"styled__DateAndLabelWrapper",componentId:"sc-g7syap-5"})(["color:",";",""],u.O9.n5,el.c.t11),t4=h.ZP.div.withConfig({displayName:"styled__CommentsSection",componentId:"sc-g7syap-6"})(["position:relative;min-height:48px;padding-bottom:",";"],function(e){var t=e.$commentsDisabled,n=e.theme;return!t&&n.isMobile&&"60px"}),t6=(0,h.ZP)(x.X).withConfig({displayName:"styled__Header",componentId:"sc-g7syap-7"})(["position:fixed;align-items:center;background:",";z-index:1;width:",";left:",";transform:",";height:",";top:",";display:",";",""],u.O9.n1,function(e){var t=e.theme,n=e.$isModal,r=e.$containerWidth;return t.isMobile?"100%":n?"791px":"".concat(r,"px")},function(e){return e.$isModal?"50%":void 0},function(e){return e.$isModal?"translateX(-50%)":void 0},function(e){return e.theme.isMobile?"56px":"66px"},function(e){var t=e.theme;return e.$isModal?0:t.isMobile?"61px":"64px"},function(e){return e.$inView?"none":"flex"},e2.So),t8=(0,h.ZP)(Q.h_).withConfig({displayName:"styled__CategoryDropdownMenu",componentId:"sc-g7syap-8"})(["width:100%;button{width:100%;}"]),t7=h.ZP.div.withConfig({displayName:"styled__PostContentWrapper",componentId:"sc-g7syap-9"})(["background:",";border:",";border-radius:","px;"],function(e){return e.$isModal?"transparent":u.O9.n1},function(e){var t=e.$isModal,n=e.theme;return t||n.isMobile?"none":"1px solid ".concat(u.O9.n3)},function(e){return e.$borderRadius}),ne=(0,h.iv)(["transform-origin:top center;will-change:transform;transform:translateZ(0);"]),nt=(0,h.iv)(["animation:"," 1s forwards linear;"],tK),nn=(0,h.iv)(["&:hover{color:",";}"],function(e){var t=e.theme;return e.$following?t.isDarkTheme?u.O9.p2:u.O9.fgPrimary:u.O9.n7}),nr=(0,h.ZP)(v.z).withConfig({displayName:"styled__PostFollowingButton",componentId:"sc-g7syap-10"})(["color:",";",";",";svg{",";",";}",";"],function(e){var t=e.theme;return e.$following?t.isDarkTheme?u.O9.p2:u.O9.fgPrimary:u.O9.n5},function(e){return e.theme.isMobile&&ne},function(e){var t=e.theme,n=e.$animate;return t.isMobile&&n&&nt},function(e){return!e.theme.isMobile&&ne},function(e){var t=e.theme,n=e.$animate;return!t.isMobile&&n&&nt},function(e){return!e.theme.isMobile&&nn}),ni=h.ZP.div.withConfig({displayName:"styled__PostContent",componentId:"sc-g7syap-11"})(["animation:",";"],function(e){return e.$isSelected?"bg-fade-out ease-in 4s":"none"}),no=h.ZP.div.withConfig({displayName:"styled__HeaderPostTitleContent",componentId:"sc-g7syap-12"})(["display:flex;flex:1;overflow:hidden;padding:0 8px;align-items:center;cursor:pointer;"]),na=(0,h.ZP)(x.X).withConfig({displayName:"styled__PostDetailReactionsWrapper",componentId:"sc-g7syap-13"})(["animation:",";border-bottom:1px solid ",";"],function(e){return e.$isSelected?"bg-fade-out ease-in 4s":"none"},u.O9.n3),ns=(0,h.ZP)(eh.J).withConfig({displayName:"styled__ChatIcon",componentId:"sc-g7syap-14"})(["padding:11px;"]),nl=(0,h.ZP)(tX.s).withConfig({displayName:"styled__MobileStickyCommentWrapper",componentId:"sc-g7syap-15"})(["position:fixed;bottom:","px;width:100%;background-color:",";border-top:1px solid ",";visibility:",";padding:",";z-index:1299;gap:8px;"," > div{width:100%;}"],function(e){var t=e.$bottom;return void 0===t?0:t},u.O9.n1,u.O9.n3,function(e){return e.$visible?"visible":"hidden"},function(e){var t=e.theme,n=e.$bottom;return(void 0===n?0:n)>0?"8px 10px 0 10px":t.isApp?"8px 10px":"8px 10px calc(env(safe-area-inset-bottom) + 8px) 10px"},e2.Wn),nc=h.ZP.div.withConfig({displayName:"styled__MobileStickyCommentReplyTo",componentId:"sc-g7syap-16"})(["display:flex;justify-content:space-between;color:",";gap:8px;div{color:",";}> div:first-child{display:flex;","}"],u.O9.n5,u.O9.n5,el.c.ellipsis),nu=h.ZP.div.withConfig({displayName:"styled__MobileCommentEditInputRow",componentId:"sc-g7syap-17"})(["display:flex;gap:8px;> div:last-child{min-width:0;width:100%;}"]),nd=(0,h.iv)(["margin-bottom:8px;"]),np=h.ZP.div.withConfig({displayName:"styled__PostDetailHeader",componentId:"sc-g7syap-18"})(["display:flex;gap:8px;justify-content:space-between;margin-bottom:10px;> div:first-child{flex:1;min-width:0px;> div{}}",""],function(e){return e.theme.isMobile&&nd}),nf=(0,h.iv)(["margin-right:8px;"]),nm=h.ZP.div.withConfig({displayName:"styled__PostDetailMeta",componentId:"sc-g7syap-19"})(["display:flex;flex-direction:column;min-width:0px;",""],function(e){return e.theme.isMobile&&nf}),nh=n(42108),nv=n(34811);function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ng(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nx=(0,l.memo)(function(e){var t,n,a,p,h,v,b,g,C,j,k,I,F=e.postTree,B=e.selectedPostID,R=e.isPinned,z=e.msg,G=e.isBot,U=e.isModal,$=e.loading,W=e.poll,q=e.updatePoll,H=e.setUpdatePoll,Y=(0,m.bI)("self","currentGroup","previousRouterState","isMobile","mobileReplyContext","mobileCommentEditContext","mobileBottomOffset"),J=Y.dispatch,Q=Y.self,ee=Y.currentGroup,et=Y.previousRouterState,eo=Y.isMobile,es=Y.mobileReplyContext,el=Y.mobileCommentEditContext,ec=Y.mobileBottomOffset,eu=(0,l.useState)(F.post),ed=eu[0],ep=eu[1],ef=(0,l.useState)(!1),em=ef[0],eh=ef[1],ev=(0,l.useRef)({}),eb=(0,l.useState)(null),eg=eb[0],ex=eb[1],ey=(0,l.useState)(!1),ew=ey[0],eC=ey[1],ej=(0,l.useState)(0),ek=ej[0],eO=ej[1],eP=(0,eL.useRouter)(),eI=(0,l.useRef)(!1),eD=(0,l.useRef)([]),eZ=(0,l.useRef)(null),eS=(0,l.useRef)(!1),e_=(0,l.useRef)(null),eM=(0,l.useRef)(null),eN=(0,l.useRef)(null),eA=(0,l.useRef)(null),eT=(0,l.useRef)(null),eF=(0,l.useRef)(null),eB=!!B&&F.post.id.startsWith(B),eR=(0,l.useState)(!1),ez=eR[0],eG=eR[1],eU=(0,l.useState)(F.followingPost),e$=eU[0],eW=eU[1],eH=(0,l.useState)(!1),eV=eH[0],eY=eH[1],eJ=(0,tB.C1)(),eX=(0,o.Z)(eJ,3),eK=eX[0],eQ=eX[1],e1=eX[2],e2=(0,l.useState)(!1),e9=e2[0],e3=e2[1],tt=(0,l.useState)(!1),tn=tt[0],tr=tt[1],ti=null==ed?void 0:ed.name,to=(null==ed?void 0:ed.metadata.labels)||"",ta=to.length>0?null==ee||null===(b=ee.labels)||void 0===b?void 0:b.find(function(e){return e.id===to}):void 0,ts=!ta,tl=(0,l.useState)({}),tc=tl[0],tu=tl[1],td=(0,l.useState)([]),tp=td[0],tf=td[1],tm=(0,l.useState)(!1),th=tm[0],tv=tm[1],tb=(0,l.useState)(ta),tg=tb[0],tx=tb[1],ty=(0,l.useState)(!0),tw=ty[0],tC=ty[1],tj=(0,l.useState)(0),tk=tj[0],tO=tj[1],tP=(0,l.useRef)(),tI=!!(null!=ed&&ed.metadata.contentEdit)||!!(null!=ed&&ed.metadata.titleEdit)||!!(null!=ed&&ed.metadata.attachmentsEdit),tD=!!(null!=ed&&ed.metadata.commentsDisabled),tZ=(0,d.CP)({user:Q,member:null==Q?void 0:Q.member,group:ee}),tS=(0,l.useState)(W),t_=tS[0],tM=tS[1],tN=(0,l.useState)(!1),tE=tN[0],tA=tN[1],tL=(0,l.useState)(!1),tz=tL[0],tG=tL[1],tU=(0,l.useState)(!1),t$=tU[0],tW=tU[1],tq=(0,l.useRef)(),tH=(0,l.useRef)(),tV=(0,l.useState)((null==ed||null===(g=ed.metadata)||void 0===g?void 0:g.comments)||0),tY=tV[0],tK=tV[1],tQ=(0,l.useState)(!1),ne=tQ[0],nt=tQ[1],nn=(0,l.useRef)(!0),nd=(0,l.useMemo)(function(){var e;return(0,E.AL)({user:Q,group:ee,member:null==Q?void 0:Q.member,labels:null!==(e=null==ee?void 0:ee.labels)&&void 0!==e?e:[]})},[ee,Q]);(0,l.useEffect)(function(){ep(F.post)},[F]),(0,l.useEffect)(function(){null!=F&&F.initialFetchDone&&(null==eM?void 0:eM.current)===null&&(eM.current=(0,E.XE)(F))},[F,eM]),(0,l.useEffect)(function(){q&&(tM(q),H(null))},[q,H]),(0,l.useEffect)(function(){(0,M.co)({key:M.H0.postRead,value:F.post.id})},[F]),(0,l.useEffect)(function(){if(!es){tH.current=null;return}if(tH.current!==es.post.id){var e;null===(e=eN.current)||void 0===e||e.reset()}tH.current=es.post.id},[es]);var nf=e9||tn,nb=null==ec||null===(C=ec[P.V.STICKY_COMMENT])||void 0===C?void 0:C.bottom;(0,l.useEffect)(function(){var e,t,n=null!=el&&el.ready?eF:eT;if(n.current&&eo&&(J(X.qp,{type:P.V.STICKY_COMMENT,height:null!==(e=null===(t=n.current)||void 0===t?void 0:t.offsetHeight)&&void 0!==e?e:0,hideType:nf?P.V.NAV_BAR:void 0}),"ResizeObserver"in window)){var r=new ResizeObserver(function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.borderBoxSize;null!=n&&n.length&&J(X.qp,{type:P.V.STICKY_COMMENT,height:n[0].blockSize,hideType:nf?P.V.NAV_BAR:void 0})});return r.observe(n.current,{box:"border-box"}),function(){r.disconnect(),J(X.qp,{type:P.V.STICKY_COMMENT,height:null})}}},[J,eo,null==el?void 0:el.ready,nf]),(0,l.useEffect)(function(){if(!eo&&!U){var e=function(){var e;tO(null===(e=eZ.current)||void 0===e?void 0:e.offsetWidth)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}},[eo,U]),(0,l.useEffect)(function(){if(nn.current){nn.current=!1;return}nt(e$)},[e$]);var nx=(0,l.useCallback)(function(e){eI.current&&e.userId!==Q.id&&tu(function(t){var n=t[e.postId]||{up:0,down:0},r=e.oldVote,o=e.newVote;return"up"===r&&n.up--,"down"===r&&n.down--,"up"===o&&n.up++,"down"===o&&n.down++,ng(ng({},t),{},(0,i.Z)({},e.postId,n))})},[null==Q?void 0:Q.id]);(0,l.useEffect)(function(){if((0,d.Rj)({member:null==Q?void 0:Q.member})){var e=[];(function t(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i<2&&null!=n&&null!==(r=n.post)&&void 0!==r&&null!==(r=r.user)&&void 0!==r&&r.id&&e.push(n.post.user),n.children&&n.children.forEach(function(e){return t(e,i+1)})})(F),tf(e)}},[F,null==Q?void 0:Q.member]),(0,l.useEffect)(function(){!z||eS.current||U||(eS.current=!0,c.Z.markMessageAsRead({messageID:z}),(0,S.cq)(eP,(0,N.P_)({groupName:null==ee?void 0:ee.name,postName:F.post.name,selectedPostID:B})))},[z,ee,F.post.name,eP,B,U]),(0,l.useEffect)(function(){(0,M.tv)({key:M.H0.highlightedPost,storage:"sessionStorage"}).value||(0,M.co)({key:M.H0.highlightedPost,storage:"sessionStorage",value:{postId:F.post.id,isPinned:R}})},[F,R]),(0,l.useEffect)(function(){eI.current=!0;var e=setInterval(function(){if(eI.current){var e=new Date().getTime(),t=[];Object.keys(ev.current).forEach(function(n){var r=ev.current[n];e<=(r.typingUntil||0)&&t.push(r.user)}),t.sort(function(e,t){return e.userId.localeCompare(t.userId)}),J(X.G1,t),eD.current.length!==ek&&eO(eD.current.length)}},1e3);return function(){eI.current=!1,clearInterval(e)}},[J,ek]);var ny=(0,l.useCallback)(function(e){if(e.userId!==(null==Q?void 0:Q.id)){var t=new Date().getTime()+e.duration;ev.current[e.userId]={user:e,typingUntil:t}}},[null==Q?void 0:Q.id]),nw=(0,l.useCallback)((t=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:tK(function(e){return e+1}),n=t.parentId===ed.id,t.userId!==(null==Q?void 0:Q.id)&&(n&&eD.current.push(t),ev.current[t.userId]={typingUntil:0});case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[ed.id,null==Q?void 0:Q.id]),nC=(0,l.useCallback)(function(e){if(!e)return(0,e4.Lx)({message:"Poll no longer exists"}),(0,S.VF)(eP,(0,N.AZ)({groupName:ee.name}));tM(function(t){var n;return t?ng(ng({id:t.id},e),{},{totalVotes:null===(n=e.entries)||void 0===n?void 0:n.reduce(function(e,t){return e+t.count},0)}):null})},[ee,eP]),nj=(0,l.useCallback)(function(e){null!=e&&e.userCommenting&&ny(null==e?void 0:e.userCommenting),null!=e&&e.newPostVote&&nx(ng(ng({},null==e?void 0:e.newPostVote),{},{topic:null==e?void 0:e.topic,postId:null==e?void 0:e.postId}))},[nx,ny]),nk=(0,l.useCallback)(function(e){null!=e&&e.newComment&&nw(e.newComment),null!=e&&e.pollUpdated&&nC(null==e?void 0:e.postPollData)},[nw,nC]);(0,l.useEffect)(function(){if((0,d.Rj)({member:null==Q?void 0:Q.member})){var e=(0,Z.Ld)([(0,Z.lf)(null==ee?void 0:ee.id,F.post.id)],nj),t=(0,Z.Ld)([(0,Z.lF)(null==ee?void 0:ee.id,F.post.id)],nk);return function(){e(),t()}}},[ee,F.post.id,Q,nj,nk]),(0,l.useEffect)(function(){eD.current=[],eW(F.followingPost),F.followingPost&&(nn.current=!0)},[F.followingPost]);var nO=(0,l.useMemo)(function(){return t_?(0,w.jsx)(tT,{pollData:t_,group:ee,post:ed}):null},[t_,ee,ed]),nP=(0,l.useCallback)(function(e){var t=e.post;t&&t.id===(null==ed?void 0:ed.id)&&eh(!0)},[ed]),nI=(0,l.useCallback)((n=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.post){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.deletePost({postID:n.id});case 5:if(n.parentId){e.next=16;break}if((0,e4.Lx)({message:"Post deleted"}),!U){e.next=12;break}return e.next=10,(0,S.VF)(eP,{href:et.asPath,as:et.asPath},!0);case 10:e.next=14;break;case 12:return e.next=14,(0,S.VF)(eP,(0,N.AZ)({groupName:ee.name}));case 14:e.next=17;break;case 16:J(X.z$,{post:n});case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),[ee,eP,U,J,et]),nD=(0,l.useCallback)((a=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.post){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.reportPost({postID:n.id});case 5:J(X.bI,{message:"Reported to group admins"});case 6:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),[J]),nZ=(0,l.useCallback)((p=(0,r.Z)(s().mark(function e(t,n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!n){e.next=8;break}return e.next=5,c.Z.enablePostComments({postID:t.id});case 5:J(X.bI,{message:"Commenting is turned on"}),e.next=11;break;case 8:return e.next=10,c.Z.disablePostComments({postID:t.id});case 10:J(X.bI,{message:"Commenting is turned off"});case 11:U?J(X.ap,{refresh:1}):(0,S.gx)(eP,(0,N.P_)({groupName:ee.name,postName:ti,selectedPostID:void 0}));case 12:case"end":return e.stop()}},e)})),function(e,t){return p.apply(this,arguments)}),[ee,J,U,ti,eP]),nS=(0,l.useCallback)(function(e){return nZ(e.post,!1)},[nZ]),n_=(0,l.useCallback)(function(e){return nZ(e.post,!0)},[nZ]),nM=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.pinPost({postID:ed.id});case 2:if(!((null==(n=e.sent.error)?void 0:n.status)===422&&null!=n&&null!==(t=n.data)&&void 0!==t&&null!==(t=t.fields)&&void 0!==t&&t.length)){e.next=8;break}J(X.bI,{message:null==n||null===(r=n.data)||void 0===r?void 0:r.fields[0].error,severity:"error"}),e.next=17;break;case 8:if(U){e.next=14;break}return(0,e4.Lx)({message:"Pinned"}),e.next=12,(0,S.H5)(eP);case 12:e.next=17;break;case 14:J(X.bI,{message:"Pinned"}),J(X.ap),(0,N.mp)({pathname:null==et?void 0:et.pathname,query:null==et?void 0:et.query})&&J(X.AP,!0);case 17:case"end":return e.stop()}},e)})),[ed.id,eP,U,J,et]),nN=(0,l.useCallback)((h=(0,r.Z)(s().mark(function e(t){var n;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.post){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.unpinPost({postID:n.id});case 5:if(U){e.next=11;break}return(0,e4.Lx)({message:"Unpinned"}),e.next=9,(0,S.H5)(eP);case 9:e.next=14;break;case 11:J(X.bI,{message:"Unpinned"}),J(X.ap),(0,N.mp)({pathname:null==et?void 0:et.pathname,query:null==et?void 0:et.query})&&J(X.AP,!0);case 14:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)}),[eP,U,J,et]),nE=(0,l.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.unpinPostFromModule({postID:ed.id});case 2:if(U){e.next=8;break}return(0,e4.Lx)({message:"Post unpinned from page"}),e.next=6,(0,S.H5)(eP);case 6:e.next=11;break;case 8:J(X.bI,{message:"Post unpinned from page"}),J(X.ap),(0,N.zh)(et)&&J(X.AP,!0);case 11:case"end":return e.stop()}},e)})),[ed.id,eP,U,J,et]),nA=(0,l.useCallback)(function(e){var t=e.post,n=e.newPollOptions,r=e.pollDeleted,i=e.pollId;eh(!1),ep(function(e){return ng(ng({},e),t)}),n&&tM(function(e){return ng(ng({},e),{},{id:i||void 0,totalVotes:0,selfVote:-1,entries:n.map(function(e){return{text:e,count:0}})})}),r&&tM(null),J(X.gQ,t),U&&J(X.Ek,function(){return{disableEscape:!1}})},[J,U]),nL=(0,l.useCallback)((v=(0,r.Z)(s().mark(function e(t){var n,r,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.post,r=(0,N.P_)({groupName:ee.name,postName:ti,selectedPostID:n.id}).as,i="".concat(location.origin).concat(r),e.prev=3,e.next=6,navigator.clipboard.writeText(i);case 6:J(X.bI,{message:"Link copied to clipboard"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),J(X.bI,{message:"Link was not copied to clipboard. Try again later.",severity:"error"});case 12:case"end":return e.stop()}},e,null,[[3,9]])})),function(e){return v.apply(this,arguments)}),[ee,J,ti]),nT=(0,l.useCallback)((0,r.Z)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!e$){e.next=5;break}return e.next=3,c.Z.unfollowPost({postID:ed.id});case 3:e.next=7;break;case 5:return e.next=7,c.Z.followPost({postID:ed.id});case 7:eW(!e$);case 8:case"end":return e.stop()}},e)})),[e$,ed]),nF=(0,l.useMemo)(function(){return(0,d.uw)({member:null==Q?void 0:Q.member,group:ee})?(0,w.jsx)(nr,{variant:"icon-borderless",onClick:nT,disabled:$,onAnimationEnd:function(){nt(!1)},icon:$?"Bell":e$?"BellFilled":"BellDisabled",$following:e$,$animate:ne}):null},[nT,e$,ee,null==Q?void 0:Q.member,$,ne]),nB=(0,l.useCallback)((0,r.Z)(s().mark(function e(){var t;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ee.labels.find(function(e){return e.id===(null==tg?void 0:tg.id)})){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,c.Z.updatePost({postID:ed.id,labels:tg.id});case 5:if(eY(!1),!U){e.next=11;break}J(X.bI,{message:"Changed to ".concat(t.metadata.displayName)}),J(X.ap,{refresh:1}),e.next=14;break;case 11:return(0,e4.Lx)({message:"Changed to ".concat(t.metadata.displayName)}),e.next=14,(0,S.H5)(eP);case 14:case"end":return e.stop()}},e)})),[ed.id,eP,tg,ee,J,U]),nR=en({isAdminOnly:ts,onReport:nD,post:ed,level:0,onEdit:nP,onDelete:nI,onPin:nM,onUnpin:nN,onPinToModule:eQ,onUnpinFromModule:nE,onDisableComments:nS,onEnableComments:n_,self:Q,group:ee,onLinkCopy:nL,onChangeCategory:function(){return eY(!0)},isPinned:R}),nz=(0,l.useMemo)(function(){return(0,w.jsxs)(x.X,{alignItems:"center",children:[nF,(0,w.jsx)(er,{options:nR})]})},[nF,nR]),nG=(0,l.useCallback)(function(){eh(!1)},[]),nU=(0,l.useCallback)(function(e,t){var n,r=(0,E.Rr)({post:ed,oldVote:e,newVote:t}),o=(null===(n=tc[F.post.id])||void 0===n?void 0:n.up)||0;r.metadata.upvotes+=o,tu(function(e){return ng(ng({},e),{},(0,i.Z)({},F.post.id,{up:0,down:0}))}),ep(r),J(X.aK,ng(ng({},F),{},{post:r})),J(X.gQ,r)},[ed,J,tc,F]),n$=(0,l.useCallback)(function(e){var t,n,r,i=e.post,o=e.file,a=e.videoLink,s=(null==o||null===(t=o.metadata)||void 0===t?void 0:t.contentType)||"",l=(null==o||null===(n=o.metadata)||void 0===n?void 0:n.readUrl)||(null==o||null===(r=o.metadata)||void 0===r?void 0:r.srcReadUrl);eo&&"application/pdf"===s?window.open(l,"_blank"):(ex({post:i,file:o,videoLink:a}),eC(!0),J(X.Ek,function(){return{disableEscape:!0}}))},[J,eo]),nW=(0,l.useCallback)(function(){eC(!1),J(X.Ek,function(){return{disableEscape:!1}})},[J]),nq=(0,l.useCallback)(function(){eO(0),eD.current=[]},[]),nH=(0,l.useCallback)(function(){tG(!0)},[]),nV=(0,l.useCallback)(function(){ek&&nq(),tq.current.loadLastChunk(),setTimeout(function(){var e;eG(!1),null===(e=e_.current)||void 0===e||e.scrollIntoView({behavior:eo?"smooth":"instant"})},0)},[ek,e_,nq,eo]),nY=(0,l.useCallback)(function(e){tC(e);var t=!!U&&!e;J(X.MJ,t)},[J,U]),nJ=(0,l.useCallback)(function(e){e&&ek&&nq(),eG(!e)},[eG,ek,nq]),nX=(0,l.useCallback)(function(){tA(!0)},[tA]),nK=(0,l.useCallback)(function(){tW(!0)},[]),nQ=(0,l.useCallback)(function(){var e,t;null===(e=eN.current)||void 0===e||null===(e=e.getPostInputForm())||void 0===e||null===(e=e.getEditor())||void 0===e||e.clear(!1),null===(t=eN.current)||void 0===t||null===(t=t.getPostInputForm())||void 0===t||null===(t=t.getEditor())||void 0===t||t.blur(),J(X.fv,null)},[J]),n0=(0,l.useCallback)(function(){var e;null===(e=eN.current)||void 0===e||null===(e=e.getPostInputForm())||void 0===e||e.cancel()},[]),n1=(0,l.useCallback)(function(){var e;null===(e=eA.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.clear(!1),J(X.oX,null)},[J]),n2=(0,l.useCallback)(function(){var e;null===(e=eA.current)||void 0===e||e.cancel()},[]),n9=(0,l.useCallback)(function(e){var t;null==el||el.onPostUpdated(e),(0,S.cq)(eP,(0,N.P_)({groupName:ee.name,postName:F.post.name,selectedPostID:null==e||null===(t=e.post)||void 0===t?void 0:t.id})),J(X.oX,null)},[ee,J,el,F,eP]),n3=(0,l.useCallback)(function(){var e;null===(e=eN.current)||void 0===e||null===(e=e.getPostInputForm())||void 0===e||null===(e=e.getEditor())||void 0===e||e.blur(),J(X.fv,null)},[J]),n5=(0,l.useCallback)(function(){setTimeout(function(){e3(!0)},0)},[]),n4=(0,l.useCallback)(function(){setTimeout(function(){e3(!1)},0)},[]),n6=(0,l.useCallback)(function(){var e;null===(e=eA.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.focus("end"),setTimeout(function(){tr(!0)},0)},[]),n8=(0,l.useCallback)(function(){setTimeout(function(){tr(!1)},0)},[]);(0,l.useEffect)(function(){if(null!=el&&el.ready){var e;null===(e=eA.current)||void 0===e||null===(e=e.getEditor())||void 0===e||e.focus("end")}},[el]);var n7=(0,l.useMemo)(function(){var e,t,n,r,i,o,a;return eo?(0,w.jsxs)(w.Fragment,{children:[el&&(0,w.jsxs)(nl,{ref:eF,$visible:null==el?void 0:el.ready,$bottom:nb,children:[(0,w.jsxs)(nc,{children:[null!=el&&el.replyToUser?(0,w.jsxs)("div",{children:[(0,w.jsx)(y.Z,{variant:"t9",inline:!0,children:"Editing reply to"}),"\xa0",(0,w.jsxs)(y.Z,{variant:"t8",inline:!0,ellipsis:!0,children:[null==el||null===(e=el.replyToUser)||void 0===e?void 0:e.firstName," ",null==el||null===(t=el.replyToUser)||void 0===t?void 0:t.lastName]})]}):(0,w.jsx)(y.Z,{variant:"t9",inline:!0,children:"Editing comment"}),(0,w.jsx)("div",{onClick:n2,children:"Cancel"})]}),(0,w.jsx)(nu,{children:(0,w.jsx)(L.Z,{ref:eA,post:null==el?void 0:el.post,level:null==el?void 0:el.level,onPostUpdated:n9,onCancel:n1,onEditorFocus:n6,onEditorBlur:n8,group:ee,hideLabel:!0,showMeta:!1,contentPlaceholder:(null==el?void 0:el.level)>=2?"Your reply":"Your comment"},null==el||null===(n=el.post)||void 0===n?void 0:n.id)})]}),!tD&&(0,w.jsxs)(nl,{ref:eT,$visible:!(null!=el&&el.ready),$bottom:nb,children:[!!es&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(eE,{isModal:!1,self:Q,isMobile:eo,group:ee,commentItem:null==es?void 0:es.post,level:2,preview:!0,highlighted:!0}),(0,w.jsxs)(nc,{children:[(0,w.jsxs)("div",{children:[(0,w.jsx)(y.Z,{variant:"t9",inline:!0,children:"Replying to"}),"\xa0",(0,w.jsxs)(y.Z,{variant:"t8",inline:!0,ellipsis:!0,children:[null==es||null===(r=es.user)||void 0===r?void 0:r.firstName," ",null==es||null===(i=es.user)||void 0===i?void 0:i.lastName]})]}),(0,w.jsx)("div",{onClick:n0,children:"Cancel"})]})]}),(0,w.jsx)(V,{ref:eN,isModal:!1,level:es?2:1,rootPostID:ed.id,parentTree:null!==(o=null==es?void 0:es.parentTree)&&void 0!==o?o:F,replyToTree:null!==(a=null==es?void 0:es.replyToTree)&&void 0!==a?a:F,group:ee,followingPost:e$,allUsers:tp,commentUser:null==es?void 0:es.user,onSuccess:n3,onCancel:nQ,onFocus:n5,onBlur:n4})]})]}):tz&&!tD?(0,w.jsxs)(tX.s,{marginBottom:U?0:16,paddingLeft:32,paddingRight:32,children:[(0,w.jsx)(O,{typographyVariant:"t7",padding:8}),(0,w.jsx)(V,{autoFocus:!(null!=eM&&eM.current)||tE,isModal:U,level:1,rootPostID:ed.id,parentTree:F,replyToTree:F,group:ee,followingPost:e$,allUsers:tp})]}):null},[tD,eo,tE,U,F,ee,e$,tp,tz,es,el,n0,n2,n3,n9,nQ,n1,n5,n4,n6,n8,ed,Q,nb]),re=(0,l.useMemo)(function(){var e,t=!!(null!=ee&&null!==(e=ee.metadata)&&void 0!==e&&e.codeBlocks),n=(0,_.uq)({content:ed.metadata.content||"",allowCode:t});return(0,w.jsx)(K.ZP,{textVariant:"t7",marginBottom:8,value:n.blocks,showMoreLimit:G?void 0:500,showMoreDisabled:$})},[ed,ee,$,G]),rt=(0,l.useMemo)(function(){var e,t,n,r;return(0,w.jsxs)(tX.s,{children:[em?(0,w.jsx)(L.Z,{poll:t_,allUsers:tp,post:ed,level:0,confirmButtonLabel:"Save",group:ee,requireTitle:!0,requireLabel:!0,onCancel:nG,onPostUpdated:nA,contentPlaceholder:"Write something",initialLabel:to,filteredGroupLabels:nd}):(0,w.jsx)(ni,{$isSelected:eB,children:(0,w.jsxs)(tX.s,{paddingTop:eo?16:32,paddingBottom:8,paddingLeft:U?32:eo?10:32,paddingRight:U?32:eo?10:32,children:[(0,w.jsxs)(np,{children:[(0,w.jsxs)(x.X,{gap:8,flexGrow:1,children:[(0,w.jsx)(T.Z,{userPreview:!0,showLevel:!0,user:ed.user,group:ee,size:40}),(0,w.jsxs)(nm,{children:[(0,w.jsx)(e6.Z,{userPreview:!0,user:ed.user,userNameHl:ed.metadata.userNameHl,group:ee,hoverUnderline:!0,typographyVariant:"t6",showLevelTitle:!0}),(0,w.jsxs)(t5,{children:["".concat((0,e8.ur)({value:ed.createdAt,partialAgo:!0})," ").concat(tI?"(edited)":""," ").concat(eo?"•":"in"," "),(0,w.jsx)(t1,{children:(0,w.jsx)(e7.Z,{group:ee,category:null==ta?void 0:ta.id,children:"".concat(null==ta||null===(e=ta.metadata)||void 0===e?void 0:e.displayName)})})]})]})]}),!eo&&nz]}),(0,w.jsx)(te.df,{onChange:nY,children:(0,w.jsx)("div",{ref:tP,children:(0,w.jsx)(t9,{children:(0,w.jsx)(e5,{post:ed,group:ee,disableLink:!0})})})}),(0,w.jsx)(ea.x,{marginTop:8,children:re}),!!(null!=ed&&null!==(t=ed.metadata)&&void 0!==t&&t.action)&&(0,w.jsx)(ea.x,{marginTop:16,marginBottom:8,children:(0,w.jsx)(tF.Z,{completed:!!(null!=ed&&null!==(n=ed.metadata)&&void 0!==n&&n.actionCompleted)})}),nO,(0,w.jsx)(ei.Z,{post:ed,onItemClick:n$,level:0})]})}),(0,w.jsxs)(tX.s,{children:[(0,w.jsxs)(na,{alignItems:"center",paddingTop:em?16:8,paddingBottom:16,paddingLeft:U?32:eo?10:32,paddingRight:U?32:eo?10:32,gap:eo?8:16,$isSelected:eB,children:[(0,w.jsx)(e0,{post:ed,group:ee,onVoteChange:nU,newUpvotes:(null===(r=tc[F.post.id])||void 0===r?void 0:r.up)||0}),(0,w.jsxs)(x.X,{alignItems:"center",children:[(0,w.jsx)(ns,{name:"Chat",color:u.O9.n5}),(0,w.jsx)(t3,{children:f()("comments",tY,!0)})]})]}),(0,w.jsxs)(t4,{$commentsDisabled:tD,children:[(0,w.jsx)(eq,{ref:tq,isModal:U,isMobile:eo,group:ee,postTree:F,onPostDelete:nI,onCommentLinkCopy:nL,isAdminOnly:ts,onFilePreviewItemClick:n$,newVotes:tc,isGroupAdmin:tZ,rootPost:ed,followingPost:e$,allUsers:tp,selectedPostID:B,onFocusCommentInput:nX,onListEndLoaded:nH,setCommentReplyShowing:tv,isBot:G,onInitialRender:nK,setNumComments:tK}),eo&&(0,w.jsx)(O,{typographyVariant:"t9",padding:"8px 16px"}),(0,w.jsx)(te.df,{onChange:nJ}),tD&&(0,w.jsx)(t0,{children:"Comments are turned off for this post"}),n7]})]}),!em&&!th&&t$&&ez&&!e9&&!tn&&(0,w.jsx)(D,{count:ek,onClick:nV})]})},[em,t_,tp,ed,ee,nG,nA,to,nd,eB,U,eo,tI,null==ta?void 0:ta.id,null==ta||null===(j=ta.metadata)||void 0===j?void 0:j.displayName,nz,nY,re,nO,n$,nU,tc,F,tY,nI,nL,ts,tZ,e$,B,nX,nH,G,nK,nJ,n7,th,t$,ez,ek,nV,tD,e9,tn]),rn=(0,l.useMemo)(function(){var e,t;return null!==(e=null==ee||null===(t=ee.labels)||void 0===t?void 0:t.map(function(e){return{label:e.metadata.displayName,active:e.id===(null==tg?void 0:tg.id),onClick:function(){return tx(e)}}}))&&void 0!==e?e:[]},[tg,ee]),rr=(0,l.useCallback)(function(){U?eZ.current.scrollIntoView(!0):window.scrollTo(0,0)},[U]),ri=(0,l.useMemo)(function(){return eo?null:(0,w.jsxs)(t6,{paddingLeft:U?32:10,paddingRight:U?32:10,$isModal:U,$inView:tw,$containerWidth:tk,children:[(0,w.jsx)(T.Z,{user:ed.user,group:ee,size:40,showLevel:!0}),(0,w.jsx)(no,{onClick:rr,children:(0,w.jsx)(t2,{children:(0,w.jsx)(e5,{post:ed,group:ee,disableLink:!0})})}),nz]})},[ee,U,rr,ed,nz,tw,eo,tk]),ro=(0,l.useMemo)(function(){var e;return eo?tw||!(null!=ed&&null!==(e=ed.metadata)&&void 0!==e&&e.title)?{withDefaultTitle:!0,dropdownOptions:nR,searchOverride:nF}:{title:(0,w.jsx)(nv.s,{scrollOnClick:!0,children:ed.metadata.title}),dropdownOptions:nR,searchOverride:nF}:null},[eo,tw,null==ed||null===(k=ed.metadata)||void 0===k?void 0:k.title,nR,nF]);return(0,nh.l)(nh.C.POST,ro),(0,w.jsxs)("div",{ref:eZ,"data-post-id":ed.id,children:[(0,w.jsx)(t7,{$isModal:U,$borderRadius:U||eo?0:10,children:rt}),(0,w.jsx)("div",{ref:e_}),!!eg&&(0,w.jsx)(A.Z,{open:ew,post:eg.post,file:eg.file,videoLink:eg.videoLink,onClose:nW}),(0,w.jsx)(tR.T,{open:eV,header:"Change category to",confirmLabel:"Change",cancelButtonVariant:eo?"secondary":"borderless",onConfirm:nB,onClose:function(){return eY(!1)},onCancel:function(){return eY(!1)},children:(0,w.jsx)(t8,{label:null==tg||null===(I=tg.metadata)||void 0===I?void 0:I.displayName,options:rn,variant:"input",fitButton:!0})}),eK&&(0,w.jsx)(tJ,{open:!0,onClose:e1,postID:ed.id}),ri]})})},51236:function(e,t,n){n.d(t,{C:function(){return m}});var r=n(59499),i=n(4730),o=n(67294),a=n(50378),s=n(20668),l=a.ZP.div.withConfig({displayName:"styled__BadgeWrapper",componentId:"sc-tez1fz-0"})(["width:fit-content;padding:5px 8px;border-radius:4px;color:",";background-color:",";",""],function(e){return e.$color},function(e){return e.$backgroundColor},s.c.t11),c=n(14251),u=n(85893),d=["label","color","backgroundColor"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=(0,o.memo)(function(e){var t=e.label,n=e.color,r=void 0===n?c.O9.fgSuccess:n,o=e.backgroundColor,a=void 0===o?c.O9.success:o,s=(0,i.Z)(e,d);return(0,u.jsx)(l,f(f({$color:r,$backgroundColor:a},s),{},{children:t}))})},8024:function(e,t,n){n.d(t,{A:function(){return g}});var r=n(59499),i=n(4730),o=n(67294),a=n(73475),s=n(50378),l=n(20668),c=n(14251),u=(0,s.iv)(["&:hover{color:",";border:1px solid ",";background-color:",";}"],c.O9.n1,c.O9.n5,c.O9.n5),d=(0,s.iv)(["color:",";border:1px solid ",";background-color:",";",""],c.O9.n1,c.O9.n5,c.O9.n5,function(e){return!e.theme.isMobile&&u}),p=(0,s.iv)(["&:hover{color:",";border:1px solid ",";background-color:",";}"],c.O9.n1,c.O9.n5,c.O9.n5),f=s.ZP.button.withConfig({displayName:"styled__ChipWrapper",componentId:"sc-1etdral-0"})(["width:fit-content;cursor:pointer;height:40px;display:flex;justify-content:center;align-items:center;padding:0px 14px;background:",";border-radius:25px;border:1px solid ",";color:",";transition:background-color 100ms ease;"," color:",";background-color:",";border:1px solid ",";white-space:pre;> div{height:14px;width:14px;margin-left:8px;}"," ",""],c.O9.n1,c.O9.n3,c.O9.n5,l.c.t9,c.O9.n5,c.O9.n1,c.O9.n3,function(e){return!e.theme.isMobile&&p},function(e){return e.$active&&d}),m=n(85893),h=["label","onClick","active","icon"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=(0,o.memo)(function(e){var t=e.label,n=e.onClick,r=e.active,s=e.icon,l=(0,i.Z)(e,h),c=(0,o.useMemo)(function(){if(s)return(0,m.jsx)(a.J,{name:s})},[s]);return(0,m.jsxs)(f,b(b({type:"button",$active:void 0!==r&&r,onClick:n},l),{},{children:[t,c]}))})},81343:function(e,t,n){n.d(t,{i:function(){return d}});var r=n(59499),i=n(4730),o=n(67294),a=n(14251),s=n(50378).ZP.hr.withConfig({displayName:"styled__DividerElement",componentId:"sc-nw8unn-0"})(["background-color:",";border:none;display:block;height:","px;width:100%;margin:0;"],function(e){return e.$color},function(e){return e.$height}),l=n(85893),c=["color","height"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var d=(0,o.memo)(function(e){var t=e.color,n=void 0===t?a.O9.n3:t,o=e.height,d=(0,i.Z)(e,c);return(0,l.jsx)(s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({$color:n,$height:void 0===o?1:o},d))})},42470:function(e,t,n){n.d(t,{d:function(){return x}});var r=n(59499),i=n(67294),o=n(46513),a=n(88889),s=n(50378),l=n(92208),c=n(70299),u=n(14251),d=(0,s.F4)(["0%{opacity:0;}100%{opacity:0.5;}"]),p=(0,s.F4)(["0%{opacity:0.5;}100%{opacity:0;}"]),f=s.ZP.div.withConfig({displayName:"styled__DrawerWrapper",componentId:"sc-2yi78h-0"})(["position:fixed;width:100%;height:100%;top:0;left:0;pointer-events:none;z-index:1400;"]),m=s.ZP.div.withConfig({displayName:"styled__DrawerOverlay",componentId:"sc-2yi78h-1"})(["position:absolute;width:100%;height:100%;top:0;left:0;background-color:black;pointer-events:",";opacity:0;",""],function(e){return e.$open?"all":"none"},function(e){var t=e.$open,n=e.$skipAnimation,r=e.$disableAnimation;return n?null:t?(0,s.iv)(["animation:"," ","s forwards linear;"],d,r?0:.25):(0,s.iv)(["animation:"," ","s forwards linear;"],p,r?0:.25)}),h=(0,s.ZP)(l.E.div).withConfig({displayName:"styled__DrawerBody",componentId:"sc-2yi78h-2"})(["position:absolute;height:100%;max-width:",";z-index:1301;pointer-events:all;background-color:",";overflow-y:auto;border-radius:",";",""],function(e){var t=e.$width;return"".concat(t,"px")},u.O9.n1,function(e){return"left"===e.$anchor?"0 10px 10px 0":"10px 0 0 10px"},function(e){return e.theme.isLightTheme&&c.Wn}),v=n(73935),b=n(85893),g={ACTIVE:"active",INACTIVE:"inactive"},x=(0,i.memo)(function(e){var t=e.children,n=e.open,s=e.width,l=e.onClose,c=e.disableAnimation,u=e.anchor,d=void 0===u?"left":u,p=e.dragDirectionLock,x=(0,i.useState)(!0),y=x[0],w=x[1],C=(0,i.useState)(!1),j=C[0],k=C[1],O=(0,o._)(),P="left"===d;(0,a.P)(n),(0,i.useEffect)(function(){n&&w(!1),O.start(n?g.ACTIVE:g.INACTIVE)},[n,O,j]),(0,i.useEffect)(function(){k(!0)},[]);var I=(0,i.useMemo)(function(){var e;return e={},(0,r.Z)(e,g.ACTIVE,{x:0,left:P?0:"auto",right:P?"auto":0}),(0,r.Z)(e,g.INACTIVE,{left:P?-s:"auto",right:P?"auto":-s}),e},[P,s]),D=(0,i.useMemo)(function(){return{left:P?-s:0,right:P?0:s}},[P,s]),Z=(0,i.useMemo)(function(){return{type:"linear",duration:c?0:.25}},[c]),S=(0,i.useCallback)(function(e,t){var r=0===t.point.x&&0===t.point.y,i=Math.abs(t.offset.x+(P?s:-s))<s/2,o=t.velocity.x*(P?-1:1)>50;n&&!r&&(i||o)?l():O.start(n?g.ACTIVE:g.INACTIVE)},[O,P,l,n,s]);return j?(0,v.createPortal)((0,b.jsxs)(f,{children:[(0,b.jsx)(m,{$open:n,onClick:l,$skipAnimation:y,$disableAnimation:c}),(0,b.jsx)(h,{$anchor:d,$width:s,animate:O,drag:"x",dragElastic:0,dragConstraints:D,onDragEnd:S,initial:I[g.INACTIVE],variants:I,transition:Z,dragDirectionLock:void 0===p||p,children:t})]}),document.body):null})},25874:function(e,t,n){n.d(t,{F:function(){return v}});var r=n(59499),i=n(4730),o=n(67294),a=n(12967),s=n(50378),l=n(20668),c=n(14251),u=s.ZP.div.withConfig({displayName:"styled__GroupLogoWrapper",componentId:"sc-1fn54na-0"})(["background-size:cover !important;border-radius:10px;color:",";display:flex;align-items:center;justify-content:center;",";"],c.O9.n1,l.c.t4),d=n(70120),p=n(85893),f=["group","disableLink","size","newTab"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=(0,o.memo)(function(e){var t=e.group,n=e.disableLink,r=e.size,s=void 0===r?40:r,l=e.newTab,c=(0,i.Z)(e,f),m=(0,o.useMemo)(function(){var e,r,i,o=null==t||null===(e=t.metadata)||void 0===e?void 0:e.logoUrl,l=null==t||null===(r=t.metadata)||void 0===r?void 0:r.color,d={width:s,height:s,color:(0,a.zP)(l),background:o?"url(".concat(o,")"):l},f=n?c:{};return(0,p.jsx)(u,h(h({style:d},f),{},{children:o?"":null==t||null===(i=t.metadata)||void 0===i?void 0:i.initials}))},[t,s,c,n]);return n?m:(0,p.jsx)(d.r,h(h({},c),{},{href:"/".concat(null==t?void 0:t.name),newTab:l,children:m}))})},65856:function(e,t,n){n.d(t,{D:function(){return h}});var r=n(59499),i=n(4730),o=n(67294),a=n(50378),s=n(20668),l=function(e){var t=e.$mobileTypography,n=e.$desktopTypography,r=e.theme;return(0,a.iv)(["",""],s.c[r.isMobile?t:n])},c=a.ZP.span.withConfig({displayName:"styled__GroupNameWrapper",componentId:"sc-dph3q3-0"})(["",""],function(e){return l(e)}),u=n(70120),d=n(85893),p=["group","disableLink","mobileTypography","desktopTypography"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,o.memo)(function(e){var t=e.group,n=e.disableLink,r=e.mobileTypography,a=void 0===r?"t6":r,s=e.desktopTypography,l=void 0===s?"t4":s,f=(0,i.Z)(e,p),h=(0,o.useMemo)(function(){var e;return(0,d.jsx)(c,{$mobileTypography:a,$desktopTypography:l,children:null==t||null===(e=t.metadata)||void 0===e?void 0:e.displayName})},[t,a,l]);return n?h:(0,d.jsx)(u.r,m(m({},f),{},{href:"/".concat(null==t?void 0:t.name),children:h}))})},65009:function(e,t,n){n.d(t,{X:function(){return o}});var r=n(50378),i=n(86031),o=(0,r.ZP)(i.x).withConfig({displayName:"Row",componentId:"sc-w8j4n-0"})(["flex-direction:row;"])},28506:function(e,t,n){n.d(t,{Y:function(){return O}});var r=n(59499),i=n(4730),o=n(73793),a=n(67294),s=n(73475),l=n(50378),c=n(20668),u=n(14251),d={square:(0,l.iv)(["background-color:",";"],function(e){var t=e.$disabled;return u.O9[t?"n5":"sd1"]}),circle:(0,l.iv)(["> div{background-color:",";}"],function(e){var t=e.$disabled;return u.O9[t?"n5":"sd1"]})},p=(0,l.iv)(["border:2px solid ",";",""],function(e){var t=e.$disabled;return u.O9[t?"n5":"sd1"]},function(e){return d[e.$variant]}),f=(0,l.iv)(["border-radius:50%;> div{height:","px;width:","px;border-radius:50%;}"],function(e){return e.$size/2},function(e){return e.$size/2}),m={square:(0,l.iv)(["border-radius:4px;> div{height:100%;color:",";}&:hover{> div{color:",";}}"],function(e){return e.$active?u.O9.n1:"transparent"},u.O9.n1),circle:f},h=l.ZP.div.withConfig({displayName:"styled__SelectionItem",componentId:"sc-18j6pxp-0"})(["background-color:transparent;height:","px;width:","px;border:2px solid ",";display:flex;justify-content:center;align-items:center;flex-shrink:0;"," ",""],function(e){return e.$size},function(e){return e.$size},u.O9.n5,function(e){return m[e.$variant]},function(e){return e.$active&&p}),v=(0,l.iv)(["cursor:default;"]),b=(0,l.iv)(["&:hover{","{border:2px solid ",";> div{border-radius:2px;background-color:",";}}}"],h,function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]},function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]}),g=(0,l.iv)(["&:hover{","{border:2px solid ",";> div{background-color:",";color:",";}}}",""],h,function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]},function(e){var t=e.$active;return u.O9[t?"sd1":"n4"]},u.O9.n1,function(e){return"square"===e.$variant&&b}),x=(0,l.iv)(["width:100%;> span{flex:1;",";}"],c.c.ellipsis),y=l.ZP.button.withConfig({displayName:"styled__SelectionWrapper",componentId:"sc-18j6pxp-1"})(["background:none;border:none;padding:0px;width:fit-content;cursor:pointer;display:flex;align-items:",";-webkit-tap-highlight-color:transparent;text-align:left;> span{margin-left:8px;color:",";",";}"," ",""],function(e){return e.$alignItems},u.O9.n7,c.c.t7,function(e){return e.$ellipsis&&x},function(e){var t=e.disabled,n=e.theme;return t?v:!n.isMobile&&g}),w=n(85893),C=["size","label","active","variant","onClick","disabled","alignItems","ellipsis"];function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O=(0,a.memo)(function(e){var t=e.size,n=e.label,r=e.active,l=e.variant,c=void 0===l?"circle":l,u=e.onClick,d=e.disabled,p=e.alignItems,f=e.ellipsis,m=(0,i.Z)(e,C),v=(0,o.bI)("isMobile").isMobile,b=(0,a.useCallback)(function(e){!d&&u&&u(e)},[d,u]),g=(0,a.useMemo)(function(){return"circle"===c?(0,w.jsx)("div",{}):(0,w.jsx)(s.J,{name:"Done"})},[c]);return(0,w.jsxs)(y,k(k({type:"button",$active:r,$variant:c,disabled:d,$ellipsis:void 0!==f&&f,$alignItems:void 0===p?"flex-start":p,onClick:v?void 0:b},m),{},{children:[(0,w.jsx)(h,{$size:void 0===t?24:t,$active:r,$variant:c,$disabled:d,onClick:v?b:void 0,children:g}),n&&(0,w.jsx)("span",{children:n})]}))})},80814:function(e,t,n){n.d(t,{O:function(){return k}});var r=n(59499),i=n(4730),o=n(67294),a=n(50378),s=n(20668),l=n(14251),c=n(70120),u=(0,a.iv)(["color:",';&:after{content:"";position:absolute;bottom:0px;left:0px;height:4px;background:',";width:100%;}"],l.O9.n7,l.O9.n7),d=(0,a.iv)(["pointer-events:none;opacity:0.5;"]),p=(0,a.iv)(["&:hover{color:",";}"],l.O9.n7),f=(0,a.iv)(["height:100%;padding:16px 0px;position:relative;color:",";white-space:nowrap;"," "," "," ",""],l.O9.n5,s.c.t6,function(e){return!e.theme.isMobile&&p},function(e){return e.$active&&u},function(e){return e.disabled&&d}),m=(0,a.iv)(["background:",";color:",";&:hover{background:",";}"],l.O9.p2,l.O9.fgPrimary,l.O9.p2),h=(0,a.iv)(["pointer-events:none;opacity:0.33;"]),v={horizontal:f,vertical:(0,a.iv)(["display:flex;align-items:center;width:100%;height:48px;border-radius:10px;padding:0px 16px;cursor:pointer;color:",";"," transition:background 300ms ease;&:hover{background:",";}"," ",""],l.O9.n7,s.c.t5,l.O9.n3,function(e){return e.$active&&m},function(e){return e.disabled&&h})},b=a.ZP.button.withConfig({displayName:"styled__TabWrapper",componentId:"sc-waplv7-0"})(["display:flex;background:none;border:none;cursor:pointer;letter-spacing:0.4px;",""],function(e){return v[e.$variant]}),g=(0,a.ZP)(c.r).withConfig({displayName:"styled__TabLinkWrapper",componentId:"sc-waplv7-1"})(["",""],function(e){return v[e.$variant]}),x=n(85893),y=["id","label","href","onClick","active","disabled","variant","dataTestId"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=(0,o.forwardRef)(function(e,t){var n=e.id,r=e.label,a=e.href,s=e.onClick,l=e.active,c=e.disabled,u=e.variant,d=void 0===u?"horizontal":u,p=e.dataTestId,f=(0,i.Z)(e,y),m=(0,o.useCallback)(function(e){null==s||s(e,n)},[s,n]),h=(0,o.useMemo)(function(){return{$active:l,$variant:d,"data-testid":p,onClick:m,ref:t}},[l,d,p,m,t]);return a?(0,x.jsx)(g,C(C(C({href:a},h),f),{},{children:r})):(0,x.jsx)(b,C(C(C({disabled:c},h),f),{},{children:r}))}),k=(0,o.memo)(j)},22441:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(59499),i=n(4730),o=n(67294),a=n(14251),s=n(51236),l=n(50378),c=n(20668),u=n(92208),d=(0,l.iv)(["color:",";"],a.O9.s2),p=(0,l.iv)(["color:",";"],a.O9.n5),f=l.ZP.button.withConfig({displayName:"styled__ToggleWrapper",componentId:"sc-143j1zq-0"})(["background:none;border:none;padding:0px;cursor:",";display:flex;gap:16px;"," transition:color 300ms ease;> span{","}"],function(e){return e.disabled?"default":"pointer"},function(e){return e.$active?d:p},c.c.t5),m=l.ZP.div.withConfig({displayName:"styled__SwitchWrapper",componentId:"sc-143j1zq-1"})(["height:26px;width:52px;position:relative;"]),h=(0,l.iv)(["background-color:",";"],a.O9.s4),v=(0,l.iv)(["background-color:",";"],a.O9.n3),b=l.ZP.div.withConfig({displayName:"styled__SwitchTrack",componentId:"sc-143j1zq-2"})(["height:20px;width:44px;position:absolute;left:3px;top:3px;border-radius:34px;transition:background-color 300ms ease;",""],function(e){return e.$active?h:v}),g=(0,l.iv)(["right:0px;background-color:",";"],a.O9.s2),x=(0,l.iv)(["left:0px;background-color:",";"],a.O9.n5),y=(0,l.ZP)(u.E.div).withConfig({displayName:"styled__SwitchCircle",componentId:"sc-143j1zq-3"})(["height:26px;width:26px;border-radius:50%;position:absolute;top:0px;transition:background-color 300ms ease;",""],function(e){return e.$active?g:x}),w=l.ZP.div.withConfig({displayName:"styled__BadgeToggle",componentId:"sc-143j1zq-4"})(["cursor:pointer;"]),C=n(85893),j=["label","active","onClick","disabled","disableAnimation","variant","labelWidth"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var P={type:"spring",stiffness:700,damping:30},I=(0,o.memo)(function(e){var t=e.label,n=e.active,r=e.onClick,l=e.disabled,c=e.disableAnimation,u=e.variant,d=e.labelWidth,p=(0,i.Z)(e,j),h=(0,o.useCallback)(function(){!l&&r&&r()},[l,r]);return"badge"===(void 0===u?"switch":u)?(0,C.jsx)(w,O(O({onClick:h},p),{},{children:(0,C.jsx)(s.C,{label:t,backgroundColor:a.O9[n?"s2":"n5"]})})):(0,C.jsxs)(f,O(O({type:"button",onClick:h,disabled:l,$active:n},p),{},{children:[t&&(0,C.jsx)("span",{style:{width:void 0===d?"fit-content":d},children:t}),(0,C.jsxs)(m,{children:[(0,C.jsx)(b,{$active:n}),(0,C.jsx)(y,{layout:!c,$active:n,transition:P})]})]}))})},80199:function(e,t,n){n.d(t,{v:function(){return y}});var r=n(59499),i=n(4730),o=n(73793),a=n(41664),s=n.n(a),l=n(67294),c=n(50378),u=n(20668),d=n(14251),p={name:(0,c.iv)(["color:",";"],d.O9.n7),handle:(0,c.iv)(["color:",";"],d.O9.n5)},f=(0,c.iv)([""," text-decoration:none;width:fit-content;"," ",""],function(e){var t=e.$nameTypography;return u.c[t]},function(e){return p[e.$variant]},function(e){return e.$truncate&&u.c.ellipsis}),m=c.ZP.span.withConfig({displayName:"styled__UserNameWrapper",componentId:"sc-daaao-0"})(["",""],f),h=c.ZP.a.withConfig({displayName:"styled__UserNameLink",componentId:"sc-daaao-1"})(["",""],f),v=n(85893),b=["typography","variant","noLink","newTab","user","truncate"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=(0,l.memo)(function(e){var t=e.typography,n=void 0===t?"t6":t,r=e.variant,a=void 0===r?"name":r,l=e.noLink,c=e.newTab,u=e.user,d=e.truncate,p=void 0!==d&&d,f=(0,i.Z)(e,b),g=(0,o.bI)("currentGroup").currentGroup,y=u.firstName,w=u.lastName,C=u.name,j="name"===a?"".concat(y," ").concat(w):"@".concat(C);return void 0!==l&&l?(0,v.jsx)(m,x(x({$nameTypography:n,$variant:a,$truncate:p},f),{},{children:j})):(0,v.jsx)(s(),{passHref:!0,href:"/@".concat(C).concat(g?"?g=".concat(g.name):""),legacyBehavior:!0,children:(0,v.jsx)(h,x(x({target:void 0!==c&&c?"_blank":void 0,$nameTypography:n,$variant:a,$truncate:p},f),{},{children:j}))})})},13656:function(e,t,n){n.d(t,{v:function(){return g}});var r=n(59499),i=n(4730),o=n(67294),a=n(50378),s=n(14251),l=(0,a.iv)(["> button{right:6px;height:40px;width:90px;top:","px;}> div{input{padding:0px 14px;}}.copy-btn{","}"],function(e){return e.$hasLabel?12:6},function(e){return e.theme.isMobile&&"width: 90px;"}),c=a.ZP.div.withConfig({displayName:"styled__CopyTextboxWrapper",componentId:"sc-1omnt19-0"})(["width:100%;display:flex;align-items:center;color:",";position:relative;overflow:hidden;box-sizing:border-box;height:",";> div{width:100%;input{padding:0px 18px 0px 14px;}}> button{position:absolute;right:12px;height:48px;top:",";}",""],s.O9.n7,function(e){return e.$hasLabel?"62px":"52px"},function(e){return e.$hasLabel?7:2},function(e){return e.theme.isMobile&&l}),u=(0,a.iv)(["right:4px;"]),d=a.ZP.div.withConfig({displayName:"styled__EyeIconWrapper",componentId:"sc-1omnt19-1"})(["display:flex;align-items:center;position:absolute;right:14px;gap:8px;width:auto !important;background:",";padding-left:8px;",""],s.O9.n1,function(e){return e.theme.isMobile&&u}),p=n(47691),f=n(59607),m=n(85893),h=["value","label","isHiddenValue"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g=(0,o.memo)(function(e){var t=e.value,n=e.label,r=e.isHiddenValue,a=(0,i.Z)(e,h),s=(0,o.useState)(!1),l=s[0],u=s[1],v=(0,o.useState)(r),g=v[0],x=v[1],y=(0,o.useCallback)(function(){navigator.clipboard.writeText(t),u(!0),setTimeout(function(){u(!1)},1e3)},[t]),w=(0,o.useMemo)(function(){return(0,m.jsx)(f.z,{className:"copy-btn",label:l?"Copied":"Copy",onClick:y})},[y,l]);return(0,m.jsxs)(c,b(b({$hasLabel:n},a),{},{children:[(0,m.jsx)(p.I,{label:n,value:t,readOnly:!0,type:g?"password":"text"}),r&&(0,m.jsxs)(d,{children:[(0,m.jsx)(f.z,{variant:"icon-borderless",icon:g?"Eye":"EyeDisabled",onClick:function(){x(!g)}}),w]}),!r&&w]}))})},12476:function(e,t,n){n.d(t,{h_:function(){return em}});var r=n(59499),i=n(17674),o=n(4730),a=n(67294),s=n(37894),l=n(70299),c=n(73475),u=n(70120),d=n(66703),p=n(12967),f=n(50378),m=n(92208),h=n(20668),v=n(14251),b=n(66409),g=(0,f.iv)(["*{outline:none;}"]),x=f.ZP.div.withConfig({displayName:"styled__DropdownWrapper",componentId:"sc-13jov82-0"})(["width:fit-content;max-width:100%;cursor:pointer;height:",";",""],function(e){var t=e.$variant;return t.startsWith("input")?"52px":"custom"===t?"auto":"40px"},function(e){return"input-floating-label"===e.$variant&&g}),y=(0,f.iv)(["padding:0px;"]),w=(0,f.iv)(["max-height:","px;overflow:auto;"],function(e){return e.$maxDropdownHeight}),C=(0,f.iv)(["padding-top:0px;"]),j=(0,f.ZP)(m.E.div).withConfig({displayName:"styled__DropdownContent",componentId:"sc-13jov82-1"})(["display:flex;flex-direction:column;border-radius:10px;background-color:",";"," "," "," "," ",""],v.O9.n1,l.Wn,function(e){return e.$maxDropdownHeight&&w},function(e){var t=e.width;return t&&"width: ".concat(t,"px;")},function(e){return e.$customContent&&y},function(e){return e.$dropdownTitle&&C}),k=(0,f.iv)(["opacity:0.33;pointer-events:none;"]),O=(0,f.iv)(["background-color:",";color:",";pointer-events:none;"],v.O9.p2,v.O9.fgPrimary),P=(0,f.iv)(["opacity:0.33;"]),I=(0,f.iv)(["background-color:",";"],v.O9.n3),D=(0,f.iv)(["border:none;text-align:left;transition:background-color 100ms ease;background-color:",";color:",";padding:14px 15px;min-width:186px;cursor:pointer;"," display:flex;align-items:center;&:hover{","}"," "," "," ",""],v.O9.n1,v.O9.n7,h.c.t5,function(e){return!e.$disableHighlight&&"background-color: ".concat(v.O9.n3,";")},function(e){return e.$highlighted&&I},function(e){return e.$active&&O},function(e){return e.$disabled&&k},function(e){return e.$deemphasize&&P}),Z=f.ZP.div.withConfig({displayName:"styled__DropdownItem",componentId:"sc-13jov82-2"})(["",""],D),S=f.ZP.label.withConfig({displayName:"styled__DropdownItemLabel",componentId:"sc-13jov82-3"})(["",""],D),_=f.ZP.div.withConfig({displayName:"styled__DropdownItemDivider",componentId:"sc-13jov82-4"})(["> div{width:100%;height:1px;background-color:",";}"],v.O9.n3),M=(0,f.iv)(["color:",";background-color:",";border:1px solid ",";"],v.O9.n7,v.O9.n1,v.O9.n3),N=(0,f.iv)(["background-color:",";color:",";"],v.O9.n3,v.O9.n7),E=(0,f.iv)(["border:none;background-color:",";height:48px;max-height:100%;padding:0px 16px;border-radius:33px;cursor:pointer;display:flex;align-items:center;color:",";"," border:1px solid transparent;box-sizing:border-box;&:hover{background-color:",";color:",";}"," ",""],v.O9.n1,v.O9.n5,h.c.t11,v.O9.n3,v.O9.n7,function(e){return e.$active&&M},function(e){return e.$dropdownVisible&&N}),A=(0,f.iv)([""," border:1px solid ",";"," &:hover{background-color:",";}"],E,v.O9.n3,h.c.t10,function(e){var t=e.$active,n=e.$dropdownVisible;return v.O9[t||n?"n3":"n1"]}),L=(0,f.iv)(["height:40px;width:32px;padding:6px;"]),T=(0,f.iv)(["&:focus{background:",";color:",";}"],v.O9.n3,v.O9.n7),F=(0,f.iv)(["&:hover{background:",";color:",";}"],v.O9.n3,v.O9.n7),B=(0,f.iv)(["height:48px;width:48px;padding:12px;border:1px solid ",";display:flex;align-items:center;background:",";color:",";border-radius:4px;cursor:pointer;"," "," ",""],v.O9.n3,v.O9.n1,v.O9.n5,function(e){var t=e.theme,n=e.$variant;return(!t.isMobile||"icon-borderless"!==n)&&F},function(e){return!e.theme.isMobile&&T},function(e){return e.theme.isMobile&&L}),R=(0,f.iv)(["border:2px solid ",";"],v.O9.n7),z=f.ZP.fieldset.withConfig({displayName:"styled__InputFloatingLabelBorder",componentId:"sc-13jov82-5"})(["box-sizing:border-box;position:absolute;top:-5px !important;left:0px !important;right:0px !important;bottom:0px !important;padding:0px 8px;height:calc(100% + 5px);pointer-events:none;min-width:0%;border-radius:4px;overflow:hidden;border:1px solid ",";margin:0px;> legend{text-align:left;height:11px;max-width:100%;padding:0px;> span{padding:0px 5px;visibility:hidden;","}}"],v.O9.n3,h.c.t11),G=(0,f.iv)(["color:",";"],v.O9.n7),U=f.ZP.label.withConfig({displayName:"styled__InputFloatingLabel",componentId:"sc-13jov82-6"})(["position:absolute;pointer-events:none;color:",";"," transform-origin:0 0;transform:translateY(-24px) scale(0.8125);"],v.O9.n5,h.c.t7),$=(0,f.iv)(["color:",";svg{color:",";}"],v.O9.n7,v.O9.n5),W=(0,f.iv)(["position:relative;background:",";border:none;height:52px;padding:0px 14px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;color:",";"," svg{color:",";}&:hover{color:",";svg{color:",";}}&:focus{color:",";svg{color:",";}","{","}","{","}}",""],v.O9.n1,v.O9.n7,h.c.t7,v.O9.n5,v.O9.n7,v.O9.n7,v.O9.n7,v.O9.n7,z,R,U,G,function(e){return e.$active&&$}),q=(0,f.iv)(["color:",";svg{color:",";}"],v.O9.n7,v.O9.n5),H=(0,f.iv)(["background:",";border:1px solid ",";height:52px;padding:0px 14px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;color:",";"," "," svg{color:",";}&:hover{color:",";svg{color:",";}}&:focus{border:2px solid ",";padding:0px 13px;color:",";svg{color:",";}}",""],v.O9.n1,v.O9.n3,v.O9.n5,h.c.t7,h.c.ellipsis,v.O9.n5,v.O9.n7,v.O9.n7,v.O9.n7,v.O9.n7,v.O9.n7,function(e){return e.$active&&q}),V=(0,f.iv)([""," width:40px;height:40px;border-radius:50%;padding:10px;"],B),Y=(0,f.iv)([""," width:40px;height:40px;background:transparent;border:none;border-radius:50%;padding:10px;",""],B,function(e){return e.$dropdownVisible&&N}),J=(0,f.ZP)(c.J).withConfig({displayName:"styled__LabelIcon",componentId:"sc-13jov82-7"})(["height:22px;width:22px;margin-right:8px;"]),X=(0,f.ZP)(c.J).withConfig({displayName:"styled__DropdownItemIcon",componentId:"sc-13jov82-8"})(["height:16px;width:16px;margin-right:12px;"]),K={borderless:E,outlined:A,icon:B,input:H,"input-floating-label":W,"icon-round":V,"icon-borderless":Y},Q=f.ZP.button.withConfig({displayName:"styled__DropdownButton",componentId:"sc-13jov82-9"})(["max-width:100%;",""],function(e){return K[e.$variant]}),ee=f.ZP.div.withConfig({displayName:"styled__DropdownTitleHeader",componentId:"sc-13jov82-10"})(["padding:14px 16px;border-bottom:1px solid ",";"," ",""],v.O9.n3,h.c.t5,h.c.ellipsis),et=(0,f.ZP)(b.ZP).withConfig({displayName:"styled__DropdownBackground",componentId:"sc-13jov82-11"})(["width:100%;position:fixed;top:0px;left:0px;z-index:1400;"]),en=n(20338),er=n(54361),ei=n(73935),eo=n(88889),ea=n(85893),es=["children","placement","options","variant","icon","label","inputLabel","onClick","onShow","onHide","customContent","active","xOffset","yOffset","fitButton","noAnimation","maxDropdownHeight","labelIcon","dropdownTitle","contentPadding","contentWidth","contentHeight","tooltip","onClose","shouldFlip","backgroundDisabled","flipDisabled","scrollToActive","blockPageScroll"],el=["label","onClick","active","disabled","link","newTab","type","confirmAction","htmlFor","testId","icon","deemphasize","disableHighlight","keepOpenOnClick","dividerStyle"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ed=["Enter","ArrowUp","ArrowDown"],ep=(0,p.s$)()?a.useEffect:a.useLayoutEffect,ef=(0,a.forwardRef)(function(e,t){var n,r=e.children,p=e.placement,f=e.options,m=void 0===f?[]:f,h=e.variant,v=void 0===h?"outlined":h,b=e.icon,g=e.label,y=e.inputLabel,w=e.onClick,C=e.onShow,k=e.onHide,O=e.customContent,P=e.active,I=e.xOffset,D=e.yOffset,M=void 0===D?4:D,N=e.fitButton,E=void 0!==N&&N,A=e.noAnimation,L=e.maxDropdownHeight,T=e.labelIcon,F=e.dropdownTitle,B=e.contentPadding,R=void 0===B?"16px 0px":B,G=e.contentWidth,$=e.contentHeight,W=e.tooltip,q=e.onClose,H=e.shouldFlip,V=e.backgroundDisabled,Y=e.flipDisabled,K=e.scrollToActive,ec=e.blockPageScroll,ef=(0,o.Z)(e,es),em=(0,a.useState)(!1),eh=em[0],ev=em[1],eb=(0,a.useState)(null),eg=eb[0],ex=eb[1],ey=(0,a.useState)(null),ew=ey[0],eC=ey[1],ej=(0,er.C1)(),ek=(0,i.Z)(ej,3),eO=ek[0],eP=ek[1],eI=ek[2],eD=(0,a.useState)(null),eZ=eD[0],eS=eD[1],e_=(0,a.useRef)(null),eM=(0,a.useRef)(null),eN=(0,a.useRef)(null),eE=(0,a.useRef)(null),eA=(0,a.useRef)(!1),eL=(0,a.useRef)(null),eT=(0,a.useState)(null),eF=eT[0],eB=eT[1],eR=(0,a.useState)(!1),ez=eR[0],eG=eR[1];(0,eo.P)(eh&&(void 0===ec||ec));var eU=(0,a.useCallback)(function(){ev(!0),null==C||C()},[C]),e$=(0,a.useCallback)(function(){ev(!1),null==k||k()},[k]),eW=(0,a.useCallback)(function(){eO||(null==q||q(),e$())},[eO,q,e$]);(0,a.useImperativeHandle)(t,function(){return{openDropdown:function(){eU()},closeDropdown:function(){eW()},getNavigatedOption:function(){return eF}}}),ep(function(){if(!eA.current){eA.current=!0;return}},[]);var eq=(0,a.useCallback)(function(e){if(eh&&ed.includes(e.key)){if("Enter"===e.key){var t;document.activeElement===eN.current&&(null==e||e.preventDefault()),null==eF||null===(t=eF.onClick)||void 0===t||t.call(eF);return}null==e||e.preventDefault();var n=function(e,t,n){if(!e||!t&&n)return null;n&&(e=e.slice().reverse());for(var r=t?e.indexOf(t)+1:0,i=r;i<e.length;i++){var o=e[i];if(o.canArrowNavigate)return o}return null}(m,eF,"ArrowUp"===e.key);n&&eB(n)}},[eh,m,eF]);(0,a.useEffect)(function(){return document.addEventListener("keydown",eq),function(){document.removeEventListener("keydown",eq)}},[eq]),ep(function(){if(K&&eh){var e,t,n=(null==eL||null===(e=eL.current)||void 0===e?void 0:e.offsetTop)-eZ/2+(null==eL||null===(t=eL.current)||void 0===t?void 0:t.offsetHeight)/2;eM.current.scrollTo(0,n||0)}},[K,eh,m,eZ]),(0,a.useEffect)(function(){var e,t,n=null!==(e=null==m?void 0:m.indexOf(eF))&&void 0!==e?e:-1;if(!eh||-1===n){eB(null);return}var r=null===(t=eM.current)||void 0===t?void 0:t.querySelector(".skool-ui-dropdown-option-".concat(n));if(r&&eM.current){var i=r.offsetTop,o=r.offsetHeight,a=eM.current,s=a.scrollTop,l=a.offsetHeight;i<s?eM.current.scrollTo(0,i):i+o>s+l&&eM.current.scrollTo(0,i+o-l)}},[eh,m,eF]),(0,a.useEffect)(function(){if(K){var e,t=null!==(e=null==m?void 0:m.findIndex(function(e){return e.active}))&&void 0!==e?e:-1;eB(eh&&-1!==t?m[t]:null)}},[K,m,eh]);var eH=(0,s.D)(e_.current,eE.current,{strategy:"fixed",placement:ez?"top":void 0===p?"bottom-end":p,transformOrigin:{vertical:20,horizontal:"right"},modifiers:[{name:"arrow",options:{element:eg}},{name:"offset",options:{offset:[void 0===I?0:I,M]}},{name:"flip",enabled:!(void 0!==Y&&Y)}]}),eV=eH.styles,eY=eH.attributes,eJ=null==eY||null===(n=eY.popper)||void 0===n?void 0:n["data-popper-placement"],eX=(0,a.useCallback)(function(){if(eE.current&&eh){var e=eE.current.getBoundingClientRect(),t=e.top,n=e.height,r=window.innerHeight-t;eG(t+n>window.innerHeight&&t>r)}},[eh]);ep(function(){if(H)return eX(),window.addEventListener("resize",eX),function(){window.removeEventListener("resize",eX)}},[eX]),ep(function(){var e,t=null===(e=eN.current)||void 0===e?void 0:e.getBoundingClientRect();if(eC(null==t?void 0:t.width),!eh||!t||!eJ||L){eS(null);return}eJ.startsWith("top")?eS(Math.max(t.top-M-8,100)):eJ.startsWith("bottom")?eS(Math.max(window.innerHeight-t.top-t.height-M-8,100)):eS(null)},[eh,eJ,M,L]);var eK=(0,a.useCallback)(function(e){null==e||e.preventDefault()},[]),eQ=(0,a.useCallback)(function(e){null==w||w(e),ev(!eh),eh?e$():eU()},[e$,eU,w,eh]),e0=(0,a.useCallback)(function(){eI(),e$()},[eI,e$]),e1=(0,a.useCallback)(function(e,t){var n=e.label,r=e.onClick,i=e.active,a=e.disabled,s=e.link,l=e.newTab,c=e.type,d=e.confirmAction,p=e.htmlFor,f=e.testId,m=e.icon,h=e.deemphasize,v=e.disableHighlight,b=e.keepOpenOnClick,g=e.dividerStyle,x=(0,o.Z)(e,el),y=function(){if(!a&&!i){if(null==r||r(),b){var e;null===(e=eN.current)||void 0===e||e.focus()}else p?setTimeout(function(){e$()},0):e$()}};if("divider"===c)return(0,ea.jsx)(_,{style:g,children:(0,ea.jsx)("div",{})},t);var w={key:t,$active:i,$disabled:a,className:"skool-ui-dropdown-option skool-ui-dropdown-option-".concat(t),tabIndex:-1,$deemphasize:h,"data-testid":f||"dropdown-item-".concat(t)};if(p)return(0,ea.jsx)(S,eu(eu(eu({},x),w),{},{htmlFor:p,onClick:y,children:n}));var C=(0,ea.jsxs)(Z,eu(eu(eu({},x),w),{},{onClick:d?void 0:y,onMouseDown:eK,$disableHighlight:v,$highlighted:e===eF,ref:i?eL:void 0,children:[m&&(0,ea.jsx)(X,{name:m}),n]}));return d?(0,ea.jsx)(en.s,eu(eu({onConfirm:y,onOpen:eP,onClose:e0,disabled:a,triggerStyles:{width:"100%"}},d),{},{children:C}),t):s?(0,ea.jsx)(u.r,{href:s,newTab:l,children:C},t):C},[e0,eP,eF,eK,e$]),e2=(0,a.useMemo)(function(){return O||m.map(e1)},[m,O,e1]),e9=(0,a.useMemo)(function(){if(r){var e=(0,ea.jsx)("div",{ref:eN,children:(0,a.cloneElement)(r,{active:r.props.active||eh})});return W?(0,ea.jsx)(d.u,eu(eu({hidden:eh},W),{},{children:e})):e}var t=!v.includes("icon"),n=b?(0,ea.jsx)(c.J,{name:b,style:{padding:2}}):null,i=v.startsWith("input"),o="input-floating-label"===v,s=i?12:10,l={height:s,width:s,flexShrink:0};i?l.margin="0 12px":l.marginLeft=12,t&&(n=(0,ea.jsx)(c.J,{style:l,name:eh?i?"ArrowUp":"DropUp":i?"ArrowDown":"DropDown"}));var u=(0,ea.jsxs)(Q,{type:"button",$variant:v,$dropdownVisible:eh,$active:P,ref:eN,children:[T&&(0,ea.jsx)(J,{name:T}),t&&g,n,o&&(0,ea.jsxs)(ea.Fragment,{children:[(0,ea.jsx)(z,{children:(0,ea.jsx)("legend",{children:(0,ea.jsx)("span",{children:y})})}),(0,ea.jsx)(U,{children:y})]})]});return W?(0,ea.jsx)(d.u,eu(eu({hidden:eh},W),{},{children:u})):u},[v,b,eh,g,y,T,P,W,r]),e3=(0,a.useMemo)(function(){return A?{}:l.X7},[A]),e5=(0,a.useMemo)(function(){return F?(0,ea.jsx)(ee,{children:F}):null},[F]),e4=(0,a.useCallback)(function(e){null==e||e.stopPropagation()},[]),e6=(0,a.useMemo)(function(){return(0,ea.jsx)("div",eu(eu({ref:eE,style:eu(eu({},eV.popper),{},{zIndex:1401}),onClick:e4},eY.popper),{},{children:(0,ea.jsxs)(j,eu(eu({ref:eM,tabIndex:-1,width:E&&ew?ew:void 0,$dropdownTitle:F,$customContent:!!O,$maxDropdownHeight:null!=L?L:eZ,style:{padding:R,width:G,height:$}},e3),{},{children:[(0,ea.jsx)("div",{ref:ex}),e5,e2]}))}))},[eV,eY,E,ew,F,O,L,eZ,R,G,$,e3,e5,e2,e4]),e8=(0,a.useMemo)(function(){return V?e6:(0,ea.jsx)(et,{onClick:eW,children:e6})},[e6,V,eW]);return(0,ea.jsxs)("div",{children:[(0,ea.jsx)(x,eu(eu({ref:e_,onClick:eQ,$variant:v},ef),{},{children:e9})),eh?(0,ei.createPortal)(e8,document.body):null]})}),em=(0,a.memo)(ef)},320:function(e,t,n){n.d(t,{a:function(){return p}});var r=n(67294),i=n(64727),o=n(50378),a=n(14251),s=n(73475),l={pdf:"#ea4335",excel:"#489B5F",text:"#5284ED",ppt:"#E76D2D",audio:"#DD4CDF",generic:a.O9.n5},c=(0,o.ZP)(s.J).withConfig({displayName:"styled__FileIconWrapper",componentId:"sc-18fkhof-0"})([""," "," svg{","}"],function(e){var t,n=e.$type;return"color: ".concat(null!==(t=l[n])&&void 0!==t?t:l.generic,";")},function(e){var t=e.size;return t&&"width: ".concat(t,"px; height: ").concat(t,"px;")},function(e){var t=e.size;return t&&"width: ".concat(t,"px; height: ").concat(t,"px;")}),u=n(85893),d={pdf:"FilePDF",excel:"FileExcel",text:"FileText",ppt:"FilePPT",audio:"FileAudio",generic:"FileGeneric"},p=(0,r.memo)(function(e){var t,n=e.fileName,r=void 0===n?"":n,o=e.contentType,a=e.size,s=r.lastIndexOf("."),l=s>=0?r.slice(s):"",p=(0,i.F5)({ext:l,contentType:void 0===o?"":o}),f=null!==(t=d[null==p?void 0:p.iconName])&&void 0!==t?t:d.generic;return(0,u.jsx)(c,{name:f,$type:null==p?void 0:p.iconName,size:a})})},22063:function(e,t,n){n.d(t,{L:function(){return j}});var r=n(59499),i=n(90116),o=n(4730),a=n(67294),s=n(73793),l=n(50378),c=n(20668),u=l.ZP.div.withConfig({displayName:"styled__ResourceItemWrapper",componentId:"sc-1s2ax87-0"})(["padding:16px 0px;display:flex;gap:12px;align-items:flex-start;width:100%;"]),d=l.ZP.div.withConfig({displayName:"styled__ResourceItemLeft",componentId:"sc-1s2ax87-1"})(["display:flex;flex-direction:column;gap:4px;flex:1;width:calc(100% - 190px);"]),p=l.ZP.div.withConfig({displayName:"styled__ResourceItemTitle",componentId:"sc-1s2ax87-2"})(["",""],c.c.t5),f=l.ZP.div.withConfig({displayName:"styled__ResourceItemDescription",componentId:"sc-1s2ax87-3"})([""," word-break:break-word;overflow:hidden;display:-webkit-box;-webkit-line-clamp:",";-webkit-box-orient:vertical;"],function(e){var t=e.$descriptionVariant;return c.c[t]},function(e){return e.theme.isMobile?3:2}),m=l.ZP.div.withConfig({displayName:"styled__ResourceItemRight",componentId:"sc-1s2ax87-4"})(["display:flex;gap:16px;"]),h=l.ZP.div.withConfig({displayName:"styled__ResourceListItemLogo",componentId:"sc-1s2ax87-5"})(["height:48px;width:48px;background-position:center;background-size:cover;border-radius:10px;flex-shrink:0;"]),v=n(12476),b=n(59607),g=n(85893),x=["logo","title","onEdit","menuItems","description","descriptionVariant"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var C=(0,a.forwardRef)(function(e,t){var n=e.logo,r=e.title,l=e.onEdit,c=e.menuItems,y=void 0===c?[]:c,C=e.description,j=e.descriptionVariant,k=(0,o.Z)(e,x),O=(0,s.bI)("isMobile").isMobile,P=(0,a.useMemo)(function(){if(!O&&l)return(0,g.jsx)(b.z,{label:"Edit",onClick:l,variant:"secondary"})},[O,l]),I=(0,a.useMemo)(function(){var e=(0,i.Z)(y);if(O&&l&&e.unshift({label:"Edit",onClick:l}),e.length)return(0,g.jsx)(v.h_,{variant:"icon",icon:"HorizontalDots",options:e})},[y,l,O]);return(0,g.jsxs)(u,w(w({ref:t},k),{},{children:[n&&(0,g.jsx)(h,{style:{backgroundImage:'url("'.concat(n,'")')}}),(0,g.jsxs)(d,{children:[(0,g.jsx)(p,{children:r}),C&&(0,g.jsx)(f,{$descriptionVariant:j,children:C})]}),(0,g.jsxs)(m,{children:[P,I]})]}))}),j=(0,a.memo)(C)},66117:function(e,t,n){n.d(t,{M:function(){return h}});var r=n(59499),i=n(90116),o=n(4730),a=n(67294),s=n(28506),l=n(50378),c=(0,l.iv)(["flex-wrap:wrap;gap:","px 0px;> div{width:","% !important;}"],function(e){return e.$gap},function(e){return 100/e.$columns}),u=l.ZP.div.withConfig({displayName:"styled__SelectionGroupWrapper",componentId:"sc-pg3cm6-0"})(["display:flex;gap:","px;flex-direction:",";",""],function(e){return e.$gap},function(e){return e.$direction},function(e){return e.$columns&&c}),d=n(85893),p=["value","options","multiple","ellipsis","onChange","columns","gap","alignItems","direction"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=(0,a.memo)(function(e){var t=e.value,n=e.options,r=e.multiple,l=void 0!==r&&r,c=e.ellipsis,f=void 0!==c&&c,h=e.onChange,v=e.columns,b=e.gap,g=e.alignItems,x=void 0===g?"flex-start":g,y=e.direction,w=(0,o.Z)(e,p),C=(0,a.useCallback)(function(e,n){if(l){var r=t?(0,i.Z)(t):[];n?r=r.filter(function(t){return t!==e}):r.push(e),h(r);return}h(e)},[l,h,t]),j=(0,a.useCallback)(function(e){var n=e.key,r=e.label,i=l?null==t?void 0:t.includes(n):t===n;return(0,d.jsx)(s.Y,{ellipsis:f,active:i||!1,label:r,variant:l?"square":"circle",alignItems:x,onClick:function(){return C(n,i)}},n)},[C,f,l,x,t]);return(0,d.jsx)(u,m(m({$direction:void 0===y?"column":y,$columns:void 0===v?0:v,$gap:void 0===b?8:b},w),{},{children:n.map(j)}))})},5569:function(e,t,n){n.d(t,{m:function(){return y}});var r=n(59499),i=n(4730),o=n(67294),a=n(54361),s=n(80814),l=n(50378),c=n(59607),u=n(70299),d=l.ZP.div.withConfig({displayName:"styled__TabsWrapper",componentId:"sc-1jogvef-0"})(["position:relative;height:56px;padding:0 ",";@media (max-width:600px){padding:0;}"],function(e){return e.$showScrollArrows?"40px":0}),p=l.ZP.div.withConfig({displayName:"styled__TabsScrollContainer",componentId:"sc-1jogvef-1"})(["display:flex;overflow-x:auto;gap:0 ","px;padding:0 ","px;",""],function(e){return e.theme.isMobile?24:32},function(e){return e.theme.isMobile?13:0},u.KZ),f=(0,l.iv)(["position:absolute;top:50%;transform:translateY(-50%);background:none;border:none;padding:0;cursor:pointer;width:30px;height:30px;@media (max-width:600px){display:none;}"]),m=(0,l.ZP)(c.z).withConfig({displayName:"styled__ScrollArrowLeft",componentId:"sc-1jogvef-2"})([""," left:6px;"],f),h=(0,l.ZP)(c.z).withConfig({displayName:"styled__ScrollArrowRight",componentId:"sc-1jogvef-3"})([""," right:6px;"],f),v=n(85893),b=["tabs","activeTab","onChangeTab","showScrollArrows","testidPrefix"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y=(0,o.memo)(function(e){var t=e.tabs,n=e.activeTab,r=e.onChangeTab,l=e.showScrollArrows,c=e.testidPrefix,u=(0,i.Z)(e,b),f=(0,o.useState)(!1),g=f[0],y=f[1],w=(0,o.useState)(!1),C=w[0],j=w[1],k=(0,o.useRef)({}),O=(0,o.useRef)();(0,a.YB)(function(){if(k.current[n]){var e=k.current[n].getBoundingClientRect().left;O.current.scrollLeft=Math.max(e-150,0)}},[n]);var P=(0,o.useCallback)(function(e){var t=e.id,i=e.label,o=e.dataTestId||"".concat(c?"".concat(c,"-"):"","tab-").concat(t||"");return(0,v.jsx)(s.O,x({id:t,label:i,variant:"horizontal",active:t===n,onClick:r,ref:function(e){k.current[t]=e},dataTestId:o},e),t)},[n,r,c]),I=(0,o.useCallback)(function(){var e=O.current;0===e.scrollLeft?y(!1):g||y(!0),Math.ceil(e.scrollLeft)>=e.scrollWidth-e.clientWidth?j(!1):C||j(!0)},[O,g,C]);(0,o.useEffect)(function(){l&&I()},[I,l]);var D=(0,o.useCallback)(function(){O.current.scrollLeft=0},[O]),Z=(0,o.useCallback)(function(){var e=O.current;e.scrollLeft=e.scrollWidth},[O]),S=(0,o.useMemo)(function(){return(0,v.jsxs)(v.Fragment,{children:[g&&(0,v.jsx)(m,{variant:"icon-borderless-no-hover",onClick:D,icon:"ArrowLeft",iconSize:10}),(0,v.jsx)(p,{ref:O,onScroll:l?I:void 0,children:t.map(P)}),C&&(0,v.jsx)(h,{variant:"icon-borderless-no-hover",onClick:Z,icon:"ArrowRight",iconSize:10})]})},[t,O,I,l,g,C,D,Z,P]);return(0,v.jsx)(d,x(x({$showScrollArrows:l},u),{},{children:S}))})},64597:function(e,t,n){n.d(t,{T:function(){return v}});var r=n(59499),i=n(4730),o=n(73793),a=n(67294),s=n(50378),l=(0,s.iv)(["flex-direction:column-reverse;gap:8px;"]),c=s.ZP.div.withConfig({displayName:"styled__AskModalButtons",componentId:"sc-16gh6jt-0"})(["display:flex;justify-content:flex-end;",""],function(e){return e.theme.isMobile&&l}),u=n(16531),d=n(59607);n(43201);var p=n(85893),f=["header","children","onConfirm","onCancel","disabled","cancelDisabled","loading","cancelLabel","confirmLabel","confirmButtonVariant","cancelButtonVariant","dataTestId"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=(0,a.memo)(function(e){var t=e.header,n=e.children,r=e.onConfirm,s=e.onCancel,l=e.disabled,m=e.cancelDisabled,v=e.loading,b=void 0!==v&&v,g=e.cancelLabel,x=void 0===g?"Cancel":g,y=e.confirmLabel,w=void 0===y?"Confirm":y,C=e.confirmButtonVariant,j=void 0===C?"primary":C,k=e.cancelButtonVariant,O=e.dataTestId,P=(0,i.Z)(e,f),I=(0,o.bI)("isMobile").isMobile,D=(0,a.useMemo)(function(){if(s)return(0,p.jsx)(d.z,{onClick:s,label:x,variant:k||(I?"secondary":"borderless"),disabled:m||b})},[I,b,s,x,m,k]),Z=(0,a.useMemo)(function(){if(r)return(0,p.jsx)(d.z,{loading:b,variant:j,label:w,onClick:r,disabled:l})},[r,j,w,l,b]),S=(0,a.useMemo)(function(){if(Z||D)return(0,p.jsxs)(c,{children:[D,Z]})},[Z,D]),_=(0,a.useCallback)(function(e){e.preventDefault(),null==r||r()},[r]);return(0,p.jsx)(u.u_,h(h({size:"small"},P),{},{dataTestId:void 0===O?"ask-modal":O,children:(0,p.jsxs)("form",{onSubmit:_,children:[t&&(0,p.jsx)(u.xB,{children:t}),n&&(0,p.jsx)(u.fe,{children:n}),S&&(0,p.jsx)(u.mz,{children:S})]})}))})},20338:function(e,t,n){n.d(t,{s:function(){return x}});var r=n(59499),i=n(4730),o=n(67294),a=n(73793),s=n(50378),l=s.ZP.div.withConfig({displayName:"styled__ConfirmModalWrapper",componentId:"sc-1lzb4qo-0"})(["max-width:454px;"]),c=(0,s.iv)(["flex-direction:column-reverse;"]),u=s.ZP.div.withConfig({displayName:"styled__ConfirmModalButtons",componentId:"sc-1lzb4qo-1"})(["display:flex;justify-content:flex-end;",""],function(e){return e.theme.isMobile&&c}),d=(0,s.iv)(["width:auto;"]),p=s.ZP.div.withConfig({displayName:"styled__ConfirmModalTrigger",componentId:"sc-1lzb4qo-2"})(["width:fit-content;",""],function(e){return e.theme.isMobile&&d}),f=n(16531),m=n(59607);n(43201);var h=n(85893),v=["disabled","header","content","children","onConfirm","hideCancel","onOpen","confirmLabel","confirmButtonVariant","onClose","waitForComplete","completed","loading","triggerStyles"];function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=(0,o.memo)(function(e){var t=e.disabled,n=e.header,r=e.content,s=e.children,c=e.onConfirm,d=e.hideCancel,b=e.onOpen,x=e.confirmLabel,y=e.confirmButtonVariant,w=e.onClose,C=e.waitForComplete,j=e.completed,k=e.loading,O=e.triggerStyles,P=(0,i.Z)(e,v),I=(0,o.useState)(!1),D=I[0],Z=I[1],S=(0,a.bI)("isMobile").isMobile,_=(0,o.useCallback)(function(){null==b||b(),Z(!0)},[b]),M=(0,o.useCallback)(function(){null==w||w(),Z(!1)},[w]);(0,o.useEffect)(function(){j&&M()},[M,j]);var N=(0,o.useCallback)(function(e){c(e),C||M()},[c,M,C]),E=(0,o.useCallback)(function(e){e.preventDefault(),N()},[N]),A=(0,o.useMemo)(function(){if(!d)return(0,h.jsx)(m.z,{disabled:k,label:"Cancel",style:{marginTop:S?8:void 0},variant:S?"secondary":"borderless",onClick:M})},[M,d,k,S]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p,{onClick:t?void 0:_,style:O,children:s}),(0,h.jsx)(f.u_,g(g({open:D,size:"small",onClose:M,contentStyle:{maxWidth:"calc(100% - 16px)"},style:{zIndex:1500}},P),{},{children:(0,h.jsx)(l,{children:(0,h.jsxs)("form",{onSubmit:E,children:[(0,h.jsx)(f.xB,{children:n}),(0,h.jsx)(f.fe,{children:r}),(0,h.jsx)(f.mz,{children:(0,h.jsxs)(u,{children:[A,(0,h.jsx)(m.z,{loading:k,variant:y,onClick:N,label:void 0===x?"Confirm":x})]})})]})})}))]})})},96864:function(e,t,n){n.d(t,{D:function(){return b}});var r=n(59499),i=n(4730),o=n(67294),a=n(15948),s=n(50378),l=n(20668),c=n(14251),u=s.ZP.div.withConfig({displayName:"styled__ResourceListWrapper",componentId:"sc-4ck8r0-0"})(["display:flex;flex-direction:column;width:100%;> div{border-bottom:",";}"],function(e){return e.$noBorder?"none":"1px solid ".concat(c.O9.n3)}),d=s.ZP.div.withConfig({displayName:"styled__NoResourceWrapper",componentId:"sc-4ck8r0-1"})(["padding-top:16px;border-bottom:none !important;",""],l.c.t7),p=n(22063),f=n(85893),m=["resources","noResourceView","noBorder","draggable","onDragEnd","descriptionVariant","customNodes"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=(0,o.memo)(function(e){var t=e.resources,n=void 0===t?[]:t,r=e.noResourceView,s=e.noBorder,l=e.draggable,c=e.onDragEnd,h=e.descriptionVariant,b=e.customNodes,g=(0,i.Z)(e,m),x=(0,o.useCallback)(function(e,t){return(0,f.jsx)(a._l,{draggableId:e.key,index:t,isDragDisabled:!l,children:function(t){var n,r=v(v(v({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,style:null===(n=t.draggableProps)||void 0===n?void 0:n.style});return b?(0,o.cloneElement)(e,v(v({},e.props),r)):(0,f.jsx)(p.L,v(v(v({},r),e),{},{descriptionVariant:h}))}},e.key)},[l,h,b]),y=(0,o.useMemo)(function(){return!n.length&&r?(0,f.jsx)(d,{children:r}):n.map(x)},[n,r,x]);return(0,f.jsx)(a.Z5,{onDragEnd:void 0===c?function(){}:c,children:(0,f.jsx)(a.bK,{droppableId:"droppable",children:function(e){return(0,f.jsxs)(u,v(v(v({$noBorder:s},g),{},{ref:e.innerRef},e.droppableProps),{},{children:[y,e.placeholder]}))}})})})}}]);